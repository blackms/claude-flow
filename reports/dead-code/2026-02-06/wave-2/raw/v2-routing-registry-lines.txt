v2/src/services/agentic-flow-hooks/hook-manager.ts:53:  register(registration: HookRegistration): void {
v2/src/services/agentic-flow-hooks/hook-manager.ts:68:      throw new Error(`Hook with ID '${id}' already registered for type '${type}'`);
v2/src/services/agentic-flow-hooks/hook-manager.ts:80:    this.emit('hook:registered', { type, registration });
v2/src/services/agentic-flow-hooks/hook-manager.ts:83:    this.updateMetric('hooks.registered', 1);
v2/src/services/agentic-flow-hooks/hook-manager.ts:87:   * Unregister a hook
v2/src/services/agentic-flow-hooks/hook-manager.ts:89:  unregister(id: string): void {
v2/src/services/agentic-flow-hooks/hook-manager.ts:98:        logger.info(`Unregistered hook '${id}' from type '${type}'`);
v2/src/services/agentic-flow-hooks/hook-manager.ts:99:        this.emit('hook:unregistered', { type, id });
v2/src/services/agentic-flow-hooks/hook-manager.ts:114:    this.updateMetric('hooks.unregistered', 1);
v2/src/services/agentic-flow-hooks/hook-manager.ts:691:    this.metrics.set('hooks.registered', 0);
v2/src/services/agentic-flow-hooks/hook-manager.ts:692:    this.metrics.set('hooks.unregistered', 0);
v2/src/cli/simple-commands/agent.js:325:    if (flags.tools) {
v2/src/cli/simple-commands/agent.js:326:      cmd += ` --tools "${flags.tools}"`;
v2/src/cli/simple-commands/agent.js:790:// MCP Server Management for agentic-flow
v2/src/cli/simple-commands/agent.js:820:  printSuccess('üöÄ Starting agentic-flow MCP server...');
v2/src/cli/simple-commands/agent.js:830:    printSuccess('‚úÖ MCP server started!');
v2/src/cli/simple-commands/agent.js:832:    printError('‚ùå Failed to start MCP server');
v2/src/cli/simple-commands/agent.js:839:  printWarning('üõë Stopping agentic-flow MCP server...');
v2/src/cli/simple-commands/agent.js:844:    printSuccess('‚úÖ MCP server stopped!');
v2/src/cli/simple-commands/agent.js:846:    printError('‚ùå Failed to stop MCP server');
v2/src/cli/simple-commands/agent.js:853:  printSuccess('üìä Getting agentic-flow MCP server status...');
v2/src/cli/simple-commands/agent.js:862:    printError('‚ùå Failed to get MCP status');
v2/src/cli/simple-commands/agent.js:869:  printSuccess('üìã Listing agentic-flow MCP tools...');
v2/src/cli/simple-commands/agent.js:880:    printError('‚ùå Failed to list MCP tools');
v2/src/cli/simple-commands/agent.js:887:  printSuccess('üìÑ Getting agentic-flow MCP logs...');
v2/src/cli/simple-commands/agent.js:901:    printError('‚ùå Failed to get MCP logs');
v2/src/cli/simple-commands/agent.js:908:  printWarning('üîÑ Restarting agentic-flow MCP server...');
v2/src/cli/simple-commands/agent.js:914:    printSuccess('‚úÖ MCP server restarted!');
v2/src/cli/simple-commands/agent.js:916:    printError('‚ùå Failed to restart MCP server');
v2/src/cli/simple-commands/agent.js:923:  console.log('Agentic-flow MCP server commands:');
v2/src/cli/simple-commands/agent.js:924:  console.log('  start [--port <port>]           Start MCP server');
v2/src/cli/simple-commands/agent.js:925:  console.log('  stop                            Stop MCP server');
v2/src/cli/simple-commands/agent.js:926:  console.log('  restart                         Restart MCP server');
v2/src/cli/simple-commands/agent.js:928:  console.log('  list [--server <name>]          List MCP tools');
v2/src/cli/simple-commands/agent.js:936:  console.log('  --category <type>               Filter by tool category');
v2/src/cli/simple-commands/agent.js:1208:  console.log('\nüåê MCP Server Management (NEW in v2.6.0):');
v2/src/cli/simple-commands/agent.js:1209:  console.log('  mcp start [--port <port>]        Start MCP server');
v2/src/cli/simple-commands/agent.js:1210:  console.log('  mcp stop                         Stop MCP server');
v2/src/cli/simple-commands/agent.js:1211:  console.log('  mcp restart                      Restart MCP server');
v2/src/cli/simple-commands/agent.js:1213:  console.log('  mcp list [--server <name>]       List MCP tools');
v2/src/cli/simple-commands/agent.js:1288:  console.log('\n  # MCP server management');
v2/src/services/agentic-flow-hooks/index.ts:9:import { registerLLMHooks } from './llm-hooks.js';
v2/src/services/agentic-flow-hooks/index.ts:10:import { registerMemoryHooks } from './memory-hooks.js';
v2/src/services/agentic-flow-hooks/index.ts:11:import { registerNeuralHooks } from './neural-hooks.js';
v2/src/services/agentic-flow-hooks/index.ts:12:import { registerPerformanceHooks } from './performance-hooks.js';
v2/src/services/agentic-flow-hooks/index.ts:13:import { registerWorkflowHooks } from './workflow-hooks.js';
v2/src/services/agentic-flow-hooks/index.ts:38:    registerLLMHooks();
v2/src/services/agentic-flow-hooks/index.ts:39:    logger.debug('LLM hooks registered');
v2/src/services/agentic-flow-hooks/index.ts:41:    registerMemoryHooks();
v2/src/services/agentic-flow-hooks/index.ts:42:    logger.debug('Memory hooks registered');
v2/src/services/agentic-flow-hooks/index.ts:44:    registerNeuralHooks();
v2/src/services/agentic-flow-hooks/index.ts:45:    logger.debug('Neural hooks registered');
v2/src/services/agentic-flow-hooks/index.ts:47:    registerPerformanceHooks();
v2/src/services/agentic-flow-hooks/index.ts:48:    logger.debug('Performance hooks registered');
v2/src/services/agentic-flow-hooks/index.ts:50:    registerWorkflowHooks();
v2/src/services/agentic-flow-hooks/index.ts:51:    logger.debug('Workflow hooks registered');
v2/src/cli/simple-commands/stream-processor.js:85:            if (content.type === 'tool_use' && content.name === 'Bash' && content.input?.command) {
v2/src/cli/simple-commands/stream-processor.js:92:            } else if (content.type === 'tool_use' && ['WebSearch', 'Read', 'Write'].includes(content.name)) {
v2/src/cli/simple-commands/stream-processor.js:93:              const toolName = content.name.replace(/([A-Z])/g, ' $1').trim();
v2/src/cli/simple-commands/stream-processor.js:98:                  console.log(`  üîß ${toolName}: ${firstValue}`);
v2/src/cli/simple-commands/stream-processor.js:100:                  console.log(`  üîß ${toolName}`);
v2/src/cli/simple-commands/stream-processor.js:139:          } else if (content.type === 'tool_use') {
v2/src/cli/simple-commands/stream-processor.js:140:            // Show tool use with actual command/input when available
v2/src/cli/simple-commands/stream-processor.js:141:            const toolName = content.name.replace(/([A-Z])/g, ' $1').trim();
v2/src/cli/simple-commands/stream-processor.js:143:            // For Bash tool, show the actual command
v2/src/cli/simple-commands/stream-processor.js:152:            // For other tools, show key parameters
v2/src/cli/simple-commands/stream-processor.js:158:                console.log(`üîß ${toolName}: ${firstValue}`);
v2/src/cli/simple-commands/stream-processor.js:160:                console.log(`üîß ${toolName}: ${firstValue.substring(0, 57)}...`);
v2/src/cli/simple-commands/stream-processor.js:162:                console.log(`üîß ${toolName}`);
v2/src/cli/simple-commands/stream-processor.js:165:              console.log(`üîß ${toolName}`);
v2/src/cli/simple-commands/stream-processor.js:173:        if (event.message?.content?.[0]?.type === 'tool_result') {
v2/src/cli/simple-commands/stream-processor.js:196:        if (this.options.verbose && ['tool_call', 'error', 'warning'].includes(event.type)) {
v2/src/cli/simple-commands/stream-processor.js:220:          } else if (content.type === 'tool_use') {
v2/src/cli/simple-commands/stream-processor.js:228:        if (event.message?.content?.[0]?.type === 'tool_result') {
v2/src/cli/simple-commands/agent-booster.js:68:    // Call Agent Booster MCP tool
v2/src/cli/simple-commands/agent-booster.js:158:    // Call Agent Booster batch MCP tool
v2/src/cli/simple-commands/agent-booster.js:235:    // Call Agent Booster parse MCP tool
v2/src/cli/simple-commands/agent-booster.js:369: * Call Agent Booster MCP tool
v2/src/cli/simple-commands/agent-booster.js:372:  // Import MCP client dynamically
v2/src/cli/simple-commands/agent-booster.js:374:    // Map operation to MCP tool name
v2/src/cli/simple-commands/agent-booster.js:375:    const toolMap = {
v2/src/cli/simple-commands/agent-booster.js:381:    const toolName = toolMap[operation];
v2/src/cli/simple-commands/agent-booster.js:382:    if (!toolName) {
v2/src/cli/simple-commands/agent-booster.js:386:    // TODO: Call actual MCP tool here
v2/src/cli/simple-commands/agent-booster.js:387:    // For now, simulate the call (will be wired up with MCP client)
v2/src/hive-mind/index.ts:16:export { MCPToolWrapper } from './integration/MCPToolWrapper.js';
v2/src/migration/index.ts:15:const program = new Command();
v2/src/services/agentic-flow-hooks/performance-hooks.ts:822:export function registerPerformanceHooks(): void {
v2/src/services/agentic-flow-hooks/performance-hooks.ts:823:  agenticHookManager.register(performanceMetricHook);
v2/src/services/agentic-flow-hooks/performance-hooks.ts:824:  agenticHookManager.register(performanceBottleneckHook);
v2/src/services/agentic-flow-hooks/performance-hooks.ts:825:  agenticHookManager.register(performanceOptimizationHook);
v2/src/services/agentic-flow-hooks/performance-hooks.ts:826:  agenticHookManager.register(performanceThresholdHook);
v2/src/cli/simple-commands/automation-executor.js:362:      if (event.type === 'tool_use' && event.name) {
v2/src/cli/simple-commands/automation-executor.js:363:        output.tool = event.name;
v2/src/cli/simple-commands/automation-executor.js:372:        case 'tool_use':
v2/src/cli/simple-commands/automation-executor.js:373:          console.log(`    [${agent.name}] üîß Using tool: ${event.name}`);
v2/src/cli/simple-commands/automation-executor.js:398:      case 'tool_use':
v2/src/cli/simple-commands/automation-executor.js:399:        return `Using ${event.name} tool`;
v2/src/cli/simple-commands/automation-executor.js:418:      'tool_use': 'üîß',
v2/src/cli/simple-commands/automation-executor.js:581:   For each sub-agent, use the Task tool to spawn them with detailed prompts:
v2/src/cli/simple-commands/automation-executor.js:586:   Execute multiple agents simultaneously using the Task tool in a single response:
v2/src/cli/simple-commands/automation-executor.js:624:üöÄ BEGIN: Start by deploying all sub-agents with detailed prompts using the Task tool for concurrent execution. Each agent should receive comprehensive instructions for their specific MLE-STAR role.`;
v2/src/permissions/permission-manager.ts:25:  toolName: string;
v2/src/permissions/permission-manager.ts:43:  toolName: string;
v2/src/permissions/permission-manager.ts:44:  toolInput?: Record<string, unknown>;
v2/src/permissions/permission-manager.ts:339:        toolName: '*',
v2/src/permissions/permission-manager.ts:355:    if (rule.toolName === query.toolName) {
v2/src/permissions/permission-manager.ts:360:    if (rule.toolName === '*') {
v2/src/permissions/permission-manager.ts:365:    if (rule.toolName.includes('*')) {
v2/src/permissions/permission-manager.ts:366:      const pattern = rule.toolName.replace(/\*/g, '.*');
v2/src/permissions/permission-manager.ts:367:      if (new RegExp(`^${pattern}$`).test(query.toolName)) {
v2/src/permissions/permission-manager.ts:376:    if (!rule.ruleContent || !query.toolInput) {
v2/src/permissions/permission-manager.ts:381:    // In production, this would parse ruleContent and match against toolInput
v2/src/permissions/permission-manager.ts:454:    const toRemove = new Set(rules.map(r => `${r.toolName}:${r.ruleContent || ''}`));
v2/src/permissions/permission-manager.ts:457:      const key = `${rule.toolName}:${rule.ruleContent || ''}`;
v2/src/permissions/permission-manager.ts:464:      tool: query.toolName,
v2/src/permissions/permission-manager.ts:465:      input: query.toolInput,
v2/src/services/agentic-flow-hooks/neural-hooks.ts:752:export function registerNeuralHooks(): void {
v2/src/services/agentic-flow-hooks/neural-hooks.ts:753:  agenticHookManager.register(preNeuralTrainHook);
v2/src/services/agentic-flow-hooks/neural-hooks.ts:754:  agenticHookManager.register(postNeuralTrainHook);
v2/src/services/agentic-flow-hooks/neural-hooks.ts:755:  agenticHookManager.register(neuralPatternDetectedHook);
v2/src/services/agentic-flow-hooks/neural-hooks.ts:756:  agenticHookManager.register(neuralPredictionHook);
v2/src/services/agentic-flow-hooks/neural-hooks.ts:757:  agenticHookManager.register(neuralAdaptationHook);
v2/src/services/agentic-flow-hooks/types.ts:80:  tools?: Array<{
v2/src/services/agentic-flow-hooks/types.ts:461:  register(registration: HookRegistration): void;
v2/src/services/agentic-flow-hooks/types.ts:462:  unregister(id: string): void;
v2/src/hive-mind/consensus.js:43:  registerAgent(agentId, initialWeight = 1.0, capabilities = []) {
v2/src/hive-mind/consensus.js:56:    this.emit('agent:registered', { agentId, weight: initialWeight });
v2/src/hive-mind/consensus.js:153:      throw new Error(`Agent ${agentId} not registered`);
v2/src/cli/index-remote.ts:32:  mcp                  Manage MCP server (status, tools, start, stop)
v2/src/services/agentic-flow-hooks/llm-hooks.ts:552:export function registerLLMHooks(): void {
v2/src/services/agentic-flow-hooks/llm-hooks.ts:553:  agenticHookManager.register(preLLMCallHook);
v2/src/services/agentic-flow-hooks/llm-hooks.ts:554:  agenticHookManager.register(postLLMCallHook);
v2/src/services/agentic-flow-hooks/llm-hooks.ts:555:  agenticHookManager.register(llmErrorHook);
v2/src/services/agentic-flow-hooks/llm-hooks.ts:556:  agenticHookManager.register(llmRetryHook);
v2/src/cli/simple-commands/agent.js:325:    if (flags.tools) {
v2/src/cli/simple-commands/agent.js:326:      cmd += ` --tools "${flags.tools}"`;
v2/src/cli/simple-commands/agent.js:790:// MCP Server Management for agentic-flow
v2/src/cli/simple-commands/agent.js:820:  printSuccess('üöÄ Starting agentic-flow MCP server...');
v2/src/cli/simple-commands/agent.js:830:    printSuccess('‚úÖ MCP server started!');
v2/src/cli/simple-commands/agent.js:832:    printError('‚ùå Failed to start MCP server');
v2/src/cli/simple-commands/agent.js:839:  printWarning('üõë Stopping agentic-flow MCP server...');
v2/src/cli/simple-commands/agent.js:844:    printSuccess('‚úÖ MCP server stopped!');
v2/src/cli/simple-commands/agent.js:846:    printError('‚ùå Failed to stop MCP server');
v2/src/cli/simple-commands/agent.js:853:  printSuccess('üìä Getting agentic-flow MCP server status...');
v2/src/cli/simple-commands/agent.js:862:    printError('‚ùå Failed to get MCP status');
v2/src/cli/simple-commands/agent.js:869:  printSuccess('üìã Listing agentic-flow MCP tools...');
v2/src/cli/simple-commands/agent.js:880:    printError('‚ùå Failed to list MCP tools');
v2/src/cli/simple-commands/agent.js:887:  printSuccess('üìÑ Getting agentic-flow MCP logs...');
v2/src/cli/simple-commands/agent.js:901:    printError('‚ùå Failed to get MCP logs');
v2/src/cli/simple-commands/agent.js:908:  printWarning('üîÑ Restarting agentic-flow MCP server...');
v2/src/cli/simple-commands/agent.js:914:    printSuccess('‚úÖ MCP server restarted!');
v2/src/cli/simple-commands/agent.js:916:    printError('‚ùå Failed to restart MCP server');
v2/src/cli/simple-commands/agent.js:923:  console.log('Agentic-flow MCP server commands:');
v2/src/cli/simple-commands/agent.js:924:  console.log('  start [--port <port>]           Start MCP server');
v2/src/cli/simple-commands/agent.js:925:  console.log('  stop                            Stop MCP server');
v2/src/cli/simple-commands/agent.js:926:  console.log('  restart                         Restart MCP server');
v2/src/cli/simple-commands/agent.js:928:  console.log('  list [--server <name>]          List MCP tools');
v2/src/cli/simple-commands/agent.js:936:  console.log('  --category <type>               Filter by tool category');
v2/src/cli/simple-commands/agent.js:1208:  console.log('\nüåê MCP Server Management (NEW in v2.6.0):');
v2/src/cli/simple-commands/agent.js:1209:  console.log('  mcp start [--port <port>]        Start MCP server');
v2/src/cli/simple-commands/agent.js:1210:  console.log('  mcp stop                         Stop MCP server');
v2/src/cli/simple-commands/agent.js:1211:  console.log('  mcp restart                      Restart MCP server');
v2/src/cli/simple-commands/agent.js:1213:  console.log('  mcp list [--server <name>]       List MCP tools');
v2/src/cli/simple-commands/agent.js:1288:  console.log('\n  # MCP server management');
v2/src/neural/integration.ts:116:    this.registerDomainAnalysisHooks();
v2/src/neural/integration.ts:355:  private registerDomainAnalysisHooks(): void {
v2/src/neural/integration.ts:357:    agenticHookManager.register({
v2/src/neural/integration.ts:426:    agenticHookManager.register({
v2/src/templates/claude-optimized/manifest.json:3:  "description": "Optimized Claude Code template with SPARC methodology support and batch tools",
v2/src/templates/claude-optimized/manifest.json:15:      "description": "Comprehensive test suite for batch tools and SPARC commands",
v2/src/templates/claude-optimized/manifest.json:19:      "description": "Unit tests for core batch tool functionality",
v2/src/templates/claude-optimized/manifest.json:48:      "description": "Comprehensive guide for using batch tools in Claude Code",
v2/src/templates/claude-optimized/manifest.json:54:      "description": "Best practices and examples for efficient batch tool usage",
v2/src/templates/claude-optimized/manifest.json:60:      "description": "Guide for migrating existing projects to use optimized batch tools",
v2/src/templates/claude-optimized/manifest.json:132:      "description": "SPARC MCP integration mode",
v2/src/services/agentic-flow-hooks/workflow-hooks.ts:1020:export function registerWorkflowHooks(): void {
v2/src/services/agentic-flow-hooks/workflow-hooks.ts:1021:  agenticHookManager.register(workflowStartHook);
v2/src/services/agentic-flow-hooks/workflow-hooks.ts:1022:  agenticHookManager.register(workflowStepHook);
v2/src/services/agentic-flow-hooks/workflow-hooks.ts:1023:  agenticHookManager.register(workflowDecisionHook);
v2/src/services/agentic-flow-hooks/workflow-hooks.ts:1024:  agenticHookManager.register(workflowCompleteHook);
v2/src/services/agentic-flow-hooks/workflow-hooks.ts:1025:  agenticHookManager.register(workflowErrorHook);
v2/src/cli/simple-commands/stream-processor.js:85:            if (content.type === 'tool_use' && content.name === 'Bash' && content.input?.command) {
v2/src/cli/simple-commands/stream-processor.js:92:            } else if (content.type === 'tool_use' && ['WebSearch', 'Read', 'Write'].includes(content.name)) {
v2/src/cli/simple-commands/stream-processor.js:93:              const toolName = content.name.replace(/([A-Z])/g, ' $1').trim();
v2/src/cli/simple-commands/stream-processor.js:98:                  console.log(`  üîß ${toolName}: ${firstValue}`);
v2/src/cli/simple-commands/stream-processor.js:100:                  console.log(`  üîß ${toolName}`);
v2/src/cli/simple-commands/stream-processor.js:139:          } else if (content.type === 'tool_use') {
v2/src/cli/simple-commands/stream-processor.js:140:            // Show tool use with actual command/input when available
v2/src/cli/simple-commands/stream-processor.js:141:            const toolName = content.name.replace(/([A-Z])/g, ' $1').trim();
v2/src/cli/simple-commands/stream-processor.js:143:            // For Bash tool, show the actual command
v2/src/cli/simple-commands/stream-processor.js:152:            // For other tools, show key parameters
v2/src/cli/simple-commands/stream-processor.js:158:                console.log(`üîß ${toolName}: ${firstValue}`);
v2/src/cli/simple-commands/stream-processor.js:160:                console.log(`üîß ${toolName}: ${firstValue.substring(0, 57)}...`);
v2/src/cli/simple-commands/stream-processor.js:162:                console.log(`üîß ${toolName}`);
v2/src/cli/simple-commands/stream-processor.js:165:              console.log(`üîß ${toolName}`);
v2/src/cli/simple-commands/stream-processor.js:173:        if (event.message?.content?.[0]?.type === 'tool_result') {
v2/src/cli/simple-commands/stream-processor.js:196:        if (this.options.verbose && ['tool_call', 'error', 'warning'].includes(event.type)) {
v2/src/cli/simple-commands/stream-processor.js:220:          } else if (content.type === 'tool_use') {
v2/src/cli/simple-commands/stream-processor.js:228:        if (event.message?.content?.[0]?.type === 'tool_result') {
v2/src/cli/formatter.ts:257:    chalk.white('  ‚Ä¢ MCP Server'),
v2/src/cli/simple-commands/agent-booster.js:68:    // Call Agent Booster MCP tool
v2/src/cli/simple-commands/agent-booster.js:158:    // Call Agent Booster batch MCP tool
v2/src/cli/simple-commands/agent-booster.js:235:    // Call Agent Booster parse MCP tool
v2/src/cli/simple-commands/agent-booster.js:369: * Call Agent Booster MCP tool
v2/src/cli/simple-commands/agent-booster.js:372:  // Import MCP client dynamically
v2/src/cli/simple-commands/agent-booster.js:374:    // Map operation to MCP tool name
v2/src/cli/simple-commands/agent-booster.js:375:    const toolMap = {
v2/src/cli/simple-commands/agent-booster.js:381:    const toolName = toolMap[operation];
v2/src/cli/simple-commands/agent-booster.js:382:    if (!toolName) {
v2/src/cli/simple-commands/agent-booster.js:386:    // TODO: Call actual MCP tool here
v2/src/cli/simple-commands/agent-booster.js:387:    // For now, simulate the call (will be wired up with MCP client)
v2/src/automation/agents/foundation_agent_README.md:28:- **FeatureEngineer**: Comprehensive feature engineering toolkit
v2/src/templates/claude-optimized/package.json:4:  "description": "Optimized Claude Code template with SPARC methodology and batch tools",
v2/src/templates/claude-optimized/package.json:16:    "batch-tools",
v2/src/migration/README.md:7:The migration system provides tools to:
v2/src/templates/claude-optimized/README.md:3:This directory contains the optimized Claude Code template with SPARC methodology support and batch tools integration.
v2/src/templates/claude-optimized/README.md:50:- `BATCHTOOLS_GUIDE.md` - Comprehensive batch tools guide
v2/src/services/agentic-flow-hooks/memory-hooks.ts:703:export function registerMemoryHooks(): void {
v2/src/services/agentic-flow-hooks/memory-hooks.ts:704:  agenticHookManager.register(preMemoryStoreHook);
v2/src/services/agentic-flow-hooks/memory-hooks.ts:705:  agenticHookManager.register(postMemoryStoreHook);
v2/src/services/agentic-flow-hooks/memory-hooks.ts:706:  agenticHookManager.register(preMemoryRetrieveHook);
v2/src/services/agentic-flow-hooks/memory-hooks.ts:707:  agenticHookManager.register(postMemoryRetrieveHook);
v2/src/services/agentic-flow-hooks/memory-hooks.ts:708:  agenticHookManager.register(memorySyncHook);
v2/src/services/agentic-flow-hooks/memory-hooks.ts:709:  agenticHookManager.register(memoryPersistHook);
v2/src/cli/simple-commands/monitor.js:256:    // Count MCP connections
v2/src/cli/simple-commands/monitor.js:257:    const mcpConnections = await countMCPConnections();
v2/src/cli/simple-commands/monitor.js:288:// Count MCP connections
v2/src/cli/simple-commands/monitor.js:289:async function countMCPConnections() {
v2/src/cli/simple-commands/monitor.js:358:  console.log(`   MCP Connections: ${metrics.resources.mcp_connections}`);
v2/src/cli/simple-commands/enhanced-ui-views.js:3: * Provides comprehensive interfaces for all 71+ missing MCP tools
v2/src/cli/simple-commands/enhanced-ui-views.js:4: * Organized by tool categories with real-time updates
v2/src/cli/simple-commands/enhanced-ui-views.js:7:import ToolExecutionFramework from './tool-execution-framework.js';
v2/src/cli/simple-commands/enhanced-ui-views.js:9:// Enhanced view modes with all missing tool categories
v2/src/cli/simple-commands/enhanced-ui-views.js:17:  // New enhanced views for missing tools
v2/src/cli/simple-commands/enhanced-ui-views.js:18:  NEURAL: 'neural', // Neural Network tools (15 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:19:  ANALYSIS: 'analysis', // Analysis & Monitoring tools (13 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:20:  WORKFLOW: 'workflow', // Workflow & Automation tools (11 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:21:  GITHUB: 'github', // GitHub Integration tools (8 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:22:  DAA: 'daa', // Dynamic Agent Architecture tools (8 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:23:  SYSTEM: 'system', // System & Utilities tools (6+ tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:24:  TOOLS: 'tools', // Tool execution center
v2/src/cli/simple-commands/enhanced-ui-views.js:30:    this.toolFramework = new ToolExecutionFramework(ui);
v2/src/cli/simple-commands/enhanced-ui-views.js:46:    // Neural tools data
v2/src/cli/simple-commands/enhanced-ui-views.js:121:   * Render Neural Network Tools View (15 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:140:    // Neural tools grid
v2/src/cli/simple-commands/enhanced-ui-views.js:143:      { key: '1', tool: 'neural_train', desc: 'Train neural patterns' },
v2/src/cli/simple-commands/enhanced-ui-views.js:144:      { key: '2', tool: 'neural_predict', desc: 'Make predictions' },
v2/src/cli/simple-commands/enhanced-ui-views.js:145:      { key: '3', tool: 'neural_status', desc: 'Check model status' },
v2/src/cli/simple-commands/enhanced-ui-views.js:146:      { key: '4', tool: 'model_save', desc: 'Save trained model' },
v2/src/cli/simple-commands/enhanced-ui-views.js:147:      { key: '5', tool: 'model_load', desc: 'Load existing model' },
v2/src/cli/simple-commands/enhanced-ui-views.js:148:      { key: '6', tool: 'pattern_recognize', desc: 'Recognize patterns' },
v2/src/cli/simple-commands/enhanced-ui-views.js:149:      { key: '7', tool: 'cognitive_analyze', desc: 'Analyze behavior' },
v2/src/cli/simple-commands/enhanced-ui-views.js:150:      { key: '8', tool: 'learning_adapt', desc: 'Adaptive learning' },
v2/src/cli/simple-commands/enhanced-ui-views.js:151:      { key: '9', tool: 'neural_compress', desc: 'Compress models' },
v2/src/cli/simple-commands/enhanced-ui-views.js:152:      { key: 'a', tool: 'ensemble_create', desc: 'Create ensembles' },
v2/src/cli/simple-commands/enhanced-ui-views.js:153:      { key: 'b', tool: 'transfer_learn', desc: 'Transfer learning' },
v2/src/cli/simple-commands/enhanced-ui-views.js:154:      { key: 'c', tool: 'neural_explain', desc: 'Explain predictions' },
v2/src/cli/simple-commands/enhanced-ui-views.js:155:      { key: 'd', tool: 'wasm_optimize', desc: 'WASM optimization' },
v2/src/cli/simple-commands/enhanced-ui-views.js:156:      { key: 'e', tool: 'inference_run', desc: 'Run inference' },
v2/src/cli/simple-commands/enhanced-ui-views.js:182:   * Render Analysis & Monitoring View (13 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:199:    // Analysis tools grid
v2/src/cli/simple-commands/enhanced-ui-views.js:202:      { key: '1', tool: 'performance_report', desc: 'Generate performance reports' },
v2/src/cli/simple-commands/enhanced-ui-views.js:203:      { key: '2', tool: 'bottleneck_analyze', desc: 'Identify bottlenecks' },
v2/src/cli/simple-commands/enhanced-ui-views.js:204:      { key: '3', tool: 'token_usage', desc: 'Analyze token consumption' },
v2/src/cli/simple-commands/enhanced-ui-views.js:205:      { key: '4', tool: 'benchmark_run', desc: 'Run benchmarks' },
v2/src/cli/simple-commands/enhanced-ui-views.js:206:      { key: '5', tool: 'metrics_collect', desc: 'Collect system metrics' },
v2/src/cli/simple-commands/enhanced-ui-views.js:207:      { key: '6', tool: 'trend_analysis', desc: 'Analyze trends' },
v2/src/cli/simple-commands/enhanced-ui-views.js:208:      { key: '7', tool: 'cost_analysis', desc: 'Resource cost analysis' },
v2/src/cli/simple-commands/enhanced-ui-views.js:209:      { key: '8', tool: 'quality_assess', desc: 'Quality assessment' },
v2/src/cli/simple-commands/enhanced-ui-views.js:210:      { key: '9', tool: 'error_analysis', desc: 'Error pattern analysis' },
v2/src/cli/simple-commands/enhanced-ui-views.js:211:      { key: 'a', tool: 'usage_stats', desc: 'Usage statistics' },
v2/src/cli/simple-commands/enhanced-ui-views.js:212:      { key: 'b', tool: 'health_check', desc: 'System health check' },
v2/src/cli/simple-commands/enhanced-ui-views.js:213:      { key: 'c', tool: 'task_status', desc: 'Check task status' },
v2/src/cli/simple-commands/enhanced-ui-views.js:214:      { key: 'd', tool: 'task_results', desc: 'Get task results' },
v2/src/cli/simple-commands/enhanced-ui-views.js:235:   * Render Workflow & Automation View (11 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:239:    const workflows = this.toolFramework.getPredefinedWorkflows();
v2/src/cli/simple-commands/enhanced-ui-views.js:251:    // Workflow tools
v2/src/cli/simple-commands/enhanced-ui-views.js:254:      { key: '1', tool: 'workflow_create', desc: 'Create custom workflow' },
v2/src/cli/simple-commands/enhanced-ui-views.js:255:      { key: '2', tool: 'workflow_execute', desc: 'Execute workflow' },
v2/src/cli/simple-commands/enhanced-ui-views.js:256:      { key: '3', tool: 'sparc_mode', desc: 'SPARC development modes' },
v2/src/cli/simple-commands/enhanced-ui-views.js:257:      { key: '4', tool: 'automation_setup', desc: 'Setup automation' },
v2/src/cli/simple-commands/enhanced-ui-views.js:258:      { key: '5', tool: 'pipeline_create', desc: 'Create CI/CD pipeline' },
v2/src/cli/simple-commands/enhanced-ui-views.js:259:      { key: '6', tool: 'scheduler_manage', desc: 'Manage scheduling' },
v2/src/cli/simple-commands/enhanced-ui-views.js:260:      { key: '7', tool: 'trigger_setup', desc: 'Setup triggers' },
v2/src/cli/simple-commands/enhanced-ui-views.js:261:      { key: '8', tool: 'batch_process', desc: 'Batch processing' },
v2/src/cli/simple-commands/enhanced-ui-views.js:262:      { key: '9', tool: 'parallel_execute', desc: 'Parallel execution' },
v2/src/cli/simple-commands/enhanced-ui-views.js:263:      { key: 'a', tool: 'workflow_template', desc: 'Workflow templates' },
v2/src/cli/simple-commands/enhanced-ui-views.js:264:      { key: 'b', tool: 'workflow_export', desc: 'Export workflows' },
v2/src/cli/simple-commands/enhanced-ui-views.js:281:   * Render GitHub Integration View (8 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:297:    // GitHub tools
v2/src/cli/simple-commands/enhanced-ui-views.js:300:      { key: '1', tool: 'github_repo_analyze', desc: 'Analyze repository' },
v2/src/cli/simple-commands/enhanced-ui-views.js:301:      { key: '2', tool: 'github_pr_manage', desc: 'Manage pull requests' },
v2/src/cli/simple-commands/enhanced-ui-views.js:302:      { key: '3', tool: 'github_issue_track', desc: 'Track issues' },
v2/src/cli/simple-commands/enhanced-ui-views.js:303:      { key: '4', tool: 'github_release_coord', desc: 'Coordinate releases' },
v2/src/cli/simple-commands/enhanced-ui-views.js:304:      { key: '5', tool: 'github_workflow_auto', desc: 'Workflow automation' },
v2/src/cli/simple-commands/enhanced-ui-views.js:305:      { key: '6', tool: 'github_code_review', desc: 'Automated code review' },
v2/src/cli/simple-commands/enhanced-ui-views.js:306:      { key: '7', tool: 'github_sync_coord', desc: 'Multi-repo sync' },
v2/src/cli/simple-commands/enhanced-ui-views.js:307:      { key: '8', tool: 'github_metrics', desc: 'Repository metrics' },
v2/src/cli/simple-commands/enhanced-ui-views.js:329:   * Render DAA (Dynamic Agent Architecture) View (8 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:345:    // DAA tools
v2/src/cli/simple-commands/enhanced-ui-views.js:348:      { key: '1', tool: 'daa_agent_create', desc: 'Create dynamic agent' },
v2/src/cli/simple-commands/enhanced-ui-views.js:349:      { key: '2', tool: 'daa_capability_match', desc: 'Match capabilities' },
v2/src/cli/simple-commands/enhanced-ui-views.js:350:      { key: '3', tool: 'daa_resource_alloc', desc: 'Resource allocation' },
v2/src/cli/simple-commands/enhanced-ui-views.js:351:      { key: '4', tool: 'daa_lifecycle_manage', desc: 'Lifecycle management' },
v2/src/cli/simple-commands/enhanced-ui-views.js:352:      { key: '5', tool: 'daa_communication', desc: 'Inter-agent communication' },
v2/src/cli/simple-commands/enhanced-ui-views.js:353:      { key: '6', tool: 'daa_consensus', desc: 'Consensus mechanisms' },
v2/src/cli/simple-commands/enhanced-ui-views.js:354:      { key: '7', tool: 'daa_fault_tolerance', desc: 'Fault tolerance' },
v2/src/cli/simple-commands/enhanced-ui-views.js:355:      { key: '8', tool: 'daa_optimization', desc: 'Performance optimization' },
v2/src/cli/simple-commands/enhanced-ui-views.js:377:   * Render System & Utilities View (6+ tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:393:    // System tools
v2/src/cli/simple-commands/enhanced-ui-views.js:396:      { key: '1', tool: 'config_manage', desc: 'Configuration management' },
v2/src/cli/simple-commands/enhanced-ui-views.js:397:      { key: '2', tool: 'security_scan', desc: 'Security scanning' },
v2/src/cli/simple-commands/enhanced-ui-views.js:398:      { key: '3', tool: 'backup_create', desc: 'Create system backup' },
v2/src/cli/simple-commands/enhanced-ui-views.js:399:      { key: '4', tool: 'restore_system', desc: 'System restoration' },
v2/src/cli/simple-commands/enhanced-ui-views.js:400:      { key: '5', tool: 'log_analysis', desc: 'Log analysis' },
v2/src/cli/simple-commands/enhanced-ui-views.js:401:      { key: '6', tool: 'diagnostic_run', desc: 'Run diagnostics' },
v2/src/cli/simple-commands/enhanced-ui-views.js:402:      { key: '7', tool: 'terminal_execute', desc: 'Execute commands' },
v2/src/cli/simple-commands/enhanced-ui-views.js:403:      { key: '8', tool: 'features_detect', desc: 'Feature detection' },
v2/src/cli/simple-commands/enhanced-ui-views.js:436:    const status = this.toolFramework.getStatus();
v2/src/cli/simple-commands/enhanced-ui-views.js:453:    const categories = this.toolFramework.getCategories();
v2/src/cli/simple-commands/enhanced-ui-views.js:455:      const tools = this.toolFramework.getToolsByCategory(category);
v2/src/cli/simple-commands/enhanced-ui-views.js:457:      console.log(`  ${prefix} ${category.toUpperCase()}: ${colors.gray(`${tools.length} tools`)}`);
v2/src/cli/simple-commands/enhanced-ui-views.js:463:    console.log(`  ${colors.yellow('r')} - Run custom tool`);
v2/src/cli/simple-commands/enhanced-ui-views.js:470:   * Render tool grid helper
v2/src/cli/simple-commands/enhanced-ui-views.js:472:  renderToolGrid(tools, colors, columns = 2) {
v2/src/cli/simple-commands/enhanced-ui-views.js:473:    for (let i = 0; i < tools.length; i += columns) {
v2/src/cli/simple-commands/enhanced-ui-views.js:475:      for (let j = 0; j < columns && i + j < tools.length; j++) {
v2/src/cli/simple-commands/enhanced-ui-views.js:476:        const tool = tools[i + j];
v2/src/cli/simple-commands/enhanced-ui-views.js:477:        const keyLabel = colors.yellow(`[${tool.key}]`);
v2/src/cli/simple-commands/enhanced-ui-views.js:478:        const toolName = colors.white(tool.tool);
v2/src/cli/simple-commands/enhanced-ui-views.js:479:        const desc = colors.gray(tool.desc);
v2/src/cli/simple-commands/enhanced-ui-views.js:480:        row += `  ${keyLabel} ${toolName} - ${desc}`;
v2/src/cli/simple-commands/enhanced-ui-views.js:548:   * Execute quick tool with default parameters
v2/src/cli/simple-commands/enhanced-ui-views.js:550:  async executeQuickTool(toolName, parameters = {}) {
v2/src/cli/simple-commands/enhanced-ui-views.js:552:      this.ui.addLog('info', `Executing ${toolName}...`);
v2/src/cli/simple-commands/enhanced-ui-views.js:553:      const result = await this.toolFramework.executeTool(toolName, parameters);
v2/src/cli/simple-commands/enhanced-ui-views.js:554:      this.ui.addLog('success', `${toolName} completed successfully`);
v2/src/cli/simple-commands/enhanced-ui-views.js:557:      this.ui.addLog('error', `${toolName} failed: ${error.message}`);
v2/src/cli/simple-commands/enhanced-ui-views.js:562:   * Display formatted tool result
v2/src/cli/simple-commands/enhanced-ui-views.js:598:      const status = await this.toolFramework.executeTool('neural_status');
v2/src/cli/simple-commands/enhanced-ui-views.js:612:      const report = await this.toolFramework.executeTool('performance_report', {
v2/src/hive-mind/integration/ConsensusEngine.ts:10:import { MCPToolWrapper } from './MCPToolWrapper.js';
v2/src/hive-mind/integration/ConsensusEngine.ts:22:  private mcpWrapper: MCPToolWrapper;
v2/src/hive-mind/integration/ConsensusEngine.ts:49:    this.mcpWrapper = new MCPToolWrapper();
v2/src/templates/claude-optimized/SUMMARY.md:5:I have successfully created a comprehensive optimized .claude folder template structure for the Claude Code Flow project. This template provides a complete solution for deploying optimized SPARC methodology commands and batch tools to new projects.
v2/src/templates/claude-optimized/SUMMARY.md:41:- `BATCHTOOLS_GUIDE.md` - Comprehensive batch tools guide
v2/src/templates/claude-optimized/SUMMARY.md:61:- `mcp.md` - MCP service integration
v2/src/templates/claude-optimized/SUMMARY.md:235:4. **Extension** with additional SPARC modes or tools
v2/src/templates/claude-optimized/SUMMARY.md:245:The template provides a complete, production-ready solution for deploying optimized Claude Code environments with full SPARC methodology support and comprehensive batch tools integration.
v2/src/cli/simple-commands/web-server.js:428:        case 'tools/call':
v2/src/cli/simple-commands/web-server.js:432:        case 'tools/list':
v2/src/cli/simple-commands/web-server.js:433:          console.log('Handling tools/list request');
v2/src/cli/simple-commands/web-server.js:462:          tools: { listChanged: true },
v2/src/cli/simple-commands/web-server.js:487:   * Handle tool call request
v2/src/cli/simple-commands/web-server.js:492:    // Mock tool execution for demonstration
v2/src/cli/simple-commands/web-server.js:512:   * Handle tools list request
v2/src/cli/simple-commands/web-server.js:515:    const tools = [
v2/src/cli/simple-commands/web-server.js:605:      result: { tools },
v2/src/cli/simple-commands/web-server.js:619:   * Execute mock tool for demonstration
v2/src/templates/claude-optimized/CHANGELOG.md:13:- Batch tools integration for improved performance
v2/src/templates/claude-optimized/CHANGELOG.md:16:  - BATCHTOOLS_GUIDE.md - Complete guide for batch tool usage
v2/src/templates/claude-optimized/CHANGELOG.md:31:  - mcp - MCP service integration
v2/src/templates/claude-optimized/CHANGELOG.md:52:- Parallel tool execution support
v2/src/templates/claude-optimized/CHANGELOG.md:67:- **1.0.0** (2025-06-16): Initial release with full SPARC support and batch tools
v2/src/cli/simple-commands/sparc.js:48:  const knownSubcommands = ['modes', 'info', 'run', 'tdd'];
v2/src/cli/simple-commands/sparc.js:218:    // Build tools based on mode groups
v2/src/cli/simple-commands/sparc.js:219:    const tools = buildToolsFromGroups(mode.groups);
v2/src/cli/simple-commands/sparc.js:220:    const toolsList = Array.from(tools).join(',');
v2/src/cli/simple-commands/sparc.js:233:        console.log(`Tools: ${toolsList}`);
v2/src/cli/simple-commands/sparc.js:252:      console.log(`üîß Tools: ALL (including MCP and WebSearch via --dangerously-skip-permissions)`);
v2/src/cli/simple-commands/sparc.js:255:      console.log(`üîß Tools: ${toolsList}`);
v2/src/cli/simple-commands/sparc.js:272:    await executeClaude(enhancedTask, toolsList, instanceId, memoryNamespace, subArgs);
v2/src/cli/simple-commands/sparc.js:316:  const toolMappings = {
v2/src/cli/simple-commands/sparc.js:320:    mcp: ['mcp_tools'],
v2/src/cli/simple-commands/sparc.js:324:  const tools = new Set(['View', 'Edit', 'Bash']); // Always include basic tools
v2/src/cli/simple-commands/sparc.js:329:      if (toolMappings[groupName]) {
v2/src/cli/simple-commands/sparc.js:330:        toolMappings[groupName].forEach((tool) => tools.add(tool));
v2/src/cli/simple-commands/sparc.js:332:    } else if (toolMappings[group]) {
v2/src/cli/simple-commands/sparc.js:333:      toolMappings[group].forEach((tool) => tools.add(tool));
v2/src/cli/simple-commands/sparc.js:337:  return tools;
v2/src/cli/simple-commands/sparc.js:340:async function executeClaude(enhancedTask, toolsList, instanceId, memoryNamespace, subArgs) {
v2/src/cli/simple-commands/sparc.js:366:  // When using --dangerously-skip-permissions, we don't need to specify individual tools
v2/src/cli/simple-commands/sparc.js:367:  // as it enables ALL tools including mcp and websearch
v2/src/cli/simple-commands/sparc.js:370:    claudeArgs.push('--allowedTools', toolsList);
v2/src/cli/simple-commands/sparc.js:390:      enablePermissions ? `Specified: ${toolsList}` : 'ALL tools enabled (MCP, WebSearch, etc.)',
v2/src/cli/simple-commands/sparc.js:487:  console.log('  batchtool run --parallel \\');
v2/src/cli/simple-commands/sparc.js:493:  console.log('  batchtool orchestrate --boomerang \\');
v2/src/cli/simple-commands/sparc.js:508:  console.log('  --config <path>          Use custom MCP configuration file');
v2/src/cli/simple-commands/sparc/completion.js:966:      tools: ['Prometheus', 'Grafana'],
v2/src/cli/simple-commands/sparc/completion.js:1642:- **Tools**: ${result.monitoring.infrastructure.tools.join(', ')}
v2/src/cli/simple-commands/sparc/completion.js:966:      tools: ['Prometheus', 'Grafana'],
v2/src/cli/simple-commands/sparc/completion.js:1642:- **Tools**: ${result.monitoring.infrastructure.tools.join(', ')}
v2/src/cli/simple-commands/realtime-update-system.js:48:    // Listen for tool execution events
v2/src/cli/simple-commands/realtime-update-system.js:49:    this.subscribe('tool_start', (data) => {
v2/src/cli/simple-commands/realtime-update-system.js:50:      this.broadcastUpdate('tools', {
v2/src/cli/simple-commands/realtime-update-system.js:52:        toolName: data.toolName,
v2/src/cli/simple-commands/realtime-update-system.js:58:    this.subscribe('tool_complete', (data) => {
v2/src/cli/simple-commands/realtime-update-system.js:59:      this.broadcastUpdate('tools', {
v2/src/cli/simple-commands/realtime-update-system.js:61:        toolName: data.toolName,
v2/src/cli/simple-commands/realtime-update-system.js:67:      // Update relevant views based on tool type
v2/src/cli/simple-commands/realtime-update-system.js:68:      this.updateRelatedViews(data.toolName, data.result);
v2/src/cli/simple-commands/realtime-update-system.js:71:    this.subscribe('tool_error', (data) => {
v2/src/cli/simple-commands/realtime-update-system.js:72:      this.broadcastUpdate('tools', {
v2/src/cli/simple-commands/realtime-update-system.js:74:        toolName: data.toolName,
v2/src/cli/simple-commands/realtime-update-system.js:113:      'tools',
v2/src/cli/simple-commands/realtime-update-system.js:272:        case 'tools':
v2/src/cli/simple-commands/realtime-update-system.js:379:   * Apply tools-specific updates
v2/src/cli/simple-commands/realtime-update-system.js:386:        this.ui.addLog('info', `üîß Started: ${update.toolName}`);
v2/src/cli/simple-commands/realtime-update-system.js:393:        this.ui.addLog('success', `‚úÖ Completed: ${update.toolName}`);
v2/src/cli/simple-commands/realtime-update-system.js:405:        this.ui.addLog('error', `‚ùå Failed: ${update.toolName} - ${update.error}`);
v2/src/cli/simple-commands/realtime-update-system.js:469:   * Update related views based on tool execution
v2/src/cli/simple-commands/realtime-update-system.js:471:  updateRelatedViews(toolName, result) {
v2/src/cli/simple-commands/realtime-update-system.js:472:    // Map tool names to affected views
v2/src/cli/simple-commands/realtime-update-system.js:473:    const toolViewMap = {
v2/src/cli/simple-commands/realtime-update-system.js:474:      // Neural tools affect neural view
v2/src/cli/simple-commands/realtime-update-system.js:481:      // Analysis tools affect analysis view
v2/src/cli/simple-commands/realtime-update-system.js:487:      // Swarm tools affect orchestration view
v2/src/cli/simple-commands/realtime-update-system.js:492:      // Memory tools affect memory view
v2/src/cli/simple-commands/realtime-update-system.js:498:    const affectedViews = toolViewMap[toolName] || [];
v2/src/cli/simple-commands/realtime-update-system.js:502:        type: 'tool_result',
v2/src/cli/simple-commands/realtime-update-system.js:503:        toolName,
v2/src/cli/completion.ts:9:  private commands = [
v2/src/cli/completion.ts:24:  private subcommands = {
v2/src/cli/completion.ts:113:                    COMPREPLY=($(compgen -W "${this.subcommands.agent.join(' ')}" -- "$cur"))
v2/src/cli/completion.ts:136:                    COMPREPLY=($(compgen -W "${this.subcommands.task.join(' ')}" -- "$cur"))
v2/src/cli/completion.ts:142:            COMPREPLY=($(compgen -W "${this.subcommands.memory.join(' ')}" -- "$cur"))
v2/src/cli/completion.ts:146:            COMPREPLY=($(compgen -W "${this.subcommands.config.join(' ')}" -- "$cur"))
v2/src/cli/completion.ts:161:                    COMPREPLY=($(compgen -W "${this.subcommands.session.join(' ')}" -- "$cur"))
v2/src/cli/completion.ts:182:                    COMPREPLY=($(compgen -W "${this.subcommands.workflow.join(' ')}" -- "$cur"))
v2/src/cli/completion.ts:255:    commands=(
v2/src/cli/completion.ts:286:            _arguments '1: :(${this.subcommands.agent.join(' ')})'
v2/src/cli/completion.ts:309:            _arguments '1: :(${this.subcommands.task.join(' ')})'
v2/src/cli/completion.ts:315:    _arguments '1: :(${this.subcommands.memory.join(' ')})'
v2/src/cli/completion.ts:319:    _arguments '1: :(${this.subcommands.config.join(' ')})'
v2/src/cli/completion.ts:331:            _arguments '1: :(${this.subcommands.session.join(' ')})'
v2/src/cli/completion.ts:348:            _arguments '1: :(${this.subcommands.workflow.join(' ')})'
v2/src/cli/completion.ts:434:# Agent subcommands
v2/src/cli/completion.ts:440:# Task subcommands
v2/src/cli/completion.ts:447:# Memory subcommands
v2/src/cli/completion.ts:454:# Config subcommands
v2/src/cli/completion.ts:461:# Session subcommands
v2/src/cli/completion.ts:471:# Workflow subcommands
v2/src/cli/completion.ts:479:# Completion subcommands
v2/src/hive-mind/integration/SwarmOrchestrator.ts:12:import { MCPToolWrapper } from './MCPToolWrapper.js';
v2/src/hive-mind/integration/SwarmOrchestrator.ts:24:  private mcpWrapper: MCPToolWrapper;
v2/src/hive-mind/integration/SwarmOrchestrator.ts:43:    this.mcpWrapper = new MCPToolWrapper();
v2/src/hive-mind/integration/SwarmOrchestrator.ts:63:    // Orchestrate task using MCP tools
v2/src/hive-mind/integration/SwarmOrchestrator.ts:305:    // Use MCP tool for load balancing
v2/src/cli/simple-commands/concurrent-display.js:87:  addActivity(agentId, activity, tool = null) {
v2/src/cli/simple-commands/concurrent-display.js:91:      agent.currentTool = tool;
v2/src/hive-mind/integration/MCPToolWrapper.ts:2: * MCPToolWrapper Class
v2/src/hive-mind/integration/MCPToolWrapper.ts:4: * Wraps all MCP tools for use within the Hive Mind system,
v2/src/hive-mind/integration/MCPToolWrapper.ts:16:interface MCPToolResponse {
v2/src/hive-mind/integration/MCPToolWrapper.ts:22:export class MCPToolWrapper extends EventEmitter {
v2/src/hive-mind/integration/MCPToolWrapper.ts:23:  private toolPrefix = 'mcp__ruv-swarm__';
v2/src/hive-mind/integration/MCPToolWrapper.ts:31:   * Initialize MCP tools
v2/src/hive-mind/integration/MCPToolWrapper.ts:35:      // Check if MCP tools are available
v2/src/hive-mind/integration/MCPToolWrapper.ts:46:   * Check if MCP tools are available
v2/src/hive-mind/integration/MCPToolWrapper.ts:52:        throw new Error('ruv-swarm MCP tools not found');
v2/src/hive-mind/integration/MCPToolWrapper.ts:55:      throw new Error('MCP tools not available. Please ensure ruv-swarm is installed.');
v2/src/hive-mind/integration/MCPToolWrapper.ts:60:   * Execute MCP tool via CLI
v2/src/hive-mind/integration/MCPToolWrapper.ts:62:  private async executeTool(toolName: string, params: any): Promise<MCPToolResponse> {
v2/src/hive-mind/integration/MCPToolWrapper.ts:64:      const command = `npx ruv-swarm mcp-execute ${toolName} '${JSON.stringify(params)}'`;
v2/src/hive-mind/integration/MCPToolWrapper.ts:78:  // Swarm coordination tools
v2/src/hive-mind/integration/MCPToolWrapper.ts:114:  // Neural and pattern tools
v2/src/hive-mind/integration/MCPToolWrapper.ts:140:  // Memory management tools
v2/src/hive-mind/integration/MCPToolWrapper.ts:177:  // Performance and monitoring tools
v2/src/hive-mind/integration/MCPToolWrapper.ts:191:  // Agent management tools
v2/src/hive-mind/integration/MCPToolWrapper.ts:201:  // Task management tools
v2/src/hive-mind/integration/MCPToolWrapper.ts:211:  // Advanced coordination tools
v2/src/hive-mind/integration/MCPToolWrapper.ts:239:  // Workflow tools
v2/src/hive-mind/integration/MCPToolWrapper.ts:249:  // GitHub integration tools
v2/src/hive-mind/integration/MCPToolWrapper.ts:259:  // Dynamic Agent Architecture tools
v2/src/hive-mind/integration/MCPToolWrapper.ts:276:  // System tools
v2/src/hive-mind/integration/MCPToolWrapper.ts:313:   * Generic tool execution for custom tools
v2/src/hive-mind/integration/MCPToolWrapper.ts:315:  async executeMCPTool(toolName: string, params: any): Promise<any> {
v2/src/hive-mind/integration/MCPToolWrapper.ts:316:    return this.executeTool(toolName, params);
v2/src/hive-mind/integration/MCPToolWrapper.ts:320:   * Helper to format tool responses
v2/src/hive-mind/integration/MCPToolWrapper.ts:322:  private formatResponse(response: MCPToolResponse): any {
v2/src/hive-mind/integration/MCPToolWrapper.ts:326:      throw new Error(`MCP Tool Error: ${response.error}`);
v2/src/cli/simple-commands/mcp-integration-layer.js:2: * MCP Integration Layer for Web UI
v2/src/cli/simple-commands/mcp-integration-layer.js:3: * Provides comprehensive integration with all Claude-Flow MCP tools
v2/src/cli/simple-commands/mcp-integration-layer.js:9:export class MCPIntegrationLayer {
v2/src/cli/simple-commands/mcp-integration-layer.js:20:    this.toolCategories = {
v2/src/cli/simple-commands/mcp-integration-layer.js:145:   * Initialize MCP integration
v2/src/cli/simple-commands/mcp-integration-layer.js:149:      // Check if MCP tools are available
v2/src/cli/simple-commands/mcp-integration-layer.js:150:      const mcpAvailable = await this.checkMCPAvailability();
v2/src/cli/simple-commands/mcp-integration-layer.js:152:        this.ui.addLog('warning', 'MCP tools not available - using mock implementations');
v2/src/cli/simple-commands/mcp-integration-layer.js:156:      // Initialize tool monitoring
v2/src/cli/simple-commands/mcp-integration-layer.js:162:      this.ui.addLog('success', 'MCP Integration Layer initialized successfully');
v2/src/cli/simple-commands/mcp-integration-layer.js:164:      this.ui.addLog('error', `Failed to initialize MCP integration: ${error.message}`);
v2/src/cli/simple-commands/mcp-integration-layer.js:170:   * Check if MCP tools are available
v2/src/cli/simple-commands/mcp-integration-layer.js:172:  async checkMCPAvailability() {
v2/src/cli/simple-commands/mcp-integration-layer.js:174:      // Try to access a simple MCP tool
v2/src/cli/simple-commands/mcp-integration-layer.js:183:   * Execute MCP tool with full error handling and retry logic
v2/src/cli/simple-commands/mcp-integration-layer.js:185:  async executeTool(toolName, parameters = {}, options = {}) {
v2/src/cli/simple-commands/mcp-integration-layer.js:191:        toolName,
v2/src/cli/simple-commands/mcp-integration-layer.js:199:      this.notifyUI('tool_start', { executionId, toolName });
v2/src/cli/simple-commands/mcp-integration-layer.js:202:      const result = await this.executeWithRetry(toolName, parameters, options);
v2/src/cli/simple-commands/mcp-integration-layer.js:206:        this.cacheResult(toolName, parameters, result);
v2/src/cli/simple-commands/mcp-integration-layer.js:218:      this.notifyUI('tool_complete', { executionId, toolName, result });
v2/src/cli/simple-commands/mcp-integration-layer.js:231:      this.notifyUI('tool_error', { executionId, toolName, error: error.message });
v2/src/cli/simple-commands/mcp-integration-layer.js:238:   * Execute tool with retry logic
v2/src/cli/simple-commands/mcp-integration-layer.js:240:  async executeWithRetry(toolName, parameters, options) {
v2/src/cli/simple-commands/mcp-integration-layer.js:249:          this.ui.addLog('info', `Retrying ${toolName} (attempt ${attempt + 1}/${maxRetries + 1})`);
v2/src/cli/simple-commands/mcp-integration-layer.js:252:        const result = await this.executeToolDirect(toolName, parameters);
v2/src/cli/simple-commands/mcp-integration-layer.js:258:          `Tool ${toolName} failed on attempt ${attempt + 1}: ${error.message}`,
v2/src/cli/simple-commands/mcp-integration-layer.js:264:      `Tool ${toolName} failed after ${maxRetries + 1} attempts: ${lastError.message}`,
v2/src/cli/simple-commands/mcp-integration-layer.js:269:   * Execute tool directly (with or without MCP)
v2/src/cli/simple-commands/mcp-integration-layer.js:271:  async executeToolDirect(toolName, parameters) {
v2/src/cli/simple-commands/mcp-integration-layer.js:273:      return this.executeMockTool(toolName, parameters);
v2/src/cli/simple-commands/mcp-integration-layer.js:277:      // Use the mcp__claude-flow__ tools that are available
v2/src/cli/simple-commands/mcp-integration-layer.js:278:      const mcpToolName = `mcp__claude-flow__${toolName}`;
v2/src/cli/simple-commands/mcp-integration-layer.js:280:      // Check if we have this tool available (would need to be passed from the calling context)
v2/src/cli/simple-commands/mcp-integration-layer.js:282:      return this.executeMockTool(toolName, parameters);
v2/src/cli/simple-commands/mcp-integration-layer.js:284:      throw new Error(`MCP tool execution failed: ${error.message}`);
v2/src/cli/simple-commands/mcp-integration-layer.js:289:   * Execute mock tool for demonstration and fallback
v2/src/cli/simple-commands/mcp-integration-layer.js:291:  async executeMockTool(toolName, parameters) {
v2/src/cli/simple-commands/mcp-integration-layer.js:295:    // Generate realistic mock responses based on tool type
v2/src/cli/simple-commands/mcp-integration-layer.js:296:    switch (toolName) {
v2/src/cli/simple-commands/mcp-integration-layer.js:363:          tool: toolName,
v2/src/cli/simple-commands/mcp-integration-layer.js:364:          message: `Mock execution of ${toolName}`,
v2/src/cli/simple-commands/mcp-integration-layer.js:372:   * Execute multiple tools in parallel
v2/src/cli/simple-commands/mcp-integration-layer.js:374:  async executeToolsParallel(toolExecutions) {
v2/src/cli/simple-commands/mcp-integration-layer.js:375:    const promises = toolExecutions.map(({ toolName, parameters, options }) =>
v2/src/cli/simple-commands/mcp-integration-layer.js:376:      this.executeTool(toolName, parameters, options),
v2/src/cli/simple-commands/mcp-integration-layer.js:383:   * Execute tools in batch with progress tracking
v2/src/cli/simple-commands/mcp-integration-layer.js:385:  async executeToolsBatch(toolExecutions, progressCallback) {
v2/src/cli/simple-commands/mcp-integration-layer.js:387:    const total = toolExecutions.length;
v2/src/cli/simple-commands/mcp-integration-layer.js:390:      const { toolName, parameters, options } = toolExecutions[i];
v2/src/cli/simple-commands/mcp-integration-layer.js:393:        const result = await this.executeTool(toolName, parameters, options);
v2/src/cli/simple-commands/mcp-integration-layer.js:401:            currentTool: toolName,
v2/src/cli/simple-commands/mcp-integration-layer.js:413:   * Cache tool results for performance
v2/src/cli/simple-commands/mcp-integration-layer.js:415:  cacheResult(toolName, parameters, result) {
v2/src/cli/simple-commands/mcp-integration-layer.js:416:    const cacheKey = this.generateCacheKey(toolName, parameters);
v2/src/cli/simple-commands/mcp-integration-layer.js:417:    const ttl = this.getCacheTTL(toolName);
v2/src/cli/simple-commands/mcp-integration-layer.js:432:  getCachedResult(toolName, parameters) {
v2/src/cli/simple-commands/mcp-integration-layer.js:433:    const cacheKey = this.generateCacheKey(toolName, parameters);
v2/src/cli/simple-commands/mcp-integration-layer.js:448:   * Generate cache key for tool execution
v2/src/cli/simple-commands/mcp-integration-layer.js:450:  generateCacheKey(toolName, parameters) {
v2/src/cli/simple-commands/mcp-integration-layer.js:451:    return `${toolName}_${JSON.stringify(parameters)}`;
v2/src/cli/simple-commands/mcp-integration-layer.js:455:   * Get cache TTL based on tool type
v2/src/cli/simple-commands/mcp-integration-layer.js:457:  getCacheTTL(toolName) {
v2/src/cli/simple-commands/mcp-integration-layer.js:458:    // Different tools have different cache lifetimes
v2/src/cli/simple-commands/mcp-integration-layer.js:474:    return ttlMap[toolName] || 60000; // Default 1 minute
v2/src/cli/simple-commands/mcp-integration-layer.js:490:   * Get tools by category
v2/src/cli/simple-commands/mcp-integration-layer.js:493:    return this.toolCategories[category] || [];
v2/src/cli/simple-commands/mcp-integration-layer.js:497:   * Get all available tool categories
v2/src/cli/simple-commands/mcp-integration-layer.js:500:    return Object.keys(this.toolCategories);
v2/src/cli/simple-commands/mcp-integration-layer.js:504:   * Get tool execution status
v2/src/cli/simple-commands/mcp-integration-layer.js:511:   * Cancel tool execution
v2/src/cli/simple-commands/mcp-integration-layer.js:517:      this.notifyUI('tool_cancelled', { executionId });
v2/src/cli/simple-commands/mcp-integration-layer.js:522:   * Start monitoring active tools
v2/src/cli/simple-commands/mcp-integration-layer.js:532:   * Update progress for running tools
v2/src/cli/simple-commands/mcp-integration-layer.js:539:        const estimatedDuration = this.getEstimatedDuration(execution.toolName);
v2/src/cli/simple-commands/mcp-integration-layer.js:546:   * Get estimated duration for tool execution
v2/src/cli/simple-commands/mcp-integration-layer.js:548:  getEstimatedDuration(toolName) {
v2/src/cli/simple-commands/mcp-integration-layer.js:556:    return durationMap[toolName] || 3000; // Default 3 seconds
v2/src/cli/simple-commands/mcp-integration-layer.js:575:    // Monitor system events that might affect tool execution
v2/src/cli/simple-commands/mcp-integration-layer.js:620:      case 'tool_start':
v2/src/cli/simple-commands/mcp-integration-layer.js:621:        return `Started ${data.toolName} (ID: ${data.executionId})`;
v2/src/cli/simple-commands/mcp-integration-layer.js:622:      case 'tool_complete':
v2/src/cli/simple-commands/mcp-integration-layer.js:623:        return `Completed ${data.toolName} successfully`;
v2/src/cli/simple-commands/mcp-integration-layer.js:624:      case 'tool_error':
v2/src/cli/simple-commands/mcp-integration-layer.js:625:        return `Failed ${data.toolName}: ${data.error}`;
v2/src/cli/simple-commands/mcp-integration-layer.js:626:      case 'tool_cancelled':
v2/src/cli/simple-commands/mcp-integration-layer.js:638:      case 'tool_complete':
v2/src/cli/simple-commands/mcp-integration-layer.js:640:      case 'tool_error':
v2/src/cli/simple-commands/mcp-integration-layer.js:642:      case 'tool_cancelled':
v2/src/cli/simple-commands/mcp-integration-layer.js:677:      totalTools: Object.values(this.toolCategories).flat().length,
v2/src/cli/simple-commands/mcp-integration-layer.js:689:export default MCPIntegrationLayer;
v2/src/cli/index.ts:31:const cli = new Command()
v2/src/cli/index.ts:56:// Add subcommands
v2/src/cli/index.ts:73:const replCommand = new Command('repl')
v2/src/cli/index.ts:87:const versionCommand = new Command('version')
v2/src/cli/index.ts:100:const completionCommand = new Command('completion')
v2/src/templates/claude-optimized/template-manager.js:12:const commands = {
v2/src/cli/simple-commands/enhanced-webui-complete.js:3: * Combines all MCP tools with enhanced UI views and real-time updates
v2/src/cli/simple-commands/enhanced-webui-complete.js:4: * Provides access to all 87 Claude-Flow MCP tools through a comprehensive interface
v2/src/cli/simple-commands/enhanced-webui-complete.js:10:import MCPIntegrationLayer from './mcp-integration-layer.js';
v2/src/cli/simple-commands/enhanced-webui-complete.js:11:import ToolExecutionFramework from './tool-execution-framework.js';
v2/src/cli/simple-commands/enhanced-webui-complete.js:15:// Enhanced view modes with all tool categories
v2/src/cli/simple-commands/enhanced-webui-complete.js:46:    this.toolFramework = null;
v2/src/cli/simple-commands/enhanced-webui-complete.js:80:      // Initialize MCP integration layer
v2/src/cli/simple-commands/enhanced-webui-complete.js:81:      this.mcpIntegration = new MCPIntegrationLayer(this);
v2/src/cli/simple-commands/enhanced-webui-complete.js:83:      // Initialize tool execution framework
v2/src/cli/simple-commands/enhanced-webui-complete.js:84:      this.toolFramework = new ToolExecutionFramework(this);
v2/src/cli/simple-commands/enhanced-webui-complete.js:101:      this.addLog('success', 'üöÄ Enhanced Web UI fully initialized with all 87 MCP tools');
v2/src/cli/simple-commands/enhanced-webui-complete.js:117:      { id: 'mcp-server', name: 'MCP Server', description: 'Model Context Protocol server' },
v2/src/cli/simple-commands/enhanced-webui-complete.js:179:        message: 'üîÑ Workflow engine loaded 11 automation tools',
v2/src/cli/simple-commands/enhanced-webui-complete.js:184:        message: 'üêô GitHub connector established with 8 integration tools',
v2/src/cli/simple-commands/enhanced-webui-complete.js:189:        message: 'ü§ñ DAA controller managing 8 dynamic agent tools',
v2/src/cli/simple-commands/enhanced-webui-complete.js:194:        message: 'üíæ Memory system active with 12 persistence tools',
v2/src/cli/simple-commands/enhanced-webui-complete.js:199:        message: 'üõ†Ô∏è System utilities loaded 8 management tools',
v2/src/cli/simple-commands/enhanced-webui-complete.js:258:    printInfo('üîß Comprehensive MCP Tool Integration - 87 Tools Available');
v2/src/cli/simple-commands/enhanced-webui-complete.js:262:    // Show tool categories summary
v2/src/cli/simple-commands/enhanced-webui-complete.js:281:   * Show tool categories summary at startup
v2/src/cli/simple-commands/enhanced-webui-complete.js:298:        `  ${cat.icon} ${this.colors.white(cat.name)}: ${this.colors.yellow(cat.count)} tools`,
v2/src/cli/simple-commands/enhanced-webui-complete.js:302:    console.log(this.colors.green(`Total: ${this.colors.bold('87')} MCP tools ready for use`));
v2/src/cli/simple-commands/enhanced-webui-complete.js:401:    // Enhanced tool tabs (row 2)
v2/src/cli/simple-commands/enhanced-webui-complete.js:402:    const toolTabs = [
v2/src/cli/simple-commands/enhanced-webui-complete.js:410:    let toolTabLine = '';
v2/src/cli/simple-commands/enhanced-webui-complete.js:411:    toolTabs.forEach((tab) => {
v2/src/cli/simple-commands/enhanced-webui-complete.js:416:      toolTabLine += `  ${this.colors.bold(tab.key)}:${label}`;
v2/src/cli/simple-commands/enhanced-webui-complete.js:419:    console.log(toolTabLine);
v2/src/cli/simple-commands/enhanced-webui-complete.js:458:    console.log('  üß† Neural (15 tools): Training, prediction, model management');
v2/src/cli/simple-commands/enhanced-webui-complete.js:459:    console.log('  üìä Analysis (13 tools): Performance reports, monitoring, metrics');
v2/src/cli/simple-commands/enhanced-webui-complete.js:460:    console.log('  üîÑ Workflow (11 tools): Automation, pipelines, scheduling');
v2/src/cli/simple-commands/enhanced-webui-complete.js:461:    console.log('  üêô GitHub (8 tools): Repository management, PR automation');
v2/src/cli/simple-commands/enhanced-webui-complete.js:462:    console.log('  ü§ñ DAA (8 tools): Dynamic agent architecture');
v2/src/cli/simple-commands/enhanced-webui-complete.js:463:    console.log('  üõ†Ô∏è System (8 tools): Configuration, security, diagnostics');
v2/src/cli/simple-commands/enhanced-webui-complete.js:464:    console.log('  üêù Swarm (12 tools): Agent coordination, task orchestration');
v2/src/cli/simple-commands/enhanced-webui-complete.js:465:    console.log('  üíæ Memory (12 tools): Persistence, caching, namespaces');
v2/src/cli/simple-commands/enhanced-webui-complete.js:469:    console.log('  r: Run custom tool (from any view)');
v2/src/cli/simple-commands/enhanced-webui-complete.js:471:    console.log('  b: Batch tool execution');
v2/src/cli/simple-commands/enhanced-webui-complete.js:478:    console.log('  ‚Ä¢ Comprehensive MCP tool integration');
v2/src/cli/simple-commands/enhanced-webui-complete.js:496:    const toolStatus = this.toolFramework ? this.toolFramework.getStatus() : null;
v2/src/cli/simple-commands/enhanced-webui-complete.js:499:    statusLine += `MCP: ${mcpStatus?.mcpAvailable ? this.colors.green('‚úì') : this.colors.red('‚úó')} | `;
v2/src/cli/simple-commands/enhanced-webui-complete.js:501:    statusLine += `Active: ${this.colors.blue(toolStatus?.currentExecutions || 0)} | `;
v2/src/cli/simple-commands/enhanced-webui-complete.js:502:    statusLine += `Queued: ${this.colors.cyan(toolStatus?.queuedExecutions || 0)} | `;
v2/src/cli/simple-commands/enhanced-webui-complete.js:629:   * Prompt for tool execution
v2/src/cli/simple-commands/enhanced-webui-complete.js:633:    // For now, execute a sample tool
v2/src/cli/simple-commands/enhanced-webui-complete.js:637:      const result = await this.toolFramework.executeTool('features_detect');
v2/src/cli/simple-commands/enhanced-webui-complete.js:652:      const result = await this.toolFramework.executePredefinedWorkflow('performance_analysis');
v2/src/cli/simple-commands/enhanced-webui-complete.js:666:      { toolName: 'swarm_status' },
v2/src/cli/simple-commands/enhanced-webui-complete.js:667:      { toolName: 'neural_status' },
v2/src/cli/simple-commands/enhanced-webui-complete.js:668:      { toolName: 'memory_usage', parameters: { action: 'list' } },
v2/src/cli/simple-commands/enhanced-webui-complete.js:672:      const result = await this.toolFramework.executeToolsBatch(batchTools, { parallel: true });
v2/src/cli/simple-commands/enhanced-webui-complete.js:786:        `Enhanced: ${this.colors.yellow('87 MCP tools')} available across ${this.colors.yellow('8 categories')}`,
v2/src/cli/simple-commands/enhanced-webui-complete.js:802:    console.log(`  MCP Tools: ${this.colors.yellow('87')} available`);
v2/src/cli/simple-commands/enhanced-webui-complete.js:831:        `  MCP Connection: ${mcpStatus.mcpAvailable ? this.colors.green('Connected') : this.colors.red('Mock Mode')}`,
v2/src/cli/simple-commands/enhanced-webui-complete.js:906:      this.colors.cyan('‚ö° Quick Actions: [1-9] Execute swarm tools | [r] Run custom tool'),
v2/src/cli/simple-commands/training.js:7:  callRuvSwarmMCP,
v2/src/cli/simple-commands/training.js:191:    const updateResult = await callRuvSwarmMCP('learning_adapt', {
v2/src/cli/simple-commands/swarm.js:172:  Swarm attempts to open Claude Code CLI with comprehensive MCP tool instructions
v2/src/cli/simple-commands/swarm.js:363:    // Default behavior: spawn Claude Code with comprehensive swarm MCP instructions
v2/src/cli/simple-commands/swarm.js:381:      const swarmPrompt = `You are orchestrating a Claude Flow Swarm using Claude Code's Task tool for agent execution.
v2/src/cli/simple-commands/swarm.js:385:‚úÖ Claude Code's Task tool = Spawns agents that DO the actual work
v2/src/cli/simple-commands/swarm.js:386:‚ùå MCP tools = Only for coordination setup, NOT for execution
v2/src/cli/simple-commands/swarm.js:408:1. ‚úÖ READ files for analysis (Read tool)
v2/src/cli/simple-commands/swarm.js:409:2. ‚úÖ SEARCH codebases (Glob, Grep tools)
v2/src/cli/simple-commands/swarm.js:417:1. ‚ùå NEVER use Write tool to modify files
v2/src/cli/simple-commands/swarm.js:418:2. ‚ùå NEVER use Edit or MultiEdit tools
v2/src/cli/simple-commands/swarm.js:449:Step A: Optional MCP Coordination Setup (Single Message):
v2/src/cli/simple-commands/swarm.js:451:[MCP Tools - Coordination ONLY]:
v2/src/cli/simple-commands/swarm.js:462:  // Spawn ALL agents using Task tool in ONE message
v2/src/cli/simple-commands/swarm.js:483:‚ö†Ô∏è CRITICAL: Claude Code's Task tool does the ACTUAL work!
v2/src/cli/simple-commands/swarm.js:484:- MCP tools = Coordination setup only
v2/src/cli/simple-commands/swarm.js:485:- Task tool = Spawns agents that execute real work
v2/src/cli/simple-commands/swarm.js:605:üîß AVAILABLE MCP TOOLS FOR SWARM COORDINATION:
v2/src/cli/simple-commands/swarm.js:731:ü§ù AGENT TYPES & THEIR MCP TOOL USAGE:
v2/src/cli/simple-commands/swarm.js:734:- Primary tools: swarm_monitor, agent_assign, task_create
v2/src/cli/simple-commands/swarm.js:739:- Primary tools: memory_search, memory_store
v2/src/cli/simple-commands/swarm.js:744:- Primary tools: task_update, memory_retrieve, memory_store
v2/src/cli/simple-commands/swarm.js:749:- Primary tools: memory_search, swarm_monitor
v2/src/cli/simple-commands/swarm.js:754:- Primary tools: task_status, agent_communicate
v2/src/cli/simple-commands/swarm.js:758:üìù EXAMPLE MCP TOOL USAGE PATTERNS:
v2/src/cli/simple-commands/swarm.js:791:Start by spawning a coordinator agent and creating the initial task structure. Use the MCP tools to orchestrate the swarm, coordinate agents, and track progress. Remember to store important decisions and artifacts in collective memory for other agents to access.
v2/src/cli/simple-commands/swarm.js:851:        console.log('  Use MCP tools for coordination and memory sharing');
v2/src/cli/simple-commands/swarm.js:982:        console.log('   ‚Ä¢ Recommended agents and MCP tool usage');
v2/src/cli/simple-commands/swarm.js:1809:MCP TOOL PATTERN:
v2/src/cli/simple-commands/swarm.js:1830:MCP TOOL USAGE:
v2/src/cli/simple-commands/swarm.js:1853:MCP TOOL USAGE:
v2/src/cli/simple-commands/swarm.js:1876:MCP TOOL USAGE:
v2/src/cli/simple-commands/swarm.js:1899:MCP TOOL USAGE:
v2/src/cli/simple-commands/swarm.js:1922:MCP TOOL USAGE:
v2/src/cli/simple-commands/swarm.js:1945:MCP TOOL USAGE:
v2/src/cli/simple-commands/status.js:30:    reader.getMCPServerStatus(),
v2/src/cli/simple-commands/status.js:184:  console.log(`üåê MCP Server: ${status.mcp.status}`);
v2/src/cli/simple-commands/status.js:204:      console.log('   No agents currently registered');
v2/src/cli/simple-commands/status.js:226:    // MCP details
v2/src/cli/simple-commands/status.js:227:    console.log('\nüåê MCP Server:');
v2/src/cli/simple-commands/sparc/coordinator.js:251:      await this.executeSwarmHook('register_quality_gate', gate);
v2/src/cli/simple-commands/sparc/coordinator.js:251:      await this.executeSwarmHook('register_quality_gate', gate);
v2/src/cli/simple-commands/start-wrapper.js:100:    console.log(`   MCP Port: ${port}`);
v2/src/cli/simple-commands/start-wrapper.js:124:    // MCP Server
v2/src/cli/simple-commands/start-wrapper.js:125:    console.log('   ‚úì MCP Server: Ready');
v2/src/cli/simple-commands/goal.js:66:- **Tool Group Management**: Match actions to available tools and capabilities
v2/src/cli/simple-commands/goal.js:98:## MCP Integration Examples
v2/src/cli/simple-commands/init/batch-init.js:242:  'cli-tool': {
v2/src/cli/simple-commands/init/batch-init.js:244:    description: 'Command-line interface tool',
v2/src/cli/simple-commands/init/batch-init.js:262:const program = new Command();
v2/src/cli/simple-cli.ts:27:üéØ ENTERPRISE FEATURES: Complete ruv-swarm integration with 27 MCP tools, neural networking, and production-ready infrastructure
v2/src/cli/simple-cli.ts:36:  ‚Ä¢ Complete ruv-swarm integration with 27 MCP tools
v2/src/cli/simple-cli.ts:112:  ‚Ä¢ 27 MCP tools for comprehensive workflow automation
v2/src/cli/simple-cli.ts:123:  ‚Ä¢ Sub-10ms MCP response times
v2/src/cli/simple-cli.ts:175:  const commands = listCommands();
v2/src/cli/simple-cli.ts:212:  // Check if this is a registered modular command
v2/src/cli/simple-cli.ts:234:      console.log('üåê MCP Server: Stopped');
v2/src/cli/simple-cli.ts:389:            const commands = subArgs[commandsFlag + 1].split(',');
v2/src/cli/simple-cli.ts:1137:              console.log('   ‚úì MCP server deployment');
v2/src/cli/simple-cli.ts:1222:            if (arg === '--tools' || arg === '-t') {
v2/src/cli/simple-cli.ts:1223:              flags.tools = subArgs[++i];
v2/src/cli/simple-cli.ts:1245:          // Build tools list
v2/src/cli/simple-cli.ts:1246:          let tools = flags.tools || 'View,Edit,Replace,GlobTool,GrepTool,LS,Bash';
v2/src/cli/simple-cli.ts:1248:            tools += ',BatchTool,dispatch_agent';
v2/src/cli/simple-cli.ts:1251:            tools += ',WebFetchTool';
v2/src/cli/simple-cli.ts:1258:            console.log(`Command: claude "<enhanced task with guidance>" --allowedTools ${tools}`);
v2/src/cli/simple-cli.ts:1261:            console.log(`Tools: ${tools}`);
v2/src/cli/simple-cli.ts:1268:            console.log(`  - Access Claude-Flow features through Bash tool`);
v2/src/cli/simple-cli.ts:1272:            console.log(`üîß Tools: ${tools}`);
v2/src/cli/simple-cli.ts:1300:${flags.config ? `- MCP Config: ${flags.config}` : ''}
v2/src/cli/simple-cli.ts:1303:- You have access to these tools: ${tools}
v2/src/cli/simple-cli.ts:1304:${flags.tools ? `- Custom tools specified: ${flags.tools}` : ''}
v2/src/cli/simple-cli.ts:1334:   **Research Mode**: Web research tools are available for information gathering.`;
v2/src/cli/simple-cli.ts:1344:   - Use appropriate tools and practices for the technology stack
v2/src/cli/simple-cli.ts:1363:   ${flags.research ? '   - Research tools are available if needed' : ''}
v2/src/cli/simple-cli.ts:1369:Begin working on your task. The orchestration features are available as tools to help you be more effective, but your primary focus should be on delivering the requested functionality.
v2/src/cli/simple-cli.ts:1385:Remember: These are optional tools. Use them when they add value to your development process.
v2/src/cli/simple-cli.ts:1396:            claudeArgs.push('--allowedTools', tools);
v2/src/cli/simple-cli.ts:2619:- Tools: [Development tools]
v2/src/cli/simple-cli.ts:3157:- Use TypeScript for type safety and better tooling
v2/src/cli/simple-cli.ts:3263:- **Tool access**: Verify required tools are available for the selected mode
v2/src/cli/simple-commands/start-ui.js:25:        console.log('  ‚ú® Access all 71+ MCP tools through the web interface');
v2/src/cli/simple-commands/hooks.js:94:      // MCP Integration Hooks
v2/src/cli/simple-commands/hooks.js:853:// ===== MCP INTEGRATION HOOKS =====
v2/src/cli/simple-commands/hooks.js:878:    console.log(`  üíæ MCP session saved to .swarm/memory.db`);
v2/src/cli/simple-commands/hooks.js:879:    printSuccess(`MCP initialized hook completed`);
v2/src/cli/simple-commands/hooks.js:881:    printError(`MCP initialized hook failed: ${err.message}`);
v2/src/cli/simple-commands/hooks.js:921:    console.log(`  üíæ Agent registered to .swarm/memory.db`);
v2/src/cli/simple-commands/hooks.js:1008:    const commands = await store.list({ namespace: 'command-history', limit: 1000 });
v2/src/cli/simple-commands/hooks.js:1208:      console.log('Usage: echo \'{"tool_input":{"command":"your command"}}\' | claude-flow hooks modify-bash');
v2/src/cli/simple-commands/hooks.js:1212:      console.log('  echo \'{"tool_input":{"command":"rm test.txt"}}\' | claude-flow hooks modify-bash');
v2/src/cli/simple-commands/hooks.js:1227:  const toolInput = JSON.parse(input);
v2/src/cli/simple-commands/hooks.js:1228:  const command = toolInput.tool_input?.command || '';
v2/src/cli/simple-commands/hooks.js:1266:    ...toolInput,
v2/src/cli/simple-commands/hooks.js:1267:    tool_input: {
v2/src/cli/simple-commands/hooks.js:1268:      ...toolInput.tool_input,
v2/src/cli/simple-commands/hooks.js:1287:      console.log('Usage: echo \'{"tool_input":{"file_path":"your/file.js"}}\' | claude-flow hooks modify-file');
v2/src/cli/simple-commands/hooks.js:1291:      console.log('  echo \'{"tool_input":{"file_path":"test.js"}}\' | claude-flow hooks modify-file');
v2/src/cli/simple-commands/hooks.js:1306:  const toolInput = JSON.parse(input);
v2/src/cli/simple-commands/hooks.js:1307:  const filePath = toolInput.tool_input?.file_path || toolInput.tool_input?.path || '';
v2/src/cli/simple-commands/hooks.js:1352:    ...toolInput,
v2/src/cli/simple-commands/hooks.js:1353:    tool_input: {
v2/src/cli/simple-commands/hooks.js:1354:      ...toolInput.tool_input,
v2/src/cli/simple-commands/hooks.js:1359:    if (toolInput.tool_input.file_path) {
v2/src/cli/simple-commands/hooks.js:1360:      output.tool_input.file_path = modifiedPath;
v2/src/cli/simple-commands/hooks.js:1362:      output.tool_input.path = modifiedPath;
v2/src/cli/simple-commands/hooks.js:1380:      console.log('Usage: echo \'{"tool_input":{"command":"git commit -m \\"message\\""}}\'  | claude-flow hooks modify-git-commit');
v2/src/cli/simple-commands/hooks.js:1384:      console.log('  echo \'{"tool_input":{"command":"git commit -m \\"fix bug\\""}}\'  | claude-flow hooks modify-git-commit');
v2/src/cli/simple-commands/hooks.js:1399:  const toolInput = JSON.parse(input);
v2/src/cli/simple-commands/hooks.js:1400:  const command = toolInput.tool_input?.command || '';
v2/src/cli/simple-commands/hooks.js:1464:    ...toolInput,
v2/src/cli/simple-commands/hooks.js:1465:    tool_input: {
v2/src/cli/simple-commands/hooks.js:1466:      ...toolInput.tool_input,
v2/src/cli/simple-commands/hooks.js:1500:  console.log('\nMCP Integration Hooks:');
v2/src/cli/simple-commands/hooks.js:1501:  console.log('  mcp-initialized    Persist MCP configuration');
v2/src/cli/simple-commands/hooks.js:1515:  console.log('  modify-bash        Modify Bash tool inputs (reads/writes JSON via stdin/stdout)');
v2/src/cli/simple-commands/hooks.js:1521:  console.log('  modify-file        Modify Write/Edit tool inputs (reads/writes JSON via stdin/stdout)');
v2/src/cli/simple-commands/hooks.js:1541:  console.log('  echo \'{"tool_input":{"command":"rm test.txt"}}\' | hooks modify-bash');
v2/src/cli/simple-commands/hooks.js:1542:  console.log('  echo \'{"tool_input":{"file_path":"test.js"}}\' | hooks modify-file');
v2/src/cli/simple-commands/hooks.js:1543:  console.log('  echo \'{"tool_input":{"command":"git commit -m \\"fix bug\\""}}\' | hooks modify-git-commit');
v2/src/cli/simple-commands/agent.ts:12:  const agent = new Command('agent')
v2/src/hive-mind/core/Memory.ts:11:import { MCPToolWrapper } from '../integration/MCPToolWrapper.js';
v2/src/hive-mind/core/Memory.ts:164:  private mcpWrapper: MCPToolWrapper;
v2/src/hive-mind/core/Memory.ts:218:    this.mcpWrapper = new MCPToolWrapper();
v2/src/hive-mind/core/Memory.ts:344:      // Async MCP storage (non-blocking)
v2/src/hive-mind/core/Memory.ts:456:      // Fallback to MCP memory (async, non-blocking)
v2/src/hive-mind/core/Memory.ts:616:    // Remove from MCP memory
v2/src/hive-mind/core/Memory.ts:746:    // Store backup using MCP
v2/src/cli/simple-commands/task.js:40:  const program = new Command()
v2/src/cli/simple-commands/task.js:142:  const program = new Command()
v2/src/cli/simple-commands/init/validation/config-validator.js:299:    const recommendedFields = ['description', 'persona', 'tools'];
v2/src/cli/simple-commands/init/validation/config-validator.js:307:    if ('tools' in modeConfig && !Array.isArray(modeConfig.tools)) {
v2/src/cli/simple-commands/init/validation/config-validator.js:308:      result.errors.push('tools must be an array');
v2/src/cli/simple-commands/stream-chain.js:338:    {"type":"tool_use","name":"...",...}       - Tool invocations
v2/src/cli/simple-commands/swarm-webui-integration.js:33:      // This would integrate with actual ruv-swarm MCP tools
v2/src/cli/simple-commands/swarm-webui-integration.js:48:   * Check if ruv-swarm MCP tools are available
v2/src/cli/simple-commands/swarm-webui-integration.js:52:      // This would check for actual MCP connection
v2/src/cli/utils.js:284:// Claude Flow MCP integration helpers
v2/src/cli/utils.js:285:export async function callRuvSwarmMCP(tool, params = {}) {
v2/src/cli/utils.js:287:    // First try real ruv-swarm MCP server
v2/src/cli/utils.js:291:    // Create JSON-RPC messages for ruv-swarm MCP
v2/src/cli/utils.js:298:        capabilities: { tools: {}, resources: {} },
v2/src/cli/utils.js:303:    const toolMessage = {
v2/src/cli/utils.js:306:      method: 'tools/call',
v2/src/cli/utils.js:308:        name: tool,
v2/src/cli/utils.js:314:    const messages = JSON.stringify(initMessage) + '\n' + JSON.stringify(toolMessage);
v2/src/cli/utils.js:317:    // Create a script that feeds the file to the REAL ruv-swarm MCP server
v2/src/cli/utils.js:341:          const toolResult = JSON.parse(response.result.content[0].text);
v2/src/cli/utils.js:342:          return toolResult;
v2/src/cli/utils.js:349:    // If MCP fails, use direct ruv-swarm CLI commands for neural training
v2/src/cli/utils.js:350:    if (tool === 'neural_train') {
v2/src/cli/utils.js:354:    // Always return realistic fallback data for other tools
v2/src/cli/utils.js:372:    if (tool === 'neural_train') {
v2/src/cli/utils.js:602:  return await callRuvSwarmMCP('neural_train', {
v2/src/cli/utils.js:611:  return await callRuvSwarmMCP('neural_patterns', {
v2/src/cli/utils.js:621:  return await callRuvSwarmMCP('swarm_status', {
v2/src/cli/utils.js:627:  return await callRuvSwarmMCP('agent_spawn', {
v2/src/cli/simple-commands/__tests__/agent.test.js:283:    test('should handle invalid subcommands', async () => {
v2/src/cli/simple-commands/fix-hook-variables.js:42:  tool: ['CLAUDE_TOOL', 'TOOL_NAME', 'TOOL'],
v2/src/cli/simple-commands/fix-hook-variables.js:78:      return `cat | jq -r '.tool_input.file_path // .tool_input.path // ""' | xargs -I {} ${baseCommand}`;
v2/src/cli/simple-commands/fix-hook-variables.js:82:      return `cat | jq -r '.tool_input.command // ""' | xargs -I {} ${baseCommand}`;
v2/src/cli/simple-commands/fix-hook-variables.js:164:    const commands = [];
v2/src/cli/simple-commands/fix-hook-variables.js:311:                'cat | jq -r \'.tool_input.file_path // .tool_input.path // ""\' | xargs -I {} echo "Hook test - File: {}" >> .claude/hook-test.log',
v2/src/cli/simple-commands/init/help.js:10:  console.log('                       Creates CLAUDE.md & .claude/commands for MCP integration');
v2/src/cli/simple-commands/init/help.js:35:  console.log('  --skip-mcp           Skip automatic MCP server setup in Claude Code');
v2/src/cli/simple-commands/init/help.js:100:  console.log('  ‚Ä¢ .claude/settings.local.json - Pre-approved MCP permissions (no prompts!)');
v2/src/cli/simple-commands/init/help.js:101:  console.log('  ‚Ä¢ .mcp.json - Project-scoped MCP server configuration');
v2/src/cli/simple-commands/init/help.js:109:  console.log('  ‚Ä¢ Automatic MCP server setup if Claude Code CLI is installed');
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:2:// optimized-claude-flow-commands.js - Batchtools-optimized Claude-Flow specific slash commands
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:4:// Create batchtools-optimized Claude-Flow specific commands
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:6:  // Help command with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:9:description: Show Claude-Flow commands and usage with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:12:# Claude-Flow Commands (Batchtools Optimized)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:18:**üöÄ Batchtools Enhancement**: All commands now include parallel processing capabilities, batch operations, and performance optimizations for maximum efficiency.
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:83:### üåç MCP Integration (Parallel)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:84:- \`./claude-flow mcp status\` - MCP server status
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:85:- \`./claude-flow mcp parallel-status\` - Check all MCP servers concurrently
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:86:- \`./claude-flow mcp tools\` - List available tools
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:88:- \`./claude-flow mcp logs\` - View MCP logs
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:96:### üöÄ Batchtools Commands (New)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:97:- \`./claude-flow batchtools status\` - Check batchtools system status
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:98:- \`./claude-flow batchtools monitor\` - Real-time performance monitoring
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:99:- \`./claude-flow batchtools optimize\` - System optimization recommendations
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:100:- \`./claude-flow batchtools benchmark\` - Performance benchmarking
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:101:- \`./claude-flow batchtools config\` - Batchtools configuration management
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:177:### Batchtools Performance Improvements
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:186:### Batchtools Configuration
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:189:  "batchtools": {
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:208:- Batchtools Guide: https://github.com/ruvnet/claude-code-flow/docs/batchtools.md
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:221:./claude-flow batchtools monitor --resources --detailed
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:230:./claude-flow batchtools optimize --auto-tune
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:233:./claude-flow batchtools benchmark --detailed --export
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:243:  console.log('  ‚úì Created optimized slash command: /claude-flow-help (Batchtools enhanced)');
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:245:  // Memory command with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:248:description: Interact with Claude-Flow memory system using batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:251:# üß† Claude-Flow Memory System (Batchtools Optimized)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:255:**üöÄ Batchtools Enhancement**: Enhanced with parallel processing capabilities, batch operations, and concurrent optimization for improved performance.
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:388:- **batchtools** - Batchtools operation data and optimization metrics
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:390:## üéØ Best Practices (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:417:## Examples (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:475:## üîß Configuration (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:477:### Memory Configuration with Batchtools
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:485:    "batchtools": {
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:512:./claude-flow memory analyze --batchtools --optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:530:For comprehensive memory system documentation and optimization guides, see: https://github.com/ruvnet/claude-code-flow/docs/memory-batchtools.md
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:534:  console.log('  ‚úì Created optimized slash command: /claude-flow-memory (Batchtools enhanced)');
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:536:  // Swarm command with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:539:description: Coordinate multi-agent swarms for complex tasks with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:542:# üêù Claude-Flow Swarm Coordination (Batchtools Optimized)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:546:**üöÄ Batchtools Enhancement**: Enhanced with parallel processing capabilities, batch operations, and concurrent optimization for maximum swarm efficiency.
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:581:## ‚öôÔ∏è Common Options (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:596:- \`--batch-optimize\` - Enable batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:600:## üåü Examples (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:722:### Batchtools Memory Operations
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:766:## üîß Advanced Configuration (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:783:### Batchtools Configuration
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:787:    "batchtools": {
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:844:./claude-flow swarm analyze --batchtools --optimization --detailed
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:864:### Batchtools Performance Improvements
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:871:For detailed documentation and optimization guides, see: https://github.com/ruvnet/claude-code-flow/docs/swarm-batchtools.md
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:875:  console.log('  ‚úì Created optimized slash command: /claude-flow-swarm (Batchtools enhanced)');
v2/src/cli/simple-commands/neural.js:94:## MCP Integration Examples
v2/src/cli/simple-commands/templates/mle-star-workflow.json:60:        "debugging_tools": ["profiling", "error_correction", "data_integrity_checks"]
v2/src/cli/simple-mcp.ts:2: * Simple MCP command implementation for Node.js compatibility
v2/src/cli/simple-mcp.ts:16:// Check if MCP server is running
v2/src/cli/simple-mcp.ts:17:async function checkMCPStatus(host: string, port: number): Promise<boolean> {
v2/src/cli/simple-mcp.ts:44:export function createMCPCommand() {
v2/src/cli/simple-mcp.ts:45:  const mcpCmd = new Command('mcp').description('Manage MCP server and tools').action(() => {
v2/src/cli/simple-mcp.ts:46:    printSuccess('MCP Server Management');
v2/src/cli/simple-mcp.ts:47:    console.log('\nüåê Available MCP commands:');
v2/src/cli/simple-mcp.ts:48:    console.log('  ‚Ä¢ mcp start - Start the MCP server');
v2/src/cli/simple-mcp.ts:49:    console.log('  ‚Ä¢ mcp status - Show MCP server status');
v2/src/cli/simple-mcp.ts:50:    console.log('  ‚Ä¢ mcp tools - List available MCP tools');
v2/src/cli/simple-mcp.ts:51:    console.log('  ‚Ä¢ mcp stop - Stop the MCP server');
v2/src/cli/simple-mcp.ts:57:    .description('Start the MCP server')
v2/src/cli/simple-mcp.ts:58:    .option('--port <port>', 'Port for MCP server', '3000')
v2/src/cli/simple-mcp.ts:59:    .option('--host <host>', 'Host for MCP server', 'localhost')
v2/src/cli/simple-mcp.ts:62:      // This is handled by the actual MCP implementation
v2/src/cli/simple-mcp.ts:63:      console.log('Starting MCP server...');
v2/src/cli/simple-mcp.ts:64:      console.log('(This command is handled by the MCP module)');
v2/src/cli/simple-mcp.ts:69:    .description('Show MCP server status')
v2/src/cli/simple-mcp.ts:73:      printSuccess('MCP Server Status:');
v2/src/cli/simple-mcp.ts:79:      const isRunning = await checkMCPStatus(host, port);
v2/src/cli/simple-mcp.ts:87:        console.log('\nüí° Use "mcp tools" to see available tools');
v2/src/cli/simple-mcp.ts:97:    .command('tools')
v2/src/cli/simple-mcp.ts:98:    .description('List available MCP tools')
v2/src/cli/simple-mcp.ts:100:      printSuccess('Available MCP Tools:');
v2/src/cli/simple-mcp.ts:105:      console.log('  ‚Ä¢ tools/list - List all available tools');
v2/src/cli/simple-mcp.ts:106:      console.log('  ‚Ä¢ tools/schema - Get schema for a specific tool');
v2/src/cli/simple-mcp.ts:107:      console.log('\nüí° Note: Additional tools available when orchestrator is running');
v2/src/cli/simple-mcp.ts:112:    .description('Stop the MCP server')
v2/src/cli/simple-mcp.ts:114:      printSuccess('Stopping MCP server...');
v2/src/cli/simple-mcp.ts:115:      console.log('üõë MCP server stop requested');
v2/src/cli/simple-commands/tool-execution-framework.js:3: * Provides unified interface for executing all Claude-Flow MCP tools
v2/src/cli/simple-commands/tool-execution-framework.js:7:import MCPIntegrationLayer from './mcp-integration-layer.js';
v2/src/cli/simple-commands/tool-execution-framework.js:12:    this.mcpLayer = new MCPIntegrationLayer(ui);
v2/src/cli/simple-commands/tool-execution-framework.js:22:   * Initialize result formatters for different tool types
v2/src/cli/simple-commands/tool-execution-framework.js:25:    // Swarm tools formatters
v2/src/cli/simple-commands/tool-execution-framework.js:81:    // Default formatter for unknown tools
v2/src/cli/simple-commands/tool-execution-framework.js:83:      title: `Tool: ${result.tool || 'Unknown'}`,
v2/src/cli/simple-commands/tool-execution-framework.js:93:   * Execute a single tool with comprehensive tracking
v2/src/cli/simple-commands/tool-execution-framework.js:95:  async executeTool(toolName, parameters = {}, options = {}) {
v2/src/cli/simple-commands/tool-execution-framework.js:97:      // Validate tool exists
v2/src/cli/simple-commands/tool-execution-framework.js:98:      if (!this.isToolAvailable(toolName)) {
v2/src/cli/simple-commands/tool-execution-framework.js:99:        throw new Error(`Tool "${toolName}" is not available`);
v2/src/cli/simple-commands/tool-execution-framework.js:105:        toolName,
v2/src/cli/simple-commands/tool-execution-framework.js:116:        this.ui.addLog('info', `Tool ${toolName} queued (${this.executionQueue.length} in queue)`);
v2/src/cli/simple-commands/tool-execution-framework.js:123:      this.ui.addLog('error', `Failed to execute ${toolName}: ${error.message}`);
v2/src/cli/simple-commands/tool-execution-framework.js:129:   * Execute tool directly
v2/src/cli/simple-commands/tool-execution-framework.js:137:      this.ui.addLog('info', `Executing ${execution.toolName}...`);
v2/src/cli/simple-commands/tool-execution-framework.js:139:      // Execute via MCP layer
v2/src/cli/simple-commands/tool-execution-framework.js:141:        execution.toolName,
v2/src/cli/simple-commands/tool-execution-framework.js:147:      const formattedResult = this.formatResult(execution.toolName, result.result);
v2/src/cli/simple-commands/tool-execution-framework.js:156:      this.ui.addLog('success', `${execution.toolName} completed in ${execution.duration}ms`);
v2/src/cli/simple-commands/tool-execution-framework.js:167:      this.ui.addLog('error', `${execution.toolName} failed: ${error.message}`);
v2/src/cli/simple-commands/tool-execution-framework.js:189:   * Execute multiple tools in batch
v2/src/cli/simple-commands/tool-execution-framework.js:191:  async executeToolsBatch(toolExecutions, options = {}) {
v2/src/cli/simple-commands/tool-execution-framework.js:195:    this.ui.addLog('info', `Starting batch execution: ${toolExecutions.length} tools`);
v2/src/cli/simple-commands/tool-execution-framework.js:200:        const promises = toolExecutions.map(({ toolName, parameters, toolOptions }) =>
v2/src/cli/simple-commands/tool-execution-framework.js:201:          this.executeTool(toolName, parameters, toolOptions),
v2/src/cli/simple-commands/tool-execution-framework.js:213:              toolName: toolExecutions[index].toolName,
v2/src/cli/simple-commands/tool-execution-framework.js:219:        for (let i = 0; i < toolExecutions.length; i++) {
v2/src/cli/simple-commands/tool-execution-framework.js:220:          const { toolName, parameters, toolOptions } = toolExecutions[i];
v2/src/cli/simple-commands/tool-execution-framework.js:223:            const execution = await this.executeTool(toolName, parameters, toolOptions);
v2/src/cli/simple-commands/tool-execution-framework.js:230:                total: toolExecutions.length,
v2/src/cli/simple-commands/tool-execution-framework.js:231:                progress: ((i + 1) / toolExecutions.length) * 100,
v2/src/cli/simple-commands/tool-execution-framework.js:232:                currentTool: toolName,
v2/src/cli/simple-commands/tool-execution-framework.js:239:              toolName,
v2/src/cli/simple-commands/tool-execution-framework.js:272:   * Execute workflow (sequence of dependent tools)
v2/src/cli/simple-commands/tool-execution-framework.js:289:        const execution = await this.executeTool(step.toolName, resolvedParameters, step.options);
v2/src/cli/simple-commands/tool-execution-framework.js:300:          throw new Error(`Required step ${step.toolName} failed: ${execution.error}`);
v2/src/cli/simple-commands/tool-execution-framework.js:309:            currentStep: step.toolName,
v2/src/cli/simple-commands/tool-execution-framework.js:358:   * Format tool result for display
v2/src/cli/simple-commands/tool-execution-framework.js:360:  formatResult(toolName, result) {
v2/src/cli/simple-commands/tool-execution-framework.js:361:    const formatter = this.resultFormatters.get(toolName) || this.resultFormatters.get('default');
v2/src/cli/simple-commands/tool-execution-framework.js:366:   * Check if tool is available
v2/src/cli/simple-commands/tool-execution-framework.js:368:  isToolAvailable(toolName) {
v2/src/cli/simple-commands/tool-execution-framework.js:369:    const allTools = Object.values(this.mcpLayer.toolCategories).flat();
v2/src/cli/simple-commands/tool-execution-framework.js:370:    return allTools.includes(toolName);
v2/src/cli/simple-commands/tool-execution-framework.js:374:   * Get tools by category
v2/src/cli/simple-commands/tool-execution-framework.js:410:    // Cancel running execution via MCP layer
v2/src/cli/simple-commands/tool-execution-framework.js:424:            toolName: 'neural_train',
v2/src/cli/simple-commands/tool-execution-framework.js:434:            toolName: 'neural_predict',
v2/src/cli/simple-commands/tool-execution-framework.js:443:            toolName: 'neural_explain',
v2/src/cli/simple-commands/tool-execution-framework.js:458:            toolName: 'swarm_init',
v2/src/cli/simple-commands/tool-execution-framework.js:468:            toolName: 'agent_spawn',
v2/src/cli/simple-commands/tool-execution-framework.js:476:            toolName: 'agent_spawn',
v2/src/cli/simple-commands/tool-execution-framework.js:484:            toolName: 'swarm_monitor',
v2/src/cli/simple-commands/tool-execution-framework.js:499:            toolName: 'performance_report',
v2/src/cli/simple-commands/tool-execution-framework.js:508:            toolName: 'bottleneck_analyze',
v2/src/cli/simple-commands/tool-execution-framework.js:516:            toolName: 'trend_analysis',
v2/src/cli/simple-commands/tool-execution-framework.js:549:      availableTools: Object.values(this.mcpLayer.toolCategories).flat().length,
v2/src/cli/simple-commands/tool-execution-framework.js:3: * Provides unified interface for executing all Claude-Flow MCP tools
v2/src/cli/simple-commands/tool-execution-framework.js:7:import MCPIntegrationLayer from './mcp-integration-layer.js';
v2/src/cli/simple-commands/tool-execution-framework.js:12:    this.mcpLayer = new MCPIntegrationLayer(ui);
v2/src/cli/simple-commands/tool-execution-framework.js:22:   * Initialize result formatters for different tool types
v2/src/cli/simple-commands/tool-execution-framework.js:25:    // Swarm tools formatters
v2/src/cli/simple-commands/tool-execution-framework.js:81:    // Default formatter for unknown tools
v2/src/cli/simple-commands/tool-execution-framework.js:83:      title: `Tool: ${result.tool || 'Unknown'}`,
v2/src/cli/simple-commands/tool-execution-framework.js:93:   * Execute a single tool with comprehensive tracking
v2/src/cli/simple-commands/tool-execution-framework.js:95:  async executeTool(toolName, parameters = {}, options = {}) {
v2/src/cli/simple-commands/tool-execution-framework.js:97:      // Validate tool exists
v2/src/cli/simple-commands/tool-execution-framework.js:98:      if (!this.isToolAvailable(toolName)) {
v2/src/cli/simple-commands/tool-execution-framework.js:99:        throw new Error(`Tool "${toolName}" is not available`);
v2/src/cli/simple-commands/tool-execution-framework.js:105:        toolName,
v2/src/cli/simple-commands/tool-execution-framework.js:116:        this.ui.addLog('info', `Tool ${toolName} queued (${this.executionQueue.length} in queue)`);
v2/src/cli/simple-commands/tool-execution-framework.js:123:      this.ui.addLog('error', `Failed to execute ${toolName}: ${error.message}`);
v2/src/cli/simple-commands/tool-execution-framework.js:129:   * Execute tool directly
v2/src/cli/simple-commands/tool-execution-framework.js:137:      this.ui.addLog('info', `Executing ${execution.toolName}...`);
v2/src/cli/simple-commands/tool-execution-framework.js:139:      // Execute via MCP layer
v2/src/cli/simple-commands/tool-execution-framework.js:141:        execution.toolName,
v2/src/cli/simple-commands/tool-execution-framework.js:147:      const formattedResult = this.formatResult(execution.toolName, result.result);
v2/src/cli/simple-commands/tool-execution-framework.js:156:      this.ui.addLog('success', `${execution.toolName} completed in ${execution.duration}ms`);
v2/src/cli/simple-commands/tool-execution-framework.js:167:      this.ui.addLog('error', `${execution.toolName} failed: ${error.message}`);
v2/src/cli/simple-commands/tool-execution-framework.js:189:   * Execute multiple tools in batch
v2/src/cli/simple-commands/tool-execution-framework.js:191:  async executeToolsBatch(toolExecutions, options = {}) {
v2/src/cli/simple-commands/tool-execution-framework.js:195:    this.ui.addLog('info', `Starting batch execution: ${toolExecutions.length} tools`);
v2/src/cli/simple-commands/tool-execution-framework.js:200:        const promises = toolExecutions.map(({ toolName, parameters, toolOptions }) =>
v2/src/cli/simple-commands/tool-execution-framework.js:201:          this.executeTool(toolName, parameters, toolOptions),
v2/src/cli/simple-commands/tool-execution-framework.js:213:              toolName: toolExecutions[index].toolName,
v2/src/cli/simple-commands/tool-execution-framework.js:219:        for (let i = 0; i < toolExecutions.length; i++) {
v2/src/cli/simple-commands/tool-execution-framework.js:220:          const { toolName, parameters, toolOptions } = toolExecutions[i];
v2/src/cli/simple-commands/tool-execution-framework.js:223:            const execution = await this.executeTool(toolName, parameters, toolOptions);
v2/src/cli/simple-commands/tool-execution-framework.js:230:                total: toolExecutions.length,
v2/src/cli/simple-commands/tool-execution-framework.js:231:                progress: ((i + 1) / toolExecutions.length) * 100,
v2/src/cli/simple-commands/tool-execution-framework.js:232:                currentTool: toolName,
v2/src/cli/simple-commands/tool-execution-framework.js:239:              toolName,
v2/src/cli/simple-commands/tool-execution-framework.js:272:   * Execute workflow (sequence of dependent tools)
v2/src/cli/simple-commands/tool-execution-framework.js:289:        const execution = await this.executeTool(step.toolName, resolvedParameters, step.options);
v2/src/cli/simple-commands/tool-execution-framework.js:300:          throw new Error(`Required step ${step.toolName} failed: ${execution.error}`);
v2/src/cli/simple-commands/tool-execution-framework.js:309:            currentStep: step.toolName,
v2/src/cli/simple-commands/tool-execution-framework.js:358:   * Format tool result for display
v2/src/cli/simple-commands/tool-execution-framework.js:360:  formatResult(toolName, result) {
v2/src/cli/simple-commands/tool-execution-framework.js:361:    const formatter = this.resultFormatters.get(toolName) || this.resultFormatters.get('default');
v2/src/cli/simple-commands/tool-execution-framework.js:366:   * Check if tool is available
v2/src/cli/simple-commands/tool-execution-framework.js:368:  isToolAvailable(toolName) {
v2/src/cli/simple-commands/tool-execution-framework.js:369:    const allTools = Object.values(this.mcpLayer.toolCategories).flat();
v2/src/cli/simple-commands/tool-execution-framework.js:370:    return allTools.includes(toolName);
v2/src/cli/simple-commands/tool-execution-framework.js:374:   * Get tools by category
v2/src/cli/simple-commands/tool-execution-framework.js:410:    // Cancel running execution via MCP layer
v2/src/cli/simple-commands/tool-execution-framework.js:424:            toolName: 'neural_train',
v2/src/cli/simple-commands/tool-execution-framework.js:434:            toolName: 'neural_predict',
v2/src/cli/simple-commands/tool-execution-framework.js:443:            toolName: 'neural_explain',
v2/src/cli/simple-commands/tool-execution-framework.js:458:            toolName: 'swarm_init',
v2/src/cli/simple-commands/tool-execution-framework.js:468:            toolName: 'agent_spawn',
v2/src/cli/simple-commands/tool-execution-framework.js:476:            toolName: 'agent_spawn',
v2/src/cli/simple-commands/tool-execution-framework.js:484:            toolName: 'swarm_monitor',
v2/src/cli/simple-commands/tool-execution-framework.js:499:            toolName: 'performance_report',
v2/src/cli/simple-commands/tool-execution-framework.js:508:            toolName: 'bottleneck_analyze',
v2/src/cli/simple-commands/tool-execution-framework.js:516:            toolName: 'trend_analysis',
v2/src/cli/simple-commands/tool-execution-framework.js:549:      availableTools: Object.values(this.mcpLayer.toolCategories).flat().length,
v2/src/hive-mind/core/Queen.ts:12:import { MCPToolWrapper } from '../integration/MCPToolWrapper.js';
v2/src/hive-mind/core/Queen.ts:36:  private mcpWrapper: MCPToolWrapper;
v2/src/hive-mind/core/Queen.ts:54:    this.mcpWrapper = new MCPToolWrapper();
v2/src/hive-mind/core/Queen.ts:85:  async registerAgent(agent: Agent): Promise<void> {
v2/src/hive-mind/core/Queen.ts:128:    // Use MCP neural capabilities for decision making
v2/src/hive-mind/core/Queen.ts:531:    // Use MCP tools to analyze task complexity and requirements
v2/src/hive-mind/core/Queen.ts:551:        registeredAt: new Date(),
v2/src/hive-mind/core/Queen.ts:565:        type: 'agent_registered',
v2/src/cli/simple-commands/process-ui-enhanced.js:25:  { id: 'mcp-server', name: 'MCP Server', description: 'Model Context Protocol server' },
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:42:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:54:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:56:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:77:### Using MCP Tools (Preferred)
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:106:// Helper function to get tool descriptions
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:107:function getToolDescription(tool) {
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:108:  const toolDescriptions = {
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:112:    mcp: 'Model Context Protocol tools',
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:115:  return toolDescriptions[tool] || 'Tool access';
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:172:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:194:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:230:### Using MCP Tools (Preferred)
v2/src/cli/simple-commands/hive-mind.js:62:// Import MCP tool wrappers
v2/src/cli/simple-commands/hive-mind.js:63:import { MCPToolWrapper } from './hive-mind/mcp-wrapper.js';
v2/src/cli/simple-commands/hive-mind.js:918:    // Enhanced coordination instructions with MCP tools
v2/src/cli/simple-commands/hive-mind.js:2085:    console.log(chalk.gray('Note: Individual memory deletion not yet implemented in MCPWrapper.'));
v2/src/cli/simple-commands/hive-mind.js:2185:    console.log(chalk.cyan('MCP Tools:'), 'Full Claude-Flow integration enabled');
v2/src/cli/simple-commands/hive-mind.js:2345:          chalk.blue('  Use MCP tools for collective intelligence and task distribution'),
v2/src/cli/simple-commands/hive-mind.js:2416:üîß AVAILABLE MCP TOOLS FOR HIVE MIND COORDINATION:
v2/src/cli/simple-commands/hive-mind.js:2454:   Step 1: Optional MCP Coordination Setup (Single Message):
v2/src/cli/simple-commands/hive-mind.js:2455:   [MCP Tools - Coordination Only]:
v2/src/cli/simple-commands/hive-mind.js:2565:The Hive Mind MUST use Claude Code's Task tool for actual agent execution:
v2/src/cli/simple-commands/hive-mind.js:2582:- Use Claude Code's Task tool to spawn ALL agents in ONE message
v2/src/cli/simple-commands/hive-mind.js:2583:- MCP tools are ONLY for coordination setup, not agent execution
v2/src/cli/simple-commands/hive-mind.js:3273: * Get MCP wrapper instance
v2/src/cli/simple-commands/hive-mind.js:3276:  const { MCPToolWrapper } = await import('./hive-mind/mcp-wrapper.js');
v2/src/cli/simple-commands/hive-mind.js:3277:  return new MCPToolWrapper();
v2/src/hive-mind/core/HiveMind.ts:216:    await this.queen.registerAgent(agent);
v2/src/cli/simple-commands/analysis.js:5:  callRuvSwarmMCP,
v2/src/cli/simple-commands/process-ui.js:21:  { id: 'mcp-server', name: 'MCP Server', description: 'Model Context Protocol server' },
v2/src/cli/simple-commands/github/init.js:26:    local tool_input="$1"
v2/src/cli/simple-commands/github/init.js:27:    local file=$(echo "$tool_input" | jq -r '.file_path // empty')
v2/src/cli/simple-commands/github/init.js:59:    local tool_input="$1"
v2/src/cli/simple-commands/github/init.js:60:    local file=$(echo "$tool_input" | jq -r '.file_path // empty')
v2/src/cli/simple-commands/github/init.js:316:              command: 'cat | jq -r \'.tool_input.command // empty\' | tr \'\\n\' \'\\0\' | xargs -0 -I {} npx claude-flow@alpha hooks pre-command --command \'{}\' --validate-safety true --prepare-resources true'
v2/src/cli/simple-commands/github/init.js:325:              command: 'cat | jq -r \'.tool_input.file_path // .tool_input.path // empty\' | tr \'\\n\' \'\\0\' | xargs -0 -I {} npx claude-flow@alpha hooks pre-edit --file \'{}\' --auto-assign-agents true --load-context true'
v2/src/cli/simple-commands/github/init.js:329:              command: 'bash .claude/helpers/github-checkpoint-hooks.sh pre-edit "{{tool_input}}"'
v2/src/cli/simple-commands/github/init.js:340:              command: 'cat | jq -r \'.tool_input.command // empty\' | tr \'\\n\' \'\\0\' | xargs -0 -I {} npx claude-flow@alpha hooks post-command --command \'{}\' --track-metrics true --store-results true'
v2/src/cli/simple-commands/github/init.js:349:              command: 'cat | jq -r \'.tool_input.file_path // .tool_input.path // empty\' | tr \'\\n\' \'\\0\' | xargs -0 -I {} npx claude-flow@alpha hooks post-edit --file \'{}\' --format true --update-memory true'
v2/src/cli/simple-commands/github/init.js:353:              command: 'bash .claude/helpers/github-checkpoint-hooks.sh post-edit "{{tool_input}}"'
v2/src/cli/simple-commands/github/init.js:388:              command: '/bin/bash -c \'INPUT=$(cat); CUSTOM=$(echo "$INPUT" | jq -r ".custom_instructions // \"\""); echo "üîÑ PreCompact Guidance:"; echo "üìã IMPORTANT: Review CLAUDE.md in project root for:"; echo "   ‚Ä¢ 54 available agents and concurrent usage patterns"; echo "   ‚Ä¢ Swarm coordination strategies (hierarchical, mesh, adaptive)"; echo "   ‚Ä¢ SPARC methodology workflows with batchtools optimization"; echo "   ‚Ä¢ Critical concurrent execution rules (GOLDEN RULE: 1 MESSAGE = ALL OPERATIONS)"; if [ -n "$CUSTOM" ]; then echo "üéØ Custom compact instructions: $CUSTOM"; fi; echo "‚úÖ Ready for compact operation"\''
v2/src/cli/simple-commands/github/init.js:397:              command: '/bin/bash -c \'echo "üîÑ Auto-Compact Guidance (Context Window Full):"; echo "üìã CRITICAL: Before compacting, ensure you understand:"; echo "   ‚Ä¢ All 54 agents available in .claude/agents/ directory"; echo "   ‚Ä¢ Concurrent execution patterns from CLAUDE.md"; echo "   ‚Ä¢ Batchtools optimization for 300% performance gains"; echo "   ‚Ä¢ Swarm coordination strategies for complex tasks"; echo "‚ö° Apply GOLDEN RULE: Always batch operations in single messages"; echo "‚úÖ Auto-compact proceeding with full agent context"\''
v2/src/cli/simple-commands/hive-mind/communication.js:93:  registerAgent(agentId, metadata = {}) {
v2/src/cli/simple-commands/hive-mind/communication.js:115:    this.emit('agent:registered', agent);
v2/src/cli/simple-commands/hive-mind/communication.js:120:   * Unregister agent from network
v2/src/cli/simple-commands/hive-mind/communication.js:122:  unregisterAgent(agentId) {
v2/src/cli/simple-commands/hive-mind/communication.js:144:    this.emit('agent:unregistered', { agentId });
v2/src/cli/simple-commands/init/index.js:99: * Set up MCP servers in Claude Code
v2/src/cli/simple-commands/init/index.js:102:  console.log('\nüîå Setting up MCP servers for Claude Code...');
v2/src/cli/simple-commands/init/index.js:108:      description: 'Claude Flow MCP server with swarm orchestration (alpha)',
v2/src/cli/simple-commands/init/index.js:113:      description: 'ruv-swarm MCP server for enhanced coordination',
v2/src/cli/simple-commands/init/index.js:118:      description: 'Flow Nexus Complete MCP server for advanced AI orchestration',
v2/src/cli/simple-commands/init/index.js:140:    console.log('\n  üìã Verifying MCP servers...');
v2/src/cli/simple-commands/init/index.js:144:      console.log('  ‚ö†Ô∏è  Could not verify MCP servers');
v2/src/cli/simple-commands/init/index.js:557:            (initOptimized ? ' (Batchtools-optimized)' : ''),
v2/src/cli/simple-commands/init/index.js:617:        `  ‚Ä¢ Configuration: ${initOptimized ? 'Batchtools-optimized SPARC' : initSparc ? 'SPARC-enhanced' : 'Standard'}`,
v2/src/cli/simple-commands/init/index.js:632:        console.log('  ‚Ä¢ Batchtools optimization: Enabled for parallel processing');
v2/src/cli/simple-commands/init/index.js:640:        console.log('\n‚ö° Batchtools Optimization Enabled!');
v2/src/cli/simple-commands/init/index.js:648:        `  ‚úÖ CLAUDE.md (${initOptimized ? 'Batchtools-optimized' : initSparc ? 'SPARC-enhanced' : 'Standard configuration'})`,
v2/src/cli/simple-commands/init/index.js:654:        `  ‚úÖ coordination.md (${initOptimized ? 'Enhanced with batchtools' : 'Standard coordination'})`,
v2/src/cli/simple-commands/init/index.js:681:          console.log('8. Use batchtools commands: /batchtools, /performance for optimization');
v2/src/cli/simple-commands/init/index.js:735:      // Check for Claude Code and set up MCP servers (always enabled by default)
v2/src/cli/simple-commands/init/index.js:743:          console.log('  ‚ÑπÔ∏è  Skipping MCP setup (--skip-mcp flag used)');
v2/src/cli/simple-commands/init/index.js:748:        console.log('  üìã Then add MCP servers manually with:');
v2/src/cli/simple-commands/init/index.js:1379:      printSuccess('‚úì Created .claude/settings.json with hooks and MCP configuration');
v2/src/cli/simple-commands/init/index.js:1421:    // Create settings.local.json with default MCP permissions
v2/src/cli/simple-commands/init/index.js:1433:      printSuccess('‚úì Created .claude/settings.local.json with default MCP permissions');
v2/src/cli/simple-commands/init/index.js:1436:        '[DRY RUN] Would create .claude/settings.local.json with default MCP permissions',
v2/src/cli/simple-commands/init/index.js:1440:    // Create .mcp.json at project root for MCP server configuration
v2/src/cli/simple-commands/init/index.js:1463:      printSuccess('‚úì Created .mcp.json at project root for MCP server configuration');
v2/src/cli/simple-commands/init/index.js:1465:      console.log('[DRY RUN] Would create .mcp.json at project root for MCP server configuration');
v2/src/cli/simple-commands/init/index.js:1723:    // Check for Claude Code and set up MCP servers (always enabled by default)
v2/src/cli/simple-commands/init/index.js:1733:        console.log('  ‚ÑπÔ∏è  Skipping MCP setup (--skip-mcp flag used)');
v2/src/cli/simple-commands/init/index.js:1734:        console.log('\n  üìã To add MCP servers manually:');
v2/src/cli/simple-commands/init/index.js:1738:        console.log('\n  üí° MCP servers are defined in .mcp.json (project scope)');
v2/src/cli/simple-commands/init/index.js:1744:      console.log('\n  üìã After installing, add MCP servers:');
v2/src/cli/simple-commands/init/index.js:1748:      console.log('\n  üí° MCP servers are defined in .mcp.json (project scope)');
v2/src/cli/simple-commands/init/index.js:1870:      console.log('4. Use MCP tools in Claude Code for enhanced coordination');
v2/src/cli/simple-commands/init/index.js:1876:      console.log('2. Add MCP servers (see instructions above)');
v2/src/cli/simple-commands/init/index.js:1991:    console.log('  1. Register: mcp__flow-nexus__user_register({ email, password })');
v2/src/cli/simple-commands/init/index.js:1995:    console.log('üîó Use Flow Nexus MCP tools in Claude Code for full functionality');
v2/src/cli/simple-commands/hive-mind/auto-save-middleware.js:227:  registerChildProcess(childProcess) {
v2/src/cli/simple-commands/config.ts:11:  const config = new Command('config')
v2/src/cli/simple-commands/config.ts:11:  const config = new Command('config')
v2/src/cli/simple-commands/coordination.js:5:  callRuvSwarmMCP,
v2/src/cli/simple-commands/coordination.js:65:      const swarmResult = await callRuvSwarmMCP('swarm_init', {
v2/src/hive-mind/core/Agent.ts:11:import { MCPToolWrapper } from '../integration/MCPToolWrapper.js';
v2/src/hive-mind/core/Agent.ts:35:  private mcpWrapper: MCPToolWrapper;
v2/src/hive-mind/core/Agent.ts:60:    this.mcpWrapper = new MCPToolWrapper();
v2/src/hive-mind/core/Agent.ts:191:    // Use MCP tools based on phase and agent capabilities
v2/src/cli/commands/swarm.ts:181:      const agentId = await coordinator.registerAgent(
v2/src/cli/commands/swarm.ts:453:${task.type === 'research' ? 'Use web search and research tools as needed.' : ''}
v2/src/cli/commands/swarm.ts:464:      let tools = 'View,GlobTool,GrepTool,LS';
v2/src/cli/commands/swarm.ts:466:        tools = 'WebFetchTool,WebSearch';
v2/src/cli/commands/swarm.ts:468:        tools = 'View,Edit,Replace,GlobTool,GrepTool,LS,Bash';
v2/src/cli/commands/swarm.ts:477:        tools,
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:1:// optimized-sparc-commands.js - Batchtools-optimized SPARC-specific slash commands
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:3:// Create batchtools-optimized SPARC mode slash command
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:13:description: ${mode.name} - ${fullDescription} (Batchtools Optimized)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:16:# ${mode.name} (Batchtools Optimized)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:21:**üöÄ Batchtools Enhancement**: This mode includes parallel processing capabilities, batch operations, and concurrent optimization for improved performance and efficiency.
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:26:### Batchtools Optimization Strategies
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:27:- **Parallel Operations**: Execute independent tasks simultaneously using batchtools
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:46:            return `- **${g[0]}**: ${g[1]?.description || getOptimizedToolDescription(g[0])} ${g[1]?.fileRegex ? `(Files matching: ${g[1].fileRegex})` : ''} - *Batchtools enabled*`;
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:54:### Batchtools Integration
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:60:## Usage (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:80:# Non-interactive mode with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:84:### Batchtools Operations
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:119:### Batchtools Memory Operations
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:151:## Batchtools Best Practices for ${mode.name}
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:155:- ${getBatchtoolsPractices(mode.slug).parallel.join('\n- ')}
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:158:- ${getBatchtoolsPractices(mode.slug).optimization.join('\n- ')}
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:161:- ${getBatchtoolsPractices(mode.slug).performance.join('\n- ')}
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:176:# Execute complete workflow with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:180:For detailed ${mode.name} documentation and batchtools integration guides, see: 
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:182:- Batchtools Integration: https://github.com/ruvnet/claude-code-flow/docs/batchtools-${mode.slug}.md
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:186:// Helper function to get optimized tool descriptions
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:187:function getOptimizedToolDescription(tool) {
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:188:  const toolDescriptions = {
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:192:    mcp: 'Model Context Protocol tools with parallel communication',
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:195:  return toolDescriptions[tool] || 'Tool access with batchtools optimization';
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:220:  return examples[slug] || 'implement feature with batchtools optimization';
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:223:// Helper function to get batchtools best practices for specific modes
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:224:function getBatchtoolsPractices(slug) {
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:315:    .map((m) => `- \`/sparc-${m.slug}\` - ${m.name} (Batchtools optimized)`)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:327:description: Execute SPARC methodology workflows with Claude-Flow and batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:330:# ‚ö°Ô∏è SPARC Development Methodology (Batchtools Optimized)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:334:**üöÄ Batchtools Enhancement**: This configuration includes parallel processing capabilities, batch operations, and concurrent optimization for improved performance and efficiency across all SPARC modes.
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:340:### Batchtools Integration
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:346:## Available SPARC Modes (Batchtools Optimized)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:372:## SPARC Methodology Phases (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:408:## Advanced Swarm Mode (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:439:./claude-flow sparc analyze --batchtools --optimization --detailed
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:454:## Best Practices (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:466:### Batchtools Performance Improvements
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:494:See \`/claude-flow-help\` for all available commands and \`/batchtools\` for detailed parallel processing documentation.
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:496:For comprehensive SPARC and batchtools documentation, see:
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:498:- Batchtools Documentation: https://github.com/ruvnet/claude-code-flow/docs/batchtools.md
v2/src/cli/simple-commands/hook-safety.js:389:        solution: 'Use PostToolUse for specific tools',
v2/src/cli/simple-commands/hook-safety.js:521:    console.log('2. Use PostToolUse hooks for specific tools');
v2/src/cli/simple-commands/init/templates/CLAUDE.md:1:# Claude Code Configuration - SPARC Development Environment (Batchtools Optimized)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:9:2. **Task tool**: ALWAYS spawn ALL agents in ONE message with full instructions
v2/src/cli/simple-commands/init/templates/CLAUDE.md:59:**üöÄ Batchtools Optimization Enabled**: This configuration includes optimized prompts and parallel processing capabilities for improved performance and efficiency.
v2/src/cli/simple-commands/init/templates/CLAUDE.md:69:### Batchtools Commands (Optimized)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:80:## SPARC Methodology Workflow (Batchtools Enhanced)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:87:**Batchtools Optimization**: Simultaneously analyze multiple requirement sources, validate constraints in parallel, and generate comprehensive specifications.
v2/src/cli/simple-commands/init/templates/CLAUDE.md:94:**Batchtools Optimization**: Process multiple algorithm patterns concurrently, validate logic flows in parallel, and optimize data structures simultaneously.
v2/src/cli/simple-commands/init/templates/CLAUDE.md:101:**Batchtools Optimization**: Generate multiple architectural alternatives simultaneously, validate integration points in parallel, and create comprehensive documentation concurrently.
v2/src/cli/simple-commands/init/templates/CLAUDE.md:108:**Batchtools Optimization**: Generate multiple test scenarios simultaneously, implement and validate code in parallel, and optimize performance concurrently.
v2/src/cli/simple-commands/init/templates/CLAUDE.md:115:**Batchtools Optimization**: Run integration tests in parallel, generate documentation concurrently, and validate requirements simultaneously.
v2/src/cli/simple-commands/init/templates/CLAUDE.md:117:## Batchtools Integration Features
v2/src/cli/simple-commands/init/templates/CLAUDE.md:133:### Batchtools Performance Improvements
v2/src/cli/simple-commands/init/templates/CLAUDE.md:140:## Code Style and Best Practices (Batchtools Enhanced)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:142:### SPARC Development Principles with Batchtools
v2/src/cli/simple-commands/init/templates/CLAUDE.md:149:### Batchtools Best Practices
v2/src/cli/simple-commands/init/templates/CLAUDE.md:150:- **Parallel Operations**: Use batchtools for independent tasks
v2/src/cli/simple-commands/init/templates/CLAUDE.md:163:- Claude Code slash commands provide quick access to batchtools-optimized SPARC modes
v2/src/cli/simple-commands/init/templates/CLAUDE.md:170:**CRITICAL**: Always spawn multiple agents concurrently using the Task tool in a single message:
v2/src/cli/simple-commands/init/templates/CLAUDE.md:325:For more information about SPARC methodology and batchtools optimization, see: 
v2/src/cli/simple-commands/init/templates/CLAUDE.md:327:- Batchtools Documentation: https://github.com/ruvnet/claude-code-flow/docs/batchtools.md
v2/src/cli/simple-commands/init/templates/CLAUDE.md:368:### üß† Claude Flow MCP Tools ONLY Handle:
v2/src/cli/simple-commands/init/templates/CLAUDE.md:379:**‚ùå MCP Tools NEVER:**
v2/src/cli/simple-commands/init/templates/CLAUDE.md:389:**‚úÖ MCP Tools ONLY:**
v2/src/cli/simple-commands/init/templates/CLAUDE.md:399:**MCP tools coordinate, Claude Code executes.** Think of MCP tools as the "brain" that plans and coordinates, while Claude Code is the "hands" that do all the actual work.
v2/src/cli/simple-commands/init/templates/CLAUDE.md:405:1. **MCP**: `mcp__claude-flow__swarm_init` (coordination setup)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:406:2. **MCP**: `mcp__claude-flow__agent_spawn` (planning agents)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:407:3. **MCP**: `mcp__claude-flow__task_orchestrate` (task coordination)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:408:4. **Claude Code**: `Task` tool to spawn agents with coordination instructions
v2/src/cli/simple-commands/init/templates/CLAUDE.md:411:7. **MCP**: `mcp__claude-flow__memory_usage` (store results)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:415:1. **MCP**: `mcp__claude-flow__terminal_execute` (DON'T DO THIS)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:416:2. **MCP**: File creation via MCP (DON'T DO THIS)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:417:3. **MCP**: Code generation via MCP (DON'T DO THIS)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:423:- **MCP tools** = Coordination, planning, memory, intelligence
v2/src/cli/simple-commands/init/templates/CLAUDE.md:433:2. **ALWAYS** combine multiple tool calls in ONE message
v2/src/cli/simple-commands/init/templates/CLAUDE.md:447:2. **Task** tool calls MUST be batched - spawn multiple agents in ONE message
v2/src/cli/simple-commands/init/templates/CLAUDE.md:457:  // MCP coordination setup
v2/src/cli/simple-commands/init/templates/CLAUDE.md:519:## üöÄ Quick Setup (Stdio MCP - Recommended)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:521:### 1. Add MCP Server (Stdio - No Port Needed)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:524:# Add Claude Flow MCP server to Claude Code using stdio
v2/src/cli/simple-commands/init/templates/CLAUDE.md:528:### 2. Use MCP Tools for Coordination in Claude Code
v2/src/cli/simple-commands/init/templates/CLAUDE.md:530:Once configured, Claude Flow MCP tools enhance Claude Code's coordination:
v2/src/cli/simple-commands/init/templates/CLAUDE.md:534:- Use the `mcp__claude-flow__swarm_init` tool to set up coordination topology
v2/src/cli/simple-commands/init/templates/CLAUDE.md:540:- Use `mcp__claude-flow__agent_spawn` tool to create specialized coordinators
v2/src/cli/simple-commands/init/templates/CLAUDE.md:546:- Use `mcp__claude-flow__task_orchestrate` tool to coordinate complex workflows
v2/src/cli/simple-commands/init/templates/CLAUDE.md:550:## Available MCP Tools for Coordination
v2/src/cli/simple-commands/init/templates/CLAUDE.md:620:3. Claude Code uses its native Read, WebSearch, and Task tools
v2/src/cli/simple-commands/init/templates/CLAUDE.md:644:- Result: Claude Code implements features using its native tools
v2/src/cli/simple-commands/init/templates/CLAUDE.md:653:3. Claude Code uses Write, Edit, Bash tools for implementation
v2/src/cli/simple-commands/init/templates/CLAUDE.md:683:- Use MCP tools to coordinate Claude Code's approach to complex tasks
v2/src/cli/simple-commands/init/templates/CLAUDE.md:685:- Use memory tools to maintain context across sessions
v2/src/cli/simple-commands/init/templates/CLAUDE.md:686:- Monitor coordination effectiveness with status tools
v2/src/cli/simple-commands/init/templates/CLAUDE.md:688:- Leverage GitHub tools for repository management
v2/src/cli/simple-commands/init/templates/CLAUDE.md:693:- Use MCP tools for file operations (use Claude Code's native tools)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:695:- Confuse coordination with execution (MCP coordinates, Claude executes)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:780:7. **GitHub First**: Use GitHub tools for repository management
v2/src/cli/simple-commands/init/templates/CLAUDE.md:790:1. **SPAWN ALL AGENTS IN ONE BATCH** - Use multiple tool calls in a SINGLE message
v2/src/cli/simple-commands/init/templates/CLAUDE.md:792:3. **USE BATCHTOOL FOR EVERYTHING** - Multiple operations = Single message with multiple tools
v2/src/cli/simple-commands/init/templates/CLAUDE.md:829:When you spawn an agent using the Task tool, that agent MUST:
v2/src/cli/simple-commands/init/templates/CLAUDE.md:895:  // MCP coordination setup
v2/src/cli/simple-commands/init/templates/CLAUDE.md:1133:1. **SPAWN** all agents using Task tool in ONE message
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:2: * MCP Tool Wrapper for Hive Mind System
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:3: * Wraps all 87 MCP tools for coordinated swarm usage
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:9: * MCP Tool categories and their methods
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:11:const MCP_TOOLS = {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:117: * MCPToolWrapper class for unified MCP tool access
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:119:export class MCPToolWrapper {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:128:    this.toolStats = new Map();
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:201:   * Execute MCP tool with automatic retry and error handling
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:203:  async executeTool(toolName, params = {}) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:209:        const result = await this._executeToolInternal(toolName, params);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:212:        this._trackToolUsage(toolName, Date.now() - startTime, true);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:217:        console.error(`Attempt ${attempt} failed for ${toolName}:`, error.message);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:227:    this._trackToolUsage(toolName, Date.now() - startTime, false);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:230:      `Failed to execute ${toolName} after ${this.config.retryCount} attempts: ${lastError.message}`,
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:235:   * Execute multiple tools in parallel with optimized batching
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:237:  async executeParallel(toolCalls) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:241:      for (const call of toolCalls) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:242:        results.push(await this.executeTool(call.tool, call.params));
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:247:    if (!Array.isArray(toolCalls) || toolCalls.length === 0) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:253:    // Intelligent concurrency limit based on tool types
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:254:    const concurrencyLimit = this._calculateOptimalConcurrency(toolCalls);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:256:    // Group tools by priority and dependency
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:257:    const toolGroups = this._groupToolsByPriority(toolCalls);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:261:      // Execute high-priority tools first
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:262:      for (const group of toolGroups) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:281:              console.warn(`Tool execution failed: ${batch[j].tool}`, result.reason);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:282:              groupResults.push({ error: result.reason.message, tool: batch[j].tool });
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:292:      this._trackBatchPerformance(toolCalls.length, executionTime, concurrencyLimit);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:302:   * Calculate optimal concurrency based on tool types
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:304:  _calculateOptimalConcurrency(toolCalls) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:305:    const toolTypes = toolCalls.map((call) => this._getToolCategory(call.tool));
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:306:    const uniqueTypes = new Set(toolTypes);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:310:    const hasHeavyOps = toolTypes.some((type) => heavyTypes.includes(type));
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:313:      return Math.min(3, Math.max(1, Math.floor(toolCalls.length / 2)));
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:317:    return Math.min(8, Math.max(2, Math.floor(toolCalls.length / 1.5)));
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:321:   * Group tools by execution priority
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:323:  _groupToolsByPriority(toolCalls) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:331:    toolCalls.forEach((call) => {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:332:      const category = this._getToolCategory(call.tool);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:333:      const tool = call.tool;
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:335:      if (['swarm_init', 'swarm_destroy', 'memory_backup'].includes(tool)) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:337:      } else if (['agent_spawn', 'memory_usage', 'neural_train'].includes(tool)) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:339:      } else if (category === 'performance' || tool.includes('report')) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:353:   * Execute tool with timeout wrapper
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:358:        reject(new Error(`Tool ${call.tool} timed out after ${timeout}ms`));
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:361:      this.executeTool(call.tool, call.params)
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:376:  _trackBatchPerformance(toolCount, executionTime, concurrency) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:389:    this.batchStats.totalTools += toolCount;
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:399:   * Internal tool execution
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:401:  async _executeToolInternal(toolName, params) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:402:    const toolCategory = this._getToolCategory(toolName);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:403:    if (!toolCategory) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:404:      throw new Error(`Unknown MCP tool: ${toolName}`);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:408:    if (toolName === 'memory_usage') {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:414:    } else if (toolName === 'memory_search') {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:416:    } else if (toolName === 'swarm_status') {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:420:    // For other tools, use mock responses
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:421:    console.log(`Executing MCP tool: mcp__claude-flow__${toolName} with params:`, params);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:423:    // Simulate async execution for non-memory tools
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:426:    // Mock response based on tool type
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:427:    const mockResponse = this._getMockResponse(toolName, params);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:432:   * Get tool category
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:434:  _getToolCategory(toolName) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:435:    for (const [category, tools] of Object.entries(MCP_TOOLS)) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:436:      if (tools.includes(toolName)) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:446:  _getMockResponse(toolName, params) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:447:    // Mock responses for different tool types
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:476:    return mockResponses[toolName] || { status: 'success', toolName };
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:480:   * Track tool usage statistics
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:482:  _trackToolUsage(toolName, duration, success) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:483:    if (!this.toolStats.has(toolName)) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:484:      this.toolStats.set(toolName, {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:493:    const stats = this.toolStats.get(toolName);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:505:   * Get comprehensive tool statistics
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:508:    const toolStats = {};
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:509:    this.toolStats.forEach((value, key) => {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:510:      toolStats[key] = { ...value };
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:514:      tools: toolStats,
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:532:        totalCalls: Array.from(this.toolStats.values()).reduce((sum, stat) => sum + stat.calls, 0),
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:544:    const total = Array.from(this.toolStats.values()).reduce((sum, stat) => sum + stat.calls, 0);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:545:    const successes = Array.from(this.toolStats.values()).reduce(
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:557:    const stats = Array.from(this.toolStats.values()).filter((stat) => stat.calls > 0);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:575:   * Create batch of tool calls for parallel execution
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:579:      tool: call.tool,
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:595:          tool: 'swarm_init',
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:610:          tool: 'memory_namespace',
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:617:        { tool: 'neural_status', params: {} },
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:618:        { tool: 'performance_report', params: { format: 'summary' } },
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:619:        { tool: 'features_detect', params: { component: 'swarm' } },
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:684:          tool: 'agent_spawn',
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1013:        tool: 'task_orchestrate',
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1023:        tool: 'swarm_monitor',
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1034:              tool: 'performance_report',
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1067:      { tool: 'bottleneck_analyze', params: { component: swarmId } },
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1068:      { tool: 'performance_report', params: { format: 'detailed' } },
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1069:      { tool: 'token_usage', params: { operation: swarmId } },
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1086:    const tool = githubTools[operation];
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1087:    if (!tool) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1091:    return await this.executeTool(tool, { repo, ...params });
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1105:    const tool = neuralTools[operation];
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1106:    if (!tool) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1110:    return await this.executeTool(tool, params);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1118:      { tool: 'swarm_destroy', params: { swarmId } },
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1120:        tool: 'memory_namespace',
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1127:        tool: 'cache_manage',
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1363:// Export tool categories for reference
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1364:export { MCP_TOOLS };
v2/src/cli/commands/task.ts:11:export const taskCommand = new Command()
v2/src/cli/simple-commands/hive-mind/core.js:7:import { MCPToolWrapper } from './mcp-wrapper.js';
v2/src/cli/simple-commands/hive-mind/core.js:46:    this.mcpWrapper = new MCPToolWrapper({
v2/src/cli/simple-commands/hive-mind/core.js:168:      // Initialize swarm with MCP tools
v2/src/cli/simple-commands/sparc-modes/debug.js:16:     - Configure debugging tools
v2/src/cli/simple-commands/sparc-modes/debug.js:28:   - Use debugging tools:
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:1:// optimized-slash-commands.js - Create batchtools-optimized Claude Code slash commands
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:12:// Create batchtools-optimized Claude Code slash commands for SPARC modes
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:15:    console.log('\nüöÄ Creating batchtools-optimized Claude Code slash commands...');
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:39:      // Create slash commands for each SPARC mode with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:46:        console.log(`  ‚úì Created optimized slash command: /sparc-${mode.slug} (Batchtools enhanced)`);
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:52:      // Create main SPARC command with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:55:      console.log('  ‚úÖ Created optimized main slash command: /sparc (Batchtools enhanced)');
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:68:    // Create claude-flow specific commands with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:71:    // Create batchtools-specific commands
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:72:    await createBatchtoolsCommands(workingDir);
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:80:// Create batchtools-specific commands
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:81:async function createBatchtoolsCommands(workingDir) {
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:82:  // Batchtools help command
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:83:  const batchtoolsCommand = `---
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:84:name: batchtools
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:88:# üöÄ Batchtools - Parallel Processing & Batch Operations
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:90:Batchtools enable parallel execution of multiple operations for improved performance and efficiency.
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:113:const files = await batchtools.parallel([
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:124:await batchtools.createFiles([
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:135:const analysis = await batchtools.concurrent([
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:224:### Full SPARC Pipeline with Batchtools
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:239:./claude-flow batchtools monitor --real-time
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:242:./claude-flow batchtools analyze --performance --detailed
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:245:./claude-flow batchtools resources --concurrent --verbose
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:248:For detailed documentation, see: https://github.com/ruvnet/claude-code-flow/docs/batchtools.md
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:251:  await fs.writeFile(`${workingDir}/.claude/commands/batchtools.md`, batchtoolsCommand, 'utf8');
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:252:  console.log('  ‚úì Created slash command: /batchtools');
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:257:description: Monitor and optimize system performance with batchtools
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:262:Real-time performance monitoring and optimization tools for Claude-Flow operations.
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:272:### Batchtools Metrics
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:286:./claude-flow performance monitor --parallel --batchtools
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:298:./claude-flow performance analyze --batchtools --optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:324:    "batchtools": {
v2/src/cli/commands/ruv-swarm.ts:13:import { isRuvSwarmAvailable, initializeRuvSwarmIntegration } from '../../mcp/ruv-swarm-tools.js';
v2/src/cli/commands/ruv-swarm.ts:407:    console.log('Neural subcommands:');
v2/src/cli/commands/ruv-swarm.ts:498:    console.log('Config subcommands:');
v2/src/cli/simple-commands/init/claude-commands/claude-flow-commands.js:61:### üåç MCP Integration
v2/src/cli/simple-commands/init/claude-commands/claude-flow-commands.js:62:- \`./claude-flow mcp status\` - MCP server status
v2/src/cli/simple-commands/init/claude-commands/claude-flow-commands.js:63:- \`./claude-flow mcp tools\` - List available tools
v2/src/cli/simple-commands/init/claude-commands/claude-flow-commands.js:65:- \`./claude-flow mcp logs\` - View MCP logs
v2/src/cli/simple-commands/mcp.js:1:// mcp.js - MCP server management commands
v2/src/cli/simple-commands/mcp.js:31:    case 'tools':
v2/src/cli/simple-commands/mcp.js:49:  success('MCP Server Status:');
v2/src/cli/simple-commands/mcp.js:67:    // The MCP server will handle all output (stderr for logs, stdout for JSON-RPC)
v2/src/cli/simple-commands/mcp.js:70:    // Import and start the MCP server
v2/src/cli/simple-commands/mcp.js:80:      // Phase 4 tools will be available after NPM publish
v2/src/cli/simple-commands/mcp.js:86:        error(`MCP server file not found at: ${mcpServerPath}`);
v2/src/cli/simple-commands/mcp.js:89:        throw new Error(`MCP server file not found: ${mcpServerPath}`);
v2/src/cli/simple-commands/mcp.js:92:      // Start the MCP server process
v2/src/cli/simple-commands/mcp.js:105:          error(`MCP server exited with code ${code}`);
v2/src/cli/simple-commands/mcp.js:112:      error('Failed to start MCP server: ' + err.message);
v2/src/cli/simple-commands/mcp.js:115:      log('üöÄ MCP server would start with:');
v2/src/cli/simple-commands/mcp.js:117:      log('   Tools: 87 Claude-Flow integration tools');
v2/src/cli/simple-commands/mcp.js:126:    success(`Starting Claude Flow MCP server on ${host}:${port}...`);
v2/src/cli/simple-commands/mcp.js:132:  success('Stopping MCP server...');
v2/src/cli/simple-commands/mcp.js:142:  success('Claude-Flow MCP Tools & Resources (87 total):');
v2/src/cli/simple-commands/mcp.js:145:    log('\nüêù SWARM COORDINATION (12 tools):');
v2/src/cli/simple-commands/mcp.js:161:    log('\nüß† NEURAL NETWORKS & AI (15 tools):');
v2/src/cli/simple-commands/mcp.js:180:    log('\nüíæ MEMORY & PERSISTENCE (12 tools):');
v2/src/cli/simple-commands/mcp.js:196:    log('\nüìä ANALYSIS & MONITORING (13 tools):');
v2/src/cli/simple-commands/mcp.js:213:    log('\nüîß WORKFLOW & AUTOMATION (11 tools):');
v2/src/cli/simple-commands/mcp.js:228:    log('\nüêô GITHUB INTEGRATION (8 tools):');
v2/src/cli/simple-commands/mcp.js:240:    log('\nü§ñ DAA (Dynamic Agent Architecture) (8 tools):');
v2/src/cli/simple-commands/mcp.js:252:    log('\n‚öôÔ∏è SYSTEM & UTILITIES (8 tools):');
v2/src/cli/simple-commands/mcp.js:287:    log('    ‚Ä¢ Claude Code native tool integration');
v2/src/cli/simple-commands/mcp.js:290:    log('    ‚Ä¢ MCP protocol compatibility');
v2/src/cli/simple-commands/mcp.js:293:  log('\nüì° Status: 87 tools & resources available when server is running');
v2/src/cli/simple-commands/mcp.js:296:  log('\nüí° Usage: claude-flow mcp tools --category=<category> --verbose');
v2/src/cli/simple-commands/mcp.js:304:      success('Setting up MCP authentication...');
v2/src/cli/simple-commands/mcp.js:307:      log('   Scope: Claude-Flow tools');
v2/src/cli/simple-commands/mcp.js:312:      success('MCP Authentication Status:');
v2/src/cli/simple-commands/mcp.js:319:      success('Rotating MCP authentication keys...');
v2/src/cli/simple-commands/mcp.js:333:  success('Claude-Flow MCP Server Configuration:');
v2/src/cli/simple-commands/mcp.js:385:  log('üîß Claude-Flow MCP Server Commands:');
v2/src/cli/simple-commands/mcp.js:388:  log('  status                           Show MCP server status');
v2/src/cli/simple-commands/mcp.js:389:  log('  start [options]                  Start MCP server with orchestrator');
v2/src/cli/simple-commands/mcp.js:390:  log('  stop                             Stop MCP server gracefully');
v2/src/cli/simple-commands/mcp.js:391:  log('  tools [options]                  List available tools & resources');
v2/src/cli/simple-commands/mcp.js:405:  log('  --verbose, -v                    Show detailed tool information');
v2/src/cli/simple-commands/mcp.js:409:  log('  swarm        üêù Swarm coordination (12 tools)');
v2/src/cli/simple-commands/mcp.js:410:  log('  neural       üß† Neural networks & AI (15 tools)');
v2/src/cli/simple-commands/mcp.js:411:  log('  memory       üíæ Memory & persistence (12 tools)');
v2/src/cli/simple-commands/mcp.js:412:  log('  analysis     üìä Analysis & monitoring (13 tools)');
v2/src/cli/simple-commands/mcp.js:413:  log('  workflow     üîß Workflow & automation (11 tools)');
v2/src/cli/simple-commands/mcp.js:414:  log('  github       üêô GitHub integration (8 tools)');
v2/src/cli/simple-commands/mcp.js:415:  log('  daa          ü§ñ Dynamic Agent Architecture (8 tools)');
v2/src/cli/simple-commands/mcp.js:416:  log('  system       ‚öôÔ∏è System & utilities (8 tools)');
v2/src/cli/simple-commands/mcp.js:421:  log('  claude-flow mcp tools --category=neural --verbose');
v2/src/cli/simple-commands/mcp.js:422:  log('  claude-flow mcp tools --category=swarm');
v2/src/cli/simple-commands/mcp.js:426:  log('üéØ Total: 87 tools & resources available');
v2/src/cli/simple-commands/mcp.js:1:// mcp.js - MCP server management commands
v2/src/cli/simple-commands/mcp.js:31:    case 'tools':
v2/src/cli/simple-commands/mcp.js:49:  success('MCP Server Status:');
v2/src/cli/simple-commands/mcp.js:67:    // The MCP server will handle all output (stderr for logs, stdout for JSON-RPC)
v2/src/cli/simple-commands/mcp.js:70:    // Import and start the MCP server
v2/src/cli/simple-commands/mcp.js:80:      // Phase 4 tools will be available after NPM publish
v2/src/cli/simple-commands/mcp.js:86:        error(`MCP server file not found at: ${mcpServerPath}`);
v2/src/cli/simple-commands/mcp.js:89:        throw new Error(`MCP server file not found: ${mcpServerPath}`);
v2/src/cli/simple-commands/mcp.js:92:      // Start the MCP server process
v2/src/cli/simple-commands/mcp.js:105:          error(`MCP server exited with code ${code}`);
v2/src/cli/simple-commands/mcp.js:112:      error('Failed to start MCP server: ' + err.message);
v2/src/cli/simple-commands/mcp.js:115:      log('üöÄ MCP server would start with:');
v2/src/cli/simple-commands/mcp.js:117:      log('   Tools: 87 Claude-Flow integration tools');
v2/src/cli/simple-commands/mcp.js:126:    success(`Starting Claude Flow MCP server on ${host}:${port}...`);
v2/src/cli/simple-commands/mcp.js:132:  success('Stopping MCP server...');
v2/src/cli/simple-commands/mcp.js:142:  success('Claude-Flow MCP Tools & Resources (87 total):');
v2/src/cli/simple-commands/mcp.js:145:    log('\nüêù SWARM COORDINATION (12 tools):');
v2/src/cli/simple-commands/mcp.js:161:    log('\nüß† NEURAL NETWORKS & AI (15 tools):');
v2/src/cli/simple-commands/mcp.js:180:    log('\nüíæ MEMORY & PERSISTENCE (12 tools):');
v2/src/cli/simple-commands/mcp.js:196:    log('\nüìä ANALYSIS & MONITORING (13 tools):');
v2/src/cli/simple-commands/mcp.js:213:    log('\nüîß WORKFLOW & AUTOMATION (11 tools):');
v2/src/cli/simple-commands/mcp.js:228:    log('\nüêô GITHUB INTEGRATION (8 tools):');
v2/src/cli/simple-commands/mcp.js:240:    log('\nü§ñ DAA (Dynamic Agent Architecture) (8 tools):');
v2/src/cli/simple-commands/mcp.js:252:    log('\n‚öôÔ∏è SYSTEM & UTILITIES (8 tools):');
v2/src/cli/simple-commands/mcp.js:287:    log('    ‚Ä¢ Claude Code native tool integration');
v2/src/cli/simple-commands/mcp.js:290:    log('    ‚Ä¢ MCP protocol compatibility');
v2/src/cli/simple-commands/mcp.js:293:  log('\nüì° Status: 87 tools & resources available when server is running');
v2/src/cli/simple-commands/mcp.js:296:  log('\nüí° Usage: claude-flow mcp tools --category=<category> --verbose');
v2/src/cli/simple-commands/mcp.js:304:      success('Setting up MCP authentication...');
v2/src/cli/simple-commands/mcp.js:307:      log('   Scope: Claude-Flow tools');
v2/src/cli/simple-commands/mcp.js:312:      success('MCP Authentication Status:');
v2/src/cli/simple-commands/mcp.js:319:      success('Rotating MCP authentication keys...');
v2/src/cli/simple-commands/mcp.js:333:  success('Claude-Flow MCP Server Configuration:');
v2/src/cli/simple-commands/mcp.js:385:  log('üîß Claude-Flow MCP Server Commands:');
v2/src/cli/simple-commands/mcp.js:388:  log('  status                           Show MCP server status');
v2/src/cli/simple-commands/mcp.js:389:  log('  start [options]                  Start MCP server with orchestrator');
v2/src/cli/simple-commands/mcp.js:390:  log('  stop                             Stop MCP server gracefully');
v2/src/cli/simple-commands/mcp.js:391:  log('  tools [options]                  List available tools & resources');
v2/src/cli/simple-commands/mcp.js:405:  log('  --verbose, -v                    Show detailed tool information');
v2/src/cli/simple-commands/mcp.js:409:  log('  swarm        üêù Swarm coordination (12 tools)');
v2/src/cli/simple-commands/mcp.js:410:  log('  neural       üß† Neural networks & AI (15 tools)');
v2/src/cli/simple-commands/mcp.js:411:  log('  memory       üíæ Memory & persistence (12 tools)');
v2/src/cli/simple-commands/mcp.js:412:  log('  analysis     üìä Analysis & monitoring (13 tools)');
v2/src/cli/simple-commands/mcp.js:413:  log('  workflow     üîß Workflow & automation (11 tools)');
v2/src/cli/simple-commands/mcp.js:414:  log('  github       üêô GitHub integration (8 tools)');
v2/src/cli/simple-commands/mcp.js:415:  log('  daa          ü§ñ Dynamic Agent Architecture (8 tools)');
v2/src/cli/simple-commands/mcp.js:416:  log('  system       ‚öôÔ∏è System & utilities (8 tools)');
v2/src/cli/simple-commands/mcp.js:421:  log('  claude-flow mcp tools --category=neural --verbose');
v2/src/cli/simple-commands/mcp.js:422:  log('  claude-flow mcp tools --category=swarm');
v2/src/cli/simple-commands/mcp.js:426:  log('üéØ Total: 87 tools & resources available');
v2/src/cli/simple-commands/init/performance-monitor.js:299:      'cli-tool': 1.1,
v2/src/cli/simple-commands/templates/mle-star-workflow.json:60:        "debugging_tools": ["profiling", "error_correction", "data_integrity_checks"]
v2/src/cli/commands/verification.ts:23: * Main verification command that provides subcommands
v2/src/cli/commands/verification.ts:247:    subcommands: {
v2/src/cli/commands/verification.ts:309: * Integration function for registering commands with CLI framework
v2/src/cli/commands/verification.ts:311:export function registerVerificationCommands(commandRegistry: any): void {
v2/src/cli/commands/verification.ts:314:    commandRegistry.register({
v2/src/cli/commands/verification.ts:326:    commandRegistry.register({
v2/src/cli/commands/verification.ts:336:    logger.info('Verification commands registered successfully');
v2/src/cli/commands/verification.ts:338:    logger.error('Failed to register verification commands:', error);
v2/src/cli/commands/verification.ts:348:  register: registerVerificationCommands,
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:79:// Create optimized Memory Bank with batchtools support
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:81:  return `# Memory Bank Configuration (Batchtools Optimized)
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:86:**üöÄ Batchtools Enhancement**: This configuration includes parallel processing capabilities for memory operations, batch storage, and concurrent retrieval optimizations.
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:95:## Batchtools Memory Features
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:109:## Commands (Batchtools Enhanced)
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:117:### Batchtools Commands
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:124:Memory settings are configured in \`claude-flow.config.json\` with batchtools optimizations:
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:132:    "batchtools": {
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:139:    "namespaces": ["default", "agents", "tasks", "sessions", "sparc", "batchtools"],
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:145:      "batchtools": "60d"
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:157:## Batchtools Integration
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:177:npx claude-flow memory performance-report --batchtools
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:191:- **batchtools**: Performance metrics and optimization data
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:198:- **Performance**: Batchtools metrics and optimization data
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:200:## Best Practices (Batchtools Enhanced)
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:222:### Batchtools Performance Improvements
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:234:- Batchtools operations are logged for performance analysis and debugging
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:237:## Troubleshooting Batchtools
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:251:npx claude-flow memory analyze --batchtools --verbose
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:257:For more information about memory system optimization, see: https://github.com/ruvnet/claude-code-flow/docs/memory-batchtools.md
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1194:Guide to spawning agents with Claude Code's Task tool.
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1198:**CRITICAL**: Always use Claude Code's Task tool for actual agent execution:
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1207:## MCP Coordination Setup (Optional)
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1209:MCP tools are ONLY for coordination:
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1217:2. Use Task tool for execution
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1218:3. MCP only for coordination
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1251:# Setup MCP server for Claude Flow
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1253:echo "üöÄ Setting up Claude Flow MCP server..."
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1262:# Add MCP server
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1263:echo "üì¶ Adding Claude Flow MCP server..."
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1266:echo "‚úÖ MCP server setup complete!"
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1267:echo "üéØ You can now use mcp__claude-flow__ tools in Claude Code"
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1430:    local tool_input="$1"
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1431:    local file=$(echo "$tool_input" | jq -r '.file_path // empty')
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1463:    local tool_input="$1"
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1464:    local file=$(echo "$tool_input" | jq -r '.file_path // empty')
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1864:    local tool_input="$1"
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1865:    local file=$(echo "$tool_input" | jq -r '.file_path // empty')
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1897:    local tool_input="$1"
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1898:    local file=$(echo "$tool_input" | jq -r '.file_path // empty')
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2179:### Claude Flow MCP Tools Handle:
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2188:**MCP tools DO NOT create content or write code.** They coordinate and enhance Claude Code's native capabilities.
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2192:1. Add MCP server: \`claude mcp add claude-flow npx claude-flow mcp start\`
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2247:                  'cat | jq -r \'.tool_input.command // ""\' | xargs -I {} npx claude-flow@alpha hooks pre-command --command "{}" --validate-safety true --prepare-resources true',
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2257:                  'cat | jq -r \'.tool_input.file_path // .tool_input.path // ""\' | xargs -I {} npx claude-flow@alpha hooks pre-edit --file "{}" --auto-assign-agents true --load-context true',
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2261:                command: './.claude/helpers/standard-checkpoint-hooks.sh pre-edit "{{tool_input}}"',
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2273:                  'cat | jq -r \'.tool_input.command // ""\' | xargs -I {} npx claude-flow@alpha hooks post-command --command "{}" --track-metrics true --store-results true',
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2283:                  'cat | jq -r \'.tool_input.file_path // .tool_input.path // ""\' | xargs -I {} npx claude-flow@alpha hooks post-edit --file "{}" --format true --update-memory true --train-neural true',
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2287:                command: './.claude/helpers/standard-checkpoint-hooks.sh post-edit "{{tool_input}}"',
v2/src/cli/help-text.js:15:  ‚Ä¢ Complete ruv-swarm integration with 90+ MCP tools
v2/src/cli/help-text.js:34:  mcp__flow-nexus__user_register         # Register for cloud features
v2/src/cli/help-text.js:96:  mcp <action>             MCP server management
v2/src/cli/help-text.js:100:üî• NEW MCP TOOLS (v2.5.0-alpha.130):
v2/src/cli/help-text.js:433:  Initialize Claude Flow v2.0.0 in your project with full MCP integration.
v2/src/cli/help-text.js:461:  ‚Ä¢ Integration with ruv-swarm MCP tools
v2/src/cli/help-text.js:467:  ‚Ä¢ Team collaboration tools
v2/src/cli/help-text.js:470:  ‚Ä¢ ruv-swarm integration with 27 MCP tools
v2/src/cli/help-text.js:501:  --port <port>    MCP server port (default: 3000)
v2/src/cli/help-text.js:509:  claude-flow start --port 8080          # Custom MCP port
v2/src/cli/help-text.js:533:  ‚Ä¢ MCP server status
v2/src/cli/help-text.js:595:  across agents with real ruv-swarm MCP integration for optimal performance.
v2/src/cli/help-text.js:807:        { name: 'mcp start', description: 'Start MCP server (NEW)' },
v2/src/cli/commands/checkpoint.ts:13:export const checkpointCommand = new Command()
v2/src/cli/simple-commands/hive-mind/communication.js:93:  registerAgent(agentId, metadata = {}) {
v2/src/cli/simple-commands/hive-mind/communication.js:115:    this.emit('agent:registered', agent);
v2/src/cli/simple-commands/hive-mind/communication.js:120:   * Unregister agent from network
v2/src/cli/simple-commands/hive-mind/communication.js:122:  unregisterAgent(agentId) {
v2/src/cli/simple-commands/hive-mind/communication.js:144:    this.emit('agent:unregistered', { agentId });
v2/src/cli/simple-cli.js:68:üéØ ENTERPRISE FEATURES: Complete ruv-swarm integration with 90+ MCP tools, neural networking, and production-ready infrastructure
v2/src/cli/simple-cli.js:78:  ‚Ä¢ Complete ruv-swarm integration with 27 MCP tools
v2/src/cli/simple-cli.js:148:  ‚Ä¢ 27 MCP tools for comprehensive workflow automation
v2/src/cli/simple-cli.js:159:  ‚Ä¢ Sub-10ms MCP response times
v2/src/cli/simple-cli.js:211:  const commands = listCommands();
v2/src/cli/simple-cli.js:316:  // Check if this is a registered modular command
v2/src/cli/simple-cli.js:339:      console.log('üåê MCP Server: Stopped');
v2/src/cli/simple-cli.js:495:            const commands = subArgs[commandsFlag + 1].split(',');
v2/src/cli/simple-cli.js:1243:              console.log('   ‚úì MCP server deployment');
v2/src/cli/simple-cli.js:1328:            if (arg === '--tools' || arg === '-t') {
v2/src/cli/simple-cli.js:1329:              flags.tools = subArgs[++i];
v2/src/cli/simple-cli.js:1351:          // Build tools list
v2/src/cli/simple-cli.js:1352:          let tools = flags.tools || 'View,Edit,Replace,GlobTool,GrepTool,LS,Bash';
v2/src/cli/simple-cli.js:1354:            tools += ',BatchTool,dispatch_agent';
v2/src/cli/simple-cli.js:1357:            tools += ',WebFetchTool';
v2/src/cli/simple-cli.js:1364:            console.log(`Command: claude "<enhanced task with guidance>" --allowedTools ${tools}`);
v2/src/cli/simple-cli.js:1367:            console.log(`Tools: ${tools}`);
v2/src/cli/simple-cli.js:1374:            console.log(`  - Access Claude-Flow features through Bash tool`);
v2/src/cli/simple-cli.js:1378:            console.log(`üîß Tools: ${tools}`);
v2/src/cli/simple-cli.js:1406:${flags.config ? `- MCP Config: ${flags.config}` : ''}
v2/src/cli/simple-cli.js:1409:- You have access to these tools: ${tools}
v2/src/cli/simple-cli.js:1410:${flags.tools ? `- Custom tools specified: ${flags.tools}` : ''}
v2/src/cli/simple-cli.js:1440:   **Research Mode**: Web research tools are available for information gathering.`;
v2/src/cli/simple-cli.js:1450:   - Use appropriate tools and practices for the technology stack
v2/src/cli/simple-cli.js:1469:   ${flags.research ? '   - Research tools are available if needed' : ''}
v2/src/cli/simple-cli.js:1475:Begin working on your task. The orchestration features are available as tools to help you be more effective, but your primary focus should be on delivering the requested functionality.
v2/src/cli/simple-cli.js:1491:Remember: These are optional tools. Use them when they add value to your development process.
v2/src/cli/simple-cli.js:1502:            claudeArgs.push('--allowedTools', tools);
v2/src/cli/simple-cli.js:2744:- Tools: [Development tools]
v2/src/cli/simple-cli.js:3282:- Use TypeScript for type safety and better tooling
v2/src/cli/simple-cli.js:3388:- **Tool access**: Verify required tools are available for the selected mode
v2/src/cli/simple-commands/sparc-modes/mcp.js:1:// mcp.js - MCP Integration mode orchestration template
v2/src/cli/simple-commands/sparc-modes/mcp.js:8:   - Identify MCP endpoints
v2/src/cli/simple-commands/sparc-modes/mcp.js:14:   - Configure MCP servers
v2/src/cli/simple-commands/sparc-modes/mcp.js:34:   - MCP integration code
v2/src/cli/simple-commands/hive-mind/auto-save-middleware.js:227:  registerChildProcess(childProcess) {
v2/src/api/database-schema.sql:166:-- Sessions table - tracks MCP and API sessions
v2/src/api/database-schema.sql:364:-- 8. Session management for MCP and API clients
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:2: * MCP Tool Wrapper for Hive Mind System
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:3: * Wraps all 87 MCP tools for coordinated swarm usage
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:9: * MCP Tool categories and their methods
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:11:const MCP_TOOLS = {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:117: * MCPToolWrapper class for unified MCP tool access
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:119:export class MCPToolWrapper {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:128:    this.toolStats = new Map();
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:201:   * Execute MCP tool with automatic retry and error handling
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:203:  async executeTool(toolName, params = {}) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:209:        const result = await this._executeToolInternal(toolName, params);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:212:        this._trackToolUsage(toolName, Date.now() - startTime, true);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:217:        console.error(`Attempt ${attempt} failed for ${toolName}:`, error.message);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:227:    this._trackToolUsage(toolName, Date.now() - startTime, false);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:230:      `Failed to execute ${toolName} after ${this.config.retryCount} attempts: ${lastError.message}`,
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:235:   * Execute multiple tools in parallel with optimized batching
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:237:  async executeParallel(toolCalls) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:241:      for (const call of toolCalls) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:242:        results.push(await this.executeTool(call.tool, call.params));
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:247:    if (!Array.isArray(toolCalls) || toolCalls.length === 0) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:253:    // Intelligent concurrency limit based on tool types
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:254:    const concurrencyLimit = this._calculateOptimalConcurrency(toolCalls);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:256:    // Group tools by priority and dependency
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:257:    const toolGroups = this._groupToolsByPriority(toolCalls);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:261:      // Execute high-priority tools first
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:262:      for (const group of toolGroups) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:281:              console.warn(`Tool execution failed: ${batch[j].tool}`, result.reason);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:282:              groupResults.push({ error: result.reason.message, tool: batch[j].tool });
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:292:      this._trackBatchPerformance(toolCalls.length, executionTime, concurrencyLimit);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:302:   * Calculate optimal concurrency based on tool types
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:304:  _calculateOptimalConcurrency(toolCalls) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:305:    const toolTypes = toolCalls.map((call) => this._getToolCategory(call.tool));
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:306:    const uniqueTypes = new Set(toolTypes);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:310:    const hasHeavyOps = toolTypes.some((type) => heavyTypes.includes(type));
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:313:      return Math.min(3, Math.max(1, Math.floor(toolCalls.length / 2)));
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:317:    return Math.min(8, Math.max(2, Math.floor(toolCalls.length / 1.5)));
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:321:   * Group tools by execution priority
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:323:  _groupToolsByPriority(toolCalls) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:331:    toolCalls.forEach((call) => {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:332:      const category = this._getToolCategory(call.tool);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:333:      const tool = call.tool;
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:335:      if (['swarm_init', 'swarm_destroy', 'memory_backup'].includes(tool)) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:337:      } else if (['agent_spawn', 'memory_usage', 'neural_train'].includes(tool)) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:339:      } else if (category === 'performance' || tool.includes('report')) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:353:   * Execute tool with timeout wrapper
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:358:        reject(new Error(`Tool ${call.tool} timed out after ${timeout}ms`));
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:361:      this.executeTool(call.tool, call.params)
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:376:  _trackBatchPerformance(toolCount, executionTime, concurrency) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:389:    this.batchStats.totalTools += toolCount;
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:399:   * Internal tool execution
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:401:  async _executeToolInternal(toolName, params) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:402:    const toolCategory = this._getToolCategory(toolName);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:403:    if (!toolCategory) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:404:      throw new Error(`Unknown MCP tool: ${toolName}`);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:408:    if (toolName === 'memory_usage') {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:414:    } else if (toolName === 'memory_search') {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:416:    } else if (toolName === 'swarm_status') {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:420:    // For other tools, use mock responses
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:421:    console.log(`Executing MCP tool: mcp__claude-flow__${toolName} with params:`, params);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:423:    // Simulate async execution for non-memory tools
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:426:    // Mock response based on tool type
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:427:    const mockResponse = this._getMockResponse(toolName, params);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:432:   * Get tool category
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:434:  _getToolCategory(toolName) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:435:    for (const [category, tools] of Object.entries(MCP_TOOLS)) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:436:      if (tools.includes(toolName)) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:446:  _getMockResponse(toolName, params) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:447:    // Mock responses for different tool types
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:476:    return mockResponses[toolName] || { status: 'success', toolName };
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:480:   * Track tool usage statistics
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:482:  _trackToolUsage(toolName, duration, success) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:483:    if (!this.toolStats.has(toolName)) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:484:      this.toolStats.set(toolName, {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:493:    const stats = this.toolStats.get(toolName);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:505:   * Get comprehensive tool statistics
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:508:    const toolStats = {};
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:509:    this.toolStats.forEach((value, key) => {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:510:      toolStats[key] = { ...value };
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:514:      tools: toolStats,
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:532:        totalCalls: Array.from(this.toolStats.values()).reduce((sum, stat) => sum + stat.calls, 0),
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:544:    const total = Array.from(this.toolStats.values()).reduce((sum, stat) => sum + stat.calls, 0);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:545:    const successes = Array.from(this.toolStats.values()).reduce(
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:557:    const stats = Array.from(this.toolStats.values()).filter((stat) => stat.calls > 0);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:575:   * Create batch of tool calls for parallel execution
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:579:      tool: call.tool,
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:595:          tool: 'swarm_init',
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:610:          tool: 'memory_namespace',
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:617:        { tool: 'neural_status', params: {} },
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:618:        { tool: 'performance_report', params: { format: 'summary' } },
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:619:        { tool: 'features_detect', params: { component: 'swarm' } },
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:684:          tool: 'agent_spawn',
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1013:        tool: 'task_orchestrate',
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1023:        tool: 'swarm_monitor',
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1034:              tool: 'performance_report',
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1067:      { tool: 'bottleneck_analyze', params: { component: swarmId } },
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1068:      { tool: 'performance_report', params: { format: 'detailed' } },
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1069:      { tool: 'token_usage', params: { operation: swarmId } },
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1086:    const tool = githubTools[operation];
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1087:    if (!tool) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1091:    return await this.executeTool(tool, { repo, ...params });
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1105:    const tool = neuralTools[operation];
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1106:    if (!tool) {
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1110:    return await this.executeTool(tool, params);
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1118:      { tool: 'swarm_destroy', params: { swarmId } },
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1120:        tool: 'memory_namespace',
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1127:        tool: 'cache_manage',
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1363:// Export tool categories for reference
v2/src/cli/simple-commands/hive-mind/mcp-wrapper.js:1364:export { MCP_TOOLS };
v2/src/cli/simple-commands/hive-mind/core.js:7:import { MCPToolWrapper } from './mcp-wrapper.js';
v2/src/cli/simple-commands/hive-mind/core.js:46:    this.mcpWrapper = new MCPToolWrapper({
v2/src/cli/simple-commands/hive-mind/core.js:168:      // Initialize swarm with MCP tools
v2/src/cli/cli-core.ts:22:  subcommands?: Command[];
v2/src/cli/cli-core.ts:262:    const commands = Array.from(new Set(this.commands.values()));
v2/src/cli/cli-core.ts:308:    // Import and register all commands
v2/src/cli/simple-commands/sparc-modes/supabase-admin.js:4:## Task Orchestration Steps - Supabase MCP Mode
v2/src/cli/simple-commands/sparc-modes/supabase-admin.js:6:1. **Requirements Analysis & MCP Setup** (10 mins)
v2/src/cli/simple-commands/sparc-modes/supabase-admin.js:14:   - Connect to Supabase via MCP:
v2/src/cli/simple-commands/sparc-modes/supabase-admin.js:40:3. **Schema Implementation via MCP** (20 mins)
v2/src/cli/simple-commands/sparc-modes/supabase-admin.js:136:## MCP Tool Reminders
v2/src/tests/validation-consistency.test.ts:6:import { getClaudeFlowTools } from '../mcp/claude-flow-tools.js';
v2/src/tests/validation-consistency.test.ts:7:import { getRuvSwarmTools } from '../mcp/ruv-swarm-tools.js';
v2/src/tests/validation-consistency.test.ts:8:import { getSwarmTools } from '../mcp/swarm-tools.js';
v2/src/tests/validation-consistency.test.ts:13:  test('MCP server agent_spawn uses consistent agent types', () => {
v2/src/tests/validation-consistency.test.ts:14:    const agentSpawnTool = mcpServer.tools.agent_spawn;
v2/src/tests/validation-consistency.test.ts:19:  test('Claude Flow tools use consistent agent types', () => {
v2/src/tests/validation-consistency.test.ts:20:    const tools = getClaudeFlowTools({} as any);
v2/src/tests/validation-consistency.test.ts:21:    const spawnTool = tools.find((t) => t.name === 'spawn_agent');
v2/src/tests/validation-consistency.test.ts:26:  test('Ruv Swarm tools use consistent agent types', () => {
v2/src/tests/validation-consistency.test.ts:27:    const tools = getRuvSwarmTools({} as any);
v2/src/tests/validation-consistency.test.ts:28:    const spawnTool = tools.find((t) => t.name === 'spawn_agent');
v2/src/tests/validation-consistency.test.ts:33:  test('Swarm tools use consistent agent types', () => {
v2/src/tests/validation-consistency.test.ts:34:    const tools = getSwarmTools({} as any);
v2/src/tests/validation-consistency.test.ts:35:    const spawnTool = tools.find((t) => t.name === 'spawn_agent');
v2/src/tests/validation-consistency.test.ts:49:    const taskOrchestrateTool = mcpServer.tools.task_orchestrate;
v2/src/cli/simple-commands/init/templates/sparc-modes.js:69:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:83:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:85:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:119:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:133:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:135:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:204:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:219:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:221:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:255:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:269:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:271:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:306:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:320:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:322:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:356:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:370:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:372:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:429:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:441:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:443:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:465:- Batch pattern matching with Grep tool
v2/src/cli/simple-commands/init/templates/sparc-modes.js:485:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:497:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:499:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:542:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:554:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:556:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:600:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:612:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:614:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:658:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:670:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:672:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:716:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:728:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:730:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:773:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:785:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:787:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:831:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:843:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:845:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:885:Knowledge management with Memory tools for persistent insights.
v2/src/cli/simple-commands/init/templates/sparc-modes.js:889:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:901:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:903:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:947:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:959:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:961:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1005:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1017:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1019:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1063:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1075:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1077:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1121:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1133:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1135:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1179:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1191:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1193:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1237:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1249:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1251:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1295:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1307:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1309:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1353:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1365:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1367:# Use when running from terminal or MCP tools unavailable
v2/src/utils/npx-isolated-cache.js:44:    registerCleanup();
v2/src/utils/npx-isolated-cache.js:95:function registerCleanup() {
v2/src/api/routes/analysis.js:5: * Provides backend support for all 13 analysis tools:
v2/src/api/routes/analysis.js:18: * 13. capacity_plan - Capacity planning tools
v2/src/api/routes/analysis.js:624:// Additional helper functions for other tools
v2/src/cli/simple-commands/sparc-modes/debug.js:16:     - Configure debugging tools
v2/src/cli/simple-commands/sparc-modes/debug.js:28:   - Use debugging tools:
v2/src/config/ruv-swarm-config.ts:72:    enableMCPTools: boolean;
v2/src/config/ruv-swarm-config.ts:132:    enableMCPTools: true,
v2/src/cli/commands/swarm-new.ts.disabled:21:  let swarmPrompt = `You are orchestrating a Claude Flow Swarm with advanced MCP tool coordination.
v2/src/cli/commands/swarm-new.ts.disabled:180:MCP TOOL PATTERN:
v2/src/cli/commands/swarm-new.ts.disabled:257:üîß AVAILABLE MCP TOOLS FOR SWARM COORDINATION:
v2/src/cli/commands/swarm-new.ts.disabled:350:ü§ù AGENT TYPES & THEIR MCP TOOL USAGE:
v2/src/cli/commands/swarm-new.ts.disabled:353:- Primary tools: swarm_monitor, agent_assign, task_create
v2/src/cli/commands/swarm-new.ts.disabled:358:- Primary tools: memory_search, memory_store
v2/src/cli/commands/swarm-new.ts.disabled:363:- Primary tools: task_update, memory_retrieve, memory_store
v2/src/cli/commands/swarm-new.ts.disabled:368:- Primary tools: memory_search, swarm_monitor
v2/src/cli/commands/swarm-new.ts.disabled:373:- Primary tools: task_status, agent_communicate
v2/src/cli/commands/swarm-new.ts.disabled:377:üìù EXAMPLE MCP TOOL USAGE PATTERNS:
v2/src/cli/commands/swarm-new.ts.disabled:410:Start by spawning a coordinator agent and creating the initial task structure. Use the MCP tools to orchestrate the swarm, coordinate agents, and track progress. Remember to store important decisions and artifacts in collective memory for other agents to access.
v2/src/cli/commands/swarm-new.ts.disabled:650:      const agentId = await coordinator.registerAgent(
v2/src/cli/commands/swarm-new.ts.disabled:941:        tools: ['git', 'npm', 'deno'],
v2/src/cli/commands/swarm-new.ts.disabled:961:        tools: ['git', 'npm', 'deno', 'docker'],
v2/src/cli/commands/swarm-new.ts.disabled:981:        tools: ['browser', 'search-engines'],
v2/src/cli/commands/swarm-new.ts.disabled:1001:        tools: ['jupyter', 'data-tools'],
v2/src/cli/commands/swarm-new.ts.disabled:1021:        tools: ['test-runners', 'coverage-tools'],
v2/src/cli/commands/swarm-new.ts.disabled:1041:        tools: ['static-analysis', 'linters'],
v2/src/cli/ui/compatible-ui.ts:387:      name: 'MCP Server',
v2/src/cli/simple-commands/sparc-modes/code.js:89:- Always verify all tool parameters before execution
v2/src/cli/simple-commands/sparc-modes/mcp.js:1:// mcp.js - MCP Integration mode orchestration template
v2/src/cli/simple-commands/sparc-modes/mcp.js:8:   - Identify MCP endpoints
v2/src/cli/simple-commands/sparc-modes/mcp.js:14:   - Configure MCP servers
v2/src/cli/simple-commands/sparc-modes/mcp.js:34:   - MCP integration code
v2/src/cli/simple-commands/sparc-modes/supabase-admin.js:4:## Task Orchestration Steps - Supabase MCP Mode
v2/src/cli/simple-commands/sparc-modes/supabase-admin.js:6:1. **Requirements Analysis & MCP Setup** (10 mins)
v2/src/cli/simple-commands/sparc-modes/supabase-admin.js:14:   - Connect to Supabase via MCP:
v2/src/cli/simple-commands/sparc-modes/supabase-admin.js:40:3. **Schema Implementation via MCP** (20 mins)
v2/src/cli/simple-commands/sparc-modes/supabase-admin.js:136:## MCP Tool Reminders
v2/src/cli/simple-commands/init/templates/commands/helpers/standard-checkpoint-hooks.sh:6:    local tool_input="$1"
v2/src/cli/simple-commands/init/templates/commands/helpers/standard-checkpoint-hooks.sh:7:    local file=$(echo "$tool_input" | jq -r '.file_path // empty')
v2/src/cli/simple-commands/init/templates/commands/helpers/standard-checkpoint-hooks.sh:39:    local tool_input="$1"
v2/src/cli/simple-commands/init/templates/commands/helpers/standard-checkpoint-hooks.sh:40:    local file=$(echo "$tool_input" | jq -r '.file_path // empty')
v2/src/cli/simple-commands/sparc-modes/devops.js:67:     - APM tools (DataDog, New Relic, AppDynamics)
v2/src/cli/commands/config.ts:10:export const configCommand = new Command('config').description('Configuration management commands');
v2/src/cli/simple-commands/init/templates/claude-md.js:12:2. **Task tool**: ALWAYS spawn ALL agents in ONE message with full instructions
v2/src/cli/simple-commands/init/templates/claude-md.js:44:1. **Register**: \`mcp__flow-nexus__user_register\` with email/password
v2/src/cli/simple-commands/init/templates/claude-md.js:104:2. **Task tool**: ALWAYS spawn ALL agents in ONE message with full instructions
v2/src/cli/simple-commands/init/templates/claude-md.js:177:- **CLI Interface**: Command-line tools for managing the system
v2/src/cli/simple-commands/init/templates/claude-md.js:181:- **MCP Integration**: Model Context Protocol server for Claude integration
v2/src/cli/simple-commands/init/templates/claude-md.js:201:1. **Register**: \`mcp__flow-nexus__user_register\` with email/password
v2/src/cli/simple-commands/init/templates/claude-md.js:258:2. **Task tool**: ALWAYS spawn ALL agents in ONE message with full instructions
v2/src/cli/simple-commands/init/templates/claude-md.js:423:- Use TypeScript for type safety and better tooling
v2/src/cli/simple-commands/init/templates/claude-md.js:534:- **Tool access**: Verify required tools are available for the selected mode
v2/src/cli/simple-commands/init/templates/claude-md.js:577:1. **Register**: \`mcp__flow-nexus__user_register\` with email/password
v2/src/cli/simple-commands/init/templates/claude-md.js:625:// Create optimized SPARC CLAUDE.md with batchtools integration
v2/src/cli/simple-commands/init/templates/claude-md.js:635:4. **USE CLAUDE CODE'S TASK TOOL** for spawning agents concurrently, not just MCP
v2/src/cli/simple-commands/init/templates/claude-md.js:641:- **Task tool (Claude Code)**: ALWAYS spawn ALL agents in ONE message with full instructions
v2/src/cli/simple-commands/init/templates/claude-md.js:648:**Claude Code's Task tool is the PRIMARY way to spawn agents:**
v2/src/cli/simple-commands/init/templates/claude-md.js:650:// ‚úÖ CORRECT: Use Claude Code's Task tool for parallel agent execution
v2/src/cli/simple-commands/init/templates/claude-md.js:659:**MCP tools are ONLY for coordination setup:**
v2/src/cli/simple-commands/init/templates/claude-md.js:686:### Batchtools Commands
v2/src/cli/simple-commands/init/templates/claude-md.js:742:## üéØ Claude Code vs MCP Tools
v2/src/cli/simple-commands/init/templates/claude-md.js:745:- **Task tool**: Spawn and run agents concurrently for actual work
v2/src/cli/simple-commands/init/templates/claude-md.js:756:### MCP Tools ONLY COORDINATE:
v2/src/cli/simple-commands/init/templates/claude-md.js:765:**KEY**: MCP coordinates the strategy, Claude Code's Task tool executes with real agents.
v2/src/cli/simple-commands/init/templates/claude-md.js:770:# Add MCP servers (Claude Flow required, others optional)
v2/src/cli/simple-commands/init/templates/claude-md.js:776:## MCP Tool Categories
v2/src/cli/simple-commands/init/templates/claude-md.js:793:### Flow-Nexus MCP Tools (Optional Advanced Features)
v2/src/cli/simple-commands/init/templates/claude-md.js:794:Flow-Nexus extends MCP capabilities with 70+ cloud-based orchestration tools:
v2/src/cli/simple-commands/init/templates/claude-md.js:796:**Key MCP Tool Categories:**
v2/src/cli/simple-commands/init/templates/claude-md.js:806:- Register: \`mcp__flow-nexus__user_register\` or \`npx flow-nexus@latest register\`
v2/src/cli/simple-commands/init/templates/claude-md.js:808:- Access 70+ specialized MCP tools for advanced orchestration
v2/src/cli/simple-commands/init/templates/claude-md.js:814:1. **Optional**: Use MCP tools to set up coordination topology
v2/src/cli/simple-commands/init/templates/claude-md.js:815:2. **REQUIRED**: Use Claude Code's Task tool to spawn agents that do actual work
v2/src/cli/simple-commands/init/templates/claude-md.js:822:// Single message with all agent spawning via Claude Code's Task tool
v2/src/cli/simple-commands/init/templates/claude-md.js:864:### ‚úÖ CORRECT WORKFLOW: MCP Coordinates, Claude Code Executes
v2/src/cli/simple-commands/init/templates/claude-md.js:867:// Step 1: MCP tools set up coordination (optional, for complex tasks)
v2/src/cli/simple-commands/init/templates/claude-md.js:874:// Step 2: Claude Code Task tool spawns ACTUAL agents that do the work
v2/src/cli/simple-commands/init/templates/claude-md.js:876:  // Claude Code's Task tool spawns real agents concurrently
v2/src/cli/simple-commands/init/templates/claude-md.js:961:7. Use GitHub tools first
v2/src/cli/simple-commands/init/templates/claude-md.js:990:1. **Register**: Use \`mcp__flow-nexus__user_register\` with email/password
v2/src/cli/simple-commands/init/templates/claude-md.js:1038:- **flow-nexus-user-tools**: User management and system utilities
v2/src/cli/simple-commands/init/templates/claude-md.js:1052:- \`user-tools.md\` - User utilities
v2/src/cli/simple-commands/init/templates/claude-md.js:1083:Flow Nexus seamlessly integrates with Claude Code through MCP (Model Context Protocol):
v2/src/cli/simple-commands/init/templates/claude-md.js:1085:1. **Add MCP Server**: \`claude mcp add flow-nexus npx flow-nexus@latest mcp start\`
v2/src/cli/simple-commands/init/templates/claude-md.js:1086:2. **Use in Claude Code**: Access all Flow Nexus tools through MCP interface
v2/src/cli/simple-commands/init/templates/claude-md.js:1093:- MCP Integration: Use \`mcp__flow-nexus__*\` tools in Claude Code
v2/src/resources/resource-manager.ts:461:  async registerResource(
v2/src/resources/resource-manager.ts:497:    this.logger.info('Resource registered', {
v2/src/resources/resource-manager.ts:504:    this.emit('resource:registered', { resource });
v2/src/resources/resource-manager.ts:509:  async unregisterResource(resourceId: string): Promise<void> {
v2/src/resources/resource-manager.ts:517:      throw new Error(`Cannot unregister resource ${resourceId}: has active allocations`);
v2/src/resources/resource-manager.ts:522:      await this.cancelReservation(reservation.id, 'resource_unregistered');
v2/src/resources/resource-manager.ts:527:    this.logger.info('Resource unregistered', { resourceId });
v2/src/resources/resource-manager.ts:528:    this.emit('resource:unregistered', { resourceId });
v2/src/utils/metrics-reader.ts:58:interface MCPServerStatus {
v2/src/utils/metrics-reader.ts:235:  async getMCPServerStatus(): Promise<MCPServerStatus> {
v2/src/utils/metrics-reader.ts:237:      // Check if MCP server process is running
v2/src/cli/simple-commands/sparc-modes/index.js:132:batchtool run --parallel \\
v2/src/cli/simple-commands/sparc-modes/index.js:138:batchtool orchestrate --boomerang \\
v2/src/cli/simple-commands/sparc-modes/index.js:146:batchtool run --concurrent --max-parallel 3 \\
v2/src/cli/simple-commands/sparc-modes/index.js:132:batchtool run --parallel \\
v2/src/cli/simple-commands/sparc-modes/index.js:138:batchtool orchestrate --boomerang \\
v2/src/cli/simple-commands/sparc-modes/index.js:146:batchtool run --concurrent --max-parallel 3 \\
v2/src/config/config-manager.ts:329:    // MCP validation
v2/src/config/config-manager.ts:418:    // MCP settings
v2/src/config/config-manager.ts:419:    const mcpTransport = process.env.CLAUDE_FLOW_MCP_TRANSPORT;
v2/src/config/config-manager.ts:424:    const mcpPort = process.env.CLAUDE_FLOW_MCP_PORT;
v2/src/cli/command-registry.js:49:export const commandRegistry = new Map();
v2/src/cli/command-registry.js:52:export function registerCoreCommands() {
v2/src/cli/command-registry.js:53:  commandRegistry.set('init', {
v2/src/cli/command-registry.js:73:  commandRegistry.set('start', {
v2/src/cli/command-registry.js:80:      'start --port 8080        # Use custom MCP port',
v2/src/cli/command-registry.js:88:  commandRegistry.set('start-ui', {
v2/src/cli/command-registry.js:105:  commandRegistry.set('memory', {
v2/src/cli/command-registry.js:117:  commandRegistry.set('memory-consolidate', {
v2/src/cli/command-registry.js:143:  commandRegistry.set('sparc', {
v2/src/cli/command-registry.js:158:  commandRegistry.set('maestro', {
v2/src/cli/command-registry.js:178:  commandRegistry.set('agent', {
v2/src/cli/command-registry.js:187:      'agent mcp start --daemon                      # Start MCP server',
v2/src/cli/command-registry.js:195:  ‚Ä¢ MCP server management (213+ tools)
v2/src/cli/command-registry.js:208:  mcp          - MCP server management
v2/src/cli/command-registry.js:215:  commandRegistry.set('proxy', {
v2/src/cli/command-registry.js:254:  commandRegistry.set('task', {
v2/src/cli/command-registry.js:266:  commandRegistry.set('config', {
v2/src/cli/command-registry.js:278:  commandRegistry.set('status', {
v2/src/cli/command-registry.js:285:  commandRegistry.set('mcp', {
v2/src/cli/command-registry.js:287:    description: 'Manage MCP server and tools',
v2/src/cli/command-registry.js:289:    examples: ['mcp status', 'mcp start --port 8080', 'mcp tools --verbose', 'mcp auth setup'],
v2/src/cli/command-registry.js:292:  commandRegistry.set('monitor', {
v2/src/cli/command-registry.js:304:  commandRegistry.set('swarm', {
v2/src/cli/command-registry.js:316:  commandRegistry.set('hive-mind', {
v2/src/cli/command-registry.js:338:  ‚Ä¢ MCP tool integration for 87+ operations
v2/src/cli/command-registry.js:352:  commandRegistry.set('hive-mind-optimize', {
v2/src/cli/command-registry.js:386:  commandRegistry.set('swarm-metrics', {
v2/src/cli/command-registry.js:417:  commandRegistry.set('batch', {
v2/src/cli/command-registry.js:435:  ‚Ä¢ Configuration validation and estimation tools
v2/src/cli/command-registry.js:442:  commandRegistry.set('github', {
v2/src/cli/command-registry.js:470:  commandRegistry.set('training', {
v2/src/cli/command-registry.js:488:  commandRegistry.set('analysis', {
v2/src/cli/command-registry.js:506:  commandRegistry.set('automation', {
v2/src/cli/command-registry.js:534:  commandRegistry.set('coordination', {
v2/src/cli/command-registry.js:552:  commandRegistry.set('hooks', {
v2/src/cli/command-registry.js:572:  commandRegistry.set('hook-safety', {
v2/src/cli/command-registry.js:604:  commandRegistry.set('migrate-hooks', migrateHooksCommandConfig);
v2/src/cli/command-registry.js:606:  commandRegistry.set('fix-hook-variables', {
v2/src/cli/command-registry.js:612:  commandRegistry.set('verify', {
v2/src/cli/command-registry.js:652:  commandRegistry.set('truth', {
v2/src/cli/command-registry.js:685:  commandRegistry.set('neural', {
v2/src/cli/command-registry.js:701:  ‚Ä¢ Distributed neural training with MCP integration`,
v2/src/cli/command-registry.js:704:  commandRegistry.set('goal', {
v2/src/cli/command-registry.js:723:  commandRegistry.set('pair', {
v2/src/cli/command-registry.js:751:  commandRegistry.set('verify-train', {
v2/src/cli/command-registry.js:779:  commandRegistry.set('train-pipeline', {
v2/src/cli/command-registry.js:819:  commandRegistry.set('stream-chain', {
v2/src/cli/command-registry.js:871:  commandRegistry.set('hive', {
v2/src/cli/command-registry.js:929:  commandRegistry.set('ruv-swarm', {
v2/src/cli/command-registry.js:965:  commandRegistry.set('swarm-init', {
v2/src/cli/command-registry.js:979:  commandRegistry.set('neural-spawn', {
v2/src/cli/command-registry.js:993:  commandRegistry.set('memory-coordinate', {
v2/src/cli/command-registry.js:1007:  commandRegistry.set('config-integration', {
v2/src/cli/command-registry.js:1045:export function registerCommand(name, command) {
v2/src/cli/command-registry.js:1046:  if (commandRegistry.has(name)) {
v2/src/cli/command-registry.js:1050:  commandRegistry.set(name, {
v2/src/cli/command-registry.js:1061:  return commandRegistry.get(name);
v2/src/cli/command-registry.js:1064:// List all registered commands
v2/src/cli/command-registry.js:1066:  const commands = [];
v2/src/cli/command-registry.js:1067:  for (const [name, command] of commandRegistry.entries()) {
v2/src/cli/command-registry.js:1080:  return commandRegistry.has(name);
v2/src/cli/command-registry.js:1085:  const command = commandRegistry.get(name);
v2/src/cli/command-registry.js:1100:  const command = commandRegistry.get(name);
v2/src/cli/command-registry.js:1172:  const commands = listCommands();
v2/src/cli/command-registry.js:1186:registerCoreCommands();
v2/src/cli/init/batch-tools.ts:1:// init/batch-tools.ts - Batch tools coordination guides
v2/src/cli/init/batch-tools.ts:11:This guide explains how to use Claude Code's batch tools effectively for swarm orchestration and parallel task execution.
v2/src/cli/init/batch-tools.ts:384:This guide provides the foundation for effective batch tool coordination in Claude-Flow swarm operations.
v2/src/cli/init/batch-tools.ts:387:  await fs.writeFile(path.join(batchToolsDir, 'batch-tools-guide.md'), batchToolsGuide);
v2/src/cli/init/batch-tools.ts:388:  console.log('  ‚úÖ Created batch-tools-guide.md');
v2/src/cli/simple-commands/sparc-modes/ask.js:75:- **\`mcp\`** - For MCP (Model Context Protocol) integrations
v2/src/cli/simple-commands/sparc-modes/ask.js:76:  - Use when: Integrating external tools via MCP, API connections
v2/src/config/ruv-swarm-integration.ts:45:        enableMCPTools: true,
v2/src/cli/commands/monitor.ts:30:export const monitorCommand = new Command()
v2/src/cli/commands/monitor.ts:454:      { type: 'network_event', message: 'MCP connection established', level: 'info' as const },
v2/src/cli/init/index.ts:7:import { createBatchToolsGuide } from './batch-tools.js';
v2/src/cli/init/index.ts:46:        // Phase 4: Create batch tools guides
v2/src/cli/init/index.ts:47:        console.log('\nüîß Phase 4: Creating batch tools guides...');
v2/src/cli/init/index.ts:60:        console.log('   üîß Created batch tools coordination guides');
v2/src/cli/init/index.ts:66:        console.log('   3. Review batch tools guide for orchestration patterns');
v2/src/cli/init/index.ts:72:          console.log('   7. Use Task tool for parallel agent execution');
v2/src/cli/simple-commands/sparc-modes/sparc-orchestrator.js:13:batchtool orchestrate --boomerang --name "${taskDescription}" \\
v2/src/cli/simple-commands/sparc-modes/sparc-orchestrator.js:33:batchtool monitor --dashboard
v2/src/cli/simple-commands/sparc-modes/sparc-orchestrator.js:13:batchtool orchestrate --boomerang --name "${taskDescription}" \\
v2/src/cli/simple-commands/sparc-modes/sparc-orchestrator.js:33:batchtool monitor --dashboard
v2/src/utils/error-recovery.ts:244:    // Ensure build tools are available
v2/src/cli/simple-commands/init/templates/settings.json:44:            "command": "cat | jq -r '.tool_input.command // empty' | tr '\\n' '\\0' | xargs -0 -I {} npx claude-flow@alpha hooks pre-command --command '{}' --validate-safety true --prepare-resources true"
v2/src/cli/simple-commands/init/templates/settings.json:53:            "command": "cat | jq -r '.tool_input.file_path // .tool_input.path // empty' | tr '\\n' '\\0' | xargs -0 -I {} npx claude-flow@alpha hooks pre-edit --file '{}' --auto-assign-agents true --load-context true"
v2/src/cli/simple-commands/init/templates/settings.json:64:            "command": "cat | jq -r '.tool_input.command // empty' | tr '\\n' '\\0' | xargs -0 -I {} npx claude-flow@alpha hooks post-command --command '{}' --track-metrics true --store-results true"
v2/src/cli/simple-commands/init/templates/settings.json:73:            "command": "cat | jq -r '.tool_input.file_path // .tool_input.path // empty' | tr '\\n' '\\0' | xargs -0 -I {} npx claude-flow@alpha hooks post-edit --file '{}' --format true --update-memory true"
v2/src/cli/simple-commands/init/templates/settings.json:84:            "command": "/bin/bash -c 'INPUT=$(cat); CUSTOM=$(echo \"$INPUT\" | jq -r \".custom_instructions // \\\"\\\"\"); echo \"üîÑ PreCompact Guidance:\"; echo \"üìã IMPORTANT: Review CLAUDE.md in project root for:\"; echo \"   ‚Ä¢ 54 available agents and concurrent usage patterns\"; echo \"   ‚Ä¢ Swarm coordination strategies (hierarchical, mesh, adaptive)\"; echo \"   ‚Ä¢ SPARC methodology workflows with batchtools optimization\"; echo \"   ‚Ä¢ Critical concurrent execution rules (GOLDEN RULE: 1 MESSAGE = ALL OPERATIONS)\"; if [ -n \"$CUSTOM\" ]; then echo \"üéØ Custom compact instructions: $CUSTOM\"; fi; echo \"‚úÖ Ready for compact operation\"'"
v2/src/cli/simple-commands/init/templates/settings.json:93:            "command": "/bin/bash -c 'echo \"üîÑ Auto-Compact Guidance (Context Window Full):\"; echo \"üìã CRITICAL: Before compacting, ensure you understand:\"; echo \"   ‚Ä¢ All 54 agents available in .claude/agents/ directory\"; echo \"   ‚Ä¢ Concurrent execution patterns from CLAUDE.md\"; echo \"   ‚Ä¢ Batchtools optimization for 300% performance gains\"; echo \"   ‚Ä¢ Swarm coordination strategies for complex tasks\"; echo \"‚ö° Apply GOLDEN RULE: Always batch operations in single messages\"; echo \"‚úÖ Auto-compact proceeding with full agent context\"'"
v2/src/cli/simple-orchestrator.ts:36:// Simple MCP server
v2/src/cli/simple-orchestrator.ts:37:function startMCPServer(port: number) {
v2/src/cli/simple-orchestrator.ts:38:  console.log(`üåê Starting MCP server on port ${port}...`);
v2/src/cli/simple-orchestrator.ts:39:  // In a real implementation, this would start the actual MCP server
v2/src/cli/simple-orchestrator.ts:412:                    const commands = ['help', 'status', 'agent', 'task', 'memory', 'config', 'start', 'stop'];
v2/src/cli/simple-orchestrator.ts:681:‚Ä¢ MCP Server: <span class="${componentStatus.mcpServer ? 'success' : 'error'}">${componentStatus.mcpServer ? 'Active' : 'Inactive'}</span>
v2/src/cli/simple-orchestrator.ts:845:  // Start MCP Server
v2/src/cli/simple-orchestrator.ts:847:  startMCPServer(mcpPort);
v2/src/cli/simple-orchestrator.ts:848:  console.log('‚úÖ MCP Server started');
v2/src/cli/simple-orchestrator.ts:877:  console.log('   ‚Ä¢ MCP Server: Active');
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-edit.md:80:- Using Edit or MultiEdit tools
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-edit.md:111:- `Edit` - File editing tool
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-edit.md:112:- `MultiEdit` - Multiple edits tool
v2/src/cli/simple-commands/sparc-modes/code.js:89:- Always verify all tool parameters before execution
v2/src/cli/simple-commands/sparc-modes/devops.js:67:     - APM tools (DataDog, New Relic, AppDynamics)
v2/src/cli/simple-commands/sparc-modes/ask.js:75:- **\`mcp\`** - For MCP (Model Context Protocol) integrations
v2/src/cli/simple-commands/sparc-modes/ask.js:76:  - Use when: Integrating external tools via MCP, API connections
v2/src/cli/simple-commands/coordination.js:5:  callRuvSwarmMCP,
v2/src/cli/simple-commands/coordination.js:65:      const swarmResult = await callRuvSwarmMCP('swarm_init', {
v2/src/cli/simple-commands/hook-safety.js:389:        solution: 'Use PostToolUse for specific tools',
v2/src/cli/simple-commands/hook-safety.js:521:    console.log('2. Use PostToolUse hooks for specific tools');
v2/src/cli/simple-commands/training.js:7:  callRuvSwarmMCP,
v2/src/cli/simple-commands/training.js:191:    const updateResult = await callRuvSwarmMCP('learning_adapt', {
v2/src/cli/simple-commands/status.js:30:    reader.getMCPServerStatus(),
v2/src/cli/simple-commands/status.js:184:  console.log(`üåê MCP Server: ${status.mcp.status}`);
v2/src/cli/simple-commands/status.js:204:      console.log('   No agents currently registered');
v2/src/cli/simple-commands/status.js:226:    // MCP details
v2/src/cli/simple-commands/status.js:227:    console.log('\nüåê MCP Server:');
v2/src/cli/simple-commands/start-ui.js:25:        console.log('  ‚ú® Access all 71+ MCP tools through the web interface');
v2/src/cli/simple-commands/stream-chain.js:338:    {"type":"tool_use","name":"...",...}       - Tool invocations
v2/src/cli/simple-commands/swarm-webui-integration.js:33:      // This would integrate with actual ruv-swarm MCP tools
v2/src/cli/simple-commands/swarm-webui-integration.js:48:   * Check if ruv-swarm MCP tools are available
v2/src/cli/simple-commands/swarm-webui-integration.js:52:      // This would check for actual MCP connection
v2/src/cli/simple-commands/start-wrapper.js:100:    console.log(`   MCP Port: ${port}`);
v2/src/cli/simple-commands/start-wrapper.js:124:    // MCP Server
v2/src/cli/simple-commands/start-wrapper.js:125:    console.log('   ‚úì MCP Server: Ready');
v2/src/cli/simple-commands/__tests__/agent.test.js:283:    test('should handle invalid subcommands', async () => {
v2/src/cli/simple-commands/github/init.js:26:    local tool_input="$1"
v2/src/cli/simple-commands/github/init.js:27:    local file=$(echo "$tool_input" | jq -r '.file_path // empty')
v2/src/cli/simple-commands/github/init.js:59:    local tool_input="$1"
v2/src/cli/simple-commands/github/init.js:60:    local file=$(echo "$tool_input" | jq -r '.file_path // empty')
v2/src/cli/simple-commands/github/init.js:316:              command: 'cat | jq -r \'.tool_input.command // empty\' | tr \'\\n\' \'\\0\' | xargs -0 -I {} npx claude-flow@alpha hooks pre-command --command \'{}\' --validate-safety true --prepare-resources true'
v2/src/cli/simple-commands/github/init.js:325:              command: 'cat | jq -r \'.tool_input.file_path // .tool_input.path // empty\' | tr \'\\n\' \'\\0\' | xargs -0 -I {} npx claude-flow@alpha hooks pre-edit --file \'{}\' --auto-assign-agents true --load-context true'
v2/src/cli/simple-commands/github/init.js:329:              command: 'bash .claude/helpers/github-checkpoint-hooks.sh pre-edit "{{tool_input}}"'
v2/src/cli/simple-commands/github/init.js:340:              command: 'cat | jq -r \'.tool_input.command // empty\' | tr \'\\n\' \'\\0\' | xargs -0 -I {} npx claude-flow@alpha hooks post-command --command \'{}\' --track-metrics true --store-results true'
v2/src/cli/simple-commands/github/init.js:349:              command: 'cat | jq -r \'.tool_input.file_path // .tool_input.path // empty\' | tr \'\\n\' \'\\0\' | xargs -0 -I {} npx claude-flow@alpha hooks post-edit --file \'{}\' --format true --update-memory true'
v2/src/cli/simple-commands/github/init.js:353:              command: 'bash .claude/helpers/github-checkpoint-hooks.sh post-edit "{{tool_input}}"'
v2/src/cli/simple-commands/github/init.js:388:              command: '/bin/bash -c \'INPUT=$(cat); CUSTOM=$(echo "$INPUT" | jq -r ".custom_instructions // \"\""); echo "üîÑ PreCompact Guidance:"; echo "üìã IMPORTANT: Review CLAUDE.md in project root for:"; echo "   ‚Ä¢ 54 available agents and concurrent usage patterns"; echo "   ‚Ä¢ Swarm coordination strategies (hierarchical, mesh, adaptive)"; echo "   ‚Ä¢ SPARC methodology workflows with batchtools optimization"; echo "   ‚Ä¢ Critical concurrent execution rules (GOLDEN RULE: 1 MESSAGE = ALL OPERATIONS)"; if [ -n "$CUSTOM" ]; then echo "üéØ Custom compact instructions: $CUSTOM"; fi; echo "‚úÖ Ready for compact operation"\''
v2/src/cli/simple-commands/github/init.js:397:              command: '/bin/bash -c \'echo "üîÑ Auto-Compact Guidance (Context Window Full):"; echo "üìã CRITICAL: Before compacting, ensure you understand:"; echo "   ‚Ä¢ All 54 agents available in .claude/agents/ directory"; echo "   ‚Ä¢ Concurrent execution patterns from CLAUDE.md"; echo "   ‚Ä¢ Batchtools optimization for 300% performance gains"; echo "   ‚Ä¢ Swarm coordination strategies for complex tasks"; echo "‚ö° Apply GOLDEN RULE: Always batch operations in single messages"; echo "‚úÖ Auto-compact proceeding with full agent context"\''
v2/src/cli/simple-commands/goal.js:66:- **Tool Group Management**: Match actions to available tools and capabilities
v2/src/cli/simple-commands/goal.js:98:## MCP Integration Examples
v2/src/cli/commands/sparc.ts:150:    // Build tools based on mode groups
v2/src/cli/commands/sparc.ts:151:    const tools = buildToolsFromGroups(mode.groups);
v2/src/cli/commands/sparc.ts:157:      console.log(`Tools: ${tools}`);
v2/src/cli/commands/sparc.ts:168:    console.log(`üîß Tools: ${tools}`);
v2/src/cli/commands/sparc.ts:173:    await executeClaudeWithSparc(enhancedTask, tools, instanceId, ctx.flags);
v2/src/cli/commands/sparc.ts:247:      const tools = buildToolsFromGroups(mode.groups);
v2/src/cli/commands/sparc.ts:250:      await executeClaudeWithSparc(enhancedTask, tools, instanceId, ctx.flags);
v2/src/cli/commands/sparc.ts:329:      const tools = buildToolsFromGroups(mode.groups);
v2/src/cli/commands/sparc.ts:332:      await executeClaudeWithSparc(enhancedTask, tools, instanceId, ctx.flags);
v2/src/cli/commands/sparc.ts:429:  const toolMappings: Record<string, string[]> = {
v2/src/cli/commands/sparc.ts:433:    mcp: ['mcp_tools'],
v2/src/cli/commands/sparc.ts:437:  const tools = new Set<string>();
v2/src/cli/commands/sparc.ts:439:  // Always include basic tools
v2/src/cli/commands/sparc.ts:440:  tools.add('View');
v2/src/cli/commands/sparc.ts:441:  tools.add('Edit');
v2/src/cli/commands/sparc.ts:442:  tools.add('Bash');
v2/src/cli/commands/sparc.ts:448:      if (toolMappings[groupName]) {
v2/src/cli/commands/sparc.ts:449:        toolMappings[groupName].forEach((tool) => tools.add(tool));
v2/src/cli/commands/sparc.ts:451:    } else if (toolMappings[group]) {
v2/src/cli/commands/sparc.ts:452:      toolMappings[group].forEach((tool) => tools.add(tool));
v2/src/cli/commands/sparc.ts:456:  return Array.from(tools).join(',');
v2/src/cli/commands/sparc.ts:461:  tools: string,
v2/src/cli/commands/sparc.ts:466:  claudeArgs.push('--allowedTools', tools);
v2/src/cli/commands/sparc.ts:536:  console.log('  --config <file>          MCP configuration file');
v2/src/cli/init/swarm-commands.ts:38:Multi-agent research coordination with distributed intelligence gathering using batch tools.
v2/src/reasoningbank/reasoningbank-adapter.js:59:        console.error('  2. USE MCP TOOLS instead:');
v2/src/cli/maestro-cli-bridge.ts:393:    const mockMCPServer = {} as any;
v2/src/cli/maestro-cli-bridge.ts:400:      mockMCPServer,
v2/src/cli/simple-commands/fix-hook-variables.js:42:  tool: ['CLAUDE_TOOL', 'TOOL_NAME', 'TOOL'],
v2/src/cli/simple-commands/fix-hook-variables.js:78:      return `cat | jq -r '.tool_input.file_path // .tool_input.path // ""' | xargs -I {} ${baseCommand}`;
v2/src/cli/simple-commands/fix-hook-variables.js:82:      return `cat | jq -r '.tool_input.command // ""' | xargs -I {} ${baseCommand}`;
v2/src/cli/simple-commands/fix-hook-variables.js:164:    const commands = [];
v2/src/cli/simple-commands/fix-hook-variables.js:311:                'cat | jq -r \'.tool_input.file_path // .tool_input.path // ""\' | xargs -I {} echo "Hook test - File: {}" >> .claude/hook-test.log',
v2/src/cli/simple-commands/init/templates/commands/hooks/post-command.md:79:- After Bash tool execution
v2/src/cli/simple-commands/init/templates/commands/hooks/post-command.md:114:- `Bash` - Command execution tool
v2/src/cli/simple-commands/process-ui-enhanced.js:25:  { id: 'mcp-server', name: 'MCP Server', description: 'Model Context Protocol server' },
v2/src/cli/simple-commands/process-ui.js:21:  { id: 'mcp-server', name: 'MCP Server', description: 'Model Context Protocol server' },
v2/src/core/InitController.ts:168:   * Get registered agents
v2/src/cli/commands/index.ts:61:    subcommands: [
v2/src/cli/commands/index.ts:95:    subcommands: [
v2/src/cli/commands/index.ts:176:          console.log('üí° Use MCP Flow Nexus tools in Claude Code for full functionality');
v2/src/cli/commands/index.ts:288:        description: 'MCP server port',
v2/src/cli/commands/index.ts:306:        console.log('   ‚úì MCP Server');
v2/src/cli/commands/index.ts:472:          console.log('Available subcommands: create, list, assign, workflow');
v2/src/cli/commands/index.ts:527:            console.log('Available subcommands:');
v2/src/cli/commands/index.ts:604:            console.log('Available subcommands (basic): spawn, list');
v2/src/cli/commands/index.ts:652:        console.log(`üåê MCP Server: ${isRunning ? 'Running' : 'Stopped'}`);
v2/src/cli/commands/index.ts:730:          console.log(`üåê MCP Server: ${isRunning ? 'Running' : 'Stopped'}`);
v2/src/cli/commands/index.ts:747:  // MCP command
v2/src/cli/commands/index.ts:750:    description: 'Manage MCP server and tools',
v2/src/cli/commands/index.ts:760:            // MCP server is part of the orchestrator start process
v2/src/cli/commands/index.ts:769:            success(`MCP server is running as part of the orchestration system`);
v2/src/cli/commands/index.ts:771:            console.log(`üîß Available tools: Research, Code, Terminal, Memory`);
v2/src/cli/commands/index.ts:772:            console.log(`üìö Use 'claude-flow mcp tools' to see all available tools`);
v2/src/cli/commands/index.ts:774:            error(`Failed to check MCP server: ${(err as Error).message}`);
v2/src/cli/commands/index.ts:785:              info('MCP server is not running');
v2/src/cli/commands/index.ts:788:                "MCP server runs as part of the orchestrator. Use 'claude-flow stop' to stop the entire system",
v2/src/cli/commands/index.ts:792:            error(`Failed to check MCP server: ${(err as Error).message}`);
v2/src/cli/commands/index.ts:802:            success('MCP Server Status:');
v2/src/cli/commands/index.ts:814:            error(`Failed to get MCP status: ${(err as Error).message}`);
v2/src/cli/commands/index.ts:819:        case 'tools': {
v2/src/cli/commands/index.ts:821:            success('Available MCP Tools:');
v2/src/cli/commands/index.ts:842:            error(`Failed to list tools: ${(err as Error).message}`);
v2/src/cli/commands/index.ts:852:            success('MCP Configuration:');
v2/src/cli/commands/index.ts:855:            error(`Failed to show MCP config: ${(err as Error).message}`);
v2/src/cli/commands/index.ts:863:              "MCP server runs as part of the orchestrator. Use 'claude-flow stop' then 'claude-flow start' to restart the entire system",
v2/src/cli/commands/index.ts:866:            error(`Failed to restart MCP server: ${(err as Error).message}`);
v2/src/cli/commands/index.ts:876:            success(`MCP Server Logs (last ${lines} lines):`);
v2/src/cli/commands/index.ts:877:            console.log('2024-01-10 10:00:00 [INFO] MCP server started on localhost:3000');
v2/src/cli/commands/index.ts:878:            console.log('2024-01-10 10:00:01 [INFO] Tools registered: 12');
v2/src/cli/commands/index.ts:891:          console.log('Available subcommands: start, stop, status, tools, config, restart, logs');
v2/src/cli/commands/index.ts:1046:          console.log('Available subcommands: store, query, export, import, stats, cleanup');
v2/src/cli/commands/index.ts:1065:        name: 'tools',
v2/src/cli/commands/index.ts:1067:        description: 'Allowed tools (comma-separated)',
v2/src/cli/commands/index.ts:1079:        description: 'MCP config file path',
v2/src/cli/commands/index.ts:1145:            // Build allowed tools list
v2/src/cli/commands/index.ts:1146:            let tools =
v2/src/cli/commands/index.ts:1147:              (ctx.flags.tools as string) || 'View,Edit,Replace,GlobTool,GrepTool,LS,Bash';
v2/src/cli/commands/index.ts:1150:              tools += ',BatchTool,dispatch_agent';
v2/src/cli/commands/index.ts:1154:              tools += ',WebFetchTool';
v2/src/cli/commands/index.ts:1179:   - You have access to these tools: ${tools}`;
v2/src/cli/commands/index.ts:1211:   - Use the Bash tool to run \`npx claude-flow\` commands
v2/src/cli/commands/index.ts:1226:To interact with Claude-Flow, use the Bash tool:
v2/src/cli/commands/index.ts:1247:            claudeCmd.push('--allowedTools', tools);
v2/src/cli/commands/index.ts:1264:                `Command: claude "<enhanced task with guidance>" --allowedTools ${tools}`,
v2/src/cli/commands/index.ts:1268:              console.log(`Tools: ${tools}`);
v2/src/cli/commands/index.ts:1275:              console.log(`  - Access Claude-Flow features through Bash tool`);
v2/src/cli/commands/index.ts:1281:            console.log(`üîß Tools: ${tools}`);
v2/src/cli/commands/index.ts:1357:              // Add tools
v2/src/cli/commands/index.ts:1358:              if (task.tools) {
v2/src/cli/commands/index.ts:1359:                const toolsList = Array.isArray(task.tools) ? task.tools.join(',') : task.tools;
v2/src/cli/commands/index.ts:1360:                claudeCmd.push('--allowedTools', toolsList);
v2/src/cli/commands/index.ts:1435:          console.log('Available subcommands: spawn, batch');
v2/src/cli/commands/index.ts:1762:        description: 'MCP config file',
v2/src/cli/commands/index.ts:1826:        description: 'MCP configuration file',
v2/src/cli/commands/index.ts:1952:        description: 'MCP config file',
v2/src/cli/commands/index.ts:2070:        console.log('   ‚úì MCP Server with enhanced transport');
v2/src/cli/commands/index.ts:2099:        { name: 'port', short: 'p', description: 'MCP server port', type: 'number', default: 3000 },
v2/src/cli/commands/index.ts:2102:          description: 'MCP transport type (stdio, http)',
v2/src/cli/commands/index.ts:2146:        console.log('  -t, --tools <tools>        Allowed tools (comma-separated)');
v2/src/cli/commands/index.ts:2148:        console.log('  -c, --config <file>        MCP config file path');
v2/src/cli/commands/index.ts:2164:          `  ${blue('claude-flow claude spawn')} "fix payment bug" --tools "View,Edit,Bash" --no-permissions`,
v2/src/cli/commands/index.ts:2194:        console.log('  -c, --config <file>        MCP config file');
v2/src/cli/commands/index.ts:2247:        console.log('  -c, --config <file>      MCP configuration file');
v2/src/cli/commands/index.ts:2281:        console.log('  -p, --port <port>         MCP server port (default: 3000)');
v2/src/cli/commands/index.ts:2282:        console.log('  --mcp-transport <type>    MCP transport type (stdio, http)');
v2/src/cli/commands/index.ts:2379:        console.log('  mcp          MCP server management');
v2/src/cli/commands/index.ts:2613:- **CLI Interface**: Command-line tools for managing the system
v2/src/cli/commands/index.ts:2617:- **MCP Integration**: Model Context Protocol server for Claude integration
v2/src/cli/simple-commands/web-server.js:428:        case 'tools/call':
v2/src/cli/simple-commands/web-server.js:432:        case 'tools/list':
v2/src/cli/simple-commands/web-server.js:433:          console.log('Handling tools/list request');
v2/src/cli/simple-commands/web-server.js:462:          tools: { listChanged: true },
v2/src/cli/simple-commands/web-server.js:487:   * Handle tool call request
v2/src/cli/simple-commands/web-server.js:492:    // Mock tool execution for demonstration
v2/src/cli/simple-commands/web-server.js:512:   * Handle tools list request
v2/src/cli/simple-commands/web-server.js:515:    const tools = [
v2/src/cli/simple-commands/web-server.js:605:      result: { tools },
v2/src/cli/simple-commands/web-server.js:619:   * Execute mock tool for demonstration
v2/src/cli/simple-commands/neural.js:94:## MCP Integration Examples
v2/src/task/index.ts:82:  const commands = {
v2/src/task/index.ts:124: * Helper function to launch parallel agents (Task tool pattern)
v2/src/task/index.ts:211:// Example: Using Task tool pattern for parallel agents
v2/src/cli/simple-commands/analysis.js:5:  callRuvSwarmMCP,
v2/src/cli/simple-commands/realtime-update-system.js:48:    // Listen for tool execution events
v2/src/cli/simple-commands/realtime-update-system.js:49:    this.subscribe('tool_start', (data) => {
v2/src/cli/simple-commands/realtime-update-system.js:50:      this.broadcastUpdate('tools', {
v2/src/cli/simple-commands/realtime-update-system.js:52:        toolName: data.toolName,
v2/src/cli/simple-commands/realtime-update-system.js:58:    this.subscribe('tool_complete', (data) => {
v2/src/cli/simple-commands/realtime-update-system.js:59:      this.broadcastUpdate('tools', {
v2/src/cli/simple-commands/realtime-update-system.js:61:        toolName: data.toolName,
v2/src/cli/simple-commands/realtime-update-system.js:67:      // Update relevant views based on tool type
v2/src/cli/simple-commands/realtime-update-system.js:68:      this.updateRelatedViews(data.toolName, data.result);
v2/src/cli/simple-commands/realtime-update-system.js:71:    this.subscribe('tool_error', (data) => {
v2/src/cli/simple-commands/realtime-update-system.js:72:      this.broadcastUpdate('tools', {
v2/src/cli/simple-commands/realtime-update-system.js:74:        toolName: data.toolName,
v2/src/cli/simple-commands/realtime-update-system.js:113:      'tools',
v2/src/cli/simple-commands/realtime-update-system.js:272:        case 'tools':
v2/src/cli/simple-commands/realtime-update-system.js:379:   * Apply tools-specific updates
v2/src/cli/simple-commands/realtime-update-system.js:386:        this.ui.addLog('info', `üîß Started: ${update.toolName}`);
v2/src/cli/simple-commands/realtime-update-system.js:393:        this.ui.addLog('success', `‚úÖ Completed: ${update.toolName}`);
v2/src/cli/simple-commands/realtime-update-system.js:405:        this.ui.addLog('error', `‚ùå Failed: ${update.toolName} - ${update.error}`);
v2/src/cli/simple-commands/realtime-update-system.js:469:   * Update related views based on tool execution
v2/src/cli/simple-commands/realtime-update-system.js:471:  updateRelatedViews(toolName, result) {
v2/src/cli/simple-commands/realtime-update-system.js:472:    // Map tool names to affected views
v2/src/cli/simple-commands/realtime-update-system.js:473:    const toolViewMap = {
v2/src/cli/simple-commands/realtime-update-system.js:474:      // Neural tools affect neural view
v2/src/cli/simple-commands/realtime-update-system.js:481:      // Analysis tools affect analysis view
v2/src/cli/simple-commands/realtime-update-system.js:487:      // Swarm tools affect orchestration view
v2/src/cli/simple-commands/realtime-update-system.js:492:      // Memory tools affect memory view
v2/src/cli/simple-commands/realtime-update-system.js:498:    const affectedViews = toolViewMap[toolName] || [];
v2/src/cli/simple-commands/realtime-update-system.js:502:        type: 'tool_result',
v2/src/cli/simple-commands/realtime-update-system.js:503:        toolName,
v2/src/cli/simple-commands/init/templates/verification-claude-md.js:78:  "tool": "Bash",
v2/src/cli/simple-commands/monitor.js:256:    // Count MCP connections
v2/src/cli/simple-commands/monitor.js:257:    const mcpConnections = await countMCPConnections();
v2/src/cli/simple-commands/monitor.js:288:// Count MCP connections
v2/src/cli/simple-commands/monitor.js:289:async function countMCPConnections() {
v2/src/cli/simple-commands/monitor.js:358:  console.log(`   MCP Connections: ${metrics.resources.mcp_connections}`);
v2/src/cli/commands/memory.ts:284:export const memoryCommand = new Command()
v2/src/cli/init/sparc-environment.ts:10:  // Create comprehensive CLAUDE.md with batch tools integration
v2/src/cli/init/sparc-environment.ts:13:  console.log('  ‚úÖ Created CLAUDE.md with batch tools and swarm orchestration');
v2/src/cli/init/sparc-environment.ts:15:  console.log('  ‚úÖ SPARC environment configured with batch tools integration');
v2/src/cli/init/sparc-environment.ts:23:        'SPARC: orchestrator\\nYou are an AI orchestrator coordinating multiple specialized agents to complete complex tasks efficiently using TodoWrite, TodoRead, Task, and Memory tools.',
v2/src/cli/init/sparc-environment.ts:24:      tools: ['TodoWrite', 'TodoRead', 'Task', 'Memory', 'Bash'],
v2/src/cli/init/sparc-environment.ts:30:      tools: ['Read', 'Write', 'Edit', 'Bash', 'Glob', 'Grep', 'TodoWrite'],
v2/src/cli/init/sparc-environment.ts:36:      tools: ['WebSearch', 'WebFetch', 'Read', 'Write', 'Memory', 'TodoWrite', 'Task'],
v2/src/cli/init/sparc-environment.ts:42:      tools: ['Read', 'Write', 'Edit', 'Bash', 'TodoWrite', 'Task'],
v2/src/cli/init/sparc-environment.ts:48:      tools: ['Read', 'Write', 'Glob', 'Memory', 'TodoWrite', 'Task'],
v2/src/cli/init/sparc-environment.ts:54:      tools: ['Read', 'Edit', 'Grep', 'Bash', 'TodoWrite', 'Memory'],
v2/src/cli/init/sparc-environment.ts:60:      tools: ['Read', 'Edit', 'Bash', 'Grep', 'TodoWrite', 'Memory'],
v2/src/cli/init/sparc-environment.ts:66:      tools: ['Read', 'Write', 'Edit', 'Bash', 'TodoWrite', 'Task'],
v2/src/cli/init/sparc-environment.ts:72:      tools: ['Read', 'Grep', 'Bash', 'Write', 'Memory', 'TodoWrite', 'Task'],
v2/src/cli/init/sparc-environment.ts:78:      tools: ['Read', 'Edit', 'Bash', 'Grep', 'TodoWrite', 'Memory'],
v2/src/cli/init/sparc-environment.ts:84:      tools: ['Read', 'Write', 'Glob', 'Memory', 'TodoWrite'],
v2/src/cli/init/sparc-environment.ts:90:      tools: ['Read', 'Write', 'Edit', 'Memory', 'TodoWrite'],
v2/src/cli/init/sparc-environment.ts:96:      tools: ['Read', 'Write', 'WebSearch', 'Memory', 'TodoWrite', 'Task'],
v2/src/cli/init/sparc-environment.ts:102:      tools: ['TodoWrite', 'TodoRead', 'Task', 'Memory', 'Bash'],
v2/src/cli/init/sparc-environment.ts:107:        'SPARC: memory-manager\\nYou manage knowledge and memory systems using Memory tools for persistent storage and TodoWrite for knowledge organization.',
v2/src/cli/init/sparc-environment.ts:108:      tools: ['Memory', 'Read', 'Write', 'TodoWrite', 'TodoRead'],
v2/src/cli/init/sparc-environment.ts:113:        'SPARC: batch-executor\\nYou excel at executing multiple tasks in parallel using batch tool operations and Task coordination for maximum efficiency.',
v2/src/cli/init/sparc-environment.ts:114:      tools: ['Task', 'Bash', 'Read', 'Write', 'TodoWrite', 'Memory'],
v2/src/cli/init/sparc-environment.ts:120:      tools: ['TodoWrite', 'TodoRead', 'Task', 'Bash', 'Memory'],
v2/src/cli/init/sparc-environment.ts:129:This CLAUDE.md file configures Claude Code to help you BUILD YOUR OWN APPLICATIONS using the claude-flow orchestration system. Claude-flow is a tool to help you develop software - it is NOT the project you should be modifying.
v2/src/cli/init/sparc-environment.ts:134:- Focus on YOUR PROJECT'S code, not the orchestration tool
v2/src/cli/init/sparc-environment.ts:153:Claude-flow provides powerful AI orchestration tools to accelerate YOUR application development. Use these commands to build YOUR project:
v2/src/cli/init/sparc-environment.ts:283:./claude-flow memory store "app_type" "SaaS project management tool"
v2/src/cli/init/sparc-environment.ts:288:./claude-flow sparc run architect "Design scalable SaaS architecture for project management tool"
v2/src/enterprise/security-manager.ts:160:    tools: string[];
v2/src/enterprise/security-manager.ts:1312:          tools: ['Dependabot', 'Renovate', 'GitHub Actions'],
v2/src/cli/simple-commands/sparc.js:48:  const knownSubcommands = ['modes', 'info', 'run', 'tdd'];
v2/src/cli/simple-commands/sparc.js:218:    // Build tools based on mode groups
v2/src/cli/simple-commands/sparc.js:219:    const tools = buildToolsFromGroups(mode.groups);
v2/src/cli/simple-commands/sparc.js:220:    const toolsList = Array.from(tools).join(',');
v2/src/cli/simple-commands/sparc.js:233:        console.log(`Tools: ${toolsList}`);
v2/src/cli/simple-commands/sparc.js:252:      console.log(`üîß Tools: ALL (including MCP and WebSearch via --dangerously-skip-permissions)`);
v2/src/cli/simple-commands/sparc.js:255:      console.log(`üîß Tools: ${toolsList}`);
v2/src/cli/simple-commands/sparc.js:272:    await executeClaude(enhancedTask, toolsList, instanceId, memoryNamespace, subArgs);
v2/src/cli/simple-commands/sparc.js:316:  const toolMappings = {
v2/src/cli/simple-commands/sparc.js:320:    mcp: ['mcp_tools'],
v2/src/cli/simple-commands/sparc.js:324:  const tools = new Set(['View', 'Edit', 'Bash']); // Always include basic tools
v2/src/cli/simple-commands/sparc.js:329:      if (toolMappings[groupName]) {
v2/src/cli/simple-commands/sparc.js:330:        toolMappings[groupName].forEach((tool) => tools.add(tool));
v2/src/cli/simple-commands/sparc.js:332:    } else if (toolMappings[group]) {
v2/src/cli/simple-commands/sparc.js:333:      toolMappings[group].forEach((tool) => tools.add(tool));
v2/src/cli/simple-commands/sparc.js:337:  return tools;
v2/src/cli/simple-commands/sparc.js:340:async function executeClaude(enhancedTask, toolsList, instanceId, memoryNamespace, subArgs) {
v2/src/cli/simple-commands/sparc.js:366:  // When using --dangerously-skip-permissions, we don't need to specify individual tools
v2/src/cli/simple-commands/sparc.js:367:  // as it enables ALL tools including mcp and websearch
v2/src/cli/simple-commands/sparc.js:370:    claudeArgs.push('--allowedTools', toolsList);
v2/src/cli/simple-commands/sparc.js:390:      enablePermissions ? `Specified: ${toolsList}` : 'ALL tools enabled (MCP, WebSearch, etc.)',
v2/src/cli/simple-commands/sparc.js:487:  console.log('  batchtool run --parallel \\');
v2/src/cli/simple-commands/sparc.js:493:  console.log('  batchtool orchestrate --boomerang \\');
v2/src/cli/simple-commands/sparc.js:508:  console.log('  --config <path>          Use custom MCP configuration file');
v2/src/cli/simple-commands/enhanced-webui-complete.js:3: * Combines all MCP tools with enhanced UI views and real-time updates
v2/src/cli/simple-commands/enhanced-webui-complete.js:4: * Provides access to all 87 Claude-Flow MCP tools through a comprehensive interface
v2/src/cli/simple-commands/enhanced-webui-complete.js:10:import MCPIntegrationLayer from './mcp-integration-layer.js';
v2/src/cli/simple-commands/enhanced-webui-complete.js:11:import ToolExecutionFramework from './tool-execution-framework.js';
v2/src/cli/simple-commands/enhanced-webui-complete.js:15:// Enhanced view modes with all tool categories
v2/src/cli/simple-commands/enhanced-webui-complete.js:46:    this.toolFramework = null;
v2/src/cli/simple-commands/enhanced-webui-complete.js:80:      // Initialize MCP integration layer
v2/src/cli/simple-commands/enhanced-webui-complete.js:81:      this.mcpIntegration = new MCPIntegrationLayer(this);
v2/src/cli/simple-commands/enhanced-webui-complete.js:83:      // Initialize tool execution framework
v2/src/cli/simple-commands/enhanced-webui-complete.js:84:      this.toolFramework = new ToolExecutionFramework(this);
v2/src/cli/simple-commands/enhanced-webui-complete.js:101:      this.addLog('success', 'üöÄ Enhanced Web UI fully initialized with all 87 MCP tools');
v2/src/cli/simple-commands/enhanced-webui-complete.js:117:      { id: 'mcp-server', name: 'MCP Server', description: 'Model Context Protocol server' },
v2/src/cli/simple-commands/enhanced-webui-complete.js:179:        message: 'üîÑ Workflow engine loaded 11 automation tools',
v2/src/cli/simple-commands/enhanced-webui-complete.js:184:        message: 'üêô GitHub connector established with 8 integration tools',
v2/src/cli/simple-commands/enhanced-webui-complete.js:189:        message: 'ü§ñ DAA controller managing 8 dynamic agent tools',
v2/src/cli/simple-commands/enhanced-webui-complete.js:194:        message: 'üíæ Memory system active with 12 persistence tools',
v2/src/cli/simple-commands/enhanced-webui-complete.js:199:        message: 'üõ†Ô∏è System utilities loaded 8 management tools',
v2/src/cli/simple-commands/enhanced-webui-complete.js:258:    printInfo('üîß Comprehensive MCP Tool Integration - 87 Tools Available');
v2/src/cli/simple-commands/enhanced-webui-complete.js:262:    // Show tool categories summary
v2/src/cli/simple-commands/enhanced-webui-complete.js:281:   * Show tool categories summary at startup
v2/src/cli/simple-commands/enhanced-webui-complete.js:298:        `  ${cat.icon} ${this.colors.white(cat.name)}: ${this.colors.yellow(cat.count)} tools`,
v2/src/cli/simple-commands/enhanced-webui-complete.js:302:    console.log(this.colors.green(`Total: ${this.colors.bold('87')} MCP tools ready for use`));
v2/src/cli/simple-commands/enhanced-webui-complete.js:401:    // Enhanced tool tabs (row 2)
v2/src/cli/simple-commands/enhanced-webui-complete.js:402:    const toolTabs = [
v2/src/cli/simple-commands/enhanced-webui-complete.js:410:    let toolTabLine = '';
v2/src/cli/simple-commands/enhanced-webui-complete.js:411:    toolTabs.forEach((tab) => {
v2/src/cli/simple-commands/enhanced-webui-complete.js:416:      toolTabLine += `  ${this.colors.bold(tab.key)}:${label}`;
v2/src/cli/simple-commands/enhanced-webui-complete.js:419:    console.log(toolTabLine);
v2/src/cli/simple-commands/enhanced-webui-complete.js:458:    console.log('  üß† Neural (15 tools): Training, prediction, model management');
v2/src/cli/simple-commands/enhanced-webui-complete.js:459:    console.log('  üìä Analysis (13 tools): Performance reports, monitoring, metrics');
v2/src/cli/simple-commands/enhanced-webui-complete.js:460:    console.log('  üîÑ Workflow (11 tools): Automation, pipelines, scheduling');
v2/src/cli/simple-commands/enhanced-webui-complete.js:461:    console.log('  üêô GitHub (8 tools): Repository management, PR automation');
v2/src/cli/simple-commands/enhanced-webui-complete.js:462:    console.log('  ü§ñ DAA (8 tools): Dynamic agent architecture');
v2/src/cli/simple-commands/enhanced-webui-complete.js:463:    console.log('  üõ†Ô∏è System (8 tools): Configuration, security, diagnostics');
v2/src/cli/simple-commands/enhanced-webui-complete.js:464:    console.log('  üêù Swarm (12 tools): Agent coordination, task orchestration');
v2/src/cli/simple-commands/enhanced-webui-complete.js:465:    console.log('  üíæ Memory (12 tools): Persistence, caching, namespaces');
v2/src/cli/simple-commands/enhanced-webui-complete.js:469:    console.log('  r: Run custom tool (from any view)');
v2/src/cli/simple-commands/enhanced-webui-complete.js:471:    console.log('  b: Batch tool execution');
v2/src/cli/simple-commands/enhanced-webui-complete.js:478:    console.log('  ‚Ä¢ Comprehensive MCP tool integration');
v2/src/cli/simple-commands/enhanced-webui-complete.js:496:    const toolStatus = this.toolFramework ? this.toolFramework.getStatus() : null;
v2/src/cli/simple-commands/enhanced-webui-complete.js:499:    statusLine += `MCP: ${mcpStatus?.mcpAvailable ? this.colors.green('‚úì') : this.colors.red('‚úó')} | `;
v2/src/cli/simple-commands/enhanced-webui-complete.js:501:    statusLine += `Active: ${this.colors.blue(toolStatus?.currentExecutions || 0)} | `;
v2/src/cli/simple-commands/enhanced-webui-complete.js:502:    statusLine += `Queued: ${this.colors.cyan(toolStatus?.queuedExecutions || 0)} | `;
v2/src/cli/simple-commands/enhanced-webui-complete.js:629:   * Prompt for tool execution
v2/src/cli/simple-commands/enhanced-webui-complete.js:633:    // For now, execute a sample tool
v2/src/cli/simple-commands/enhanced-webui-complete.js:637:      const result = await this.toolFramework.executeTool('features_detect');
v2/src/cli/simple-commands/enhanced-webui-complete.js:652:      const result = await this.toolFramework.executePredefinedWorkflow('performance_analysis');
v2/src/cli/simple-commands/enhanced-webui-complete.js:666:      { toolName: 'swarm_status' },
v2/src/cli/simple-commands/enhanced-webui-complete.js:667:      { toolName: 'neural_status' },
v2/src/cli/simple-commands/enhanced-webui-complete.js:668:      { toolName: 'memory_usage', parameters: { action: 'list' } },
v2/src/cli/simple-commands/enhanced-webui-complete.js:672:      const result = await this.toolFramework.executeToolsBatch(batchTools, { parallel: true });
v2/src/cli/simple-commands/enhanced-webui-complete.js:786:        `Enhanced: ${this.colors.yellow('87 MCP tools')} available across ${this.colors.yellow('8 categories')}`,
v2/src/cli/simple-commands/enhanced-webui-complete.js:802:    console.log(`  MCP Tools: ${this.colors.yellow('87')} available`);
v2/src/cli/simple-commands/enhanced-webui-complete.js:831:        `  MCP Connection: ${mcpStatus.mcpAvailable ? this.colors.green('Connected') : this.colors.red('Mock Mode')}`,
v2/src/cli/simple-commands/enhanced-webui-complete.js:906:      this.colors.cyan('‚ö° Quick Actions: [1-9] Execute swarm tools | [r] Run custom tool'),
v2/src/utils/types.ts:259:  mcp: MCPConfig;
v2/src/utils/types.ts:305:export interface MCPConfig {
v2/src/utils/types.ts:311:  auth?: MCPAuthConfig;
v2/src/utils/types.ts:312:  loadBalancer?: MCPLoadBalancerConfig;
v2/src/utils/types.ts:365:// MCP types - Full protocol compliance
v2/src/utils/types.ts:366:export interface MCPProtocolVersion {
v2/src/utils/types.ts:372:export interface MCPCapabilities {
v2/src/utils/types.ts:383:  tools?: {
v2/src/utils/types.ts:389:export interface MCPInitializeParams {
v2/src/utils/types.ts:390:  protocolVersion: MCPProtocolVersion;
v2/src/utils/types.ts:391:  capabilities: MCPCapabilities;
v2/src/utils/types.ts:398:export interface MCPInitializeResult {
v2/src/utils/types.ts:399:  protocolVersion: MCPProtocolVersion;
v2/src/utils/types.ts:400:  capabilities: MCPCapabilities;
v2/src/utils/types.ts:408:export interface MCPTool {
v2/src/utils/types.ts:412:  handler: (input: unknown, context?: MCPContext) => Promise<unknown>;
v2/src/utils/types.ts:415:export interface MCPPrompt {
v2/src/utils/types.ts:425:export interface MCPResource {
v2/src/utils/types.ts:432:export interface MCPRequest {
v2/src/utils/types.ts:439:export interface MCPResponse {
v2/src/utils/types.ts:443:  error?: MCPError;
v2/src/utils/types.ts:446:export interface MCPNotification {
v2/src/utils/types.ts:452:export interface MCPError {
v2/src/utils/types.ts:458:export interface MCPToolCall {
v2/src/utils/types.ts:463:export interface MCPToolResult {
v2/src/utils/types.ts:473:export interface MCPLogEntry {
v2/src/utils/types.ts:479:export interface MCPSession {
v2/src/utils/types.ts:485:  protocolVersion: MCPProtocolVersion;
v2/src/utils/types.ts:486:  capabilities: MCPCapabilities;
v2/src/utils/types.ts:499:export interface MCPAuthConfig {
v2/src/utils/types.ts:513:export interface MCPLoadBalancerConfig {
v2/src/utils/types.ts:521:export interface MCPMetrics {
v2/src/utils/types.ts:527:  toolInvocations: Record<string, number>;
v2/src/utils/types.ts:564:export interface MCPContext {
v2/src/cli/init/claude-config.ts:52:  console.log('  ‚úÖ Created .claude/config.json with batch tools configuration');
v2/src/cli/init/claude-config.ts:65:    description: 'Batch tools configuration for Claude Code orchestration',
v2/src/cli/init/claude-config.ts:66:    tools: {
v2/src/cli/init/claude-config.ts:142:  await fs.writeFile('.claude/configs/batch-tools.json', JSON.stringify(batchConfig, null, 2));
v2/src/cli/init/claude-config.ts:143:  console.log('  ‚úÖ Created batch tools configuration');
v2/src/cli/init/claude-config.ts:158:        tools: ['WebSearch', 'WebFetch', 'Memory', 'TodoWrite', 'Task'],
v2/src/cli/init/claude-config.ts:166:        tools: ['Read', 'Write', 'Edit', 'Bash', 'Memory', 'TodoWrite', 'Task'],
v2/src/cli/init/claude-config.ts:174:        tools: ['Read', 'Bash', 'Memory', 'TodoWrite', 'Task'],
v2/src/cli/init/claude-config.ts:182:        tools: ['Read', 'Write', 'Bash', 'TodoWrite', 'Task'],
v2/src/cli/init/claude-config.ts:190:        tools: ['Read', 'Edit', 'Bash', 'Memory', 'TodoWrite'],
v2/src/cli/init/claude-config.ts:198:        tools: ['Read', 'Write', 'Bash', 'TodoWrite', 'Memory'],
v2/src/cli/commands/claude.ts:11:export const claudeCommand = new Command()
v2/src/cli/commands/claude.ts:24:    '-t, --tools <tools>',
v2/src/cli/commands/claude.ts:25:    'Allowed tools (comma-separated)',
v2/src/cli/commands/claude.ts:29:  .option('-c, --config <config>', 'MCP config file path')
v2/src/cli/commands/claude.ts:45:      // Build allowed tools list
v2/src/cli/commands/claude.ts:46:      let tools = options.tools;
v2/src/cli/commands/claude.ts:47:      if (options.parallel && !tools.includes('BatchTool')) {
v2/src/cli/commands/claude.ts:48:        tools += ',BatchTool,dispatch_agent';
v2/src/cli/commands/claude.ts:50:      if (options.research && !tools.includes('WebFetchTool')) {
v2/src/cli/commands/claude.ts:51:        tools += ',WebFetchTool';
v2/src/cli/commands/claude.ts:56:      claudeArgs.push('--allowedTools', tools);
v2/src/cli/commands/claude.ts:76:        console.log(`  Tools: ${tools}`);
v2/src/cli/commands/claude.ts:85:      console.log(chalk.gray(`Tools: ${tools}`));
v2/src/cli/commands/claude.ts:137:        // Add tools
v2/src/cli/commands/claude.ts:138:        if (task.tools) {
v2/src/cli/commands/claude.ts:141:            Array.isArray(task.tools) ? task.tools.join(',') : task.tools,
v2/src/core/config.ts:971:    // MCP settings
v2/src/core/config.ts:972:    const mcpTransport = process.env.CLAUDE_FLOW_MCP_TRANSPORT;
v2/src/core/config.ts:981:    const mcpPort = process.env.CLAUDE_FLOW_MCP_PORT;
v2/src/cli/simple-commands/swarm.js:172:  Swarm attempts to open Claude Code CLI with comprehensive MCP tool instructions
v2/src/cli/simple-commands/swarm.js:363:    // Default behavior: spawn Claude Code with comprehensive swarm MCP instructions
v2/src/cli/simple-commands/swarm.js:381:      const swarmPrompt = `You are orchestrating a Claude Flow Swarm using Claude Code's Task tool for agent execution.
v2/src/cli/simple-commands/swarm.js:385:‚úÖ Claude Code's Task tool = Spawns agents that DO the actual work
v2/src/cli/simple-commands/swarm.js:386:‚ùå MCP tools = Only for coordination setup, NOT for execution
v2/src/cli/simple-commands/swarm.js:408:1. ‚úÖ READ files for analysis (Read tool)
v2/src/cli/simple-commands/swarm.js:409:2. ‚úÖ SEARCH codebases (Glob, Grep tools)
v2/src/cli/simple-commands/swarm.js:417:1. ‚ùå NEVER use Write tool to modify files
v2/src/cli/simple-commands/swarm.js:418:2. ‚ùå NEVER use Edit or MultiEdit tools
v2/src/cli/simple-commands/swarm.js:449:Step A: Optional MCP Coordination Setup (Single Message):
v2/src/cli/simple-commands/swarm.js:451:[MCP Tools - Coordination ONLY]:
v2/src/cli/simple-commands/swarm.js:462:  // Spawn ALL agents using Task tool in ONE message
v2/src/cli/simple-commands/swarm.js:483:‚ö†Ô∏è CRITICAL: Claude Code's Task tool does the ACTUAL work!
v2/src/cli/simple-commands/swarm.js:484:- MCP tools = Coordination setup only
v2/src/cli/simple-commands/swarm.js:485:- Task tool = Spawns agents that execute real work
v2/src/cli/simple-commands/swarm.js:605:üîß AVAILABLE MCP TOOLS FOR SWARM COORDINATION:
v2/src/cli/simple-commands/swarm.js:731:ü§ù AGENT TYPES & THEIR MCP TOOL USAGE:
v2/src/cli/simple-commands/swarm.js:734:- Primary tools: swarm_monitor, agent_assign, task_create
v2/src/cli/simple-commands/swarm.js:739:- Primary tools: memory_search, memory_store
v2/src/cli/simple-commands/swarm.js:744:- Primary tools: task_update, memory_retrieve, memory_store
v2/src/cli/simple-commands/swarm.js:749:- Primary tools: memory_search, swarm_monitor
v2/src/cli/simple-commands/swarm.js:754:- Primary tools: task_status, agent_communicate
v2/src/cli/simple-commands/swarm.js:758:üìù EXAMPLE MCP TOOL USAGE PATTERNS:
v2/src/cli/simple-commands/swarm.js:791:Start by spawning a coordinator agent and creating the initial task structure. Use the MCP tools to orchestrate the swarm, coordinate agents, and track progress. Remember to store important decisions and artifacts in collective memory for other agents to access.
v2/src/cli/simple-commands/swarm.js:851:        console.log('  Use MCP tools for coordination and memory sharing');
v2/src/cli/simple-commands/swarm.js:982:        console.log('   ‚Ä¢ Recommended agents and MCP tool usage');
v2/src/cli/simple-commands/swarm.js:1809:MCP TOOL PATTERN:
v2/src/cli/simple-commands/swarm.js:1830:MCP TOOL USAGE:
v2/src/cli/simple-commands/swarm.js:1853:MCP TOOL USAGE:
v2/src/cli/simple-commands/swarm.js:1876:MCP TOOL USAGE:
v2/src/cli/simple-commands/swarm.js:1899:MCP TOOL USAGE:
v2/src/cli/simple-commands/swarm.js:1922:MCP TOOL USAGE:
v2/src/cli/simple-commands/swarm.js:1945:MCP TOOL USAGE:
v2/src/task/README.md:20:- **Memory Coordination**: Cross-agent state sharing via Memory tools
v2/src/task/README.md:21:- **Batch Operations**: Parallel file operations and tool coordination
v2/src/task/README.md:22:- **Agent Launching**: Task tool pattern for parallel agent execution
v2/src/task/README.md:109:// Launch coordinated agents using Task tool pattern
v2/src/task/README.md:324:The task management system is designed to work seamlessly with Claude Code's batch tools:
v2/src/task/README.md:348:- Efficient tool utilization
v2/src/task/README.md:372:3. **Use batch operations** to minimize tool calls
v2/src/cli/simple-commands/init/validation/config-validator.js:299:    const recommendedFields = ['description', 'persona', 'tools'];
v2/src/cli/simple-commands/init/validation/config-validator.js:307:    if ('tools' in modeConfig && !Array.isArray(modeConfig.tools)) {
v2/src/cli/simple-commands/init/validation/config-validator.js:308:      result.errors.push('tools must be an array');
v2/src/cli/simple-commands/agent.ts:12:  const agent = new Command('agent')
v2/src/cli/simple-commands/init/templates/commands/hooks/post-edit.md:80:- After Edit tool completes
v2/src/cli/simple-commands/init/templates/commands/hooks/post-edit.md:115:- `Edit` - File editing tool
v2/src/cli/simple-commands/task.js:40:  const program = new Command()
v2/src/cli/simple-commands/task.js:142:  const program = new Command()
v2/src/cli/simple-commands/init/templates/safe-hook-patterns.js:77: * React to specific tool usage rather than session end
v2/src/cli/simple-commands/init/templates/safe-hook-patterns.js:398:Use claude-flow's built-in safety tools:
v2/src/cli/simple-commands/hooks.js:94:      // MCP Integration Hooks
v2/src/cli/simple-commands/hooks.js:853:// ===== MCP INTEGRATION HOOKS =====
v2/src/cli/simple-commands/hooks.js:878:    console.log(`  üíæ MCP session saved to .swarm/memory.db`);
v2/src/cli/simple-commands/hooks.js:879:    printSuccess(`MCP initialized hook completed`);
v2/src/cli/simple-commands/hooks.js:881:    printError(`MCP initialized hook failed: ${err.message}`);
v2/src/cli/simple-commands/hooks.js:921:    console.log(`  üíæ Agent registered to .swarm/memory.db`);
v2/src/cli/simple-commands/hooks.js:1008:    const commands = await store.list({ namespace: 'command-history', limit: 1000 });
v2/src/cli/simple-commands/hooks.js:1208:      console.log('Usage: echo \'{"tool_input":{"command":"your command"}}\' | claude-flow hooks modify-bash');
v2/src/cli/simple-commands/hooks.js:1212:      console.log('  echo \'{"tool_input":{"command":"rm test.txt"}}\' | claude-flow hooks modify-bash');
v2/src/cli/simple-commands/hooks.js:1227:  const toolInput = JSON.parse(input);
v2/src/cli/simple-commands/hooks.js:1228:  const command = toolInput.tool_input?.command || '';
v2/src/cli/simple-commands/hooks.js:1266:    ...toolInput,
v2/src/cli/simple-commands/hooks.js:1267:    tool_input: {
v2/src/cli/simple-commands/hooks.js:1268:      ...toolInput.tool_input,
v2/src/cli/simple-commands/hooks.js:1287:      console.log('Usage: echo \'{"tool_input":{"file_path":"your/file.js"}}\' | claude-flow hooks modify-file');
v2/src/cli/simple-commands/hooks.js:1291:      console.log('  echo \'{"tool_input":{"file_path":"test.js"}}\' | claude-flow hooks modify-file');
v2/src/cli/simple-commands/hooks.js:1306:  const toolInput = JSON.parse(input);
v2/src/cli/simple-commands/hooks.js:1307:  const filePath = toolInput.tool_input?.file_path || toolInput.tool_input?.path || '';
v2/src/cli/simple-commands/hooks.js:1352:    ...toolInput,
v2/src/cli/simple-commands/hooks.js:1353:    tool_input: {
v2/src/cli/simple-commands/hooks.js:1354:      ...toolInput.tool_input,
v2/src/cli/simple-commands/hooks.js:1359:    if (toolInput.tool_input.file_path) {
v2/src/cli/simple-commands/hooks.js:1360:      output.tool_input.file_path = modifiedPath;
v2/src/cli/simple-commands/hooks.js:1362:      output.tool_input.path = modifiedPath;
v2/src/cli/simple-commands/hooks.js:1380:      console.log('Usage: echo \'{"tool_input":{"command":"git commit -m \\"message\\""}}\'  | claude-flow hooks modify-git-commit');
v2/src/cli/simple-commands/hooks.js:1384:      console.log('  echo \'{"tool_input":{"command":"git commit -m \\"fix bug\\""}}\'  | claude-flow hooks modify-git-commit');
v2/src/cli/simple-commands/hooks.js:1399:  const toolInput = JSON.parse(input);
v2/src/cli/simple-commands/hooks.js:1400:  const command = toolInput.tool_input?.command || '';
v2/src/cli/simple-commands/hooks.js:1464:    ...toolInput,
v2/src/cli/simple-commands/hooks.js:1465:    tool_input: {
v2/src/cli/simple-commands/hooks.js:1466:      ...toolInput.tool_input,
v2/src/cli/simple-commands/hooks.js:1500:  console.log('\nMCP Integration Hooks:');
v2/src/cli/simple-commands/hooks.js:1501:  console.log('  mcp-initialized    Persist MCP configuration');
v2/src/cli/simple-commands/hooks.js:1515:  console.log('  modify-bash        Modify Bash tool inputs (reads/writes JSON via stdin/stdout)');
v2/src/cli/simple-commands/hooks.js:1521:  console.log('  modify-file        Modify Write/Edit tool inputs (reads/writes JSON via stdin/stdout)');
v2/src/cli/simple-commands/hooks.js:1541:  console.log('  echo \'{"tool_input":{"command":"rm test.txt"}}\' | hooks modify-bash');
v2/src/cli/simple-commands/hooks.js:1542:  console.log('  echo \'{"tool_input":{"file_path":"test.js"}}\' | hooks modify-file');
v2/src/cli/simple-commands/hooks.js:1543:  console.log('  echo \'{"tool_input":{"command":"git commit -m \\"fix bug\\""}}\' | hooks modify-git-commit');
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-command.md:79:- Using Bash tool
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-command.md:111:- `Bash` - Command execution tool
v2/src/cli/commands/hive-mind/task.ts:18:export const taskCommand = new Command('task')
v2/src/mcp/tool-registry-progressive.ts:4: * Implements Anthropic's MCP best practices:
v2/src/mcp/tool-registry-progressive.ts:5: * - Filesystem-based tool discovery
v2/src/mcp/tool-registry-progressive.ts:6: * - Lazy loading of tool definitions
v2/src/mcp/tool-registry-progressive.ts:10: * This registry replaces the old monolithic approach where all 50+ tools
v2/src/mcp/tool-registry-progressive.ts:11: * were loaded upfront. Now tools are discovered via metadata scanning and
v2/src/mcp/tool-registry-progressive.ts:15:import { createInProcessServer, InProcessMCPServer } from './in-process-server.js';
v2/src/mcp/tool-registry-progressive.ts:16:import { DynamicToolLoader } from './tools/loader.js';
v2/src/mcp/tool-registry-progressive.ts:17:import { createSearchToolsTool } from './tools/system/search.js';
v2/src/mcp/tool-registry-progressive.ts:19:import type { MCPTool } from '../utils/types.js';
v2/src/mcp/tool-registry-progressive.ts:38:      tool: sdk.tool,
v2/src/mcp/tool-registry-progressive.ts:59:  toolsDirectory?: string;
v2/src/mcp/tool-registry-progressive.ts:68: * 3. tools/search capability for progressive disclosure
v2/src/mcp/tool-registry-progressive.ts:72:  private toolLoader: DynamicToolLoader;
v2/src/mcp/tool-registry-progressive.ts:73:  private inProcessServer?: InProcessMCPServer;
v2/src/mcp/tool-registry-progressive.ts:76:  private toolCache: Map<string, MCPTool> = new Map();
v2/src/mcp/tool-registry-progressive.ts:81:    // Initialize dynamic tool loader
v2/src/mcp/tool-registry-progressive.ts:82:    const toolsDir = config.toolsDirectory || join(__dirname, 'tools');
v2/src/mcp/tool-registry-progressive.ts:83:    this.toolLoader = new DynamicToolLoader(toolsDir, logger);
v2/src/mcp/tool-registry-progressive.ts:88:      toolsDirectory: toolsDir,
v2/src/mcp/tool-registry-progressive.ts:94:   * Initialize the tool registry with progressive disclosure
v2/src/mcp/tool-registry-progressive.ts:97:   * - OLD: Load all 50+ tool definitions upfront (~150k tokens)
v2/src/mcp/tool-registry-progressive.ts:98:   * - NEW: Scan metadata only (~2k tokens), load tools on-demand
v2/src/mcp/tool-registry-progressive.ts:101:    logger.info('Initializing progressive tool registry...');
v2/src/mcp/tool-registry-progressive.ts:103:    // Scan for tool metadata (lightweight operation)
v2/src/mcp/tool-registry-progressive.ts:104:    await this.toolLoader.scanTools();
v2/src/mcp/tool-registry-progressive.ts:106:    const stats = this.toolLoader.getStats();
v2/src/mcp/tool-registry-progressive.ts:110:      toolsByCategory: stats.toolsByCategory,
v2/src/mcp/tool-registry-progressive.ts:115:    // Register core system tools that are always loaded
v2/src/mcp/tool-registry-progressive.ts:116:    await this.registerCoreTools();
v2/src/mcp/tool-registry-progressive.ts:123:    logger.info('Progressive tool registry initialized', {
v2/src/mcp/tool-registry-progressive.ts:125:      coreToolsLoaded: this.toolCache.size,
v2/src/mcp/tool-registry-progressive.ts:131:   * Register core tools that are always loaded
v2/src/mcp/tool-registry-progressive.ts:132:   * These are lightweight system tools like tools/search
v2/src/mcp/tool-registry-progressive.ts:134:  private async registerCoreTools(): Promise<void> {
v2/src/mcp/tool-registry-progressive.ts:135:    logger.info('Registering core system tools...');
v2/src/mcp/tool-registry-progressive.ts:137:    // Register tools/search capability (progressive disclosure)
v2/src/mcp/tool-registry-progressive.ts:138:    const searchTool = createSearchToolsTool(this.toolLoader, logger);
v2/src/mcp/tool-registry-progressive.ts:139:    this.toolCache.set(searchTool.name, searchTool);
v2/src/mcp/tool-registry-progressive.ts:141:    logger.info('Core tools registered', {
v2/src/mcp/tool-registry-progressive.ts:142:      coreTools: Array.from(this.toolCache.keys()),
v2/src/mcp/tool-registry-progressive.ts:150:    logger.info('Creating progressive in-process MCP server...');
v2/src/mcp/tool-registry-progressive.ts:160:    // Register only core tools initially (lazy load the rest)
v2/src/mcp/tool-registry-progressive.ts:161:    for (const [name, tool] of this.toolCache) {
v2/src/mcp/tool-registry-progressive.ts:162:      this.inProcessServer.registerTool(tool);
v2/src/mcp/tool-registry-progressive.ts:173:    // Create SDK MCP server for integration
v2/src/mcp/tool-registry-progressive.ts:176:    const stats = this.toolLoader.getStats();
v2/src/mcp/tool-registry-progressive.ts:177:    logger.info('Progressive in-process MCP server created', {
v2/src/mcp/tool-registry-progressive.ts:179:      initiallyLoaded: this.toolCache.size,
v2/src/mcp/tool-registry-progressive.ts:185:   * Create SDK-compatible MCP server with progressive disclosure
v2/src/mcp/tool-registry-progressive.ts:200:    // Create SDK tools for discovered tools
v2/src/mcp/tool-registry-progressive.ts:201:    const stats = this.toolLoader.getStats();
v2/src/mcp/tool-registry-progressive.ts:202:    const allToolNames = this.toolLoader.getAllToolNames();
v2/src/mcp/tool-registry-progressive.ts:204:    // Create SDK tools with lazy loading
v2/src/mcp/tool-registry-progressive.ts:205:    const sdkTools = allToolNames.map(toolName => {
v2/src/mcp/tool-registry-progressive.ts:206:      return this.createLazySdkTool(toolName, sdk);
v2/src/mcp/tool-registry-progressive.ts:209:    // Create SDK MCP server
v2/src/mcp/tool-registry-progressive.ts:213:      tools: sdkTools,
v2/src/mcp/tool-registry-progressive.ts:216:    logger.info('SDK MCP server created with progressive disclosure', {
v2/src/mcp/tool-registry-progressive.ts:223:   * Create SDK tool wrapper with lazy loading
v2/src/mcp/tool-registry-progressive.ts:226:  private createLazySdkTool(toolName: string, sdk: any): any {
v2/src/mcp/tool-registry-progressive.ts:228:    const metadata = this.toolLoader.getToolMetadata(toolName);
v2/src/mcp/tool-registry-progressive.ts:231:      logger.warn('Tool metadata not found', { toolName });
v2/src/mcp/tool-registry-progressive.ts:238:    // Create SDK tool with lazy loading
v2/src/mcp/tool-registry-progressive.ts:239:    return sdk.tool(
v2/src/mcp/tool-registry-progressive.ts:240:      toolName,
v2/src/mcp/tool-registry-progressive.ts:244:        // Lazy load the full tool definition on first invocation
v2/src/mcp/tool-registry-progressive.ts:245:        const mcpTool = await this.getOrLoadTool(toolName);
v2/src/mcp/tool-registry-progressive.ts:248:          throw new Error(`Tool not found: ${toolName}`);
v2/src/mcp/tool-registry-progressive.ts:253:          return await this.inProcessServer.callTool(toolName, args);
v2/src/mcp/tool-registry-progressive.ts:276:   * Get or lazy load a tool
v2/src/mcp/tool-registry-progressive.ts:279:  private async getOrLoadTool(toolName: string): Promise<MCPTool | null> {
v2/src/mcp/tool-registry-progressive.ts:281:    if (this.toolCache.has(toolName)) {
v2/src/mcp/tool-registry-progressive.ts:282:      return this.toolCache.get(toolName)!;
v2/src/mcp/tool-registry-progressive.ts:285:    // Lazy load the tool
v2/src/mcp/tool-registry-progressive.ts:286:    logger.debug('Lazy loading tool', { toolName });
v2/src/mcp/tool-registry-progressive.ts:288:    const tool = await this.toolLoader.loadTool(toolName, logger);
v2/src/mcp/tool-registry-progressive.ts:290:    if (tool) {
v2/src/mcp/tool-registry-progressive.ts:292:      this.toolCache.set(toolName, tool);
v2/src/mcp/tool-registry-progressive.ts:296:        this.inProcessServer.registerTool(tool);
v2/src/mcp/tool-registry-progressive.ts:300:        toolName,
v2/src/mcp/tool-registry-progressive.ts:301:        totalCached: this.toolCache.size,
v2/src/mcp/tool-registry-progressive.ts:305:    return tool;
v2/src/mcp/tool-registry-progressive.ts:309:   * Get tool by name (with lazy loading)
v2/src/mcp/tool-registry-progressive.ts:311:  async getTool(name: string): Promise<MCPTool | undefined> {
v2/src/mcp/tool-registry-progressive.ts:316:   * Get all discovered tool names
v2/src/mcp/tool-registry-progressive.ts:320:    return this.toolLoader.getAllToolNames();
v2/src/mcp/tool-registry-progressive.ts:324:   * Search tools with progressive disclosure
v2/src/mcp/tool-registry-progressive.ts:332:    return this.toolLoader.searchTools(query);
v2/src/mcp/tool-registry-progressive.ts:345:  getInProcessServer(): InProcessMCPServer | undefined {
v2/src/mcp/tool-registry-progressive.ts:350:   * Check if tool should use in-process execution
v2/src/mcp/tool-registry-progressive.ts:352:  shouldUseInProcess(toolName: string): boolean {
v2/src/mcp/tool-registry-progressive.ts:353:    // All discovered tools use in-process
v2/src/mcp/tool-registry-progressive.ts:354:    return this.toolLoader.getToolMetadata(toolName) !== undefined;
v2/src/mcp/tool-registry-progressive.ts:358:   * Route tool call to appropriate transport with lazy loading
v2/src/mcp/tool-registry-progressive.ts:361:    toolName: string,
v2/src/mcp/tool-registry-progressive.ts:368:      // Ensure tool is loaded
v2/src/mcp/tool-registry-progressive.ts:369:      const tool = await this.getOrLoadTool(toolName);
v2/src/mcp/tool-registry-progressive.ts:371:      if (!tool) {
v2/src/mcp/tool-registry-progressive.ts:372:        throw new Error(`Tool not available: ${toolName}`);
v2/src/mcp/tool-registry-progressive.ts:375:      if (this.shouldUseInProcess(toolName) && this.inProcessServer) {
v2/src/mcp/tool-registry-progressive.ts:376:        logger.debug('Routing to in-process server', { toolName });
v2/src/mcp/tool-registry-progressive.ts:377:        const result = await this.inProcessServer.callTool(toolName, args, context);
v2/src/mcp/tool-registry-progressive.ts:380:        logger.info('In-process tool call completed', {
v2/src/mcp/tool-registry-progressive.ts:381:          toolName,
v2/src/mcp/tool-registry-progressive.ts:384:          lazyLoaded: !this.toolCache.has(toolName),
v2/src/mcp/tool-registry-progressive.ts:390:      // External tools would use stdio/SSE (not implemented in this phase)
v2/src/mcp/tool-registry-progressive.ts:391:      logger.warn('Tool not found in in-process registry', { toolName });
v2/src/mcp/tool-registry-progressive.ts:392:      throw new Error(`Tool not available: ${toolName}`);
v2/src/mcp/tool-registry-progressive.ts:394:      logger.error('Tool routing failed', { toolName, error });
v2/src/mcp/tool-registry-progressive.ts:403:    const loaderStats = this.toolLoader.getStats();
v2/src/mcp/tool-registry-progressive.ts:416:    const estimatedOldTokens = loaderStats.totalTools * 3000; // Estimate 3k tokens per tool
v2/src/mcp/tool-registry-progressive.ts:424:        currentlyLoaded: this.toolCache.size,
v2/src/mcp/tool-registry-progressive.ts:425:        lazyLoadPercentage: ((this.toolCache.size / loaderStats.totalTools) * 100).toFixed(2) + '%',
v2/src/mcp/tool-registry-progressive.ts:457:    // Estimated IPC latency (based on typical MCP stdio overhead)
v2/src/mcp/tool-registry-progressive.ts:470:   * Reload tools (useful for development)
v2/src/mcp/tool-registry-progressive.ts:473:    logger.info('Reloading tool registry...');
v2/src/mcp/tool-registry-progressive.ts:476:    this.toolCache.clear();
v2/src/mcp/tool-registry-progressive.ts:478:    // Reload tool metadata
v2/src/mcp/tool-registry-progressive.ts:479:    await this.toolLoader.reload();
v2/src/mcp/tool-registry-progressive.ts:481:    // Re-register core tools
v2/src/mcp/tool-registry-progressive.ts:482:    await this.registerCoreTools();
v2/src/mcp/tool-registry-progressive.ts:496:    this.toolCache.clear();
v2/src/mcp/tool-registry-progressive.ts:497:    this.toolLoader.clearCache();
v2/src/mcp/tool-registry-progressive.ts:499:    logger.info('Progressive tool registry cleaned up');
v2/src/mcp/tool-registry-progressive.ts:504: * Create a progressive tool registry instance
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-search.md:79:- Using Grep tool
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-search.md:80:- Using Glob tool
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-search.md:109:- `Grep` - Content search tool
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-search.md:110:- `Glob` - File pattern tool
v2/src/cli/simple-commands/hive-mind.js:62:// Import MCP tool wrappers
v2/src/cli/simple-commands/hive-mind.js:63:import { MCPToolWrapper } from './hive-mind/mcp-wrapper.js';
v2/src/cli/simple-commands/hive-mind.js:918:    // Enhanced coordination instructions with MCP tools
v2/src/cli/simple-commands/hive-mind.js:2085:    console.log(chalk.gray('Note: Individual memory deletion not yet implemented in MCPWrapper.'));
v2/src/cli/simple-commands/hive-mind.js:2185:    console.log(chalk.cyan('MCP Tools:'), 'Full Claude-Flow integration enabled');
v2/src/cli/simple-commands/hive-mind.js:2345:          chalk.blue('  Use MCP tools for collective intelligence and task distribution'),
v2/src/cli/simple-commands/hive-mind.js:2416:üîß AVAILABLE MCP TOOLS FOR HIVE MIND COORDINATION:
v2/src/cli/simple-commands/hive-mind.js:2454:   Step 1: Optional MCP Coordination Setup (Single Message):
v2/src/cli/simple-commands/hive-mind.js:2455:   [MCP Tools - Coordination Only]:
v2/src/cli/simple-commands/hive-mind.js:2565:The Hive Mind MUST use Claude Code's Task tool for actual agent execution:
v2/src/cli/simple-commands/hive-mind.js:2582:- Use Claude Code's Task tool to spawn ALL agents in ONE message
v2/src/cli/simple-commands/hive-mind.js:2583:- MCP tools are ONLY for coordination setup, not agent execution
v2/src/cli/simple-commands/hive-mind.js:3273: * Get MCP wrapper instance
v2/src/cli/simple-commands/hive-mind.js:3276:  const { MCPToolWrapper } = await import('./hive-mind/mcp-wrapper.js');
v2/src/cli/simple-commands/hive-mind.js:3277:  return new MCPToolWrapper();
v2/src/cli/commands/hive-mind/resume.ts:13:export const resumeCommand = new Command('resume')
v2/src/mcp/server-standalone.js:4: * Standalone MCP server entry point
v2/src/mcp/server-standalone.js:5: * Uses the new TypeScript-based MCPServer with Phase 4 SDK integration
v2/src/mcp/server-standalone.js:22:  const { MCPServer } = await import(pathToFileURL(path.join(__dirname, 'server.js')).href);
v2/src/mcp/server-standalone.js:28:  logger.info('[claude-flow-mcp] Claude-Flow MCP server starting', {
v2/src/mcp/server-standalone.js:35:    // Create orchestrator for MCP tools
v2/src/mcp/server-standalone.js:42:    // Create and start MCP server
v2/src/mcp/server-standalone.js:43:    const server = new MCPServer({
v2/src/mcp/server-standalone.js:55:      tools: 'claude-flow + swarm + ruv-swarm',
v2/src/cli/simple-commands/concurrent-display.js:87:  addActivity(agentId, activity, tool = null) {
v2/src/cli/simple-commands/concurrent-display.js:91:      agent.currentTool = tool;
v2/src/cli/commands/hive-mind/index.ts:19:export const hiveMindCommand = new Command('hive-mind')
v2/src/modes/EnterpriseInit.ts:14:    return ['ConfigManager', 'DatabaseManager', 'TopologyManager', 'AgentRegistry', 'ConsensusEngine', 'MetricsCollector', 'MCPIntegrator'];
v2/src/modes/EnterpriseInit.ts:117:      // Initialize enterprise MCP integration
v2/src/modes/EnterpriseInit.ts:121:        // Test enterprise MCP functions
v2/src/modes/EnterpriseInit.ts:123:          tool: 'flow-nexus',
v2/src/modes/EnterpriseInit.ts:129:          components.push('EnterpriseMCP');
v2/src/cli/simple-commands/init/templates/CLAUDE.md:1:# Claude Code Configuration - SPARC Development Environment (Batchtools Optimized)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:9:2. **Task tool**: ALWAYS spawn ALL agents in ONE message with full instructions
v2/src/cli/simple-commands/init/templates/CLAUDE.md:59:**üöÄ Batchtools Optimization Enabled**: This configuration includes optimized prompts and parallel processing capabilities for improved performance and efficiency.
v2/src/cli/simple-commands/init/templates/CLAUDE.md:69:### Batchtools Commands (Optimized)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:80:## SPARC Methodology Workflow (Batchtools Enhanced)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:87:**Batchtools Optimization**: Simultaneously analyze multiple requirement sources, validate constraints in parallel, and generate comprehensive specifications.
v2/src/cli/simple-commands/init/templates/CLAUDE.md:94:**Batchtools Optimization**: Process multiple algorithm patterns concurrently, validate logic flows in parallel, and optimize data structures simultaneously.
v2/src/cli/simple-commands/init/templates/CLAUDE.md:101:**Batchtools Optimization**: Generate multiple architectural alternatives simultaneously, validate integration points in parallel, and create comprehensive documentation concurrently.
v2/src/cli/simple-commands/init/templates/CLAUDE.md:108:**Batchtools Optimization**: Generate multiple test scenarios simultaneously, implement and validate code in parallel, and optimize performance concurrently.
v2/src/cli/simple-commands/init/templates/CLAUDE.md:115:**Batchtools Optimization**: Run integration tests in parallel, generate documentation concurrently, and validate requirements simultaneously.
v2/src/cli/simple-commands/init/templates/CLAUDE.md:117:## Batchtools Integration Features
v2/src/cli/simple-commands/init/templates/CLAUDE.md:133:### Batchtools Performance Improvements
v2/src/cli/simple-commands/init/templates/CLAUDE.md:140:## Code Style and Best Practices (Batchtools Enhanced)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:142:### SPARC Development Principles with Batchtools
v2/src/cli/simple-commands/init/templates/CLAUDE.md:149:### Batchtools Best Practices
v2/src/cli/simple-commands/init/templates/CLAUDE.md:150:- **Parallel Operations**: Use batchtools for independent tasks
v2/src/cli/simple-commands/init/templates/CLAUDE.md:163:- Claude Code slash commands provide quick access to batchtools-optimized SPARC modes
v2/src/cli/simple-commands/init/templates/CLAUDE.md:170:**CRITICAL**: Always spawn multiple agents concurrently using the Task tool in a single message:
v2/src/cli/simple-commands/init/templates/CLAUDE.md:325:For more information about SPARC methodology and batchtools optimization, see: 
v2/src/cli/simple-commands/init/templates/CLAUDE.md:327:- Batchtools Documentation: https://github.com/ruvnet/claude-code-flow/docs/batchtools.md
v2/src/cli/simple-commands/init/templates/CLAUDE.md:368:### üß† Claude Flow MCP Tools ONLY Handle:
v2/src/cli/simple-commands/init/templates/CLAUDE.md:379:**‚ùå MCP Tools NEVER:**
v2/src/cli/simple-commands/init/templates/CLAUDE.md:389:**‚úÖ MCP Tools ONLY:**
v2/src/cli/simple-commands/init/templates/CLAUDE.md:399:**MCP tools coordinate, Claude Code executes.** Think of MCP tools as the "brain" that plans and coordinates, while Claude Code is the "hands" that do all the actual work.
v2/src/cli/simple-commands/init/templates/CLAUDE.md:405:1. **MCP**: `mcp__claude-flow__swarm_init` (coordination setup)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:406:2. **MCP**: `mcp__claude-flow__agent_spawn` (planning agents)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:407:3. **MCP**: `mcp__claude-flow__task_orchestrate` (task coordination)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:408:4. **Claude Code**: `Task` tool to spawn agents with coordination instructions
v2/src/cli/simple-commands/init/templates/CLAUDE.md:411:7. **MCP**: `mcp__claude-flow__memory_usage` (store results)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:415:1. **MCP**: `mcp__claude-flow__terminal_execute` (DON'T DO THIS)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:416:2. **MCP**: File creation via MCP (DON'T DO THIS)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:417:3. **MCP**: Code generation via MCP (DON'T DO THIS)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:423:- **MCP tools** = Coordination, planning, memory, intelligence
v2/src/cli/simple-commands/init/templates/CLAUDE.md:433:2. **ALWAYS** combine multiple tool calls in ONE message
v2/src/cli/simple-commands/init/templates/CLAUDE.md:447:2. **Task** tool calls MUST be batched - spawn multiple agents in ONE message
v2/src/cli/simple-commands/init/templates/CLAUDE.md:457:  // MCP coordination setup
v2/src/cli/simple-commands/init/templates/CLAUDE.md:519:## üöÄ Quick Setup (Stdio MCP - Recommended)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:521:### 1. Add MCP Server (Stdio - No Port Needed)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:524:# Add Claude Flow MCP server to Claude Code using stdio
v2/src/cli/simple-commands/init/templates/CLAUDE.md:528:### 2. Use MCP Tools for Coordination in Claude Code
v2/src/cli/simple-commands/init/templates/CLAUDE.md:530:Once configured, Claude Flow MCP tools enhance Claude Code's coordination:
v2/src/cli/simple-commands/init/templates/CLAUDE.md:534:- Use the `mcp__claude-flow__swarm_init` tool to set up coordination topology
v2/src/cli/simple-commands/init/templates/CLAUDE.md:540:- Use `mcp__claude-flow__agent_spawn` tool to create specialized coordinators
v2/src/cli/simple-commands/init/templates/CLAUDE.md:546:- Use `mcp__claude-flow__task_orchestrate` tool to coordinate complex workflows
v2/src/cli/simple-commands/init/templates/CLAUDE.md:550:## Available MCP Tools for Coordination
v2/src/cli/simple-commands/init/templates/CLAUDE.md:620:3. Claude Code uses its native Read, WebSearch, and Task tools
v2/src/cli/simple-commands/init/templates/CLAUDE.md:644:- Result: Claude Code implements features using its native tools
v2/src/cli/simple-commands/init/templates/CLAUDE.md:653:3. Claude Code uses Write, Edit, Bash tools for implementation
v2/src/cli/simple-commands/init/templates/CLAUDE.md:683:- Use MCP tools to coordinate Claude Code's approach to complex tasks
v2/src/cli/simple-commands/init/templates/CLAUDE.md:685:- Use memory tools to maintain context across sessions
v2/src/cli/simple-commands/init/templates/CLAUDE.md:686:- Monitor coordination effectiveness with status tools
v2/src/cli/simple-commands/init/templates/CLAUDE.md:688:- Leverage GitHub tools for repository management
v2/src/cli/simple-commands/init/templates/CLAUDE.md:693:- Use MCP tools for file operations (use Claude Code's native tools)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:695:- Confuse coordination with execution (MCP coordinates, Claude executes)
v2/src/cli/simple-commands/init/templates/CLAUDE.md:780:7. **GitHub First**: Use GitHub tools for repository management
v2/src/cli/simple-commands/init/templates/CLAUDE.md:790:1. **SPAWN ALL AGENTS IN ONE BATCH** - Use multiple tool calls in a SINGLE message
v2/src/cli/simple-commands/init/templates/CLAUDE.md:792:3. **USE BATCHTOOL FOR EVERYTHING** - Multiple operations = Single message with multiple tools
v2/src/cli/simple-commands/init/templates/CLAUDE.md:829:When you spawn an agent using the Task tool, that agent MUST:
v2/src/cli/simple-commands/init/templates/CLAUDE.md:895:  // MCP coordination setup
v2/src/cli/simple-commands/init/templates/CLAUDE.md:1133:1. **SPAWN** all agents using Task tool in ONE message
v2/src/utils/errors.ts:113: * MCP-related errors
v2/src/utils/errors.ts:115:export class MCPError extends ClaudeFlowError {
v2/src/utils/errors.ts:117:    super(message, 'MCP_ERROR', details);
v2/src/utils/errors.ts:118:    this.name = 'MCPError';
v2/src/utils/errors.ts:122:export class MCPTransportError extends MCPError {
v2/src/utils/errors.ts:123:  override readonly code = 'MCP_TRANSPORT_ERROR';
v2/src/utils/errors.ts:130:export class MCPMethodNotFoundError extends MCPError {
v2/src/utils/errors.ts:131:  override readonly code = 'MCP_METHOD_NOT_FOUND';
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1194:Guide to spawning agents with Claude Code's Task tool.
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1198:**CRITICAL**: Always use Claude Code's Task tool for actual agent execution:
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1207:## MCP Coordination Setup (Optional)
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1209:MCP tools are ONLY for coordination:
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1217:2. Use Task tool for execution
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1218:3. MCP only for coordination
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1251:# Setup MCP server for Claude Flow
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1253:echo "üöÄ Setting up Claude Flow MCP server..."
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1262:# Add MCP server
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1263:echo "üì¶ Adding Claude Flow MCP server..."
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1266:echo "‚úÖ MCP server setup complete!"
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1267:echo "üéØ You can now use mcp__claude-flow__ tools in Claude Code"
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1430:    local tool_input="$1"
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1431:    local file=$(echo "$tool_input" | jq -r '.file_path // empty')
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1463:    local tool_input="$1"
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1464:    local file=$(echo "$tool_input" | jq -r '.file_path // empty')
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1864:    local tool_input="$1"
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1865:    local file=$(echo "$tool_input" | jq -r '.file_path // empty')
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1897:    local tool_input="$1"
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:1898:    local file=$(echo "$tool_input" | jq -r '.file_path // empty')
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2179:### Claude Flow MCP Tools Handle:
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2188:**MCP tools DO NOT create content or write code.** They coordinate and enhance Claude Code's native capabilities.
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2192:1. Add MCP server: \`claude mcp add claude-flow npx claude-flow mcp start\`
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2247:                  'cat | jq -r \'.tool_input.command // ""\' | xargs -I {} npx claude-flow@alpha hooks pre-command --command "{}" --validate-safety true --prepare-resources true',
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2257:                  'cat | jq -r \'.tool_input.file_path // .tool_input.path // ""\' | xargs -I {} npx claude-flow@alpha hooks pre-edit --file "{}" --auto-assign-agents true --load-context true',
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2261:                command: './.claude/helpers/standard-checkpoint-hooks.sh pre-edit "{{tool_input}}"',
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2273:                  'cat | jq -r \'.tool_input.command // ""\' | xargs -I {} npx claude-flow@alpha hooks post-command --command "{}" --track-metrics true --store-results true',
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2283:                  'cat | jq -r \'.tool_input.file_path // .tool_input.path // ""\' | xargs -I {} npx claude-flow@alpha hooks post-edit --file "{}" --format true --update-memory true --train-neural true',
v2/src/cli/simple-commands/init/templates/enhanced-templates.js:2287:                command: './.claude/helpers/standard-checkpoint-hooks.sh post-edit "{{tool_input}}"',
v2/src/cli/simple-commands/enhanced-ui-views.js:3: * Provides comprehensive interfaces for all 71+ missing MCP tools
v2/src/cli/simple-commands/enhanced-ui-views.js:4: * Organized by tool categories with real-time updates
v2/src/cli/simple-commands/enhanced-ui-views.js:7:import ToolExecutionFramework from './tool-execution-framework.js';
v2/src/cli/simple-commands/enhanced-ui-views.js:9:// Enhanced view modes with all missing tool categories
v2/src/cli/simple-commands/enhanced-ui-views.js:17:  // New enhanced views for missing tools
v2/src/cli/simple-commands/enhanced-ui-views.js:18:  NEURAL: 'neural', // Neural Network tools (15 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:19:  ANALYSIS: 'analysis', // Analysis & Monitoring tools (13 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:20:  WORKFLOW: 'workflow', // Workflow & Automation tools (11 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:21:  GITHUB: 'github', // GitHub Integration tools (8 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:22:  DAA: 'daa', // Dynamic Agent Architecture tools (8 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:23:  SYSTEM: 'system', // System & Utilities tools (6+ tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:24:  TOOLS: 'tools', // Tool execution center
v2/src/cli/simple-commands/enhanced-ui-views.js:30:    this.toolFramework = new ToolExecutionFramework(ui);
v2/src/cli/simple-commands/enhanced-ui-views.js:46:    // Neural tools data
v2/src/cli/simple-commands/enhanced-ui-views.js:121:   * Render Neural Network Tools View (15 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:140:    // Neural tools grid
v2/src/cli/simple-commands/enhanced-ui-views.js:143:      { key: '1', tool: 'neural_train', desc: 'Train neural patterns' },
v2/src/cli/simple-commands/enhanced-ui-views.js:144:      { key: '2', tool: 'neural_predict', desc: 'Make predictions' },
v2/src/cli/simple-commands/enhanced-ui-views.js:145:      { key: '3', tool: 'neural_status', desc: 'Check model status' },
v2/src/cli/simple-commands/enhanced-ui-views.js:146:      { key: '4', tool: 'model_save', desc: 'Save trained model' },
v2/src/cli/simple-commands/enhanced-ui-views.js:147:      { key: '5', tool: 'model_load', desc: 'Load existing model' },
v2/src/cli/simple-commands/enhanced-ui-views.js:148:      { key: '6', tool: 'pattern_recognize', desc: 'Recognize patterns' },
v2/src/cli/simple-commands/enhanced-ui-views.js:149:      { key: '7', tool: 'cognitive_analyze', desc: 'Analyze behavior' },
v2/src/cli/simple-commands/enhanced-ui-views.js:150:      { key: '8', tool: 'learning_adapt', desc: 'Adaptive learning' },
v2/src/cli/simple-commands/enhanced-ui-views.js:151:      { key: '9', tool: 'neural_compress', desc: 'Compress models' },
v2/src/cli/simple-commands/enhanced-ui-views.js:152:      { key: 'a', tool: 'ensemble_create', desc: 'Create ensembles' },
v2/src/cli/simple-commands/enhanced-ui-views.js:153:      { key: 'b', tool: 'transfer_learn', desc: 'Transfer learning' },
v2/src/cli/simple-commands/enhanced-ui-views.js:154:      { key: 'c', tool: 'neural_explain', desc: 'Explain predictions' },
v2/src/cli/simple-commands/enhanced-ui-views.js:155:      { key: 'd', tool: 'wasm_optimize', desc: 'WASM optimization' },
v2/src/cli/simple-commands/enhanced-ui-views.js:156:      { key: 'e', tool: 'inference_run', desc: 'Run inference' },
v2/src/cli/simple-commands/enhanced-ui-views.js:182:   * Render Analysis & Monitoring View (13 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:199:    // Analysis tools grid
v2/src/cli/simple-commands/enhanced-ui-views.js:202:      { key: '1', tool: 'performance_report', desc: 'Generate performance reports' },
v2/src/cli/simple-commands/enhanced-ui-views.js:203:      { key: '2', tool: 'bottleneck_analyze', desc: 'Identify bottlenecks' },
v2/src/cli/simple-commands/enhanced-ui-views.js:204:      { key: '3', tool: 'token_usage', desc: 'Analyze token consumption' },
v2/src/cli/simple-commands/enhanced-ui-views.js:205:      { key: '4', tool: 'benchmark_run', desc: 'Run benchmarks' },
v2/src/cli/simple-commands/enhanced-ui-views.js:206:      { key: '5', tool: 'metrics_collect', desc: 'Collect system metrics' },
v2/src/cli/simple-commands/enhanced-ui-views.js:207:      { key: '6', tool: 'trend_analysis', desc: 'Analyze trends' },
v2/src/cli/simple-commands/enhanced-ui-views.js:208:      { key: '7', tool: 'cost_analysis', desc: 'Resource cost analysis' },
v2/src/cli/simple-commands/enhanced-ui-views.js:209:      { key: '8', tool: 'quality_assess', desc: 'Quality assessment' },
v2/src/cli/simple-commands/enhanced-ui-views.js:210:      { key: '9', tool: 'error_analysis', desc: 'Error pattern analysis' },
v2/src/cli/simple-commands/enhanced-ui-views.js:211:      { key: 'a', tool: 'usage_stats', desc: 'Usage statistics' },
v2/src/cli/simple-commands/enhanced-ui-views.js:212:      { key: 'b', tool: 'health_check', desc: 'System health check' },
v2/src/cli/simple-commands/enhanced-ui-views.js:213:      { key: 'c', tool: 'task_status', desc: 'Check task status' },
v2/src/cli/simple-commands/enhanced-ui-views.js:214:      { key: 'd', tool: 'task_results', desc: 'Get task results' },
v2/src/cli/simple-commands/enhanced-ui-views.js:235:   * Render Workflow & Automation View (11 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:239:    const workflows = this.toolFramework.getPredefinedWorkflows();
v2/src/cli/simple-commands/enhanced-ui-views.js:251:    // Workflow tools
v2/src/cli/simple-commands/enhanced-ui-views.js:254:      { key: '1', tool: 'workflow_create', desc: 'Create custom workflow' },
v2/src/cli/simple-commands/enhanced-ui-views.js:255:      { key: '2', tool: 'workflow_execute', desc: 'Execute workflow' },
v2/src/cli/simple-commands/enhanced-ui-views.js:256:      { key: '3', tool: 'sparc_mode', desc: 'SPARC development modes' },
v2/src/cli/simple-commands/enhanced-ui-views.js:257:      { key: '4', tool: 'automation_setup', desc: 'Setup automation' },
v2/src/cli/simple-commands/enhanced-ui-views.js:258:      { key: '5', tool: 'pipeline_create', desc: 'Create CI/CD pipeline' },
v2/src/cli/simple-commands/enhanced-ui-views.js:259:      { key: '6', tool: 'scheduler_manage', desc: 'Manage scheduling' },
v2/src/cli/simple-commands/enhanced-ui-views.js:260:      { key: '7', tool: 'trigger_setup', desc: 'Setup triggers' },
v2/src/cli/simple-commands/enhanced-ui-views.js:261:      { key: '8', tool: 'batch_process', desc: 'Batch processing' },
v2/src/cli/simple-commands/enhanced-ui-views.js:262:      { key: '9', tool: 'parallel_execute', desc: 'Parallel execution' },
v2/src/cli/simple-commands/enhanced-ui-views.js:263:      { key: 'a', tool: 'workflow_template', desc: 'Workflow templates' },
v2/src/cli/simple-commands/enhanced-ui-views.js:264:      { key: 'b', tool: 'workflow_export', desc: 'Export workflows' },
v2/src/cli/simple-commands/enhanced-ui-views.js:281:   * Render GitHub Integration View (8 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:297:    // GitHub tools
v2/src/cli/simple-commands/enhanced-ui-views.js:300:      { key: '1', tool: 'github_repo_analyze', desc: 'Analyze repository' },
v2/src/cli/simple-commands/enhanced-ui-views.js:301:      { key: '2', tool: 'github_pr_manage', desc: 'Manage pull requests' },
v2/src/cli/simple-commands/enhanced-ui-views.js:302:      { key: '3', tool: 'github_issue_track', desc: 'Track issues' },
v2/src/cli/simple-commands/enhanced-ui-views.js:303:      { key: '4', tool: 'github_release_coord', desc: 'Coordinate releases' },
v2/src/cli/simple-commands/enhanced-ui-views.js:304:      { key: '5', tool: 'github_workflow_auto', desc: 'Workflow automation' },
v2/src/cli/simple-commands/enhanced-ui-views.js:305:      { key: '6', tool: 'github_code_review', desc: 'Automated code review' },
v2/src/cli/simple-commands/enhanced-ui-views.js:306:      { key: '7', tool: 'github_sync_coord', desc: 'Multi-repo sync' },
v2/src/cli/simple-commands/enhanced-ui-views.js:307:      { key: '8', tool: 'github_metrics', desc: 'Repository metrics' },
v2/src/cli/simple-commands/enhanced-ui-views.js:329:   * Render DAA (Dynamic Agent Architecture) View (8 tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:345:    // DAA tools
v2/src/cli/simple-commands/enhanced-ui-views.js:348:      { key: '1', tool: 'daa_agent_create', desc: 'Create dynamic agent' },
v2/src/cli/simple-commands/enhanced-ui-views.js:349:      { key: '2', tool: 'daa_capability_match', desc: 'Match capabilities' },
v2/src/cli/simple-commands/enhanced-ui-views.js:350:      { key: '3', tool: 'daa_resource_alloc', desc: 'Resource allocation' },
v2/src/cli/simple-commands/enhanced-ui-views.js:351:      { key: '4', tool: 'daa_lifecycle_manage', desc: 'Lifecycle management' },
v2/src/cli/simple-commands/enhanced-ui-views.js:352:      { key: '5', tool: 'daa_communication', desc: 'Inter-agent communication' },
v2/src/cli/simple-commands/enhanced-ui-views.js:353:      { key: '6', tool: 'daa_consensus', desc: 'Consensus mechanisms' },
v2/src/cli/simple-commands/enhanced-ui-views.js:354:      { key: '7', tool: 'daa_fault_tolerance', desc: 'Fault tolerance' },
v2/src/cli/simple-commands/enhanced-ui-views.js:355:      { key: '8', tool: 'daa_optimization', desc: 'Performance optimization' },
v2/src/cli/simple-commands/enhanced-ui-views.js:377:   * Render System & Utilities View (6+ tools)
v2/src/cli/simple-commands/enhanced-ui-views.js:393:    // System tools
v2/src/cli/simple-commands/enhanced-ui-views.js:396:      { key: '1', tool: 'config_manage', desc: 'Configuration management' },
v2/src/cli/simple-commands/enhanced-ui-views.js:397:      { key: '2', tool: 'security_scan', desc: 'Security scanning' },
v2/src/cli/simple-commands/enhanced-ui-views.js:398:      { key: '3', tool: 'backup_create', desc: 'Create system backup' },
v2/src/cli/simple-commands/enhanced-ui-views.js:399:      { key: '4', tool: 'restore_system', desc: 'System restoration' },
v2/src/cli/simple-commands/enhanced-ui-views.js:400:      { key: '5', tool: 'log_analysis', desc: 'Log analysis' },
v2/src/cli/simple-commands/enhanced-ui-views.js:401:      { key: '6', tool: 'diagnostic_run', desc: 'Run diagnostics' },
v2/src/cli/simple-commands/enhanced-ui-views.js:402:      { key: '7', tool: 'terminal_execute', desc: 'Execute commands' },
v2/src/cli/simple-commands/enhanced-ui-views.js:403:      { key: '8', tool: 'features_detect', desc: 'Feature detection' },
v2/src/cli/simple-commands/enhanced-ui-views.js:436:    const status = this.toolFramework.getStatus();
v2/src/cli/simple-commands/enhanced-ui-views.js:453:    const categories = this.toolFramework.getCategories();
v2/src/cli/simple-commands/enhanced-ui-views.js:455:      const tools = this.toolFramework.getToolsByCategory(category);
v2/src/cli/simple-commands/enhanced-ui-views.js:457:      console.log(`  ${prefix} ${category.toUpperCase()}: ${colors.gray(`${tools.length} tools`)}`);
v2/src/cli/simple-commands/enhanced-ui-views.js:463:    console.log(`  ${colors.yellow('r')} - Run custom tool`);
v2/src/cli/simple-commands/enhanced-ui-views.js:470:   * Render tool grid helper
v2/src/cli/simple-commands/enhanced-ui-views.js:472:  renderToolGrid(tools, colors, columns = 2) {
v2/src/cli/simple-commands/enhanced-ui-views.js:473:    for (let i = 0; i < tools.length; i += columns) {
v2/src/cli/simple-commands/enhanced-ui-views.js:475:      for (let j = 0; j < columns && i + j < tools.length; j++) {
v2/src/cli/simple-commands/enhanced-ui-views.js:476:        const tool = tools[i + j];
v2/src/cli/simple-commands/enhanced-ui-views.js:477:        const keyLabel = colors.yellow(`[${tool.key}]`);
v2/src/cli/simple-commands/enhanced-ui-views.js:478:        const toolName = colors.white(tool.tool);
v2/src/cli/simple-commands/enhanced-ui-views.js:479:        const desc = colors.gray(tool.desc);
v2/src/cli/simple-commands/enhanced-ui-views.js:480:        row += `  ${keyLabel} ${toolName} - ${desc}`;
v2/src/cli/simple-commands/enhanced-ui-views.js:548:   * Execute quick tool with default parameters
v2/src/cli/simple-commands/enhanced-ui-views.js:550:  async executeQuickTool(toolName, parameters = {}) {
v2/src/cli/simple-commands/enhanced-ui-views.js:552:      this.ui.addLog('info', `Executing ${toolName}...`);
v2/src/cli/simple-commands/enhanced-ui-views.js:553:      const result = await this.toolFramework.executeTool(toolName, parameters);
v2/src/cli/simple-commands/enhanced-ui-views.js:554:      this.ui.addLog('success', `${toolName} completed successfully`);
v2/src/cli/simple-commands/enhanced-ui-views.js:557:      this.ui.addLog('error', `${toolName} failed: ${error.message}`);
v2/src/cli/simple-commands/enhanced-ui-views.js:562:   * Display formatted tool result
v2/src/cli/simple-commands/enhanced-ui-views.js:598:      const status = await this.toolFramework.executeTool('neural_status');
v2/src/cli/simple-commands/enhanced-ui-views.js:612:      const report = await this.toolFramework.executeTool('performance_report', {
v2/src/mcp/validation/schema-validator-2025.ts:2: * JSON Schema 1.1 Validator for MCP 2025-11
v2/src/mcp/validation/schema-validator-2025.ts:4: * Implements comprehensive schema validation per MCP 2025-11 specification
v2/src/mcp/validation/schema-validator-2025.ts:35: * MCP 2025-11 JSON Schema Validator
v2/src/mcp/validation/schema-validator-2025.ts:111:   * Validate tool schema itself
v2/src/mcp/validation/schema-validator-2025.ts:113:  validateToolSchema(toolSchema: object): ValidationResult {
v2/src/mcp/validation/schema-validator-2025.ts:116:    const schemaObj = toolSchema as any;
v2/src/mcp/validation/schema-validator-2025.ts:131:      this.ajv.compile(toolSchema);
v2/src/mcp/validation/schema-validator-2025.ts:275: * Convert legacy tool schema to MCP 2025-11 format
v2/src/cli/simple-commands/init/templates/commands/helpers/standard-checkpoint-hooks.sh:6:    local tool_input="$1"
v2/src/cli/simple-commands/init/templates/commands/helpers/standard-checkpoint-hooks.sh:7:    local file=$(echo "$tool_input" | jq -r '.file_path // empty')
v2/src/cli/simple-commands/init/templates/commands/helpers/standard-checkpoint-hooks.sh:39:    local tool_input="$1"
v2/src/cli/simple-commands/init/templates/commands/helpers/standard-checkpoint-hooks.sh:40:    local file=$(echo "$tool_input" | jq -r '.file_path // empty')
v2/src/cli/simple-commands/init/templates/commands/github/github-swarm.md:106:Use in Claude Code with MCP tools:
v2/src/mcp/server-factory.ts:2: * MCP Server Factory
v2/src/mcp/server-factory.ts:4: * Creates appropriate MCP server instance based on configuration.
v2/src/mcp/server-factory.ts:5: * Provides seamless transition from legacy MCP to MCP 2025-11 with feature flags.
v2/src/mcp/server-factory.ts:10:import type { MCPConfig } from '../utils/types.js';
v2/src/mcp/server-factory.ts:11:import { MCPServer, type IMCPServer } from './server.js';
v2/src/mcp/server-factory.ts:12:import { MCP2025Server, type MCP2025ServerConfig } from './server-mcp-2025.js';
v2/src/mcp/server-factory.ts:13:import { ProgressiveToolRegistry } from './tool-registry-progressive.js';
v2/src/mcp/server-factory.ts:16: * MCP server feature flags for gradual rollout
v2/src/mcp/server-factory.ts:18:export interface MCPFeatureFlags {
v2/src/mcp/server-factory.ts:19:  // Enable MCP 2025-11 features
v2/src/mcp/server-factory.ts:20:  enableMCP2025?: boolean;
v2/src/mcp/server-factory.ts:36: * Extended MCP configuration with 2025-11 support
v2/src/mcp/server-factory.ts:38:export interface ExtendedMCPConfig extends MCPConfig {
v2/src/mcp/server-factory.ts:40:  features?: MCPFeatureFlags;
v2/src/mcp/server-factory.ts:42:  // MCP 2025-11 specific config
v2/src/mcp/server-factory.ts:70:    toolsDirectory?: string;
v2/src/mcp/server-factory.ts:75: * MCP Server Factory
v2/src/mcp/server-factory.ts:78: * - MCP2025Server if MCP 2025-11 features enabled
v2/src/mcp/server-factory.ts:79: * - Legacy MCPServer for backward compatibility
v2/src/mcp/server-factory.ts:81:export class MCPServerFactory {
v2/src/mcp/server-factory.ts:83:   * Create MCP server instance based on configuration
v2/src/mcp/server-factory.ts:86:    config: ExtendedMCPConfig,
v2/src/mcp/server-factory.ts:95:  ): Promise<IMCPServer | MCP2025Server> {
v2/src/mcp/server-factory.ts:98:    // Determine if MCP 2025-11 should be enabled
v2/src/mcp/server-factory.ts:99:    const useMCP2025 = features.enableMCP2025 === true;
v2/src/mcp/server-factory.ts:101:    if (useMCP2025) {
v2/src/mcp/server-factory.ts:102:      logger.info('Creating MCP 2025-11 server with enhanced features');
v2/src/mcp/server-factory.ts:103:      return await this.createMCP2025Server(
v2/src/mcp/server-factory.ts:110:      logger.info('Creating legacy MCP server (backward compatibility mode)');
v2/src/mcp/server-factory.ts:126:   * Create MCP 2025-11 server with enhanced features
v2/src/mcp/server-factory.ts:128:  private static async createMCP2025Server(
v2/src/mcp/server-factory.ts:129:    config: ExtendedMCPConfig,
v2/src/mcp/server-factory.ts:133:  ): Promise<MCP2025Server> {
v2/src/mcp/server-factory.ts:137:    // Build MCP 2025-11 server configuration
v2/src/mcp/server-factory.ts:138:    const serverConfig: MCP2025ServerConfig = {
v2/src/mcp/server-factory.ts:143:      enableMCP2025: true,
v2/src/mcp/server-factory.ts:170:      toolsDirectory: mcp2025Config.toolsDirectory,
v2/src/mcp/server-factory.ts:175:    const server = new MCP2025Server(serverConfig, eventBus, logger);
v2/src/mcp/server-factory.ts:178:    logger.info('MCP 2025-11 server created successfully', {
v2/src/mcp/server-factory.ts:193:   * Create legacy MCP server for backward compatibility
v2/src/mcp/server-factory.ts:196:    config: ExtendedMCPConfig,
v2/src/mcp/server-factory.ts:205:  ): MCPServer {
v2/src/mcp/server-factory.ts:207:    const legacyConfig: MCPConfig = {
v2/src/mcp/server-factory.ts:219:    const server = new MCPServer(
v2/src/mcp/server-factory.ts:231:    logger.info('Legacy MCP server created successfully', {
v2/src/mcp/server-factory.ts:242:  static detectOptimalConfig(currentConfig: MCPConfig): ExtendedMCPConfig {
v2/src/mcp/server-factory.ts:243:    const extended: ExtendedMCPConfig = {
v2/src/mcp/server-factory.ts:246:        // Enable MCP 2025-11 by default in development, opt-in for production
v2/src/mcp/server-factory.ts:247:        enableMCP2025: process.env.NODE_ENV !== 'production',
v2/src/mcp/server-factory.ts:266:          url: process.env.MCP_REGISTRY_URL || 'https://registry.mcp.run',
v2/src/mcp/server-factory.ts:267:          apiKey: process.env.MCP_REGISTRY_API_KEY,
v2/src/mcp/server-factory.ts:282:  static validateConfig(config: ExtendedMCPConfig): {
v2/src/mcp/server-factory.ts:295:    // MCP 2025-11 specific validation
v2/src/mcp/server-factory.ts:296:    if (config.features?.enableMCP2025) {
v2/src/mcp/server-factory.ts:329: * Convenience function for creating MCP server
v2/src/mcp/server-factory.ts:331:export async function createMCPServer(
v2/src/mcp/server-factory.ts:332:  config: MCPConfig | ExtendedMCPConfig,
v2/src/mcp/server-factory.ts:344:): Promise<IMCPServer | MCP2025Server> {
v2/src/mcp/server-factory.ts:347:    ? MCPServerFactory.detectOptimalConfig(config)
v2/src/mcp/server-factory.ts:348:    : (config as ExtendedMCPConfig);
v2/src/mcp/server-factory.ts:351:  const validation = MCPServerFactory.validateConfig(extendedConfig);
v2/src/mcp/server-factory.ts:354:    throw new Error(`Invalid MCP configuration: ${validation.errors.join(', ')}`);
v2/src/mcp/server-factory.ts:359:    logger.warn('MCP configuration warning', { warning });
v2/src/mcp/server-factory.ts:363:  return await MCPServerFactory.createServer(
v2/src/mcp/server-factory.ts:377: * Check if MCP 2025-11 features are available
v2/src/mcp/server-factory.ts:379:export function isMCP2025Available(): boolean {
v2/src/mcp/server-factory.ts:392: * Get MCP server capabilities based on configuration
v2/src/mcp/server-factory.ts:394:export function getServerCapabilities(config: ExtendedMCPConfig): string[] {
v2/src/mcp/server-factory.ts:397:  if (config.features?.enableMCP2025) {
v2/src/core/ModeFactory.ts:18:    this.registerModes();
v2/src/core/ModeFactory.ts:24:  private registerModes(): void {
v2/src/core/ModeFactory.ts:98:  registerCustomMode(mode: InitMode, factory: () => IInitMode): void {
v2/src/core/ModeFactory.ts:103:   * Remove a registered mode
v2/src/core/ModeFactory.ts:105:  unregisterMode(mode: InitMode): boolean {
v2/src/task/coordination.ts:3: * Provides seamless coordination between task management and Claude Code batch tools
v2/src/task/coordination.ts:258:   * Launch parallel agents using Task tool pattern
v2/src/task/coordination.ts:647:    // In real implementation, this would use actual tools
v2/src/providers/cohere-provider.ts:428:        ...(model.startsWith('command') ? ['tools'] : []),
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-edit.md:80:- Using Edit or MultiEdit tools
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-edit.md:111:- `Edit` - File editing tool
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-edit.md:112:- `MultiEdit` - Multiple edits tool
v2/src/mcp/auth.ts:2: * Authentication and authorization for MCP
v2/src/mcp/auth.ts:5:import type { MCPAuthConfig, MCPSession } from '../utils/types.js';
v2/src/mcp/auth.ts:7:import type { MCPError } from '../utils/errors.js';
v2/src/mcp/auth.ts:12:  authorize(session: MCPSession, permission: string): boolean;
v2/src/mcp/auth.ts:50:    private config: MCPAuthConfig,
v2/src/mcp/auth.ts:103:  authorize(session: MCPSession, permission: string): boolean {
v2/src/mcp/auth.ts:120:    // Check for prefix-based permissions (e.g., "tools.*" matches "tools.list")
v2/src/mcp/auth.ts:415:  TOOLS_LIST: 'tools.list',
v2/src/mcp/auth.ts:416:  TOOLS_INVOKE: 'tools.invoke',
v2/src/mcp/auth.ts:417:  TOOLS_DESCRIBE: 'tools.describe',
v2/src/cli/commands/hive-mind/stop.ts:13:export const stopCommand = new Command('stop')
v2/src/cli/commands/claude-api.ts:13:export const claudeApiCommand = new Command()
v2/src/cli/simple-commands/init/templates/commands/hooks/post-command.md:79:- After Bash tool execution
v2/src/cli/simple-commands/init/templates/commands/hooks/post-command.md:114:- `Bash` - Command execution tool
v2/src/cli/simple-commands/init/templates/coordination-md.js:108:// Create optimized Coordination with batchtools support
v2/src/cli/simple-commands/init/templates/coordination-md.js:110:  return `# Agent Coordination System (Batchtools Optimized)
v2/src/cli/simple-commands/init/templates/coordination-md.js:115:**üöÄ Batchtools Enhancement**: This configuration includes parallel processing capabilities for agent coordination, batch task management, and concurrent workflow execution.
v2/src/cli/simple-commands/init/templates/coordination-md.js:126:## Task Management (Batchtools Enhanced)
v2/src/cli/simple-commands/init/templates/coordination-md.js:155:### Batchtools Commands
v2/src/cli/simple-commands/init/templates/coordination-md.js:173:## Workflow Execution (Batchtools Enhanced)
v2/src/cli/simple-commands/init/templates/coordination-md.js:180:# Batchtools workflow execution
v2/src/cli/simple-commands/init/templates/coordination-md.js:206:## Configuration (Batchtools Enhanced)
v2/src/cli/simple-commands/init/templates/coordination-md.js:207:Coordination settings in \`claude-flow.config.json\` with batchtools optimizations:
v2/src/cli/simple-commands/init/templates/coordination-md.js:214:    "batchtools": {
v2/src/cli/simple-commands/init/templates/coordination-md.js:254:## Batchtools Integration
v2/src/cli/simple-commands/init/templates/coordination-md.js:274:npx claude-flow coordination performance-report --batchtools --detailed
v2/src/cli/simple-commands/init/templates/coordination-md.js:280:## Best Practices (Batchtools Enhanced)
v2/src/cli/simple-commands/init/templates/coordination-md.js:302:### Batchtools Performance Improvements
v2/src/cli/simple-commands/init/templates/coordination-md.js:311:### Common Batchtools Issues
v2/src/cli/simple-commands/init/templates/coordination-md.js:323:npx claude-flow coordination analyze --batchtools --performance
v2/src/cli/simple-commands/init/templates/coordination-md.js:338:For more information about coordination system optimization, see: https://github.com/ruvnet/claude-code-flow/docs/coordination-batchtools.md
v2/src/modes/SparcInit.ts:14:    return ['ConfigManager', 'DatabaseManager', 'TopologyManager', 'AgentRegistry', 'MCPIntegrator'];
v2/src/modes/SparcInit.ts:111:      // Initialize SPARC MCP integration
v2/src/modes/SparcInit.ts:115:        // Test SPARC-related MCP functions
v2/src/modes/SparcInit.ts:117:          tool: 'claude-flow',
v2/src/modes/SparcInit.ts:123:          components.push('SparcMCP');
v2/src/utils/metrics-reader.js:190:  async getMCPServerStatus() {
v2/src/utils/metrics-reader.js:192:      // Check if MCP server process is running (including flow-nexus and other MCP variants)
v2/src/cli/simple-commands/init/templates/commands/analysis/bottleneck-detect.md:71:- MCP communication delays
v2/src/cli/simple-commands/init/templates/commands/hooks/post-edit.md:80:- After Edit tool completes
v2/src/cli/simple-commands/init/templates/commands/hooks/post-edit.md:115:- `Edit` - File editing tool
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-command.md:79:- Using Bash tool
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-command.md:111:- `Bash` - Command execution tool
v2/src/cli/commands/config-integration.ts:219:      console.log(`  MCP Tools: ${status.ruvSwarmConfig.integration.enableMCPTools ? '‚úÖ' : '‚ùå'}`);
v2/src/constants/agent-types.ts:19:// Re-export getAvailableAgentTypes for MCP tools
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-search.md:79:- Using Grep tool
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-search.md:80:- Using Glob tool
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-search.md:109:- `Grep` - Content search tool
v2/src/cli/simple-commands/init/templates/commands/hooks/pre-search.md:110:- `Glob` - File pattern tool
v2/src/mcp/claude-code-wrapper.ts:51:export class ClaudeCodeMCPWrapper {
v2/src/mcp/claude-code-wrapper.ts:55:  private claudeCodeMCP: any; // Reference to Claude Code MCP client
v2/src/mcp/claude-code-wrapper.ts:65:          tools: {},
v2/src/mcp/claude-code-wrapper.ts:87:      tools: await this.getTools(),
v2/src/mcp/claude-code-wrapper.ts:96:    const tools: Tool[] = [];
v2/src/mcp/claude-code-wrapper.ts:98:    // Add SPARC mode tools
v2/src/mcp/claude-code-wrapper.ts:100:      tools.push({
v2/src/mcp/claude-code-wrapper.ts:130:    // Add meta tools
v2/src/mcp/claude-code-wrapper.ts:131:    tools.push(
v2/src/mcp/claude-code-wrapper.ts:196:    return tools;
v2/src/mcp/claude-code-wrapper.ts:199:  private async handleToolCall(toolName: string, args: any): Promise<CallToolResult> {
v2/src/mcp/claude-code-wrapper.ts:201:      if (toolName.startsWith('sparc_')) {
v2/src/mcp/claude-code-wrapper.ts:202:        return await this.handleSparcTool(toolName, args);
v2/src/mcp/claude-code-wrapper.ts:205:      // Pass through to Claude Code MCP
v2/src/mcp/claude-code-wrapper.ts:206:      return this.forwardToClaudeCode(toolName, args);
v2/src/mcp/claude-code-wrapper.ts:220:  private async handleSparcTool(toolName: string, args: any): Promise<CallToolResult> {
v2/src/mcp/claude-code-wrapper.ts:221:    const mode = toolName.replace('sparc_', '');
v2/src/mcp/claude-code-wrapper.ts:223:    // Handle special tools
v2/src/mcp/claude-code-wrapper.ts:245:      const executeSparcMode = (mode: string, task: string, tools: any[], context: any) => {
v2/src/mcp/claude-code-wrapper.ts:252:        sparcMode.tools || [],
v2/src/mcp/claude-code-wrapper.ts:284:    // Add available tools
v2/src/mcp/claude-code-wrapper.ts:285:    if (mode.tools && mode.tools.length > 0) {
v2/src/mcp/claude-code-wrapper.ts:287:      mode.tools.forEach((tool) => {
v2/src/mcp/claude-code-wrapper.ts:288:        parts.push(`- **${tool}**: ${this.getToolDescription(tool)}`);
v2/src/mcp/claude-code-wrapper.ts:343:  private getToolDescription(tool: string): string {
v2/src/mcp/claude-code-wrapper.ts:359:    return descriptions[tool] || `${tool} tool`;
v2/src/mcp/claude-code-wrapper.ts:434:**Primary Tools:** ${this.sparcModes.get(mode)?.tools?.join(', ') || 'Standard tools'}
v2/src/mcp/claude-code-wrapper.ts:456:Use the appropriate tools for each phase and maintain progress in TodoWrite.`;
v2/src/mcp/claude-code-wrapper.ts:494:        tools: mode.tools,
v2/src/mcp/claude-code-wrapper.ts:766:  private async forwardToClaudeCode(toolName: string, args: any): Promise<CallToolResult> {
v2/src/mcp/claude-code-wrapper.ts:767:    // For SPARC tools that were already handled, this shouldn't be called
v2/src/mcp/claude-code-wrapper.ts:768:    // For other tools, we execute them using the existing logic
v2/src/mcp/claude-code-wrapper.ts:770:    if (toolName === 'Task') {
v2/src/mcp/claude-code-wrapper.ts:783:              mode.tools || [],
v2/src/mcp/claude-code-wrapper.ts:810:    // For non-SPARC tools, return a message
v2/src/mcp/claude-code-wrapper.ts:815:          text: `Tool ${toolName} is not available in this MCP server.`,
v2/src/mcp/claude-code-wrapper.ts:826:    console.error('üöÄ Claude-Flow MCP Server (Wrapper Mode)');
v2/src/mcp/claude-code-wrapper.ts:827:    console.error('üì¶ Using Claude Code MCP pass-through with SPARC prompt injection');
v2/src/mcp/claude-code-wrapper.ts:828:    console.error('üîß All SPARC tools available with enhanced AI capabilities');
v2/src/mcp/claude-code-wrapper.ts:829:    console.error('‚ÑπÔ∏è  To use legacy mode, set CLAUDE_FLOW_LEGACY_MCP=true');
v2/src/mcp/claude-code-wrapper.ts:838:  const wrapper = new ClaudeCodeMCPWrapper();
v2/src/hooks/index.ts:107:   * @deprecated Use agenticHookManager.register() instead
v2/src/hooks/index.ts:110:    console.warn('HookUtils.createFilePatternCondition is deprecated. Use agenticHookManager.register() with proper HookFilter instead.');
v2/src/hooks/index.ts:115:   * @deprecated Use agenticHookManager.register() instead
v2/src/hooks/index.ts:118:    console.warn('HookUtils.createSpawnAgentAction is deprecated. Use agenticHookManager.register() with proper hook handlers instead.');
v2/src/hooks/index.ts:123:   * @deprecated Use agenticHookManager.register() instead
v2/src/hooks/index.ts:126:    console.warn('HookUtils.createQualityHook is deprecated. Use agenticHookManager.register() with workflow-step hooks instead.');
v2/src/hooks/index.ts:131:   * @deprecated Use agenticHookManager.register() instead  
v2/src/hooks/index.ts:134:    console.warn('HookUtils.createSecurityHook is deprecated. Use agenticHookManager.register() with workflow-step hooks instead.');
v2/src/hooks/index.ts:139:   * @deprecated Use agenticHookManager.register() instead
v2/src/hooks/index.ts:142:    console.warn('HookUtils.createDocumentationHook is deprecated. Use agenticHookManager.register() with workflow-step hooks instead.');
v2/src/hooks/index.ts:147:   * @deprecated Use agenticHookManager.register() instead
v2/src/hooks/index.ts:150:    console.warn('HookUtils.createPerformanceHook is deprecated. Use agenticHookManager.register() with performance-metric hooks instead.');
v2/src/hooks/index.ts:161:    registerHook: () => console.warn('Use agenticHookManager.register() instead'),
v2/src/hooks/index.ts:168: * @deprecated Use agenticHookManager.register() for individual hooks instead
v2/src/hooks/index.ts:171:  console.warn('setupDefaultHooks is deprecated. Use agenticHookManager.register() to register specific hooks instead.');
v2/src/hooks/index.ts:220:  agenticHookManager.register({ ... })
v2/src/cli/commands/hive-mind/wizard.ts:29:export const wizardCommand = new Command('wizard')
v2/src/modes/NeuralInit.ts:14:    return ['ConfigManager', 'DatabaseManager', 'TopologyManager', 'AgentRegistry', 'MCPIntegrator', 'MetricsCollector'];
v2/src/modes/NeuralInit.ts:103:      // Initialize Neural MCP integration
v2/src/modes/NeuralInit.ts:107:        // Test neural MCP functions
v2/src/modes/NeuralInit.ts:109:          tool: 'claude-flow',
v2/src/modes/NeuralInit.ts:115:          components.push('NeuralMCP');
v2/src/modes/NeuralInit.ts:120:          tool: 'claude-flow',
v2/src/terminal/session.ts:175:      const commands = this.profile.metadata.initCommands as string[];
v2/src/terminal/session.ts:188:      const commands = this.profile.metadata.cleanupCommands as string[];
v2/src/cli/simple-commands/init/templates/commands/github/github-swarm.md:106:Use in Claude Code with MCP tools:
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:14:- **Task tool**: ALWAYS spawn ALL agents in ONE message with full instructions
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:41:### Batchtools Commands
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:97:## üéØ Claude Code vs MCP Tools
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:110:### MCP Tools ONLY:
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:118:**KEY**: MCP coordinates, Claude Code executes.
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:123:# Add Claude Flow MCP server
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:127:## MCP Tool Categories
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:177:  // Spawn agents with Task tool
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:256:7. Use GitHub tools first
v2/src/cli/commands/status.ts:13:export const statusCommand = new Command()
v2/src/core/MCPIntegrator.ts:2: * MCPIntegrator - Manages MCP tool coordination
v2/src/core/MCPIntegrator.ts:3: * Provides integration with external MCP tools and orchestration services
v2/src/core/MCPIntegrator.ts:6:export interface MCPTool {
v2/src/core/MCPIntegrator.ts:9:  functions: MCPFunction[];
v2/src/core/MCPIntegrator.ts:14:export interface MCPFunction {
v2/src/core/MCPIntegrator.ts:21:export interface MCPCommand {
v2/src/core/MCPIntegrator.ts:22:  tool: string;
v2/src/core/MCPIntegrator.ts:28:export interface MCPResult {
v2/src/core/MCPIntegrator.ts:34:    tool: string;
v2/src/core/MCPIntegrator.ts:39:export class MCPIntegrator {
v2/src/core/MCPIntegrator.ts:40:  private tools: Map<string, MCPTool> = new Map();
v2/src/core/MCPIntegrator.ts:44:    this.registerDefaultTools();
v2/src/core/MCPIntegrator.ts:48:   * Initialize MCP integrator and discover available tools
v2/src/core/MCPIntegrator.ts:57:   * Register default MCP tools
v2/src/core/MCPIntegrator.ts:59:  private registerDefaultTools(): void {
v2/src/core/MCPIntegrator.ts:60:    // Claude Flow MCP tools
v2/src/core/MCPIntegrator.ts:61:    this.tools.set('claude-flow', {
v2/src/core/MCPIntegrator.ts:99:    // ruv-swarm MCP tools (optional)
v2/src/core/MCPIntegrator.ts:100:    this.tools.set('ruv-swarm', {
v2/src/core/MCPIntegrator.ts:126:    // Flow Nexus MCP tools (optional)
v2/src/core/MCPIntegrator.ts:127:    this.tools.set('flow-nexus', {
v2/src/core/MCPIntegrator.ts:155:   * Discover available MCP tools
v2/src/core/MCPIntegrator.ts:158:    // In a real implementation, this would probe for available MCP servers
v2/src/core/MCPIntegrator.ts:161:    for (const [name, tool] of this.tools) {
v2/src/core/MCPIntegrator.ts:163:        // Simulate tool discovery
v2/src/core/MCPIntegrator.ts:165:        tool.status = isAvailable ? 'connected' : 'disconnected';
v2/src/core/MCPIntegrator.ts:166:        tool.lastPing = new Date();
v2/src/core/MCPIntegrator.ts:168:        tool.status = 'error';
v2/src/core/MCPIntegrator.ts:169:        console.warn(`Failed to discover MCP tool ${name}:`, error);
v2/src/core/MCPIntegrator.ts:175:   * Check if a specific tool is available
v2/src/core/MCPIntegrator.ts:177:  private async checkToolAvailability(toolName: string): Promise<boolean> {
v2/src/core/MCPIntegrator.ts:179:    // In real implementation, this would try to connect to the MCP server
v2/src/core/MCPIntegrator.ts:184:   * Test connections to all tools
v2/src/core/MCPIntegrator.ts:187:    for (const [name, tool] of this.tools) {
v2/src/core/MCPIntegrator.ts:188:      if (tool.status === 'connected') {
v2/src/core/MCPIntegrator.ts:192:          console.log(`‚úì MCP tool ${name} connected successfully`);
v2/src/core/MCPIntegrator.ts:194:          tool.status = 'error';
v2/src/core/MCPIntegrator.ts:195:          console.warn(`‚úó MCP tool ${name} connection failed:`, error);
v2/src/core/MCPIntegrator.ts:202:   * Execute MCP command
v2/src/core/MCPIntegrator.ts:204:  async executeCommand(command: MCPCommand): Promise<MCPResult> {
v2/src/core/MCPIntegrator.ts:208:      const tool = this.tools.get(command.tool);
v2/src/core/MCPIntegrator.ts:209:      if (!tool) {
v2/src/core/MCPIntegrator.ts:212:          error: `Unknown MCP tool: ${command.tool}`,
v2/src/core/MCPIntegrator.ts:215:            tool: command.tool,
v2/src/core/MCPIntegrator.ts:221:      if (tool.status !== 'connected') {
v2/src/core/MCPIntegrator.ts:224:          error: `MCP tool ${command.tool} is not connected (status: ${tool.status})`,
v2/src/core/MCPIntegrator.ts:227:            tool: command.tool,
v2/src/core/MCPIntegrator.ts:234:      const func = tool.functions.find(f => f.name === command.function);
v2/src/core/MCPIntegrator.ts:238:          error: `Function ${command.function} not found in tool ${command.tool}`,
v2/src/core/MCPIntegrator.ts:241:            tool: command.tool,
v2/src/core/MCPIntegrator.ts:255:            tool: command.tool,
v2/src/core/MCPIntegrator.ts:269:          tool: command.tool,
v2/src/core/MCPIntegrator.ts:280:          tool: command.tool,
v2/src/core/MCPIntegrator.ts:288:   * Simulate command execution (replace with real MCP calls in production)
v2/src/core/MCPIntegrator.ts:290:  private async simulateCommandExecution(command: MCPCommand): Promise<any> {
v2/src/core/MCPIntegrator.ts:361:   * Get available tools
v2/src/core/MCPIntegrator.ts:363:  getAvailableTools(): MCPTool[] {
v2/src/core/MCPIntegrator.ts:364:    return Array.from(this.tools.values());
v2/src/core/MCPIntegrator.ts:368:   * Get connected tools
v2/src/core/MCPIntegrator.ts:370:  getConnectedTools(): MCPTool[] {
v2/src/core/MCPIntegrator.ts:371:    return Array.from(this.tools.values()).filter(tool => tool.status === 'connected');
v2/src/core/MCPIntegrator.ts:375:   * Get tool by name
v2/src/core/MCPIntegrator.ts:377:  getTool(name: string): MCPTool | undefined {
v2/src/core/MCPIntegrator.ts:378:    return this.tools.get(name);
v2/src/core/MCPIntegrator.ts:382:   * Check if a tool is available
v2/src/core/MCPIntegrator.ts:385:    const tool = this.tools.get(name);
v2/src/core/MCPIntegrator.ts:386:    return tool?.status === 'connected' || false;
v2/src/core/MCPIntegrator.ts:390:   * Get tool functions
v2/src/core/MCPIntegrator.ts:392:  getToolFunctions(toolName: string): MCPFunction[] {
v2/src/core/MCPIntegrator.ts:393:    const tool = this.tools.get(toolName);
v2/src/core/MCPIntegrator.ts:394:    return tool?.functions || [];
v2/src/core/MCPIntegrator.ts:398:   * Initialize swarm coordination using MCP tools
v2/src/core/MCPIntegrator.ts:404:  }): Promise<MCPResult> {
v2/src/core/MCPIntegrator.ts:405:    // Try claude-flow first, then fallback to other tools
v2/src/core/MCPIntegrator.ts:406:    const toolPriority = ['claude-flow', 'ruv-swarm', 'flow-nexus'];
v2/src/core/MCPIntegrator.ts:408:    for (const toolName of toolPriority) {
v2/src/core/MCPIntegrator.ts:409:      if (this.isToolAvailable(toolName)) {
v2/src/core/MCPIntegrator.ts:411:          tool: toolName,
v2/src/core/MCPIntegrator.ts:420:      error: 'No MCP tools available for swarm initialization',
v2/src/core/MCPIntegrator.ts:423:        tool: 'none',
v2/src/core/MCPIntegrator.ts:430:   * Coordinate memory across swarm using MCP tools
v2/src/core/MCPIntegrator.ts:432:  async coordinateMemory(action: string, key: string, value?: string, namespace?: string): Promise<MCPResult> {
v2/src/core/MCPIntegrator.ts:433:    const command: MCPCommand = {
v2/src/core/MCPIntegrator.ts:434:      tool: 'claude-flow',
v2/src/core/MCPIntegrator.ts:443:   * Spawn agents using MCP tools
v2/src/core/MCPIntegrator.ts:445:  async spawnAgent(type: string, capabilities?: string[], name?: string): Promise<MCPResult> {
v2/src/core/MCPIntegrator.ts:446:    const command: MCPCommand = {
v2/src/core/MCPIntegrator.ts:447:      tool: 'claude-flow',
v2/src/core/MCPIntegrator.ts:456:   * Orchestrate tasks using MCP tools
v2/src/core/MCPIntegrator.ts:458:  async orchestrateTask(task: string, strategy?: string, priority?: string): Promise<MCPResult> {
v2/src/core/MCPIntegrator.ts:459:    const command: MCPCommand = {
v2/src/core/MCPIntegrator.ts:460:      tool: 'claude-flow',
v2/src/core/MCPIntegrator.ts:469:   * Get swarm status using MCP tools
v2/src/core/MCPIntegrator.ts:471:  async getSwarmStatus(detailed: boolean = false): Promise<MCPResult> {
v2/src/core/MCPIntegrator.ts:472:    const command: MCPCommand = {
v2/src/core/MCPIntegrator.ts:473:      tool: 'claude-flow',
v2/src/core/MCPIntegrator.ts:482:   * Refresh tool connections
v2/src/core/MCPIntegrator.ts:490:   * Register a custom tool
v2/src/core/MCPIntegrator.ts:492:  registerTool(tool: MCPTool): void {
v2/src/core/MCPIntegrator.ts:493:    this.tools.set(tool.name, tool);
v2/src/core/MCPIntegrator.ts:497:   * Unregister a tool
v2/src/core/MCPIntegrator.ts:499:  unregisterTool(name: string): boolean {
v2/src/core/MCPIntegrator.ts:500:    return this.tools.delete(name);
v2/src/core/MCPIntegrator.ts:512:    const tools = Array.from(this.tools.values());
v2/src/core/MCPIntegrator.ts:513:    const connectedTools = tools.filter(tool => tool.status === 'connected');
v2/src/core/MCPIntegrator.ts:514:    const availableFunctions = connectedTools.reduce((sum, tool) => sum + tool.functions.length, 0);
v2/src/core/MCPIntegrator.ts:518:      totalTools: tools.length,
v2/src/modes/GitHubInit.ts:14:    return ['ConfigManager', 'DatabaseManager', 'TopologyManager', 'AgentRegistry', 'MCPIntegrator'];
v2/src/modes/GitHubInit.ts:87:      // Initialize GitHub MCP integration
v2/src/modes/GitHubInit.ts:91:        // Test GitHub MCP functions
v2/src/modes/GitHubInit.ts:93:          tool: 'claude-flow',
v2/src/modes/GitHubInit.ts:99:          components.push('GitHubMCP');
v2/src/cli/simple-commands/init/templates/commands/analysis/bottleneck-detect.md:71:- MCP communication delays
v2/src/mcp/server.ts:2: * MCP (Model Context Protocol) server implementation
v2/src/mcp/server.ts:6:  MCPConfig,
v2/src/mcp/server.ts:7:  MCPRequest,
v2/src/mcp/server.ts:8:  MCPResponse,
v2/src/mcp/server.ts:9:  MCPError,
v2/src/mcp/server.ts:10:  MCPTool,
v2/src/mcp/server.ts:11:  MCPInitializeParams,
v2/src/mcp/server.ts:12:  MCPInitializeResult,
v2/src/mcp/server.ts:13:  MCPSession,
v2/src/mcp/server.ts:14:  MCPMetrics,
v2/src/mcp/server.ts:15:  MCPProtocolVersion,
v2/src/mcp/server.ts:16:  MCPCapabilities,
v2/src/mcp/server.ts:17:  MCPContext,
v2/src/mcp/server.ts:21:import { MCPError as MCPErrorClass, MCPMethodNotFoundError } from '../utils/errors.js';
v2/src/mcp/server.ts:25:import { ToolRegistry } from './tools.js';
v2/src/mcp/server.ts:30:import { createClaudeFlowTools, ClaudeFlowToolContext } from './claude-flow-tools.js';
v2/src/mcp/server.ts:31:import { createSwarmTools, SwarmToolContext } from './swarm-tools.js';
v2/src/mcp/server.ts:37:} from './ruv-swarm-tools.js';
v2/src/mcp/server.ts:41:export interface IMCPServer {
v2/src/mcp/server.ts:44:  registerTool(tool: MCPTool): void;
v2/src/mcp/server.ts:50:  getMetrics(): MCPMetrics;
v2/src/mcp/server.ts:51:  getSessions(): MCPSession[];
v2/src/mcp/server.ts:52:  getSession(sessionId: string): MCPSession | undefined;
v2/src/mcp/server.ts:57: * MCP server implementation
v2/src/mcp/server.ts:59:export class MCPServer implements IMCPServer {
v2/src/mcp/server.ts:61:  private toolRegistry: ToolRegistry;
v2/src/mcp/server.ts:68:  private currentSession?: MCPSession | undefined;
v2/src/mcp/server.ts:71:    name: 'Claude-Flow MCP Server',
v2/src/mcp/server.ts:75:  private readonly supportedProtocolVersion: MCPProtocolVersion = {
v2/src/mcp/server.ts:81:  private readonly serverCapabilities: MCPCapabilities = {
v2/src/mcp/server.ts:85:    tools: {
v2/src/mcp/server.ts:98:    private config: MCPConfig,
v2/src/mcp/server.ts:111:    // Initialize tool registry
v2/src/mcp/server.ts:112:    this.toolRegistry = new ToolRegistry(logger);
v2/src/mcp/server.ts:127:    this.router = new RequestRouter(this.toolRegistry, logger);
v2/src/mcp/server.ts:132:      throw new MCPErrorClass('MCP server already running');
v2/src/mcp/server.ts:135:    this.logger.info('Starting MCP server', { transport: this.config.transport });
v2/src/mcp/server.ts:146:      // Register built-in tools
v2/src/mcp/server.ts:147:      await this.registerBuiltInTools();
v2/src/mcp/server.ts:150:      this.logger.info('MCP server started successfully');
v2/src/mcp/server.ts:152:      this.logger.error('Failed to start MCP server', error);
v2/src/mcp/server.ts:153:      throw new MCPErrorClass('Failed to start MCP server', { error });
v2/src/mcp/server.ts:162:    this.logger.info('Stopping MCP server');
v2/src/mcp/server.ts:180:      this.logger.info('MCP server stopped');
v2/src/mcp/server.ts:182:      this.logger.error('Error stopping MCP server', error);
v2/src/mcp/server.ts:187:  registerTool(tool: MCPTool): void {
v2/src/mcp/server.ts:188:    this.toolRegistry.register(tool);
v2/src/mcp/server.ts:189:    this.logger.info('Tool registered', { name: tool.name });
v2/src/mcp/server.ts:199:      const registeredTools = this.toolRegistry.getToolCount();
v2/src/mcp/server.ts:204:        registeredTools,
v2/src/mcp/server.ts:239:  getMetrics(): MCPMetrics {
v2/src/mcp/server.ts:250:      toolInvocations: {}, // TODO: Implement tool-specific metrics
v2/src/mcp/server.ts:256:  getSessions(): MCPSession[] {
v2/src/mcp/server.ts:260:  getSession(sessionId: string): MCPSession | undefined {
v2/src/mcp/server.ts:271:  private async handleRequest(request: MCPRequest): Promise<MCPResponse> {
v2/src/mcp/server.ts:272:    this.logger.debug('Handling MCP request', {
v2/src/mcp/server.ts:323:        const response: MCPResponse = {
v2/src/mcp/server.ts:343:      this.logger.error('Error handling MCP request', {
v2/src/mcp/server.ts:352:        error: this.errorToMCPError(error),
v2/src/mcp/server.ts:357:  private async handleInitialize(request: MCPRequest): Promise<MCPResponse> {
v2/src/mcp/server.ts:359:      const params = request.params as MCPInitializeParams;
v2/src/mcp/server.ts:380:      const result: MCPInitializeResult = {
v2/src/mcp/server.ts:384:        instructions: 'Claude-Flow MCP Server ready for tool execution',
v2/src/mcp/server.ts:403:        error: this.errorToMCPError(error),
v2/src/mcp/server.ts:408:  private getOrCreateSession(): MCPSession {
v2/src/mcp/server.ts:433:        throw new MCPErrorClass(`Unknown transport type: ${this.config.transport}`);
v2/src/mcp/server.ts:437:  private async registerBuiltInTools(): Promise<void> {
v2/src/mcp/server.ts:438:    // System information tool
v2/src/mcp/server.ts:439:    this.registerTool({
v2/src/mcp/server.ts:457:    // Health check tool
v2/src/mcp/server.ts:458:    this.registerTool({
v2/src/mcp/server.ts:470:    // List tools
v2/src/mcp/server.ts:471:    this.registerTool({
v2/src/mcp/server.ts:472:      name: 'tools/list',
v2/src/mcp/server.ts:473:      description: 'List all available tools',
v2/src/mcp/server.ts:479:        return this.toolRegistry.listTools();
v2/src/mcp/server.ts:484:    this.registerTool({
v2/src/mcp/server.ts:485:      name: 'tools/schema',
v2/src/mcp/server.ts:486:      description: 'Get schema for a specific tool',
v2/src/mcp/server.ts:495:        const tool = this.toolRegistry.getTool(input.name);
v2/src/mcp/server.ts:496:        if (!tool) {
v2/src/mcp/server.ts:500:          name: tool.name,
v2/src/mcp/server.ts:501:          description: tool.description,
v2/src/mcp/server.ts:502:          inputSchema: tool.inputSchema,
v2/src/mcp/server.ts:507:    // Register Claude-Flow specific tools if orchestrator is available
v2/src/mcp/server.ts:511:      for (const tool of claudeFlowTools) {
v2/src/mcp/server.ts:513:        const originalHandler = tool.handler;
v2/src/mcp/server.ts:514:        tool.handler = async (input: unknown, context?: MCPContext) => {
v2/src/mcp/server.ts:523:        this.registerTool(tool);
v2/src/mcp/server.ts:526:      this.logger.info('Registered Claude-Flow tools', { count: claudeFlowTools.length });
v2/src/mcp/server.ts:528:      this.logger.warn('Orchestrator not available - Claude-Flow tools not registered');
v2/src/mcp/server.ts:531:    // Register Swarm-specific tools if swarm components are available
v2/src/mcp/server.ts:535:      for (const tool of swarmTools) {
v2/src/mcp/server.ts:537:        const originalHandler = tool.handler;
v2/src/mcp/server.ts:538:        tool.handler = async (input: unknown, context?: MCPContext) => {
v2/src/mcp/server.ts:551:        this.registerTool(tool);
v2/src/mcp/server.ts:554:      this.logger.info('Registered Swarm tools', { count: swarmTools.length });
v2/src/mcp/server.ts:556:      this.logger.warn('Swarm components not available - Swarm tools not registered');
v2/src/mcp/server.ts:559:    // Register ruv-swarm MCP tools if available
v2/src/mcp/server.ts:560:    this.registerRuvSwarmTools();
v2/src/mcp/server.ts:564:   * Register ruv-swarm MCP tools if available
v2/src/mcp/server.ts:566:  private async registerRuvSwarmTools(): Promise<void> {
v2/src/mcp/server.ts:572:        this.logger.info('ruv-swarm not available - skipping ruv-swarm MCP tools registration');
v2/src/mcp/server.ts:587:      // Create ruv-swarm tools
v2/src/mcp/server.ts:590:      for (const tool of ruvSwarmTools) {
v2/src/mcp/server.ts:592:        const originalHandler = tool.handler;
v2/src/mcp/server.ts:593:        tool.handler = async (input: unknown, context?: MCPContext) => {
v2/src/mcp/server.ts:604:        this.registerTool(tool);
v2/src/mcp/server.ts:607:      this.logger.info('Registered ruv-swarm MCP tools', {
v2/src/mcp/server.ts:612:      this.logger.error('Error registering ruv-swarm MCP tools', error);
v2/src/mcp/server.ts:616:  private errorToMCPError(error): MCPError {
v2/src/mcp/server.ts:617:    if (error instanceof MCPMethodNotFoundError) {
v2/src/mcp/server.ts:625:    if (error instanceof MCPErrorClass) {
v2/src/cli/simple-commands/init/templates/safe-hook-patterns.js:77: * React to specific tool usage rather than session end
v2/src/cli/simple-commands/init/templates/safe-hook-patterns.js:398:Use claude-flow's built-in safety tools:
v2/src/core/ConfigManager.ts:23:  // MCP integration
v2/src/core/ConfigManager.ts:24:  mcpServers?: MCPServerConfig[];
v2/src/core/ConfigManager.ts:47:export interface MCPServerConfig {
v2/src/cli/commands/hive-mind/optimize-memory.ts:4: * Provides comprehensive memory optimization tools for the Hive Mind system.
v2/src/cli/commands/hive-mind/optimize-memory.ts:15:  const command = new Command('optimize-memory')
v2/src/integration/mock-components.ts:382:      message: 'Mock MCP server healthy',
v2/src/agents/agent-manager.ts:243:        tools: ['web-search', 'document-analysis', 'data-extraction'],
v2/src/agents/agent-manager.ts:274:        toolConfigs: {},
v2/src/agents/agent-manager.ts:297:        tools: ['git', 'editor', 'debugger', 'linter', 'formatter'],
v2/src/agents/agent-manager.ts:328:        toolConfigs: {},
v2/src/agents/agent-manager.ts:356:        tools: ['data-processor', 'chart-generator', 'statistical-analyzer'],
v2/src/agents/agent-manager.ts:387:        toolConfigs: {},
v2/src/agents/agent-manager.ts:410:        tools: ['document-writer', 'nlp-processor', 'web-search'],
v2/src/agents/agent-manager.ts:441:        toolConfigs: {},
v2/src/agents/agent-manager.ts:464:        tools: ['diagram-generator', 'code-analyzer', 'api-designer'],
v2/src/agents/agent-manager.ts:495:        toolConfigs: {},
v2/src/agents/agent-manager.ts:518:        tools: ['task-scheduler', 'dependency-analyzer'],
v2/src/agents/agent-manager.ts:549:        toolConfigs: {},
v2/src/agents/agent-manager.ts:572:        tools: ['git', 'editor', 'debugger', 'linter', 'formatter'],
v2/src/agents/agent-manager.ts:603:        toolConfigs: {},
v2/src/agents/agent-manager.ts:626:        tools: ['architecture-analyzer', 'system-modeler', 'performance-analyzer'],
v2/src/agents/agent-manager.ts:657:        toolConfigs: {},
v2/src/agents/agent-manager.ts:680:        tools: ['test-runner', 'coverage-analyzer', 'test-generator'],
v2/src/agents/agent-manager.ts:710:        availableTools: ['test-runner', 'coverage-tool', 'test-gen'],
v2/src/agents/agent-manager.ts:711:        toolConfigs: {},
v2/src/agents/agent-manager.ts:734:        tools: ['static-analyzer', 'code-quality-checker', 'security-scanner'],
v2/src/agents/agent-manager.ts:765:        toolConfigs: {},
v2/src/agents/agent-manager.ts:788:        tools: ['document-writer', 'content-analyzer'],
v2/src/agents/agent-manager.ts:819:        toolConfigs: {},
v2/src/agents/agent-manager.ts:920:        toolConfigs: template.environment.toolConfigs ?? {},
v2/src/integration/system-integration.ts:82:      // Phase 5: Monitoring and MCP
v2/src/integration/system-integration.ts:272:   * Initialize monitoring and MCP systems
v2/src/integration/system-integration.ts:275:    this.logger.info('üìä Phase 5: Initializing Monitoring and MCP');
v2/src/integration/system-integration.ts:294:      // Initialize MCP server
v2/src/integration/system-integration.ts:301:        this.updateComponentStatus('mcp', 'healthy', 'MCP server initialized');
v2/src/integration/system-integration.ts:303:        this.logger.warn('MCP server not available, using mock:', getErrorMessage(error));
v2/src/integration/system-integration.ts:307:        this.updateComponentStatus('mcp', 'warning', 'Using mock MCP server');
v2/src/integration/system-integration.ts:310:      this.logger.info('‚úÖ Monitoring and MCP Ready');
v2/src/integration/system-integration.ts:312:      this.logger.error('Monitoring and MCP initialization failed:', getErrorMessage(error));
v2/src/integration/system-integration.ts:344:    // Wire MCP server to core components
v2/src/cli/simple-commands/init/templates/coordination-md.js:108:// Create optimized Coordination with batchtools support
v2/src/cli/simple-commands/init/templates/coordination-md.js:110:  return `# Agent Coordination System (Batchtools Optimized)
v2/src/cli/simple-commands/init/templates/coordination-md.js:115:**üöÄ Batchtools Enhancement**: This configuration includes parallel processing capabilities for agent coordination, batch task management, and concurrent workflow execution.
v2/src/cli/simple-commands/init/templates/coordination-md.js:126:## Task Management (Batchtools Enhanced)
v2/src/cli/simple-commands/init/templates/coordination-md.js:155:### Batchtools Commands
v2/src/cli/simple-commands/init/templates/coordination-md.js:173:## Workflow Execution (Batchtools Enhanced)
v2/src/cli/simple-commands/init/templates/coordination-md.js:180:# Batchtools workflow execution
v2/src/cli/simple-commands/init/templates/coordination-md.js:206:## Configuration (Batchtools Enhanced)
v2/src/cli/simple-commands/init/templates/coordination-md.js:207:Coordination settings in \`claude-flow.config.json\` with batchtools optimizations:
v2/src/cli/simple-commands/init/templates/coordination-md.js:214:    "batchtools": {
v2/src/cli/simple-commands/init/templates/coordination-md.js:254:## Batchtools Integration
v2/src/cli/simple-commands/init/templates/coordination-md.js:274:npx claude-flow coordination performance-report --batchtools --detailed
v2/src/cli/simple-commands/init/templates/coordination-md.js:280:## Best Practices (Batchtools Enhanced)
v2/src/cli/simple-commands/init/templates/coordination-md.js:302:### Batchtools Performance Improvements
v2/src/cli/simple-commands/init/templates/coordination-md.js:311:### Common Batchtools Issues
v2/src/cli/simple-commands/init/templates/coordination-md.js:323:npx claude-flow coordination analyze --batchtools --performance
v2/src/cli/simple-commands/init/templates/coordination-md.js:338:For more information about coordination system optimization, see: https://github.com/ruvnet/claude-code-flow/docs/coordination-batchtools.md
v2/src/core/orchestrator.ts:21:import type { IMCPServer } from '../mcp/server.js';
v2/src/core/orchestrator.ts:323:    private mcpServer: IMCPServer,
v2/src/core/orchestrator.ts:369:      // MCP server needs to be started after other components
v2/src/core/orchestrator.ts:370:      await this.initializeComponent('MCP Server', () => this.mcpServer.start());
v2/src/core/orchestrator.ts:708:          this.getComponentHealth('MCP Server', async () => await this.mcpServer.getHealthStatus()),
v2/src/core/orchestrator.ts:715:        components.mcp = this.processHealthResult(mcp, 'MCP Server');
v2/src/core/orchestrator.ts:960:      this.shutdownComponent('MCP Server', () => this.mcpServer.stop()),
v2/src/core/orchestrator.ts:972:          'MCP Server',
v2/src/core/orchestrator.ts:1325:          case 'MCP Server':
v2/src/types/mcp.d.ts:30:    tools: Tool[];
v2/src/cli/commands/hive-mind/pause.ts:13:export const pauseCommand = new Command('pause')
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:14:- **Task tool**: ALWAYS spawn ALL agents in ONE message with full instructions
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:41:### Batchtools Commands
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:97:## üéØ Claude Code vs MCP Tools
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:110:### MCP Tools ONLY:
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:118:**KEY**: MCP coordinates, Claude Code executes.
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:123:# Add Claude Flow MCP server
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:127:## MCP Tool Categories
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:177:  // Spawn agents with Task tool
v2/src/cli/simple-commands/init/templates/CLAUDE.md.optimized:256:7. Use GitHub tools first
v2/src/terminal/adapters/vscode.ts:291:    const outputProcessor = (globalThis as any).registerTerminalOutputProcessor;
v2/src/cli/repl.ts:103:    // Complete subcommands and arguments
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:79:// Create optimized Memory Bank with batchtools support
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:81:  return `# Memory Bank Configuration (Batchtools Optimized)
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:86:**üöÄ Batchtools Enhancement**: This configuration includes parallel processing capabilities for memory operations, batch storage, and concurrent retrieval optimizations.
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:95:## Batchtools Memory Features
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:109:## Commands (Batchtools Enhanced)
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:117:### Batchtools Commands
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:124:Memory settings are configured in \`claude-flow.config.json\` with batchtools optimizations:
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:132:    "batchtools": {
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:139:    "namespaces": ["default", "agents", "tasks", "sessions", "sparc", "batchtools"],
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:145:      "batchtools": "60d"
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:157:## Batchtools Integration
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:177:npx claude-flow memory performance-report --batchtools
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:191:- **batchtools**: Performance metrics and optimization data
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:198:- **Performance**: Batchtools metrics and optimization data
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:200:## Best Practices (Batchtools Enhanced)
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:222:### Batchtools Performance Improvements
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:234:- Batchtools operations are logged for performance analysis and debugging
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:237:## Troubleshooting Batchtools
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:251:npx claude-flow memory analyze --batchtools --verbose
v2/src/cli/simple-commands/init/templates/memory-bank-md.js:257:For more information about memory system optimization, see: https://github.com/ruvnet/claude-code-flow/docs/memory-batchtools.md
v2/src/mcp/swarm-tools.ts:2: * Comprehensive MCP tools for swarm system functionality
v2/src/mcp/swarm-tools.ts:5:import type { MCPTool, MCPContext } from '../utils/types.js';
v2/src/mcp/swarm-tools.ts:11:export interface SwarmToolContext extends MCPContext {
v2/src/mcp/swarm-tools.ts:19:export function createSwarmTools(logger: ILogger): MCPTool[] {
v2/src/mcp/swarm-tools.ts:72:          logger.info('Agent spawned via legacy dispatch tool', { agentId });
v2/src/mcp/swarm-tools.ts:82:          logger.error('Failed to spawn agent via legacy dispatch tool', error);
v2/src/mcp/swarm-tools.ts:165:          logger.info('Swarm objective created via MCP', { objectiveId });
v2/src/mcp/swarm-tools.ts:173:          logger.error('Failed to create swarm objective via MCP', error);
v2/src/mcp/swarm-tools.ts:197:          logger.info('Swarm objective executed via MCP', { objectiveId: input.objectiveId });
v2/src/mcp/swarm-tools.ts:206:          logger.error('Failed to execute swarm objective via MCP', error);
v2/src/mcp/swarm-tools.ts:245:          logger.error('Failed to get swarm status via MCP', error);
v2/src/mcp/swarm-tools.ts:263:              tools: { type: 'array', items: { type: 'string' } },
v2/src/mcp/swarm-tools.ts:284:          logger.info('Agent created via MCP', { agentId, type: input.type });
v2/src/mcp/swarm-tools.ts:292:          logger.error('Failed to create agent via MCP', error);
v2/src/mcp/swarm-tools.ts:331:          logger.error('Failed to list agents via MCP', error);
v2/src/mcp/swarm-tools.ts:339:      name: 'resource/register',
v2/src/mcp/swarm-tools.ts:368:          const resourceId = await context.resourceManager.registerResource(
v2/src/mcp/swarm-tools.ts:375:          logger.info('Resource registered via MCP', { resourceId, type: input.type });
v2/src/mcp/swarm-tools.ts:383:          logger.error('Failed to register resource via MCP', error);
v2/src/mcp/swarm-tools.ts:408:          logger.error('Failed to get resource statistics via MCP', error);
v2/src/mcp/swarm-tools.ts:464:          logger.info('Message sent via MCP', { messageId, type: input.type });
v2/src/mcp/swarm-tools.ts:472:          logger.error('Failed to send message via MCP', error);
v2/src/mcp/swarm-tools.ts:497:          logger.error('Failed to get message metrics via MCP', error);
v2/src/mcp/swarm-tools.ts:542:          logger.error('Failed to get monitoring metrics via MCP', error);
v2/src/mcp/swarm-tools.ts:582:          logger.error('Failed to get alerts via MCP', error);
v2/src/mcp/swarm-tools.ts:638:          logger.error('Failed to get comprehensive status via MCP', error);
v2/src/mcp/swarm-tools.ts:656:        logger.warn('Emergency stop initiated via MCP', { reason: input.reason });
v2/src/mcp/swarm-tools.ts:692:          logger.info('Emergency stop completed via MCP', results);
v2/src/mcp/swarm-tools.ts:696:          logger.error('Emergency stop failed via MCP', error);
v2/src/terminal/vscode-bridge.ts:38:  (globalThis as any).registerTerminalOutputProcessor = (
v2/src/terminal/vscode-bridge.ts:129:  if (vscode.window.registerTerminalProfileProvider) {
v2/src/cli/commands/hive-mind/spawn.ts:63:export const spawnCommand = new Command('spawn')
v2/src/cli/simple-commands/init/templates/sparc-modes.js:69:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:83:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:85:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:119:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:133:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:135:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:204:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:219:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:221:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:255:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:269:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:271:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:306:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:320:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:322:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:356:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:370:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:372:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:429:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:441:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:443:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:465:- Batch pattern matching with Grep tool
v2/src/cli/simple-commands/init/templates/sparc-modes.js:485:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:497:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:499:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:542:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:554:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:556:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:600:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:612:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:614:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:658:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:670:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:672:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:716:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:728:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:730:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:773:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:785:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:787:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:831:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:843:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:845:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:885:Knowledge management with Memory tools for persistent insights.
v2/src/cli/simple-commands/init/templates/sparc-modes.js:889:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:901:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:903:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:947:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:959:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:961:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1005:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1017:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1019:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1063:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1075:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1077:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1121:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1133:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1135:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1179:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1191:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1193:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1237:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1249:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1251:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1295:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1307:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1309:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1353:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1365:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/templates/sparc-modes.js:1367:# Use when running from terminal or MCP tools unavailable
v2/src/agents/agent-registry.ts:63:  async registerAgent(agent: AgentState, tags: string[] = []): Promise<void> {
v2/src/agents/agent-registry.ts:70:        registeredBy: 'agent-manager',
v2/src/agents/agent-registry.ts:86:    this.emit('agent:registered', { agentId: agent.id.id, agent });
v2/src/agents/agent-registry.ts:124:  async unregisterAgent(agentId: string, preserveHistory: boolean = true): Promise<void> {
v2/src/agents/agent-registry.ts:155:    this.emit('agent:unregistered', { agentId, preserved: preserveHistory });
v2/src/agents/agent-registry.ts:237:   * Get all registered agents
v2/src/agents/agent-registry.ts:324:        ...agent.capabilities.tools,
v2/src/agents/agent-registry.ts:470:        ...agent.capabilities.tools,
v2/src/cli/simple-commands/init/templates/claude-md.js:12:2. **Task tool**: ALWAYS spawn ALL agents in ONE message with full instructions
v2/src/cli/simple-commands/init/templates/claude-md.js:44:1. **Register**: \`mcp__flow-nexus__user_register\` with email/password
v2/src/cli/simple-commands/init/templates/claude-md.js:104:2. **Task tool**: ALWAYS spawn ALL agents in ONE message with full instructions
v2/src/cli/simple-commands/init/templates/claude-md.js:177:- **CLI Interface**: Command-line tools for managing the system
v2/src/cli/simple-commands/init/templates/claude-md.js:181:- **MCP Integration**: Model Context Protocol server for Claude integration
v2/src/cli/simple-commands/init/templates/claude-md.js:201:1. **Register**: \`mcp__flow-nexus__user_register\` with email/password
v2/src/cli/simple-commands/init/templates/claude-md.js:258:2. **Task tool**: ALWAYS spawn ALL agents in ONE message with full instructions
v2/src/cli/simple-commands/init/templates/claude-md.js:423:- Use TypeScript for type safety and better tooling
v2/src/cli/simple-commands/init/templates/claude-md.js:534:- **Tool access**: Verify required tools are available for the selected mode
v2/src/cli/simple-commands/init/templates/claude-md.js:577:1. **Register**: \`mcp__flow-nexus__user_register\` with email/password
v2/src/cli/simple-commands/init/templates/claude-md.js:625:// Create optimized SPARC CLAUDE.md with batchtools integration
v2/src/cli/simple-commands/init/templates/claude-md.js:635:4. **USE CLAUDE CODE'S TASK TOOL** for spawning agents concurrently, not just MCP
v2/src/cli/simple-commands/init/templates/claude-md.js:641:- **Task tool (Claude Code)**: ALWAYS spawn ALL agents in ONE message with full instructions
v2/src/cli/simple-commands/init/templates/claude-md.js:648:**Claude Code's Task tool is the PRIMARY way to spawn agents:**
v2/src/cli/simple-commands/init/templates/claude-md.js:650:// ‚úÖ CORRECT: Use Claude Code's Task tool for parallel agent execution
v2/src/cli/simple-commands/init/templates/claude-md.js:659:**MCP tools are ONLY for coordination setup:**
v2/src/cli/simple-commands/init/templates/claude-md.js:686:### Batchtools Commands
v2/src/cli/simple-commands/init/templates/claude-md.js:742:## üéØ Claude Code vs MCP Tools
v2/src/cli/simple-commands/init/templates/claude-md.js:745:- **Task tool**: Spawn and run agents concurrently for actual work
v2/src/cli/simple-commands/init/templates/claude-md.js:756:### MCP Tools ONLY COORDINATE:
v2/src/cli/simple-commands/init/templates/claude-md.js:765:**KEY**: MCP coordinates the strategy, Claude Code's Task tool executes with real agents.
v2/src/cli/simple-commands/init/templates/claude-md.js:770:# Add MCP servers (Claude Flow required, others optional)
v2/src/cli/simple-commands/init/templates/claude-md.js:776:## MCP Tool Categories
v2/src/cli/simple-commands/init/templates/claude-md.js:793:### Flow-Nexus MCP Tools (Optional Advanced Features)
v2/src/cli/simple-commands/init/templates/claude-md.js:794:Flow-Nexus extends MCP capabilities with 70+ cloud-based orchestration tools:
v2/src/cli/simple-commands/init/templates/claude-md.js:796:**Key MCP Tool Categories:**
v2/src/cli/simple-commands/init/templates/claude-md.js:806:- Register: \`mcp__flow-nexus__user_register\` or \`npx flow-nexus@latest register\`
v2/src/cli/simple-commands/init/templates/claude-md.js:808:- Access 70+ specialized MCP tools for advanced orchestration
v2/src/cli/simple-commands/init/templates/claude-md.js:814:1. **Optional**: Use MCP tools to set up coordination topology
v2/src/cli/simple-commands/init/templates/claude-md.js:815:2. **REQUIRED**: Use Claude Code's Task tool to spawn agents that do actual work
v2/src/cli/simple-commands/init/templates/claude-md.js:822:// Single message with all agent spawning via Claude Code's Task tool
v2/src/cli/simple-commands/init/templates/claude-md.js:864:### ‚úÖ CORRECT WORKFLOW: MCP Coordinates, Claude Code Executes
v2/src/cli/simple-commands/init/templates/claude-md.js:867:// Step 1: MCP tools set up coordination (optional, for complex tasks)
v2/src/cli/simple-commands/init/templates/claude-md.js:874:// Step 2: Claude Code Task tool spawns ACTUAL agents that do the work
v2/src/cli/simple-commands/init/templates/claude-md.js:876:  // Claude Code's Task tool spawns real agents concurrently
v2/src/cli/simple-commands/init/templates/claude-md.js:961:7. Use GitHub tools first
v2/src/cli/simple-commands/init/templates/claude-md.js:990:1. **Register**: Use \`mcp__flow-nexus__user_register\` with email/password
v2/src/cli/simple-commands/init/templates/claude-md.js:1038:- **flow-nexus-user-tools**: User management and system utilities
v2/src/cli/simple-commands/init/templates/claude-md.js:1052:- \`user-tools.md\` - User utilities
v2/src/cli/simple-commands/init/templates/claude-md.js:1083:Flow Nexus seamlessly integrates with Claude Code through MCP (Model Context Protocol):
v2/src/cli/simple-commands/init/templates/claude-md.js:1085:1. **Add MCP Server**: \`claude mcp add flow-nexus npx flow-nexus@latest mcp start\`
v2/src/cli/simple-commands/init/templates/claude-md.js:1086:2. **Use in Claude Code**: Access all Flow Nexus tools through MCP interface
v2/src/cli/simple-commands/init/templates/claude-md.js:1093:- MCP Integration: Use \`mcp__flow-nexus__*\` tools in Claude Code
v2/src/mcp/protocol-manager.ts:2: * MCP Protocol Version Management and Compatibility Checking
v2/src/mcp/protocol-manager.ts:5:import type { MCPProtocolVersion, MCPCapabilities, MCPInitializeParams } from '../utils/types.js';
v2/src/mcp/protocol-manager.ts:7:import { MCPError } from '../utils/errors.js';
v2/src/mcp/protocol-manager.ts:10:  version: MCPProtocolVersion;
v2/src/mcp/protocol-manager.ts:24:  recommendedVersion?: MCPProtocolVersion;
v2/src/mcp/protocol-manager.ts:30:  agreedVersion: MCPProtocolVersion;
v2/src/mcp/protocol-manager.ts:31:  agreedCapabilities: MCPCapabilities;
v2/src/mcp/protocol-manager.ts:32:  clientCapabilities: MCPCapabilities;
v2/src/mcp/protocol-manager.ts:33:  serverCapabilities: MCPCapabilities;
v2/src/mcp/protocol-manager.ts:39: * MCP Protocol Manager
v2/src/mcp/protocol-manager.ts:42:export class MCPProtocolManager {
v2/src/mcp/protocol-manager.ts:44:  private currentVersion: MCPProtocolVersion;
v2/src/mcp/protocol-manager.ts:45:  private serverCapabilities: MCPCapabilities;
v2/src/mcp/protocol-manager.ts:50:      name: 'MCP 2024.11.5',
v2/src/mcp/protocol-manager.ts:53:        'tools',
v2/src/mcp/protocol-manager.ts:59:        'tool_list_changed',
v2/src/mcp/protocol-manager.ts:66:      name: 'MCP 2024.11.4',
v2/src/mcp/protocol-manager.ts:69:        'tools',
v2/src/mcp/protocol-manager.ts:74:        'tool_list_changed',
v2/src/mcp/protocol-manager.ts:80:      name: 'MCP 2024.11.3',
v2/src/mcp/protocol-manager.ts:82:      supportedFeatures: ['tools', 'prompts', 'resources', 'logging', 'notifications'],
v2/src/mcp/protocol-manager.ts:86:      name: 'MCP 2024.10.0',
v2/src/mcp/protocol-manager.ts:90:      supportedFeatures: ['tools', 'prompts', 'resources', 'logging'],
v2/src/mcp/protocol-manager.ts:91:      breakingChanges: ['Changed tool response format', 'Modified error codes'],
v2/src/mcp/protocol-manager.ts:98:    preferredVersion?: MCPProtocolVersion,
v2/src/mcp/protocol-manager.ts:99:    serverCapabilities?: MCPCapabilities,
v2/src/mcp/protocol-manager.ts:122:  async negotiateProtocol(clientParams: MCPInitializeParams): Promise<NegotiationResult> {
v2/src/mcp/protocol-manager.ts:143:        throw new MCPError(
v2/src/mcp/protocol-manager.ts:210:  checkCompatibility(clientVersion: MCPProtocolVersion): CompatibilityResult {
v2/src/mcp/protocol-manager.ts:281:  getVersionInfo(version: MCPProtocolVersion): ProtocolVersionInfo | undefined {
v2/src/mcp/protocol-manager.ts:288:  isVersionSupported(version: MCPProtocolVersion): boolean {
v2/src/mcp/protocol-manager.ts:295:  getLatestSupportedVersion(): MCPProtocolVersion {
v2/src/mcp/protocol-manager.ts:313:  getServerCapabilities(): MCPCapabilities {
v2/src/mcp/protocol-manager.ts:320:  updateServerCapabilities(capabilities: Partial<MCPCapabilities>): void {
v2/src/mcp/protocol-manager.ts:328:  isFeatureSupported(version: MCPProtocolVersion, feature: string): boolean {
v2/src/mcp/protocol-manager.ts:333:  private versionToString(version: MCPProtocolVersion): string {
v2/src/mcp/protocol-manager.ts:337:  private compareVersions(a: MCPProtocolVersion, b: MCPProtocolVersion): number {
v2/src/mcp/protocol-manager.ts:343:  private getDefaultCapabilities(): MCPCapabilities {
v2/src/mcp/protocol-manager.ts:348:      tools: {
v2/src/mcp/protocol-manager.ts:362:    clientCapabilities: MCPCapabilities,
v2/src/mcp/protocol-manager.ts:363:    serverCapabilities: MCPCapabilities,
v2/src/mcp/protocol-manager.ts:364:    agreedVersion: MCPProtocolVersion,
v2/src/mcp/protocol-manager.ts:365:  ): MCPCapabilities {
v2/src/mcp/protocol-manager.ts:366:    const result: MCPCapabilities = {};
v2/src/mcp/protocol-manager.ts:378:    // Negotiate tools capabilities
v2/src/mcp/protocol-manager.ts:379:    if (clientCapabilities.tools && serverCapabilities.tools) {
v2/src/mcp/protocol-manager.ts:380:      result.tools = {
v2/src/mcp/protocol-manager.ts:381:        listChanged: clientCapabilities.tools.listChanged && serverCapabilities.tools.listChanged,
v2/src/mcp/protocol-manager.ts:420:    capabilities: MCPCapabilities,
v2/src/mcp/protocol-manager.ts:421:    version: MCPProtocolVersion,
v2/src/mcp/protocol-manager.ts:422:  ): MCPCapabilities {
v2/src/mcp/protocol-manager.ts:426:    const result: MCPCapabilities = {};
v2/src/mcp/protocol-manager.ts:433:    if (versionInfo.supportedFeatures.includes('tools') && capabilities.tools) {
v2/src/mcp/protocol-manager.ts:434:      result.tools = capabilities.tools;
v2/src/mcp/protocol-manager.ts:448:  private getMissingFeatures(version: MCPProtocolVersion, capabilities: MCPCapabilities): string[] {
v2/src/mcp/protocol-manager.ts:470:  private getDeprecatedFeatures(version: MCPProtocolVersion): string[] {
v2/src/mcp/tool-registry.ts:2: * Tool Registry for In-Process MCP Server
v2/src/mcp/tool-registry.ts:4: * Registers all 50+ Claude-Flow MCP tools for in-process execution.
v2/src/mcp/tool-registry.ts:5: * Provides tool discovery, validation, and routing.
v2/src/mcp/tool-registry.ts:8:import { createInProcessServer, InProcessMCPServer } from './in-process-server.js';
v2/src/mcp/tool-registry.ts:9:import { createClaudeFlowTools } from './claude-flow-tools.js';
v2/src/mcp/tool-registry.ts:11:import type { MCPTool } from '../utils/types.js';
v2/src/mcp/tool-registry.ts:14:// Import SDK tool creation function
v2/src/mcp/tool-registry.ts:15:import { tool, createSdkMcpServer } from '@anthropic-ai/claude-code/sdk';
v2/src/mcp/tool-registry.ts:26: * Global tool registry for managing all MCP tools
v2/src/mcp/tool-registry.ts:29:  private inProcessServer?: InProcessMCPServer;
v2/src/mcp/tool-registry.ts:31:  private tools: Map<string, MCPTool>;
v2/src/mcp/tool-registry.ts:36:    this.tools = new Map();
v2/src/mcp/tool-registry.ts:45:   * Initialize the tool registry with all Claude-Flow tools
v2/src/mcp/tool-registry.ts:48:    logger.info('Loading Claude-Flow tools...');
v2/src/mcp/tool-registry.ts:50:    // Load all tools from claude-flow-tools.ts
v2/src/mcp/tool-registry.ts:53:    // Register each tool
v2/src/mcp/tool-registry.ts:54:    for (const tool of claudeFlowTools) {
v2/src/mcp/tool-registry.ts:55:      this.tools.set(tool.name, tool);
v2/src/mcp/tool-registry.ts:58:    logger.info(`Loaded ${this.tools.size} Claude-Flow tools`);
v2/src/mcp/tool-registry.ts:70:    logger.info('Creating in-process MCP server...');
v2/src/mcp/tool-registry.ts:80:    // Register all tools
v2/src/mcp/tool-registry.ts:81:    for (const [name, tool] of this.tools) {
v2/src/mcp/tool-registry.ts:82:      this.inProcessServer.registerTool(tool);
v2/src/mcp/tool-registry.ts:93:    // Create SDK MCP server for integration
v2/src/mcp/tool-registry.ts:96:    logger.info('In-process MCP server created', {
v2/src/mcp/tool-registry.ts:97:      toolCount: this.inProcessServer.getToolNames().length,
v2/src/mcp/tool-registry.ts:102:   * Create SDK-compatible MCP server using SDK's createSdkMcpServer
v2/src/mcp/tool-registry.ts:109:    // Convert Claude-Flow tools to SDK tool format
v2/src/mcp/tool-registry.ts:110:    const sdkTools = Array.from(this.tools.values()).map(tool => {
v2/src/mcp/tool-registry.ts:111:      return this.convertToSdkTool(tool);
v2/src/mcp/tool-registry.ts:114:    // Create SDK MCP server
v2/src/mcp/tool-registry.ts:118:      tools: sdkTools,
v2/src/mcp/tool-registry.ts:121:    logger.info('SDK MCP server created', { toolCount: sdkTools.length });
v2/src/mcp/tool-registry.ts:125:   * Convert Claude-Flow tool to SDK tool format
v2/src/mcp/tool-registry.ts:127:  private convertToSdkTool(mcpTool: MCPTool): any {
v2/src/mcp/tool-registry.ts:131:    // Create SDK tool using the 'tool' helper
v2/src/mcp/tool-registry.ts:132:    return tool(
v2/src/mcp/tool-registry.ts:236:  getInProcessServer(): InProcessMCPServer | undefined {
v2/src/mcp/tool-registry.ts:241:   * Get tool by name
v2/src/mcp/tool-registry.ts:243:  getTool(name: string): MCPTool | undefined {
v2/src/mcp/tool-registry.ts:244:    return this.tools.get(name);
v2/src/mcp/tool-registry.ts:248:   * Get all tool names
v2/src/mcp/tool-registry.ts:251:    return Array.from(this.tools.keys());
v2/src/mcp/tool-registry.ts:255:   * Check if tool should use in-process execution
v2/src/mcp/tool-registry.ts:257:  shouldUseInProcess(toolName: string): boolean {
v2/src/mcp/tool-registry.ts:258:    // All Claude-Flow tools use in-process
v2/src/mcp/tool-registry.ts:259:    return this.tools.has(toolName);
v2/src/mcp/tool-registry.ts:263:   * Route tool call to appropriate transport
v2/src/mcp/tool-registry.ts:266:    toolName: string,
v2/src/mcp/tool-registry.ts:273:      if (this.shouldUseInProcess(toolName) && this.inProcessServer) {
v2/src/mcp/tool-registry.ts:274:        logger.debug('Routing to in-process server', { toolName });
v2/src/mcp/tool-registry.ts:275:        const result = await this.inProcessServer.callTool(toolName, args, context);
v2/src/mcp/tool-registry.ts:278:        logger.info('In-process tool call completed', {
v2/src/mcp/tool-registry.ts:279:          toolName,
v2/src/mcp/tool-registry.ts:287:      // External tools would use stdio/SSE (not implemented in this phase)
v2/src/mcp/tool-registry.ts:288:      logger.warn('Tool not found in in-process registry', { toolName });
v2/src/mcp/tool-registry.ts:289:      throw new Error(`Tool not available: ${toolName}`);
v2/src/mcp/tool-registry.ts:291:      logger.error('Tool routing failed', { toolName, error });
v2/src/mcp/tool-registry.ts:330:    // Estimated IPC latency (based on typical MCP stdio overhead)
v2/src/mcp/tool-registry.ts:337:      recommendation: 'Use in-process for all Claude-Flow tools for maximum performance',
v2/src/mcp/tool-registry.ts:350:    this.tools.clear();
v2/src/mcp/tool-registry.ts:356: * Create a global tool registry instance
v2/src/cli/create-enhanced-task.js:6: * @param {string} tools - Comma-separated list of available tools
v2/src/cli/create-enhanced-task.js:9:export function createEnhancedTask(task, flags, instanceId, tools) {
v2/src/cli/create-enhanced-task.js:24:${flags.config ? `- MCP Config: ${flags.config}` : ''}
v2/src/cli/create-enhanced-task.js:42:   - You have access to these tools: ${tools}
v2/src/cli/create-enhanced-task.js:43:   ${flags.tools ? `- Custom tools specified: ${flags.tools}` : ''}`;
v2/src/cli/create-enhanced-task.js:84:   - Use the Bash tool to run \`npx claude-flow\` commands
v2/src/cli/create-enhanced-task.js:96:To interact with Claude-Flow, use the Bash tool:
v2/src/mcp/async/job-manager-mcp25.ts:2: * MCP 2025-11 Async Job Manager
v2/src/mcp/async/job-manager-mcp25.ts:4: * Implements async job lifecycle per MCP 2025-11 specification:
v2/src/mcp/async/job-manager-mcp25.ts:16: * MCP tool request (2025-11 format)
v2/src/mcp/async/job-manager-mcp25.ts:18:export interface MCPToolRequest {
v2/src/mcp/async/job-manager-mcp25.ts:20:  tool_id: string;
v2/src/mcp/async/job-manager-mcp25.ts:32: * MCP job handle (2025-11 format)
v2/src/mcp/async/job-manager-mcp25.ts:34:export interface MCPJobHandle {
v2/src/mcp/async/job-manager-mcp25.ts:46: * MCP job result (2025-11 format)
v2/src/mcp/async/job-manager-mcp25.ts:48:export interface MCPJobResult {
v2/src/mcp/async/job-manager-mcp25.ts:74:  tool_id: string;
v2/src/mcp/async/job-manager-mcp25.ts:135: * MCP 2025-11 Async Job Manager
v2/src/mcp/async/job-manager-mcp25.ts:137:export class MCPAsyncJobManager extends EventEmitter {
v2/src/mcp/async/job-manager-mcp25.ts:164:   * Submit async job (MCP 2025-11 format)
v2/src/mcp/async/job-manager-mcp25.ts:167:    request: MCPToolRequest,
v2/src/mcp/async/job-manager-mcp25.ts:169:  ): Promise<MCPJobHandle> {
v2/src/mcp/async/job-manager-mcp25.ts:188:      tool_id: request.tool_id,
v2/src/mcp/async/job-manager-mcp25.ts:204:      tool_id: job.tool_id,
v2/src/mcp/async/job-manager-mcp25.ts:222:  async pollJob(job_id: string): Promise<MCPJobHandle> {
v2/src/mcp/async/job-manager-mcp25.ts:232:    const handle: MCPJobHandle = {
v2/src/mcp/async/job-manager-mcp25.ts:252:  async resumeJob(job_id: string): Promise<MCPJobResult> {
v2/src/mcp/async/job-manager-mcp25.ts:259:    const result: MCPJobResult = {
v2/src/mcp/async/job-manager-mcp25.ts:345:    this.logger.info('Job started', { job_id: job.job_id, tool_id: job.tool_id });
v2/src/mcp/server-wrapper-mode.ts:3: * Claude-Flow MCP Server - Wrapper Mode
v2/src/mcp/server-wrapper-mode.ts:5: * This version uses the Claude Code MCP wrapper approach instead of templates.
v2/src/mcp/server-wrapper-mode.ts:8:import { ClaudeCodeMCPWrapper } from './claude-code-wrapper.js';
v2/src/mcp/server-wrapper-mode.ts:16:    console.error('Starting Claude-Flow MCP in wrapper mode...');
v2/src/mcp/server-wrapper-mode.ts:17:    const wrapper = new ClaudeCodeMCPWrapper();
v2/src/mcp/server-wrapper-mode.ts:21:    console.error('Starting Claude-Flow MCP in direct mode...');
v2/src/mcp/server-wrapper-mode.ts:22:    const { runMCPServer } = await import('./server.js');
v2/src/mcp/server-wrapper-mode.ts:23:    await runMCPServer();
v2/src/mcp/implementations/daa-tools.js:3: * Ported from UI console implementation to MCP tools
v2/src/mcp/implementations/daa-tools.js:361:// Export for use in MCP tools
v2/src/cli/simple-commands/init/templates/settings.json:44:            "command": "cat | jq -r '.tool_input.command // empty' | tr '\\n' '\\0' | xargs -0 -I {} npx claude-flow@alpha hooks pre-command --command '{}' --validate-safety true --prepare-resources true"
v2/src/cli/simple-commands/init/templates/settings.json:53:            "command": "cat | jq -r '.tool_input.file_path // .tool_input.path // empty' | tr '\\n' '\\0' | xargs -0 -I {} npx claude-flow@alpha hooks pre-edit --file '{}' --auto-assign-agents true --load-context true"
v2/src/cli/simple-commands/init/templates/settings.json:64:            "command": "cat | jq -r '.tool_input.command // empty' | tr '\\n' '\\0' | xargs -0 -I {} npx claude-flow@alpha hooks post-command --command '{}' --track-metrics true --store-results true"
v2/src/cli/simple-commands/init/templates/settings.json:73:            "command": "cat | jq -r '.tool_input.file_path // .tool_input.path // empty' | tr '\\n' '\\0' | xargs -0 -I {} npx claude-flow@alpha hooks post-edit --file '{}' --format true --update-memory true"
v2/src/cli/simple-commands/init/templates/settings.json:84:            "command": "/bin/bash -c 'INPUT=$(cat); CUSTOM=$(echo \"$INPUT\" | jq -r \".custom_instructions // \\\"\\\"\"); echo \"üîÑ PreCompact Guidance:\"; echo \"üìã IMPORTANT: Review CLAUDE.md in project root for:\"; echo \"   ‚Ä¢ 54 available agents and concurrent usage patterns\"; echo \"   ‚Ä¢ Swarm coordination strategies (hierarchical, mesh, adaptive)\"; echo \"   ‚Ä¢ SPARC methodology workflows with batchtools optimization\"; echo \"   ‚Ä¢ Critical concurrent execution rules (GOLDEN RULE: 1 MESSAGE = ALL OPERATIONS)\"; if [ -n \"$CUSTOM\" ]; then echo \"üéØ Custom compact instructions: $CUSTOM\"; fi; echo \"‚úÖ Ready for compact operation\"'"
v2/src/cli/simple-commands/init/templates/settings.json:93:            "command": "/bin/bash -c 'echo \"üîÑ Auto-Compact Guidance (Context Window Full):\"; echo \"üìã CRITICAL: Before compacting, ensure you understand:\"; echo \"   ‚Ä¢ All 54 agents available in .claude/agents/ directory\"; echo \"   ‚Ä¢ Concurrent execution patterns from CLAUDE.md\"; echo \"   ‚Ä¢ Batchtools optimization for 300% performance gains\"; echo \"   ‚Ä¢ Swarm coordination strategies for complex tasks\"; echo \"‚ö° Apply GOLDEN RULE: Always batch operations in single messages\"; echo \"‚úÖ Auto-compact proceeding with full agent context\"'"
v2/src/mcp/load-balancer.ts:2: * Load balancer and rate limiting for MCP
v2/src/mcp/load-balancer.ts:5:import type { MCPLoadBalancerConfig, MCPRequest, MCPResponse, MCPSession } from '../utils/types.js';
v2/src/mcp/load-balancer.ts:7:import { MCPError } from '../utils/errors.js';
v2/src/mcp/load-balancer.ts:31:  shouldAllowRequest(session: MCPSession, request: MCPRequest): Promise<boolean>;
v2/src/mcp/load-balancer.ts:32:  recordRequestStart(session: MCPSession, request: MCPRequest): RequestMetrics;
v2/src/mcp/load-balancer.ts:33:  recordRequestEnd(metrics: RequestMetrics, response?: MCPResponse, error?: Error): void;
v2/src/mcp/load-balancer.ts:181:    private config: MCPLoadBalancerConfig,
v2/src/mcp/load-balancer.ts:208:  async shouldAllowRequest(session: MCPSession, request: MCPRequest): Promise<boolean> {
v2/src/mcp/load-balancer.ts:250:  recordRequestStart(session: MCPSession, request: MCPRequest): RequestMetrics {
v2/src/mcp/load-balancer.ts:270:  recordRequestEnd(metrics: RequestMetrics, response?: MCPResponse, error?: Error): void {
v2/src/mcp/load-balancer.ts:407:    session: MCPSession;
v2/src/mcp/load-balancer.ts:408:    request: MCPRequest;
v2/src/mcp/load-balancer.ts:433:    session: MCPSession,
v2/src/mcp/load-balancer.ts:434:    request: MCPRequest,
v2/src/mcp/load-balancer.ts:435:    processor: (session: MCPSession, request: MCPRequest) => Promise<T>,
v2/src/mcp/load-balancer.ts:438:      throw new MCPError('Request queue is full');
v2/src/mcp/load-balancer.ts:457:    processor: (session: MCPSession, request: MCPRequest) => Promise<T>,
v2/src/mcp/load-balancer.ts:470:        item.reject(new MCPError('Request timeout'));
v2/src/mcp/load-balancer.ts:491:        item.reject(new MCPError('Request timeout'));
v2/src/cli/commands/hive-mind/ps.ts:13:export const psCommand = new Command('ps')
v2/src/types/vscode.d.ts:72:    export function registerTerminalProfileProvider(id: string, provider: any): any;
v2/src/mcp/ruv-swarm-wrapper.js:2: * Wrapper for ruv-swarm MCP server to handle logger issues
v2/src/mcp/ruv-swarm-wrapper.js:26:      throw new Error('RuvSwarm MCP server is already running');
v2/src/mcp/ruv-swarm-wrapper.js:31:        // Spawn ruv-swarm MCP server
v2/src/mcp/ruv-swarm-wrapper.js:36:            // Ensure stdio mode for MCP
v2/src/mcp/ruv-swarm-wrapper.js:37:            MCP_MODE: 'stdio',
v2/src/mcp/ruv-swarm-wrapper.js:196:    console.error(`RuvSwarm MCP server exited with code ${code}`);
v2/src/mcp/ruv-swarm-wrapper.js:243:export async function startRuvSwarmMCP(options = {}) {
v2/src/mcp/ruv-swarm-wrapper.js:248:    console.log('‚úÖ RuvSwarm MCP server started successfully');
v2/src/mcp/ruv-swarm-wrapper.js:251:    console.error('‚ùå Failed to start RuvSwarm MCP server:', error.message);
v2/src/sdk/validation-demo.ts:378:    // BENEFIT 4: In-process MCP eliminates IPC overhead
v2/src/sdk/validation-demo.ts:379:    console.log('\nüìä Benefit 4: In-Process MCP Performance');
v2/src/sdk/validation-demo.ts:380:    console.log('   Subprocess MCP: ~1-5ms per call (IPC overhead)');
v2/src/sdk/validation-demo.ts:381:    console.log('   In-process MCP: ~0.01ms per call (function call)');
v2/src/mcp/in-process-server.ts:2: * In-Process MCP Server Implementation
v2/src/mcp/in-process-server.ts:5: * Uses Claude Code SDK's in-process server API for direct tool registration.
v2/src/mcp/in-process-server.ts:12:import type { MCPTool, MCPContext } from '../utils/types.js';
v2/src/mcp/in-process-server.ts:17:  tools?: MCPTool[];
v2/src/mcp/in-process-server.ts:23:  toolName: string;
v2/src/mcp/in-process-server.ts:31: * In-Process MCP Server
v2/src/mcp/in-process-server.ts:32: * Registers Claude-Flow tools directly in the SDK process to eliminate IPC overhead
v2/src/mcp/in-process-server.ts:34:export class InProcessMCPServer extends EventEmitter {
v2/src/mcp/in-process-server.ts:37:  private tools: Map<string, MCPTool>;
v2/src/mcp/in-process-server.ts:39:  private context?: MCPContext;
v2/src/mcp/in-process-server.ts:48:    this.tools = new Map();
v2/src/mcp/in-process-server.ts:54:    if (config.tools) {
v2/src/mcp/in-process-server.ts:55:      config.tools.forEach(tool => this.registerTool(tool));
v2/src/mcp/in-process-server.ts:58:    logger.info('InProcessMCPServer initialized', {
v2/src/mcp/in-process-server.ts:61:      toolCount: this.tools.size,
v2/src/mcp/in-process-server.ts:66:   * Register a tool for in-process execution
v2/src/mcp/in-process-server.ts:68:  registerTool(tool: MCPTool): void {
v2/src/mcp/in-process-server.ts:69:    if (this.tools.has(tool.name)) {
v2/src/mcp/in-process-server.ts:70:      logger.warn('Tool already registered, overwriting', { name: tool.name });
v2/src/mcp/in-process-server.ts:73:    this.tools.set(tool.name, tool);
v2/src/mcp/in-process-server.ts:74:    logger.debug('Tool registered', { name: tool.name });
v2/src/mcp/in-process-server.ts:75:    this.emit('toolRegistered', tool.name);
v2/src/mcp/in-process-server.ts:79:   * Unregister a tool
v2/src/mcp/in-process-server.ts:81:  unregisterTool(name: string): boolean {
v2/src/mcp/in-process-server.ts:82:    const deleted = this.tools.delete(name);
v2/src/mcp/in-process-server.ts:84:      logger.debug('Tool unregistered', { name });
v2/src/mcp/in-process-server.ts:85:      this.emit('toolUnregistered', name);
v2/src/mcp/in-process-server.ts:91:   * Get all registered tool names
v2/src/mcp/in-process-server.ts:94:    return Array.from(this.tools.keys());
v2/src/mcp/in-process-server.ts:98:   * Get tool metadata
v2/src/mcp/in-process-server.ts:100:  getTool(name: string): MCPTool | undefined {
v2/src/mcp/in-process-server.ts:101:    return this.tools.get(name);
v2/src/mcp/in-process-server.ts:105:   * Execute a tool call in-process
v2/src/mcp/in-process-server.ts:110:    context?: MCPContext
v2/src/mcp/in-process-server.ts:120:          logger.debug('Cache hit for tool', { name });
v2/src/mcp/in-process-server.ts:126:      const tool = this.tools.get(name);
v2/src/mcp/in-process-server.ts:127:      if (!tool) {
v2/src/mcp/in-process-server.ts:131:      logger.debug('Executing tool in-process', { name, args });
v2/src/mcp/in-process-server.ts:134:      const execContext: MCPContext = {
v2/src/mcp/in-process-server.ts:139:      // Execute tool handler directly (in-process, no IPC!)
v2/src/mcp/in-process-server.ts:140:      const result = await tool.handler(args, execContext);
v2/src/mcp/in-process-server.ts:149:      // Return in MCP CallToolResult format
v2/src/mcp/in-process-server.ts:177:          toolName: name,
v2/src/mcp/in-process-server.ts:190:  setContext(context: MCPContext): void {
v2/src/mcp/in-process-server.ts:217:    // Group by tool name
v2/src/mcp/in-process-server.ts:220:      if (!grouped.has(metric.toolName)) {
v2/src/mcp/in-process-server.ts:221:        grouped.set(metric.toolName, []);
v2/src/mcp/in-process-server.ts:223:      grouped.get(metric.toolName)!.push(metric);
v2/src/mcp/in-process-server.ts:227:    for (const [toolName, metrics] of grouped) {
v2/src/mcp/in-process-server.ts:235:      stats[toolName] = {
v2/src/mcp/in-process-server.ts:245:      toolStats: stats,
v2/src/mcp/in-process-server.ts:276:      toolCount: this.tools.size,
v2/src/mcp/in-process-server.ts:277:      tools: this.getToolNames(),
v2/src/mcp/in-process-server.ts:299:   * Check cache for a tool call result
v2/src/mcp/in-process-server.ts:332:   * Cache a tool result
v2/src/mcp/in-process-server.ts:361:   * Determine if a tool is cacheable
v2/src/mcp/in-process-server.ts:381:   * Get cache TTL for a tool
v2/src/mcp/in-process-server.ts:384:    // Different TTLs for different tools
v2/src/mcp/in-process-server.ts:402:    const cacheableMetrics = this.metrics.filter(m => this.isCacheable(m.toolName));
v2/src/mcp/in-process-server.ts:412: * Factory function to create an in-process MCP server
v2/src/mcp/in-process-server.ts:414:export function createInProcessServer(config: InProcessServerConfig): InProcessMCPServer {
v2/src/mcp/in-process-server.ts:415:  return new InProcessMCPServer(config);
v2/src/mcp/implementations/workflow-tools.js:247:// Performance monitoring tools
v2/src/cli/simple-commands/init/templates/verification-claude-md.js:78:  "tool": "Bash",
v2/src/mcp/router.ts:2: * Request router for MCP
v2/src/mcp/router.ts:5:import type { MCPRequest } from '../utils/types.js';
v2/src/mcp/router.ts:7:import { MCPMethodNotFoundError } from '../utils/errors.js';
v2/src/mcp/router.ts:8:import type { ToolRegistry } from './tools.js';
v2/src/mcp/router.ts:19:    private toolRegistry: ToolRegistry,
v2/src/mcp/router.ts:26:  async route(request: MCPRequest): Promise<unknown> {
v2/src/mcp/router.ts:38:      // Handle tool invocations
v2/src/mcp/router.ts:39:      if (method.startsWith('tools.')) {
v2/src/mcp/router.ts:43:      // Try to execute as a tool directly
v2/src/mcp/router.ts:44:      const tool = this.toolRegistry.getTool(method);
v2/src/mcp/router.ts:45:      if (tool) {
v2/src/mcp/router.ts:46:        const result = await this.toolRegistry.executeTool(method, params);
v2/src/mcp/router.ts:52:      throw new MCPMethodNotFoundError(method);
v2/src/mcp/router.ts:89:        throw new MCPMethodNotFoundError(method);
v2/src/mcp/router.ts:94:   * Handles tool-related methods
v2/src/mcp/router.ts:98:      case 'tools.list':
v2/src/mcp/router.ts:99:        return this.toolRegistry.listTools();
v2/src/mcp/router.ts:101:      case 'tools.invoke':
v2/src/mcp/router.ts:104:      case 'tools.describe':
v2/src/mcp/router.ts:108:        throw new MCPMethodNotFoundError(method);
v2/src/mcp/router.ts:120:      'tools.list': 'List all available tools',
v2/src/mcp/router.ts:121:      'tools.invoke': 'Invoke a specific tool',
v2/src/mcp/router.ts:122:      'tools.describe': 'Describe a specific tool',
v2/src/mcp/router.ts:125:    // Add all registered tools
v2/src/mcp/router.ts:126:    for (const tool of this.toolRegistry.listTools()) {
v2/src/mcp/router.ts:127:      methods[tool.name] = tool.description;
v2/src/mcp/router.ts:143:    // Check if it's a tool
v2/src/mcp/router.ts:144:    const tool = this.toolRegistry.getTool(method);
v2/src/mcp/router.ts:145:    if (tool) {
v2/src/mcp/router.ts:147:        name: tool.name,
v2/src/mcp/router.ts:148:        description: tool.description,
v2/src/mcp/router.ts:149:        inputSchema: tool.inputSchema,
v2/src/mcp/router.ts:173:      'tools.list': {
v2/src/mcp/router.ts:174:        description: 'List all available tools',
v2/src/mcp/router.ts:177:      'tools.invoke': {
v2/src/mcp/router.ts:178:        description: 'Invoke a specific tool',
v2/src/mcp/router.ts:182:            tool: { type: 'string' },
v2/src/mcp/router.ts:185:          required: ['tool', 'input'],
v2/src/mcp/router.ts:188:      'tools.describe': {
v2/src/mcp/router.ts:189:        description: 'Describe a specific tool',
v2/src/mcp/router.ts:193:            tool: { type: 'string' },
v2/src/mcp/router.ts:195:          required: ['tool'],
v2/src/mcp/router.ts:204:    throw new MCPMethodNotFoundError(method);
v2/src/mcp/router.ts:208:   * Invokes a tool
v2/src/mcp/router.ts:211:    if (!params || typeof params !== 'object' || !('tool' in params)) {
v2/src/mcp/router.ts:212:      throw new Error('Invalid params: tool required');
v2/src/mcp/router.ts:215:    const { tool, input } = params as { tool: string; input?: unknown };
v2/src/mcp/router.ts:216:    return await this.toolRegistry.executeTool(tool, input || {});
v2/src/mcp/router.ts:220:   * Describes a specific tool
v2/src/mcp/router.ts:223:    if (!params || typeof params !== 'object' || !('tool' in params)) {
v2/src/mcp/router.ts:224:      throw new Error('Invalid params: tool required');
v2/src/mcp/router.ts:227:    const { tool: toolName } = params as { tool: string };
v2/src/mcp/router.ts:228:    const tool = this.toolRegistry.getTool(toolName);
v2/src/mcp/router.ts:230:    if (!tool) {
v2/src/mcp/router.ts:231:      throw new Error(`Tool not found: ${toolName}`);
v2/src/mcp/router.ts:235:      name: tool.name,
v2/src/mcp/router.ts:236:      description: tool.description,
v2/src/mcp/router.ts:237:      inputSchema: tool.inputSchema,
v2/src/mcp/client.ts:2: * MCP Client for Model Context Protocol
v2/src/mcp/client.ts:8:import type { MCPRequest, MCPResponse, MCPNotification, MCPConfig } from '../utils/types.js';
v2/src/mcp/client.ts:11:export interface MCPClientConfig {
v2/src/mcp/client.ts:16:  mcpConfig?: MCPConfig;
v2/src/mcp/client.ts:19:export class MCPClient extends EventEmitter {
v2/src/mcp/client.ts:29:  constructor(config: MCPClientConfig) {
v2/src/mcp/client.ts:50:      logger.info('MCP Client connected');
v2/src/mcp/client.ts:59:      logger.error('Failed to connect MCP client', error);
v2/src/mcp/client.ts:80:      logger.info('MCP Client disconnected');
v2/src/mcp/client.ts:87:    const request: MCPRequest = {
v2/src/mcp/client.ts:144:      const notification: MCPNotification = {
v2/src/mcp/client.ts:160:    const notification: MCPNotification = {
v2/src/mcp/tools/system/search.ts:2: * Tool Search Capability (tools/search)
v2/src/mcp/tools/system/search.ts:5: * - names-only: Just tool names (minimal tokens)
v2/src/mcp/tools/system/search.ts:12:import type { MCPTool, ClaudeFlowToolContext } from '../../types.js';
v2/src/mcp/tools/system/search.ts:35:  tools: ToolSearchResult[];
v2/src/mcp/tools/system/search.ts:46: * Create tool search capability
v2/src/mcp/tools/system/search.ts:48: * @param loader - Dynamic tool loader instance
v2/src/mcp/tools/system/search.ts:50: * @returns MCPTool definition
v2/src/mcp/tools/system/search.ts:55:): MCPTool {
v2/src/mcp/tools/system/search.ts:57:    name: 'tools/search',
v2/src/mcp/tools/system/search.ts:58:    description: 'Search for tools with configurable detail levels. Use names-only for quick discovery (saves 98%+ tokens), basic for descriptions, full for complete schemas. This is the primary tool discovery mechanism.',
v2/src/mcp/tools/system/search.ts:65:          description: 'Search query (searches tool names and descriptions)',
v2/src/mcp/tools/system/search.ts:108:      tags: ['discovery', 'search', 'progressive-disclosure', 'tools'],
v2/src/mcp/tools/system/search.ts:111:          description: 'Quick search for agent-related tools (minimal tokens)',
v2/src/mcp/tools/system/search.ts:118:            tools: [
v2/src/mcp/tools/system/search.ts:128:          description: 'Get basic info about system tools',
v2/src/mcp/tools/system/search.ts:134:            tools: [
v2/src/mcp/tools/system/search.ts:146:          description: 'Get full schema for specific tool',
v2/src/mcp/tools/system/search.ts:153:            tools: [
v2/src/mcp/tools/system/search.ts:178:      logger.info('tools/search invoked', {
v2/src/mcp/tools/system/search.ts:186:        // Search tool metadata (lightweight operation)
v2/src/mcp/tools/system/search.ts:215:            // Full: Load complete tool definition including schema
v2/src/mcp/tools/system/search.ts:216:            const tool = await loader.loadTool(meta.name, logger);
v2/src/mcp/tools/system/search.ts:217:            if (tool) {
v2/src/mcp/tools/system/search.ts:219:                name: tool.name,
v2/src/mcp/tools/system/search.ts:220:                description: tool.description,
v2/src/mcp/tools/system/search.ts:223:                inputSchema: tool.inputSchema,
v2/src/mcp/tools/system/search.ts:224:                examples: tool.metadata?.examples || [],
v2/src/mcp/tools/system/search.ts:232:        const estimatedFullSize = limitedMetadata.length * 2000; // Estimate 2KB per full tool
v2/src/mcp/tools/system/search.ts:237:        logger.info('tools/search completed successfully', {
v2/src/mcp/tools/system/search.ts:247:          tools: results,
v2/src/mcp/tools/system/search.ts:260:        logger.error('tools/search failed', {
v2/src/mcp/tools/system/search.ts:270:export const toolMetadata = {
v2/src/mcp/tools/system/search.ts:271:  name: 'tools/search',
v2/src/mcp/tools/system/search.ts:272:  description: 'Search and discover tools with progressive disclosure',
v2/src/mcp/tools/system/search.ts:275:  tags: ['discovery', 'search', 'tools'],
v2/src/mcp/recovery/reconnection-manager.ts:2: * Reconnection Manager for MCP
v2/src/mcp/recovery/reconnection-manager.ts:8:import type { MCPClient } from '../client.js';
v2/src/mcp/recovery/reconnection-manager.ts:42:    private client: MCPClient,
v2/src/sdk/claude-flow-mcp-integration.ts:2: * Claude Flow MCP Integration - SDK + Existing MCP Tools
v2/src/sdk/claude-flow-mcp-integration.ts:5: * Integrates SDK-powered features WITH existing Claude Flow MCP tools:
v2/src/sdk/claude-flow-mcp-integration.ts:7: * - Uses Claude Flow MCP tools for swarm coordination, neural features
v2/src/sdk/claude-flow-mcp-integration.ts:10: * VERIFIED: Real integration of SDK + MCP tools
v2/src/sdk/claude-flow-mcp-integration.ts:34:  // MCP tool configuration
v2/src/sdk/claude-flow-mcp-integration.ts:42:  // In-process MCP servers
v2/src/sdk/claude-flow-mcp-integration.ts:54: * Combines SDK features with Claude Flow MCP tools
v2/src/sdk/claude-flow-mcp-integration.ts:82:   * Create a query that uses BOTH SDK features AND Claude Flow MCP tools
v2/src/sdk/claude-flow-mcp-integration.ts:89:    // Build MCP servers configuration
v2/src/sdk/claude-flow-mcp-integration.ts:106:    // Add Claude Flow MCP tools (these use stdio/subprocess)
v2/src/sdk/claude-flow-mcp-integration.ts:107:    // The MCP server is already configured globally via `claude mcp add claude-flow`
v2/src/sdk/claude-flow-mcp-integration.ts:136:   * Fork a session (SDK) while using Claude Flow MCP tools for coordination
v2/src/sdk/claude-flow-mcp-integration.ts:230: * Example: Use Claude Flow MCP tools WITH SDK features
v2/src/sdk/claude-flow-mcp-integration.ts:253:  // - In-process MCP servers (SDK)
v2/src/sdk/claude-flow-mcp-integration.ts:254:  // - Claude Flow MCP tools (stdio)
v2/src/sdk/claude-flow-mcp-integration.ts:257:    Initialize a mesh swarm with 8 agents using Claude Flow MCP tools.
v2/src/sdk/claude-flow-mcp-integration.ts:258:    Then use the math MCP server to calculate factorial of 10.
v2/src/sdk/claude-flow-mcp-integration.ts:267:  console.log('- In-process MCP: math, session, checkpoint, queryControl');
v2/src/sdk/claude-flow-mcp-integration.ts:268:  console.log('- Claude Flow MCP tools: swarm_init, agent_spawn, etc.');
v2/src/sdk/claude-flow-mcp-integration.ts:303:# Install Claude Flow MCP server
v2/src/sdk/claude-flow-mcp-integration.ts:309:# Now use SDK features WITH MCP tools:
v2/src/sdk/claude-flow-mcp-integration.ts:319:    // MCP tools are auto-available via 'claude mcp add'
v2/src/sdk/claude-flow-mcp-integration.ts:337:// Train neural patterns with Claude Flow MCP
v2/src/sdk/claude-flow-mcp-integration.ts:361:## 4. In-Process MCP + Claude Flow MCP Together
v2/src/sdk/claude-flow-mcp-integration.ts:373:      // claude-flow MCP tools auto-available
v2/src/sdk/claude-flow-mcp-integration.ts:381:‚ïë  ‚úÖ MCP tools = Coordination, neural, swarms              ‚ïë
v2/src/mcp/implementations/agent-tracker.js:139:// Export for use in MCP tools
v2/src/mcp/implementations/agent-tracker.js:144:// Also make available globally for the MCP server
v2/src/cli/commands/hive-mind/init.ts:17:export const initCommand = new Command('init')
v2/src/mcp/transports/http.ts:2: * HTTP transport for MCP
v2/src/mcp/transports/http.ts:13:import type { MCPRequest, MCPResponse, MCPNotification, MCPConfig } from '../../utils/types.js';
v2/src/mcp/transports/http.ts:15:import { MCPTransportError } from '../../utils/errors.js';
v2/src/mcp/transports/http.ts:37:    private config?: MCPConfig,
v2/src/mcp/transports/http.ts:46:      throw new MCPTransportError('Transport already running');
v2/src/mcp/transports/http.ts:80:      throw new MCPTransportError('Failed to start HTTP transport', { error });
v2/src/mcp/transports/http.ts:192:    // MCP JSON-RPC endpoint
v2/src/mcp/transports/http.ts:246:            await this.handleNotificationMessage(message as MCPNotification);
v2/src/mcp/transports/http.ts:249:            const response = await this.handleRequestMessage(message as MCPRequest);
v2/src/mcp/transports/http.ts:336:        await this.handleNotificationMessage(mcpMessage as MCPNotification);
v2/src/mcp/transports/http.ts:341:        const response = await this.handleRequestMessage(mcpMessage as MCPRequest);
v2/src/mcp/transports/http.ts:359:  private async handleRequestMessage(request: MCPRequest): Promise<MCPResponse> {
v2/src/mcp/transports/http.ts:366:          message: 'No request handler registered',
v2/src/mcp/transports/http.ts:388:  private async handleNotificationMessage(notification: MCPNotification): Promise<void> {
v2/src/mcp/transports/http.ts:390:      this.logger.warn('Received notification but no handler registered', {
v2/src/mcp/transports/http.ts:442:  async sendRequest(request: MCPRequest): Promise<MCPResponse> {
v2/src/mcp/transports/http.ts:447:  async sendNotification(notification: MCPNotification): Promise<void> {
v2/src/mcp/recovery/recovery-manager.ts:2: * Recovery Manager for MCP
v2/src/mcp/recovery/recovery-manager.ts:8:import type { MCPClient } from '../client.js';
v2/src/mcp/recovery/recovery-manager.ts:13:import type { MCPConfig, MCPRequest } from '../../utils/types.js';
v2/src/mcp/recovery/recovery-manager.ts:75:    private client: MCPClient,
v2/src/mcp/recovery/recovery-manager.ts:76:    private mcpConfig: MCPConfig,
v2/src/mcp/recovery/recovery-manager.ts:117:          type: 'tool',
v2/src/mcp/recovery/recovery-manager.ts:194:  async handleRequest(request: MCPRequest): Promise<void> {
v2/src/mcp/recovery/recovery-manager.ts:201:        type: 'tool',
v2/src/mcp/recovery/recovery-manager.ts:250:      // Replay operation through MCP client
v2/src/mcp/recovery/connection-state-manager.ts:2: * Connection State Manager for MCP
v2/src/mcp/recovery/connection-state-manager.ts:9:import type { MCPRequest, MCPConfig } from '../../utils/types.js';
v2/src/mcp/recovery/connection-state-manager.ts:15:  pendingRequests: MCPRequest[];
v2/src/mcp/recovery/connection-state-manager.ts:16:  configuration: MCPConfig;
v2/src/mcp/recovery/connection-state-manager.ts:206:  addPendingRequest(request: MCPRequest): void {
v2/src/mcp/recovery/connection-state-manager.ts:237:  getPendingRequests(): MCPRequest[] {
v2/src/mcp/tools/system/status.ts:11:import type { MCPTool, ClaudeFlowToolContext } from '../../types.js';
v2/src/mcp/tools/system/status.ts:44:export function createSystemStatusTool(logger: ILogger): MCPTool {
v2/src/mcp/tools/system/status.ts:109:        throw new Error('Orchestrator not available in tool context');
v2/src/mcp/tools/system/status.ts:201:export const toolMetadata = {
v2/src/mcp/recovery/index.ts:2: * MCP Recovery Module
v2/src/mcp/sparc-modes.ts:11:  tools?: string[];
v2/src/mcp/sparc-modes.ts:32:        tools: (config as any).tools || [],
v2/src/mcp/sparc-modes.ts:189:      tools: ['TodoWrite', 'TodoRead', 'Task', 'Memory', 'Bash'],
v2/src/mcp/sparc-modes.ts:201:      tools: ['Read', 'Write', 'Edit', 'MultiEdit', 'Bash', 'TodoWrite'],
v2/src/mcp/sparc-modes.ts:213:      tools: ['WebSearch', 'WebFetch', 'Read', 'Memory', 'TodoWrite'],
v2/src/mcp/sparc-modes.ts:225:      tools: ['Write', 'Edit', 'Bash', 'TodoWrite', 'Read'],
v2/src/mcp/sparc-modes.ts:237:      tools: ['Write', 'Memory', 'TodoWrite', 'Read'],
v2/src/mcp/sparc-modes.ts:249:      tools: ['Read', 'Edit', 'TodoWrite', 'Memory'],
v2/src/mcp/sparc-modes.ts:261:      tools: ['Read', 'Edit', 'Bash', 'TodoWrite'],
v2/src/mcp/sparc-modes.ts:273:      tools: ['Write', 'Bash', 'Read', 'TodoWrite'],
v2/src/mcp/sparc-modes.ts:285:      tools: ['Read', 'Grep', 'Glob', 'Memory', 'TodoWrite'],
v2/src/mcp/sparc-modes.ts:297:      tools: ['Read', 'Edit', 'Bash', 'Memory', 'TodoWrite'],
v2/src/mcp/sparc-modes.ts:309:      tools: ['Write', 'Read', 'TodoWrite'],
v2/src/mcp/sparc-modes.ts:321:      tools: ['Write', 'Read', 'TodoWrite'],
v2/src/mcp/sparc-modes.ts:333:      tools: ['Memory', 'TodoWrite', 'WebSearch'],
v2/src/mcp/sparc-modes.ts:345:      tools: ['Task', 'TodoWrite', 'Memory'],
v2/src/mcp/sparc-modes.ts:357:      tools: ['Memory', 'TodoWrite'],
v2/src/mcp/sparc-modes.ts:369:      tools: ['Task', 'TodoWrite', 'Memory'],
v2/src/mcp/sparc-modes.ts:381:      tools: ['TodoWrite', 'Task', 'Memory', 'Bash'],
v2/src/mcp/transports/stdio.ts:2: * Standard I/O transport for MCP
v2/src/mcp/transports/stdio.ts:9:import type { MCPRequest, MCPResponse, MCPNotification } from '../../utils/types.js';
v2/src/mcp/transports/stdio.ts:11:import { MCPTransportError } from '../../utils/errors.js';
v2/src/mcp/transports/stdio.ts:28:      throw new MCPTransportError('Transport already running');
v2/src/mcp/transports/stdio.ts:56:      throw new MCPTransportError('Failed to start stdio transport', { error });
v2/src/mcp/transports/stdio.ts:143:      await this.handleNotification(message as MCPNotification);
v2/src/mcp/transports/stdio.ts:146:      await this.handleRequest(message as MCPRequest);
v2/src/mcp/transports/stdio.ts:150:  private async handleRequest(request: MCPRequest): Promise<void> {
v2/src/mcp/transports/stdio.ts:157:          message: 'No request handler registered',
v2/src/mcp/transports/stdio.ts:181:  private async handleNotification(notification: MCPNotification): Promise<void> {
v2/src/mcp/transports/stdio.ts:183:      this.logger.warn('Received notification but no handler registered', {
v2/src/mcp/transports/stdio.ts:197:  private async sendResponse(response: MCPResponse): Promise<void> {
v2/src/mcp/transports/stdio.ts:218:  async sendRequest(request: MCPRequest): Promise<MCPResponse> {
v2/src/mcp/transports/stdio.ts:228:  async sendNotification(notification: MCPNotification): Promise<void> {
v2/src/mcp/recovery/fallback-coordinator.ts:2: * Fallback Coordinator for MCP
v2/src/mcp/recovery/fallback-coordinator.ts:3: * Manages graceful degradation to CLI when MCP connection fails
v2/src/mcp/recovery/fallback-coordinator.ts:8:import type { MCPRequest } from '../../utils/types.js';
v2/src/mcp/recovery/fallback-coordinator.ts:16:  type: 'tool' | 'resource' | 'notification';
v2/src/mcp/recovery/fallback-coordinator.ts:72:   * Check if MCP is available
v2/src/mcp/recovery/fallback-coordinator.ts:74:  async isMCPAvailable(): Promise<boolean> {
v2/src/mcp/recovery/fallback-coordinator.ts:76:      // Try to execute a simple MCP command
v2/src/mcp/recovery/fallback-coordinator.ts:81:      this.logger.debug('MCP availability check failed', error);
v2/src/mcp/recovery/fallback-coordinator.ts:262:      // Map MCP operations to CLI commands
v2/src/mcp/recovery/fallback-coordinator.ts:299:    // This would typically use the MCP client to replay the operation
v2/src/mcp/recovery/fallback-coordinator.ts:306:    // Emit event for handling by the MCP client
v2/src/mcp/recovery/fallback-coordinator.ts:311:    // Map common MCP operations to CLI commands
v2/src/mcp/recovery/fallback-coordinator.ts:314:      'tools/list': () => `${this.config.cliPath} tools list`,
v2/src/mcp/recovery/fallback-coordinator.ts:315:      'tools/call': (params) =>
v2/src/mcp/recovery/fallback-coordinator.ts:316:        `${this.config.cliPath} tools call ${params.name} '${JSON.stringify(params.arguments)}'`,
v2/src/mcp/transports/base.ts:2: * Base transport interface for MCP
v2/src/mcp/transports/base.ts:5:import type { MCPRequest, MCPResponse, MCPNotification } from '../../utils/types.js';
v2/src/mcp/transports/base.ts:7:export type RequestHandler = (request: MCPRequest) => Promise<MCPResponse>;
v2/src/mcp/transports/base.ts:8:export type NotificationHandler = (notification: MCPNotification) => Promise<void>;
v2/src/mcp/transports/base.ts:17:  sendRequest(request: MCPRequest): Promise<MCPResponse>;
v2/src/mcp/transports/base.ts:18:  sendNotification?(notification: MCPNotification): Promise<void>;
v2/src/cli/simple-commands/init/help.js:10:  console.log('                       Creates CLAUDE.md & .claude/commands for MCP integration');
v2/src/cli/simple-commands/init/help.js:35:  console.log('  --skip-mcp           Skip automatic MCP server setup in Claude Code');
v2/src/cli/simple-commands/init/help.js:100:  console.log('  ‚Ä¢ .claude/settings.local.json - Pre-approved MCP permissions (no prompts!)');
v2/src/cli/simple-commands/init/help.js:101:  console.log('  ‚Ä¢ .mcp.json - Project-scoped MCP server configuration');
v2/src/cli/simple-commands/init/help.js:109:  console.log('  ‚Ä¢ Automatic MCP server setup if Claude Code CLI is installed');
v2/src/cli/__tests__/simple-cli.test.js:15:  commandRegistry: new Map(),
v2/src/cli/__tests__/simple-cli.test.js:16:  registerCoreCommands: jest.fn(),
v2/src/mcp/index.ts:2: * MCP (Model Context Protocol) Module
v2/src/mcp/index.ts:3: * Export all MCP components for easy integration
v2/src/mcp/index.ts:6:// Phase 6: In-Process MCP Server (10-100x performance improvement)
v2/src/mcp/index.ts:7:export { InProcessMCPServer, createInProcessServer } from './in-process-server.js';
v2/src/mcp/index.ts:14:} from './tool-registry.js';
v2/src/mcp/index.ts:15:export type { ToolRegistryConfig } from './tool-registry.js';
v2/src/mcp/index.ts:27:// Core MCP Server
v2/src/mcp/index.ts:28:export { MCPServer, type IMCPServer } from './server.js';
v2/src/mcp/index.ts:30:// MCP 2025-11 Server and Components
v2/src/mcp/index.ts:31:export { MCP2025Server, type MCP2025ServerConfig } from './server-mcp-2025.js';
v2/src/mcp/index.ts:33:  MCPServerFactory,
v2/src/mcp/index.ts:34:  createMCPServer,
v2/src/mcp/index.ts:35:  isMCP2025Available,
v2/src/mcp/index.ts:37:  type MCPFeatureFlags,
v2/src/mcp/index.ts:38:  type ExtendedMCPConfig,
v2/src/mcp/index.ts:41:// MCP 2025-11 Protocol Components
v2/src/mcp/index.ts:45:  type MCPHandshake,
v2/src/mcp/index.ts:46:  type MCPVersion,
v2/src/mcp/index.ts:47:  type MCPCapability,
v2/src/mcp/index.ts:48:  type NegotiationResult as MCP2025NegotiationResult,
v2/src/mcp/index.ts:51:// MCP 2025-11 Async Job Management
v2/src/mcp/index.ts:53:  MCPAsyncJobManager,
v2/src/mcp/index.ts:54:  type MCPToolRequest,
v2/src/mcp/index.ts:55:  type MCPJobHandle,
v2/src/mcp/index.ts:56:  type MCPJobResult,
v2/src/mcp/index.ts:61:// MCP 2025-11 Registry Integration
v2/src/mcp/index.ts:63:  MCPRegistryClient,
v2/src/mcp/index.ts:68:// MCP 2025-11 Schema Validation
v2/src/mcp/index.ts:81:} from './tool-registry-progressive.js';
v2/src/mcp/index.ts:88:} from './tools/loader.js';
v2/src/mcp/index.ts:92:  MCPLifecycleManager,
v2/src/mcp/index.ts:105:} from './tools.js';
v2/src/mcp/index.ts:109:  MCPProtocolManager,
v2/src/mcp/index.ts:129:  MCPPerformanceMonitor,
v2/src/mcp/index.ts:139:  MCPOrchestrationIntegration,
v2/src/mcp/index.ts:141:  type MCPOrchestrationConfig,
v2/src/mcp/index.ts:160:export { createClaudeFlowTools, type ClaudeFlowToolContext } from './claude-flow-tools.js';
v2/src/mcp/index.ts:161:export { createSwarmTools, type SwarmToolContext } from './swarm-tools.js';
v2/src/mcp/index.ts:164: * MCP Integration Factory
v2/src/mcp/index.ts:165: * Provides a simple way to create a complete MCP integration
v2/src/mcp/index.ts:167:export class MCPIntegrationFactory {
v2/src/mcp/index.ts:169:   * Create a complete MCP integration with all components
v2/src/mcp/index.ts:172:    mcpConfig: import('../utils/types.js').MCPConfig;
v2/src/mcp/index.ts:173:    orchestrationConfig?: Partial<MCPOrchestrationConfig>;
v2/src/mcp/index.ts:176:  }): Promise<MCPOrchestrationIntegration> {
v2/src/mcp/index.ts:179:    const integration = new MCPOrchestrationIntegration(
v2/src/mcp/index.ts:207:   * Create a standalone MCP server (without orchestration integration)
v2/src/mcp/index.ts:210:    mcpConfig: import('../utils/types.js').MCPConfig;
v2/src/mcp/index.ts:215:    server: MCPServer;
v2/src/mcp/index.ts:216:    lifecycleManager?: MCPLifecycleManager;
v2/src/mcp/index.ts:217:    performanceMonitor?: MCPPerformanceMonitor;
v2/src/mcp/index.ts:227:    const server = new MCPServer(mcpConfig, eventBus, logger);
v2/src/mcp/index.ts:229:    let lifecycleManager: MCPLifecycleManager | undefined;
v2/src/mcp/index.ts:230:    let performanceMonitor: MCPPerformanceMonitor | undefined;
v2/src/mcp/index.ts:233:      lifecycleManager = new MCPLifecycleManager(mcpConfig, logger, () => server);
v2/src/mcp/index.ts:237:      performanceMonitor = new MCPPerformanceMonitor(logger);
v2/src/mcp/index.ts:248:   * Create a development/testing MCP setup
v2/src/mcp/index.ts:251:    server: MCPServer;
v2/src/mcp/index.ts:252:    lifecycleManager: MCPLifecycleManager;
v2/src/mcp/index.ts:253:    performanceMonitor: MCPPerformanceMonitor;
v2/src/mcp/index.ts:254:    protocolManager: MCPProtocolManager;
v2/src/mcp/index.ts:256:    const mcpConfig: import('../utils/types.js').MCPConfig = {
v2/src/mcp/index.ts:272:    const protocolManager = new MCPProtocolManager(logger);
v2/src/mcp/index.ts:284: * Default MCP configuration for common use cases
v2/src/mcp/index.ts:286:export const DefaultMCPConfigs = {
v2/src/mcp/index.ts:335: * MCP Utility Functions
v2/src/mcp/index.ts:337:export const MCPUtils = {
v2/src/mcp/index.ts:339:   * Validate MCP protocol version
v2/src/mcp/index.ts:341:  isValidProtocolVersion(version: import('../utils/types.js').MCPProtocolVersion): boolean {
v2/src/mcp/index.ts:354:    a: import('../utils/types.js').MCPProtocolVersion,
v2/src/mcp/index.ts:355:    b: import('../utils/types.js').MCPProtocolVersion,
v2/src/mcp/index.ts:365:  formatVersion(version: import('../utils/types.js').MCPProtocolVersion): string {
v2/src/mcp/index.ts:372:  parseVersion(versionString: string): import('../utils/types.js').MCPProtocolVersion {
v2/src/mcp/index.ts:400: * Phase 6: Initialize MCP with in-process server for maximum performance
v2/src/mcp/index.ts:403: * All Claude-Flow MCP tools execute in-process with microsecond latency.
v2/src/mcp/index.ts:405:export async function initializeInProcessMCP(orchestratorContext?: any) {
v2/src/mcp/index.ts:420:export async function getInProcessMCPStatus() {
v2/src/mcp/index.ts:428:      message: 'In-process MCP not initialized',
v2/src/mcp/tools/_template.ts:4: * This template provides the structure for individual MCP tools
v2/src/mcp/tools/_template.ts:9: * 2. Rename to match tool name (e.g., spawn.ts for agents/spawn)
v2/src/mcp/tools/_template.ts:14:import type { MCPTool, ClaudeFlowToolContext } from '../types.js';
v2/src/mcp/tools/_template.ts:18: * Input interface for this tool
v2/src/mcp/tools/_template.ts:21: * REPLACE: Rename ToolTemplateInput to match your tool name (e.g., AgentSpawnInput)
v2/src/mcp/tools/_template.ts:34: * Result interface for this tool
v2/src/mcp/tools/_template.ts:37: * REPLACE: Rename ToolTemplateResult to match your tool name (e.g., AgentSpawnResult)
v2/src/mcp/tools/_template.ts:51: * Create tool template
v2/src/mcp/tools/_template.ts:53: * REPLACE: Update function name to match your tool (e.g., createAgentSpawnTool)
v2/src/mcp/tools/_template.ts:57: * @returns MCPTool definition
v2/src/mcp/tools/_template.ts:59:export function createToolTemplateTool(logger: ILogger): MCPTool {
v2/src/mcp/tools/_template.ts:61:    // REPLACE: Update name to match your tool (e.g., 'agents/spawn')
v2/src/mcp/tools/_template.ts:62:    name: 'category/toolname',
v2/src/mcp/tools/_template.ts:64:    // REPLACE: Update description with detailed information about your tool
v2/src/mcp/tools/_template.ts:65:    description: 'Template for creating new MCP tools with progressive disclosure. Copy and customize this file.',
v2/src/mcp/tools/_template.ts:84:      // REPLACE: Update category to match your tool's purpose
v2/src/mcp/tools/_template.ts:115:        throw new Error('Orchestrator not available in tool context');
v2/src/mcp/tools/_template.ts:121:      // REPLACE: Update log message to match your tool
v2/src/mcp/tools/_template.ts:122:      logger.info('category/toolname invoked', {
v2/src/mcp/tools/_template.ts:140:        logger.info('[namespace]/[toolname] completed successfully', {
v2/src/mcp/tools/_template.ts:150:        logger.error('[namespace]/[toolname] failed', {
v2/src/mcp/tools/_template.ts:155:        // Re-throw for MCP error handling
v2/src/mcp/tools/_template.ts:163: * Export lightweight metadata for tool discovery
v2/src/mcp/tools/_template.ts:164: * This is loaded without executing the full tool definition
v2/src/mcp/tools/_template.ts:166: * REPLACE: Update all fields to match your tool
v2/src/mcp/tools/_template.ts:168:export const toolMetadata = {
v2/src/mcp/tools/_template.ts:169:  name: 'category/toolname',
v2/src/mcp/tools/_template.ts:170:  description: 'Brief one-line description of the tool',
v2/src/sdk/in-process-mcp.ts:2: * Real In-Process MCP - 100% SDK-Powered
v2/src/sdk/in-process-mcp.ts:5: * Uses ONLY Claude Code SDK primitives - TRUE in-process MCP:
v2/src/sdk/in-process-mcp.ts:7: * - tool() (SDK defines tools with Zod schemas)
v2/src/sdk/in-process-mcp.ts:10: * VERIFIED: Real in-process MCP servers using actual SDK capabilities
v2/src/sdk/in-process-mcp.ts:15:  tool,
v2/src/sdk/in-process-mcp.ts:21: * Example 1: Math Operations MCP Server
v2/src/sdk/in-process-mcp.ts:29:    tools: [
v2/src/sdk/in-process-mcp.ts:31:      tool({
v2/src/sdk/in-process-mcp.ts:44:      tool({
v2/src/sdk/in-process-mcp.ts:57:      tool({
v2/src/sdk/in-process-mcp.ts:76: * Example 2: Session Management MCP Server
v2/src/sdk/in-process-mcp.ts:87:    tools: [
v2/src/sdk/in-process-mcp.ts:89:      tool({
v2/src/sdk/in-process-mcp.ts:115:      tool({
v2/src/sdk/in-process-mcp.ts:137:      tool({
v2/src/sdk/in-process-mcp.ts:163:      tool({
v2/src/sdk/in-process-mcp.ts:180:      tool({
v2/src/sdk/in-process-mcp.ts:202: * Example 3: Checkpoint Management MCP Server
v2/src/sdk/in-process-mcp.ts:213:    tools: [
v2/src/sdk/in-process-mcp.ts:215:      tool({
v2/src/sdk/in-process-mcp.ts:244:      tool({
v2/src/sdk/in-process-mcp.ts:269:      tool({
v2/src/sdk/in-process-mcp.ts:297:      tool({
v2/src/sdk/in-process-mcp.ts:321:      tool({
v2/src/sdk/in-process-mcp.ts:349: * Example 4: Query Control MCP Server
v2/src/sdk/in-process-mcp.ts:359:    tools: [
v2/src/sdk/in-process-mcp.ts:361:      tool({
v2/src/sdk/in-process-mcp.ts:379:      tool({
v2/src/sdk/in-process-mcp.ts:397:      tool({
v2/src/sdk/in-process-mcp.ts:412:      tool({
v2/src/sdk/in-process-mcp.ts:435:      tool({
v2/src/sdk/in-process-mcp.ts:468: * // Use in-process MCP servers (no IPC overhead!)
v2/src/cli/commands/hive-mind/status.ts:16:export const statusCommand = new Command('status')
v2/src/swarm/direct-executor.ts:1001:app.post('/api/register', async (req, res) => {
v2/src/mcp/session-manager.ts:2: * Session manager for MCP connections
v2/src/mcp/session-manager.ts:6:  MCPSession,
v2/src/mcp/session-manager.ts:7:  MCPInitializeParams,
v2/src/mcp/session-manager.ts:8:  MCPProtocolVersion,
v2/src/mcp/session-manager.ts:9:  MCPCapabilities,
v2/src/mcp/session-manager.ts:10:  MCPAuthConfig,
v2/src/mcp/session-manager.ts:11:  MCPConfig,
v2/src/mcp/session-manager.ts:14:import { MCPError } from '../utils/errors.js';
v2/src/mcp/session-manager.ts:18:  createSession(transport: 'stdio' | 'http' | 'websocket'): MCPSession;
v2/src/mcp/session-manager.ts:19:  getSession(id: string): MCPSession | undefined;
v2/src/mcp/session-manager.ts:20:  initializeSession(sessionId: string, params: MCPInitializeParams): void;
v2/src/mcp/session-manager.ts:24:  getActiveSessions(): MCPSession[];
v2/src/mcp/session-manager.ts:38:  private sessions = new Map<string, MCPSession>();
v2/src/mcp/session-manager.ts:39:  private authConfig: MCPAuthConfig;
v2/src/mcp/session-manager.ts:45:    private config: MCPConfig,
v2/src/mcp/session-manager.ts:58:  createSession(transport: 'stdio' | 'http' | 'websocket'): MCPSession {
v2/src/mcp/session-manager.ts:65:        throw new MCPError('Maximum number of sessions reached');
v2/src/mcp/session-manager.ts:72:    const session: MCPSession = {
v2/src/mcp/session-manager.ts:95:  getSession(id: string): MCPSession | undefined {
v2/src/mcp/session-manager.ts:104:  initializeSession(sessionId: string, params: MCPInitializeParams): void {
v2/src/mcp/session-manager.ts:107:      throw new MCPError(`Session not found: ${sessionId}`);
v2/src/mcp/session-manager.ts:195:  getActiveSessions(): MCPSession[] {
v2/src/mcp/session-manager.ts:196:    const activeSessions: MCPSession[] = [];
v2/src/mcp/session-manager.ts:268:  private isSessionExpired(session: MCPSession): boolean {
v2/src/mcp/session-manager.ts:274:  private validateProtocolVersion(version: MCPProtocolVersion): void {
v2/src/mcp/session-manager.ts:275:    // Currently supporting MCP version 2024-11-05
v2/src/mcp/session-manager.ts:286:      throw new MCPError(
v2/src/cli/simple-commands/init/index.js:99: * Set up MCP servers in Claude Code
v2/src/cli/simple-commands/init/index.js:102:  console.log('\nüîå Setting up MCP servers for Claude Code...');
v2/src/cli/simple-commands/init/index.js:108:      description: 'Claude Flow MCP server with swarm orchestration (alpha)',
v2/src/cli/simple-commands/init/index.js:113:      description: 'ruv-swarm MCP server for enhanced coordination',
v2/src/cli/simple-commands/init/index.js:118:      description: 'Flow Nexus Complete MCP server for advanced AI orchestration',
v2/src/cli/simple-commands/init/index.js:140:    console.log('\n  üìã Verifying MCP servers...');
v2/src/cli/simple-commands/init/index.js:144:      console.log('  ‚ö†Ô∏è  Could not verify MCP servers');
v2/src/cli/simple-commands/init/index.js:557:            (initOptimized ? ' (Batchtools-optimized)' : ''),
v2/src/cli/simple-commands/init/index.js:617:        `  ‚Ä¢ Configuration: ${initOptimized ? 'Batchtools-optimized SPARC' : initSparc ? 'SPARC-enhanced' : 'Standard'}`,
v2/src/cli/simple-commands/init/index.js:632:        console.log('  ‚Ä¢ Batchtools optimization: Enabled for parallel processing');
v2/src/cli/simple-commands/init/index.js:640:        console.log('\n‚ö° Batchtools Optimization Enabled!');
v2/src/cli/simple-commands/init/index.js:648:        `  ‚úÖ CLAUDE.md (${initOptimized ? 'Batchtools-optimized' : initSparc ? 'SPARC-enhanced' : 'Standard configuration'})`,
v2/src/cli/simple-commands/init/index.js:654:        `  ‚úÖ coordination.md (${initOptimized ? 'Enhanced with batchtools' : 'Standard coordination'})`,
v2/src/cli/simple-commands/init/index.js:681:          console.log('8. Use batchtools commands: /batchtools, /performance for optimization');
v2/src/cli/simple-commands/init/index.js:735:      // Check for Claude Code and set up MCP servers (always enabled by default)
v2/src/cli/simple-commands/init/index.js:743:          console.log('  ‚ÑπÔ∏è  Skipping MCP setup (--skip-mcp flag used)');
v2/src/cli/simple-commands/init/index.js:748:        console.log('  üìã Then add MCP servers manually with:');
v2/src/cli/simple-commands/init/index.js:1379:      printSuccess('‚úì Created .claude/settings.json with hooks and MCP configuration');
v2/src/cli/simple-commands/init/index.js:1421:    // Create settings.local.json with default MCP permissions
v2/src/cli/simple-commands/init/index.js:1433:      printSuccess('‚úì Created .claude/settings.local.json with default MCP permissions');
v2/src/cli/simple-commands/init/index.js:1436:        '[DRY RUN] Would create .claude/settings.local.json with default MCP permissions',
v2/src/cli/simple-commands/init/index.js:1440:    // Create .mcp.json at project root for MCP server configuration
v2/src/cli/simple-commands/init/index.js:1463:      printSuccess('‚úì Created .mcp.json at project root for MCP server configuration');
v2/src/cli/simple-commands/init/index.js:1465:      console.log('[DRY RUN] Would create .mcp.json at project root for MCP server configuration');
v2/src/cli/simple-commands/init/index.js:1723:    // Check for Claude Code and set up MCP servers (always enabled by default)
v2/src/cli/simple-commands/init/index.js:1733:        console.log('  ‚ÑπÔ∏è  Skipping MCP setup (--skip-mcp flag used)');
v2/src/cli/simple-commands/init/index.js:1734:        console.log('\n  üìã To add MCP servers manually:');
v2/src/cli/simple-commands/init/index.js:1738:        console.log('\n  üí° MCP servers are defined in .mcp.json (project scope)');
v2/src/cli/simple-commands/init/index.js:1744:      console.log('\n  üìã After installing, add MCP servers:');
v2/src/cli/simple-commands/init/index.js:1748:      console.log('\n  üí° MCP servers are defined in .mcp.json (project scope)');
v2/src/cli/simple-commands/init/index.js:1870:      console.log('4. Use MCP tools in Claude Code for enhanced coordination');
v2/src/cli/simple-commands/init/index.js:1876:      console.log('2. Add MCP servers (see instructions above)');
v2/src/cli/simple-commands/init/index.js:1991:    console.log('  1. Register: mcp__flow-nexus__user_register({ email, password })');
v2/src/cli/simple-commands/init/index.js:1995:    console.log('üîó Use Flow Nexus MCP tools in Claude Code for full functionality');
v2/src/mcp/ruv-swarm-tools.ts:2: * ruv-swarm MCP tools wrapper for Claude Code integration
v2/src/mcp/ruv-swarm-tools.ts:4: * This module provides MCP tools that integrate with the external ruv-swarm
v2/src/mcp/ruv-swarm-tools.ts:8:import type { MCPTool, MCPContext } from '../utils/types.js';
v2/src/mcp/ruv-swarm-tools.ts:28:export interface RuvSwarmToolContext extends MCPContext {
v2/src/mcp/ruv-swarm-tools.ts:104: * Create ruv-swarm MCP tools for Claude Code integration
v2/src/mcp/ruv-swarm-tools.ts:106: * These tools provide access to the full ruv-swarm functionality including:
v2/src/mcp/ruv-swarm-tools.ts:113:export function createRuvSwarmTools(logger: ILogger): MCPTool[] {
v2/src/mcp/recovery/connection-health-monitor.ts:2: * Connection Health Monitor for MCP
v2/src/mcp/recovery/connection-health-monitor.ts:8:import type { MCPClient } from '../client.js';
v2/src/mcp/recovery/connection-health-monitor.ts:43:    private client: MCPClient,
v2/src/mcp/recovery/connection-health-monitor.ts:209:    // Send heartbeat notification via MCP
v2/src/mcp/README.md:1:# MCP (Model Context Protocol) Implementation
v2/src/mcp/README.md:3:This directory contains a comprehensive implementation of the Model Context Protocol (MCP) for Claude-Flow, providing robust server lifecycle management, tool registration and discovery, protocol version negotiation, security, performance monitoring, and integration with the broader orchestration system.
v2/src/mcp/README.md:7:The MCP implementation provides:
v2/src/mcp/README.md:20:‚îÇ                MCP Orchestration Integration                ‚îÇ
v2/src/mcp/README.md:27:‚îÇ  ‚îÇ   MCP Server    ‚îÇ  ‚îÇ  Tool Registry  ‚îÇ  ‚îÇ  Auth Manager   ‚îÇ ‚îÇ
v2/src/mcp/README.md:42:### 1. MCP Server (`server.ts`)
v2/src/mcp/README.md:44:The main MCP server implementation providing:
v2/src/mcp/README.md:53:import { MCPServer } from './mcp/server.js';
v2/src/mcp/README.md:55:const server = new MCPServer(config, eventBus, logger);
v2/src/mcp/README.md:70:import { MCPLifecycleManager } from './mcp/lifecycle-manager.js';
v2/src/mcp/README.md:72:const lifecycle = new MCPLifecycleManager(config, logger, serverFactory);
v2/src/mcp/README.md:76:### 3. Tool Registry (`tools.ts`)
v2/src/mcp/README.md:78:Enhanced tool registration and discovery:
v2/src/mcp/README.md:80:- Capability-based tool registration
v2/src/mcp/README.md:87:import { ToolRegistry } from './mcp/tools.js';
v2/src/mcp/README.md:90:registry.register(tool, capability);
v2/src/mcp/README.md:91:const tools = registry.discoverTools({ category: 'filesystem' });
v2/src/mcp/README.md:105:import { MCPProtocolManager } from './mcp/protocol-manager.js';
v2/src/mcp/README.md:107:const protocolManager = new MCPProtocolManager(logger);
v2/src/mcp/README.md:139:import { MCPPerformanceMonitor } from './mcp/performance-monitor.js';
v2/src/mcp/README.md:141:const monitor = new MCPPerformanceMonitor(logger);
v2/src/mcp/README.md:157:import { MCPOrchestrationIntegration } from './mcp/orchestration-integration.js';
v2/src/mcp/README.md:159:const integration = new MCPOrchestrationIntegration(
v2/src/mcp/README.md:173:import { MCPIntegrationFactory } from './mcp/index.js';
v2/src/mcp/README.md:177:  await MCPIntegrationFactory.createDevelopmentSetup(logger);
v2/src/mcp/README.md:185:import { MCPOrchestrationIntegration } from './mcp/orchestration-integration.js';
v2/src/mcp/README.md:187:const integration = new MCPOrchestrationIntegration(
v2/src/mcp/README.md:223:// Register a simple tool
v2/src/mcp/README.md:224:server.registerTool({
v2/src/mcp/README.md:241:const toolRegistry = new ToolRegistry(logger);
v2/src/mcp/README.md:242:toolRegistry.register(tool, {
v2/src/mcp/README.md:255:### MCP Config
v2/src/mcp/README.md:258:const mcpConfig: MCPConfig = {
v2/src/mcp/README.md:290:const orchestrationConfig: MCPOrchestrationConfig = {
v2/src/mcp/README.md:430:Implement custom tools by providing:
v2/src/mcp/README.md:525:- [Tool Registry API](./tools.ts)
v2/src/sdk/checkpoint-manager.ts:274:          if (block.type === 'tool_use') {
v2/src/mcp/tools/loader.ts:4: * Implements filesystem-based tool discovery pattern recommended by Anthropic:
v2/src/mcp/tools/loader.ts:5: * - Scans tool directories for metadata only (lightweight)
v2/src/mcp/tools/loader.ts:6: * - Loads full tool definitions on-demand (lazy loading)
v2/src/mcp/tools/loader.ts:14:import type { MCPTool } from '../types.js';
v2/src/mcp/tools/loader.ts:21: * Lightweight tool metadata for discovery
v2/src/mcp/tools/loader.ts:22: * Loaded without executing full tool definition
v2/src/mcp/tools/loader.ts:44: * Dynamic tool loader with progressive disclosure
v2/src/mcp/tools/loader.ts:48:  private toolCache: Map<string, MCPTool> = new Map();
v2/src/mcp/tools/loader.ts:52:    private toolsDir: string = join(__dirname, '.'),
v2/src/mcp/tools/loader.ts:57:   * Scan tool directory and build metadata index
v2/src/mcp/tools/loader.ts:58:   * Only reads metadata exports, not full tool definitions
v2/src/mcp/tools/loader.ts:66:    this.logger.info('Scanning tools directory for metadata', {
v2/src/mcp/tools/loader.ts:67:      toolsDir: this.toolsDir,
v2/src/mcp/tools/loader.ts:75:      // Resolve tools directory to absolute path
v2/src/mcp/tools/loader.ts:76:      const resolvedToolsDir = resolve(this.toolsDir);
v2/src/mcp/tools/loader.ts:87:        // Prevent path traversal - ensure category is within tools directory
v2/src/mcp/tools/loader.ts:89:          this.logger.warn('Skipping category outside tools directory', {
v2/src/mcp/tools/loader.ts:92:            toolsDir: resolvedToolsDir,
v2/src/mcp/tools/loader.ts:98:          // Get tool files in category
v2/src/mcp/tools/loader.ts:99:          const toolFiles = await fs.readdir(categoryPath);
v2/src/mcp/tools/loader.ts:100:          const validToolFiles = toolFiles.filter(f => {
v2/src/mcp/tools/loader.ts:106:          for (const toolFile of validToolFiles) {
v2/src/mcp/tools/loader.ts:108:            const toolPath = resolve(categoryPath, toolFile);
v2/src/mcp/tools/loader.ts:110:            // Prevent path traversal - ensure tool file is within category
v2/src/mcp/tools/loader.ts:111:            if (!toolPath.startsWith(categoryPath)) {
v2/src/mcp/tools/loader.ts:112:              this.logger.warn('Skipping tool file outside category directory', {
v2/src/mcp/tools/loader.ts:113:                toolFile,
v2/src/mcp/tools/loader.ts:114:                toolPath,
v2/src/mcp/tools/loader.ts:122:              const module = await import(toolPath);
v2/src/mcp/tools/loader.ts:124:              if (module.toolMetadata) {
v2/src/mcp/tools/loader.ts:126:                  ...module.toolMetadata,
v2/src/mcp/tools/loader.ts:128:                  filePath: toolPath,
v2/src/mcp/tools/loader.ts:134:                this.logger.debug('Loaded tool metadata', {
v2/src/mcp/tools/loader.ts:137:                  filePath: toolPath,
v2/src/mcp/tools/loader.ts:140:                this.logger.warn('Tool file missing toolMetadata export', {
v2/src/mcp/tools/loader.ts:141:                  filePath: toolPath,
v2/src/mcp/tools/loader.ts:145:              this.logger.error('Failed to load tool metadata', {
v2/src/mcp/tools/loader.ts:146:                filePath: toolPath,
v2/src/mcp/tools/loader.ts:171:      this.logger.error('Failed to scan tools directory', {
v2/src/mcp/tools/loader.ts:179:   * Lazy load a specific tool by name
v2/src/mcp/tools/loader.ts:182:  async loadTool(toolName: string, logger: ILogger): Promise<MCPTool | null> {
v2/src/mcp/tools/loader.ts:184:    if (this.toolCache.has(toolName)) {
v2/src/mcp/tools/loader.ts:185:      this.logger.debug('Tool loaded from cache', { toolName });
v2/src/mcp/tools/loader.ts:186:      return this.toolCache.get(toolName)!;
v2/src/mcp/tools/loader.ts:190:    const metadata = this.metadataCache.get(toolName);
v2/src/mcp/tools/loader.ts:192:      this.logger.warn('Tool not found in metadata cache', { toolName });
v2/src/mcp/tools/loader.ts:196:    // Load full tool definition
v2/src/mcp/tools/loader.ts:198:      this.logger.debug('Loading full tool definition', {
v2/src/mcp/tools/loader.ts:199:        toolName,
v2/src/mcp/tools/loader.ts:205:      // Find tool creator function (convention: createXxxTool)
v2/src/mcp/tools/loader.ts:208:      ) as ((logger: ILogger) => MCPTool) | undefined;
v2/src/mcp/tools/loader.ts:212:          `No tool creator function found in ${metadata.filePath}. ` +
v2/src/mcp/tools/loader.ts:217:      // Create tool instance
v2/src/mcp/tools/loader.ts:218:      const tool = creatorFn(logger);
v2/src/mcp/tools/loader.ts:220:      // Validate tool name matches metadata
v2/src/mcp/tools/loader.ts:221:      if (tool.name !== toolName) {
v2/src/mcp/tools/loader.ts:223:          expected: toolName,
v2/src/mcp/tools/loader.ts:224:          actual: tool.name,
v2/src/mcp/tools/loader.ts:230:      this.toolCache.set(toolName, tool);
v2/src/mcp/tools/loader.ts:233:        toolName,
v2/src/mcp/tools/loader.ts:237:      return tool;
v2/src/mcp/tools/loader.ts:239:      this.logger.error('Failed to load tool', {
v2/src/mcp/tools/loader.ts:240:        toolName,
v2/src/mcp/tools/loader.ts:248:   * Get tool metadata without loading full definition
v2/src/mcp/tools/loader.ts:249:   * Used for tool discovery with minimal token usage
v2/src/mcp/tools/loader.ts:251:  getToolMetadata(toolName: string): ToolMetadata | undefined {
v2/src/mcp/tools/loader.ts:252:    return this.metadataCache.get(toolName);
v2/src/mcp/tools/loader.ts:256:   * Search tools by query
v2/src/mcp/tools/loader.ts:257:   * Returns only metadata for matching tools (lightweight)
v2/src/mcp/tools/loader.ts:275:        const toolTags = metadata.tags || [];
v2/src/mcp/tools/loader.ts:276:        const hasAllTags = query.tags.every(tag => toolTags.includes(tag));
v2/src/mcp/tools/loader.ts:301:   * Get all tool names (minimal metadata)
v2/src/mcp/tools/loader.ts:302:   * Used for quick tool listing
v2/src/mcp/tools/loader.ts:309:   * Get tools grouped by category
v2/src/mcp/tools/loader.ts:326:   * Get statistics about loaded tools
v2/src/mcp/tools/loader.ts:333:      cachedTools: this.toolCache.size,
v2/src/mcp/tools/loader.ts:335:      toolsByCategory: Object.fromEntries(
v2/src/mcp/tools/loader.ts:336:        Array.from(byCategory.entries()).map(([cat, tools]) => [cat, tools.length])
v2/src/mcp/tools/loader.ts:343:   * Clear tool cache (useful for hot reloading during development)
v2/src/mcp/tools/loader.ts:346:    this.toolCache.clear();
v2/src/mcp/tools/loader.ts:348:      previouslyCached: this.toolCache.size,
v2/src/mcp/tools/loader.ts:357:    this.toolCache.clear();
v2/src/cli/__tests__/command-registry.test.js:7:  commandRegistry,
v2/src/cli/__tests__/command-registry.test.js:8:  registerCoreCommands,
v2/src/cli/__tests__/command-registry.test.js:78:    commandRegistry.clear();
v2/src/cli/__tests__/command-registry.test.js:89:  describe('registerCoreCommands', () => {
v2/src/cli/__tests__/command-registry.test.js:90:    test('should register all core commands', () => {
v2/src/cli/__tests__/command-registry.test.js:91:      registerCoreCommands();
v2/src/cli/__tests__/command-registry.test.js:113:        expect(commandRegistry.has(cmd)).toBe(true);
v2/src/cli/__tests__/command-registry.test.js:117:    test('should register commands with correct metadata', () => {
v2/src/cli/__tests__/command-registry.test.js:118:      registerCoreCommands();
v2/src/cli/__tests__/command-registry.test.js:120:      const initCmd = commandRegistry.get('init');
v2/src/cli/__tests__/command-registry.test.js:131:      registerCoreCommands();
v2/src/cli/__tests__/command-registry.test.js:134:    test('should return true for registered commands', () => {
v2/src/cli/__tests__/command-registry.test.js:140:    test('should return false for unregistered commands', () => {
v2/src/cli/__tests__/command-registry.test.js:149:      registerCoreCommands();
v2/src/cli/__tests__/command-registry.test.js:174:      registerCoreCommands();
v2/src/cli/__tests__/command-registry.test.js:197:    test('should display all registered commands grouped by category', () => {
v2/src/cli/__tests__/command-registry.test.js:198:      registerCoreCommands();
v2/src/cli/__tests__/command-registry.test.js:220:      registerCoreCommands();
v2/src/cli/__tests__/command-registry.test.js:221:      const commands = listCommands();
v2/src/cli/__tests__/command-registry.test.js:230:    test('should return empty array when no commands registered', () => {
v2/src/cli/__tests__/command-registry.test.js:231:      commandRegistry.clear();
v2/src/cli/__tests__/command-registry.test.js:232:      const commands = listCommands();
v2/src/mcp/lifecycle-manager.ts:2: * MCP Server Lifecycle Manager
v2/src/mcp/lifecycle-manager.ts:8:import type { MCPConfig, MCPSession, MCPMetrics, HealthStatus } from '../utils/types.js';
v2/src/mcp/lifecycle-manager.ts:9:import { MCPError } from '../utils/errors.js';
v2/src/mcp/lifecycle-manager.ts:10:import type { IMCPServer } from './server.js';
v2/src/mcp/lifecycle-manager.ts:40:    tools: boolean;
v2/src/mcp/lifecycle-manager.ts:56: * MCP Server Lifecycle Manager
v2/src/mcp/lifecycle-manager.ts:57: * Manages the complete lifecycle of MCP servers with robust error handling
v2/src/mcp/lifecycle-manager.ts:59:export class MCPLifecycleManager extends EventEmitter {
v2/src/mcp/lifecycle-manager.ts:61:  private server?: IMCPServer;
v2/src/mcp/lifecycle-manager.ts:79:    private mcpConfig: MCPConfig,
v2/src/mcp/lifecycle-manager.ts:81:    private serverFactory: () => IMCPServer,
v2/src/mcp/lifecycle-manager.ts:94:   * Start the MCP server
v2/src/mcp/lifecycle-manager.ts:98:      throw new MCPError(`Cannot start server in state: ${this.state}`);
v2/src/mcp/lifecycle-manager.ts:102:    this.logger.info('Starting MCP server lifecycle manager');
v2/src/mcp/lifecycle-manager.ts:121:      this.logger.info('MCP server started successfully');
v2/src/mcp/lifecycle-manager.ts:124:      this.logger.error('Failed to start MCP server', error);
v2/src/mcp/lifecycle-manager.ts:130:   * Stop the MCP server gracefully
v2/src/mcp/lifecycle-manager.ts:142:    this.logger.info('Stopping MCP server');
v2/src/mcp/lifecycle-manager.ts:150:   * Restart the MCP server
v2/src/mcp/lifecycle-manager.ts:158:    this.logger.info('Restarting MCP server');
v2/src/mcp/lifecycle-manager.ts:172:      this.logger.info('MCP server restarted successfully');
v2/src/mcp/lifecycle-manager.ts:175:      this.logger.error('Failed to restart MCP server', error);
v2/src/mcp/lifecycle-manager.ts:194:        tools: false,
v2/src/mcp/lifecycle-manager.ts:218:      result.components.tools = (serverHealth.metrics?.registeredTools || 0) > 0;
v2/src/mcp/lifecycle-manager.ts:227:        result.components.tools;
v2/src/mcp/lifecycle-manager.ts:258:  getMetrics(): MCPMetrics | undefined {
v2/src/mcp/lifecycle-manager.ts:265:  getSessions(): MCPSession[] {
v2/src/mcp/lifecycle-manager.ts:287:    this.logger.warn('Force stopping MCP server');
v2/src/mcp/lifecycle-manager.ts:455:      this.logger.info('MCP server stopped successfully');
v2/src/cli/commands/hook.ts:332:// Export hook subcommands for better CLI integration
v2/src/cli/commands/hook.ts:333:export const hookSubcommands = [
v2/src/cli/simple-commands/init/batch-init.js:242:  'cli-tool': {
v2/src/cli/simple-commands/init/batch-init.js:244:    description: 'Command-line interface tool',
v2/src/cli/simple-commands/init/batch-init.js:262:const program = new Command();
v2/src/mcp/tests/mcp-integration.test.ts:3: * Comprehensive MCP Integration Tests
v2/src/mcp/tests/mcp-integration.test.ts:8:import { MCPServer } from '../server.js';
v2/src/mcp/tests/mcp-integration.test.ts:9:import { MCPLifecycleManager, LifecycleState } from '../lifecycle-manager.js';
v2/src/mcp/tests/mcp-integration.test.ts:10:import { MCPPerformanceMonitor } from '../performance-monitor.js';
v2/src/mcp/tests/mcp-integration.test.ts:11:import { MCPProtocolManager } from '../protocol-manager.js';
v2/src/mcp/tests/mcp-integration.test.ts:12:import { MCPOrchestrationIntegration } from '../orchestration-integration.js';
v2/src/mcp/tests/mcp-integration.test.ts:13:import { ToolRegistry } from '../tools.js';
v2/src/mcp/tests/mcp-integration.test.ts:16:import type { MCPConfig, MCPInitializeParams, MCPRequest, MCPSession } from '../../utils/types.js';
v2/src/mcp/tests/mcp-integration.test.ts:32:const mockMCPConfig: MCPConfig = {
v2/src/mcp/tests/mcp-integration.test.ts:41:describe('MCP Server', () => {
v2/src/mcp/tests/mcp-integration.test.ts:42:  let server: MCPServer;
v2/src/mcp/tests/mcp-integration.test.ts:45:    server = new MCPServer(mockMCPConfig, mockEventBus, mockLogger);
v2/src/mcp/tests/mcp-integration.test.ts:57:      expect(mockLogger.info).toHaveBeenCalledWith('MCP server started successfully');
v2/src/mcp/tests/mcp-integration.test.ts:60:      expect(mockLogger.info).toHaveBeenCalledWith('MCP server stopped');
v2/src/mcp/tests/mcp-integration.test.ts:66:      const initParams: MCPInitializeParams = {
v2/src/mcp/tests/mcp-integration.test.ts:69:          tools: { listChanged: true },
v2/src/mcp/tests/mcp-integration.test.ts:77:      const request: MCPRequest = {
v2/src/mcp/tests/mcp-integration.test.ts:102:    it('should register tools successfully', () => {
v2/src/mcp/tests/mcp-integration.test.ts:103:      const tool = {
v2/src/mcp/tests/mcp-integration.test.ts:104:        name: 'test/tool',
v2/src/mcp/tests/mcp-integration.test.ts:105:        description: 'Test tool',
v2/src/mcp/tests/mcp-integration.test.ts:115:      server.registerTool(tool);
v2/src/mcp/tests/mcp-integration.test.ts:116:      expect(mockLogger.info).toHaveBeenCalledWith('Tool registered', { name: 'test/tool' });
v2/src/mcp/tests/mcp-integration.test.ts:119:    it('should list registered tools', async () => {
v2/src/mcp/tests/mcp-integration.test.ts:120:      const tool1 = {
v2/src/mcp/tests/mcp-integration.test.ts:121:        name: 'test/tool1',
v2/src/mcp/tests/mcp-integration.test.ts:122:        description: 'Test tool 1',
v2/src/mcp/tests/mcp-integration.test.ts:127:      const tool2 = {
v2/src/mcp/tests/mcp-integration.test.ts:128:        name: 'test/tool2',
v2/src/mcp/tests/mcp-integration.test.ts:129:        description: 'Test tool 2',
v2/src/mcp/tests/mcp-integration.test.ts:134:      server.registerTool(tool1);
v2/src/mcp/tests/mcp-integration.test.ts:135:      server.registerTool(tool2);
v2/src/mcp/tests/mcp-integration.test.ts:137:      const tools = (server as any).toolRegistry.listTools();
v2/src/mcp/tests/mcp-integration.test.ts:138:      expect(tools).toHaveLength(2 + 4); // 2 custom + 4 built-in tools
v2/src/mcp/tests/mcp-integration.test.ts:139:      expect(tools.some((t: any) => t.name === 'test/tool1')).toBe(true);
v2/src/mcp/tests/mcp-integration.test.ts:140:      expect(tools.some((t: any) => t.name === 'test/tool2')).toBe(true);
v2/src/mcp/tests/mcp-integration.test.ts:154:      expect(health.metrics?.registeredTools).toBeGreaterThan(0);
v2/src/mcp/tests/mcp-integration.test.ts:161:      expect(typeof health.metrics?.registeredTools).toBe('number');
v2/src/mcp/tests/mcp-integration.test.ts:169:describe('MCP Lifecycle Manager', () => {
v2/src/mcp/tests/mcp-integration.test.ts:170:  let lifecycleManager: MCPLifecycleManager;
v2/src/mcp/tests/mcp-integration.test.ts:174:    mockServerFactory = jest.fn(() => new MCPServer(mockMCPConfig, mockEventBus, mockLogger));
v2/src/mcp/tests/mcp-integration.test.ts:176:    lifecycleManager = new MCPLifecycleManager(mockMCPConfig, mockLogger, mockServerFactory);
v2/src/mcp/tests/mcp-integration.test.ts:225:      lifecycleManager = new MCPLifecycleManager(
v2/src/mcp/tests/mcp-integration.test.ts:226:        mockMCPConfig,
v2/src/mcp/tests/mcp-integration.test.ts:254:describe('MCP Performance Monitor', () => {
v2/src/mcp/tests/mcp-integration.test.ts:255:  let performanceMonitor: MCPPerformanceMonitor;
v2/src/mcp/tests/mcp-integration.test.ts:258:    performanceMonitor = new MCPPerformanceMonitor(mockLogger);
v2/src/mcp/tests/mcp-integration.test.ts:269:      const mockSession: MCPSession = {
v2/src/mcp/tests/mcp-integration.test.ts:281:      const mockRequest: MCPRequest = {
v2/src/mcp/tests/mcp-integration.test.ts:306:describe('MCP Protocol Manager', () => {
v2/src/mcp/tests/mcp-integration.test.ts:307:  let protocolManager: MCPProtocolManager;
v2/src/mcp/tests/mcp-integration.test.ts:310:    protocolManager = new MCPProtocolManager(mockLogger);
v2/src/mcp/tests/mcp-integration.test.ts:333:      const clientParams: MCPInitializeParams = {
v2/src/mcp/tests/mcp-integration.test.ts:336:          tools: { listChanged: true },
v2/src/mcp/tests/mcp-integration.test.ts:349:      expect(result.agreedCapabilities.tools?.listChanged).toBe(true);
v2/src/mcp/tests/mcp-integration.test.ts:355:  let toolRegistry: ToolRegistry;
v2/src/mcp/tests/mcp-integration.test.ts:358:    toolRegistry = new ToolRegistry(mockLogger);
v2/src/mcp/tests/mcp-integration.test.ts:362:    it('should register tools with capabilities', () => {
v2/src/mcp/tests/mcp-integration.test.ts:363:      const tool = {
v2/src/mcp/tests/mcp-integration.test.ts:364:        name: 'test/tool',
v2/src/mcp/tests/mcp-integration.test.ts:365:        description: 'Test tool for registry',
v2/src/mcp/tests/mcp-integration.test.ts:376:        name: 'test/tool',
v2/src/mcp/tests/mcp-integration.test.ts:384:      toolRegistry.register(tool, capability);
v2/src/mcp/tests/mcp-integration.test.ts:386:      const registeredCapability = toolRegistry.getToolCapability('test/tool');
v2/src/mcp/tests/mcp-integration.test.ts:387:      expect(registeredCapability).toEqual(capability);
v2/src/mcp/tests/mcp-integration.test.ts:390:    it('should discover tools by criteria', () => {
v2/src/mcp/tests/mcp-integration.test.ts:391:      const tool1 = {
v2/src/mcp/tests/mcp-integration.test.ts:398:      const tool2 = {
v2/src/mcp/tests/mcp-integration.test.ts:405:      toolRegistry.register(tool1);
v2/src/mcp/tests/mcp-integration.test.ts:406:      toolRegistry.register(tool2);
v2/src/mcp/tests/mcp-integration.test.ts:408:      const fileTools = toolRegistry.discoverTools({ category: 'file' });
v2/src/mcp/tests/mcp-integration.test.ts:410:      expect(fileTools[0].tool.name).toBe('file/read');
v2/src/mcp/tests/mcp-integration.test.ts:412:      const memoryTools = toolRegistry.discoverTools({ tags: ['memory'] });
v2/src/mcp/tests/mcp-integration.test.ts:414:      expect(memoryTools[0].tool.name).toBe('memory/query');
v2/src/mcp/tests/mcp-integration.test.ts:417:    it('should track tool metrics', async () => {
v2/src/mcp/tests/mcp-integration.test.ts:418:      const tool = {
v2/src/mcp/tests/mcp-integration.test.ts:419:        name: 'test/metric-tool',
v2/src/mcp/tests/mcp-integration.test.ts:425:      toolRegistry.register(tool);
v2/src/mcp/tests/mcp-integration.test.ts:427:      // Execute tool multiple times
v2/src/mcp/tests/mcp-integration.test.ts:428:      await toolRegistry.executeTool('test/metric-tool', {});
v2/src/mcp/tests/mcp-integration.test.ts:429:      await toolRegistry.executeTool('test/metric-tool', {});
v2/src/mcp/tests/mcp-integration.test.ts:431:      const metrics = toolRegistry.getToolMetrics('test/metric-tool');
v2/src/mcp/tests/mcp-integration.test.ts:442:describe('MCP Orchestration Integration', () => {
v2/src/mcp/tests/mcp-integration.test.ts:443:  let integration: MCPOrchestrationIntegration;
v2/src/mcp/tests/mcp-integration.test.ts:455:    integration = new MCPOrchestrationIntegration(
v2/src/mcp/tests/mcp-integration.test.ts:456:      mockMCPConfig,
v2/src/mcp/tests/mcp-integration.test.ts:496:    it('should register orchestrator tools when enabled', async () => {
v2/src/mcp/tests/mcp-integration.test.ts:502:      // Check that orchestrator tools are registered
v2/src/mcp/tests/mcp-integration.test.ts:503:      const tools = (server as any).toolRegistry.listTools();
v2/src/mcp/tests/mcp-integration.test.ts:504:      const orchestratorTools = tools.filter((t: any) => t.name.startsWith('orchestrator/'));
v2/src/mcp/tools.ts:2: * Enhanced Tool registry for MCP with capability negotiation and discovery
v2/src/mcp/tools.ts:5:import type { MCPTool, MCPCapabilities, MCPProtocolVersion } from '../utils/types.js';
v2/src/mcp/tools.ts:7:import { MCPError } from '../utils/errors.js';
v2/src/mcp/tools.ts:17:  supportedProtocolVersions: MCPProtocolVersion[];
v2/src/mcp/tools.ts:37:  protocolVersion?: MCPProtocolVersion;
v2/src/mcp/tools.ts:46:  private tools = new Map<string, MCPTool>();
v2/src/mcp/tools.ts:57:   * Registers a new tool with enhanced capability information
v2/src/mcp/tools.ts:59:  register(tool: MCPTool, capability?: ToolCapability): void {
v2/src/mcp/tools.ts:60:    if (this.tools.has(tool.name)) {
v2/src/mcp/tools.ts:61:      throw new MCPError(`Tool already registered: ${tool.name}`);
v2/src/mcp/tools.ts:64:    // Validate tool schema
v2/src/mcp/tools.ts:65:    this.validateTool(tool);
v2/src/mcp/tools.ts:67:    // Register tool
v2/src/mcp/tools.ts:68:    this.tools.set(tool.name, tool);
v2/src/mcp/tools.ts:72:      this.registerCapability(tool.name, capability);
v2/src/mcp/tools.ts:76:        name: tool.name,
v2/src/mcp/tools.ts:78:        description: tool.description,
v2/src/mcp/tools.ts:79:        category: this.extractCategory(tool.name),
v2/src/mcp/tools.ts:80:        tags: this.extractTags(tool),
v2/src/mcp/tools.ts:83:      this.registerCapability(tool.name, defaultCapability);
v2/src/mcp/tools.ts:87:    this.metrics.set(tool.name, {
v2/src/mcp/tools.ts:88:      name: tool.name,
v2/src/mcp/tools.ts:96:    this.logger.debug('Tool registered', { name: tool.name });
v2/src/mcp/tools.ts:97:    this.emit('toolRegistered', { name: tool.name, capability });
v2/src/mcp/tools.ts:101:   * Unregisters a tool
v2/src/mcp/tools.ts:103:  unregister(name: string): void {
v2/src/mcp/tools.ts:104:    if (!this.tools.has(name)) {
v2/src/mcp/tools.ts:105:      throw new MCPError(`Tool not found: ${name}`);
v2/src/mcp/tools.ts:108:    this.tools.delete(name);
v2/src/mcp/tools.ts:109:    this.logger.debug('Tool unregistered', { name });
v2/src/mcp/tools.ts:113:   * Gets a tool by name
v2/src/mcp/tools.ts:115:  getTool(name: string): MCPTool | undefined {
v2/src/mcp/tools.ts:116:    return this.tools.get(name);
v2/src/mcp/tools.ts:120:   * Lists all registered tools
v2/src/mcp/tools.ts:123:    return Array.from(this.tools.values()).map((tool) => ({
v2/src/mcp/tools.ts:124:      name: tool.name,
v2/src/mcp/tools.ts:125:      description: tool.description,
v2/src/mcp/tools.ts:130:   * Gets the number of registered tools
v2/src/mcp/tools.ts:133:    return this.tools.size;
v2/src/mcp/tools.ts:137:   * Executes a tool with metrics tracking
v2/src/mcp/tools.ts:140:    const tool = this.tools.get(name);
v2/src/mcp/tools.ts:141:    if (!tool) {
v2/src/mcp/tools.ts:142:      throw new MCPError(`Tool not found: ${name}`);
v2/src/mcp/tools.ts:148:    this.logger.debug('Executing tool', { name, input });
v2/src/mcp/tools.ts:152:      this.validateInput(tool, input);
v2/src/mcp/tools.ts:154:      // Check tool capabilities and permissions
v2/src/mcp/tools.ts:157:      // Execute tool handler
v2/src/mcp/tools.ts:158:      const result = await tool.handler(input, context);
v2/src/mcp/tools.ts:174:      this.emit('toolExecuted', { name, success: true, executionTime: Date.now() - startTime });
v2/src/mcp/tools.ts:193:      this.emit('toolExecuted', {
v2/src/mcp/tools.ts:204:   * Validates tool definition
v2/src/mcp/tools.ts:206:  private validateTool(tool: MCPTool): void {
v2/src/mcp/tools.ts:207:    if (!tool.name || typeof tool.name !== 'string') {
v2/src/mcp/tools.ts:208:      throw new MCPError('Tool name must be a non-empty string');
v2/src/mcp/tools.ts:211:    if (!tool.description || typeof tool.description !== 'string') {
v2/src/mcp/tools.ts:212:      throw new MCPError('Tool description must be a non-empty string');
v2/src/mcp/tools.ts:215:    if (typeof tool.handler !== 'function') {
v2/src/mcp/tools.ts:216:      throw new MCPError('Tool handler must be a function');
v2/src/mcp/tools.ts:219:    if (!tool.inputSchema || typeof tool.inputSchema !== 'object') {
v2/src/mcp/tools.ts:220:      throw new MCPError('Tool inputSchema must be an object');
v2/src/mcp/tools.ts:223:    // Validate tool name format (namespace/name)
v2/src/mcp/tools.ts:224:    if (!tool.name.includes('/')) {
v2/src/mcp/tools.ts:225:      throw new MCPError('Tool name must be in format: namespace/name');
v2/src/mcp/tools.ts:230:   * Validates input against tool schema
v2/src/mcp/tools.ts:232:  private validateInput(tool: MCPTool, input: unknown): void {
v2/src/mcp/tools.ts:234:    const schema = tool.inputSchema as any;
v2/src/mcp/tools.ts:238:        throw new MCPError('Input must be an object');
v2/src/mcp/tools.ts:247:            throw new MCPError(`Missing required property: ${prop}`);
v2/src/mcp/tools.ts:259:            throw new MCPError(`Invalid type for property ${prop}: expected ${expectedType}`);
v2/src/mcp/tools.ts:289:   * Register tool capability information
v2/src/mcp/tools.ts:291:  private registerCapability(toolName: string, capability: ToolCapability): void {
v2/src/mcp/tools.ts:292:    this.capabilities.set(toolName, capability);
v2/src/mcp/tools.ts:298:   * Extract category from tool name
v2/src/mcp/tools.ts:300:  private extractCategory(toolName: string): string {
v2/src/mcp/tools.ts:301:    const parts = toolName.split('/');
v2/src/mcp/tools.ts:306:   * Extract tags from tool definition
v2/src/mcp/tools.ts:308:  private extractTags(tool: MCPTool): string[] {
v2/src/mcp/tools.ts:312:    if (tool.description.toLowerCase().includes('file')) tags.push('filesystem');
v2/src/mcp/tools.ts:313:    if (tool.description.toLowerCase().includes('search')) tags.push('search');
v2/src/mcp/tools.ts:314:    if (tool.description.toLowerCase().includes('memory')) tags.push('memory');
v2/src/mcp/tools.ts:315:    if (tool.description.toLowerCase().includes('swarm')) tags.push('swarm');
v2/src/mcp/tools.ts:316:    if (tool.description.toLowerCase().includes('task')) tags.push('orchestration');
v2/src/mcp/tools.ts:322:   * Check tool capabilities and permissions
v2/src/mcp/tools.ts:324:  private async checkToolCapabilities(toolName: string, context?: any): Promise<void> {
v2/src/mcp/tools.ts:325:    const capability = this.capabilities.get(toolName);
v2/src/mcp/tools.ts:330:    // Check if tool is deprecated
v2/src/mcp/tools.ts:332:      this.logger.warn('Using deprecated tool', {
v2/src/mcp/tools.ts:333:        name: toolName,
v2/src/mcp/tools.ts:345:        throw new MCPError(
v2/src/mcp/tools.ts:346:          `Insufficient permissions for tool ${toolName}. Required: ${capability.requiredPermissions.join(', ')}`,
v2/src/mcp/tools.ts:358:        throw new MCPError(
v2/src/mcp/tools.ts:359:          `Tool ${toolName} is not compatible with protocol version ${context.protocolVersion.major}.${context.protocolVersion.minor}.${context.protocolVersion.patch}`,
v2/src/mcp/tools.ts:369:    client: MCPProtocolVersion,
v2/src/mcp/tools.ts:370:    supported: MCPProtocolVersion,
v2/src/mcp/tools.ts:384:   * Discover tools based on query criteria
v2/src/mcp/tools.ts:388:  ): Array<{ tool: MCPTool; capability: ToolCapability }> {
v2/src/mcp/tools.ts:389:    const results: Array<{ tool: MCPTool; capability: ToolCapability }> = [];
v2/src/mcp/tools.ts:391:    for (const [name, tool] of this.tools) {
v2/src/mcp/tools.ts:418:      // Filter deprecated tools
v2/src/mcp/tools.ts:431:      results.push({ tool, capability });
v2/src/mcp/tools.ts:438:   * Get tool capability information
v2/src/mcp/tools.ts:445:   * Get tool metrics
v2/src/mcp/tools.ts:451:        throw new MCPError(`Metrics not found for tool: ${name}`);
v2/src/mcp/tools.ts:474:   * Reset metrics for a tool or all tools
v2/src/mcp/tools.ts:476:  resetMetrics(toolName?: string): void {
v2/src/mcp/tools.ts:477:    if (toolName) {
v2/src/mcp/tools.ts:478:      const metrics = this.metrics.get(toolName);
v2/src/mcp/tools.ts:502:    this.emit('metricsReset', { toolName });
v2/src/mcp/tools.ts:510:    toolsByCategory: Record<string, number>;
v2/src/mcp/tools.ts:511:    toolsByTag: Record<string, number>;
v2/src/mcp/tools.ts:517:      totalTools: this.tools.size,
v2/src/mcp/tools.ts:518:      toolsByCategory: {} as Record<string, number>,
v2/src/mcp/tools.ts:519:      toolsByTag: {} as Record<string, number>,
v2/src/mcp/tools.ts:527:      stats.toolsByCategory[capability.category] =
v2/src/mcp/tools.ts:528:        (stats.toolsByCategory[capability.category] || 0) + 1;
v2/src/mcp/tools.ts:531:        stats.toolsByTag[tag] = (stats.toolsByTag[tag] || 0) + 1;
v2/src/mcp/protocol/version-negotiation.ts:2: * MCP 2025-11 Version Negotiation Protocol
v2/src/mcp/protocol/version-negotiation.ts:5: * per MCP 2025-11 specification
v2/src/mcp/protocol/version-negotiation.ts:11: * MCP version in YYYY-MM format
v2/src/mcp/protocol/version-negotiation.ts:13:export type MCPVersion = '2025-11' | '2024-11' | '2024-10';
v2/src/mcp/protocol/version-negotiation.ts:16: * MCP capability flags
v2/src/mcp/protocol/version-negotiation.ts:18:export type MCPCapability =
v2/src/mcp/protocol/version-negotiation.ts:27: * MCP handshake request/response
v2/src/mcp/protocol/version-negotiation.ts:29:export interface MCPHandshake {
v2/src/mcp/protocol/version-negotiation.ts:30:  mcp_version: MCPVersion;
v2/src/mcp/protocol/version-negotiation.ts:34:  capabilities: MCPCapability[];
v2/src/mcp/protocol/version-negotiation.ts:47:  agreed_version: MCPVersion;
v2/src/mcp/protocol/version-negotiation.ts:48:  agreed_capabilities: MCPCapability[];
v2/src/mcp/protocol/version-negotiation.ts:66: * MCP Version Negotiator
v2/src/mcp/protocol/version-negotiation.ts:72:  private supportedVersions: MCPVersion[] = ['2025-11', '2024-11'];
v2/src/mcp/protocol/version-negotiation.ts:75:  private serverVersion: MCPVersion = '2025-11';
v2/src/mcp/protocol/version-negotiation.ts:78:  private serverCapabilities: MCPCapability[] = [
v2/src/mcp/protocol/version-negotiation.ts:90:  async negotiate(clientHandshake: MCPHandshake): Promise<NegotiationResult> {
v2/src/mcp/protocol/version-negotiation.ts:138:  private isValidHandshake(handshake: MCPHandshake): boolean {
v2/src/mcp/protocol/version-negotiation.ts:149:  private checkVersionCompatibility(clientVersion: MCPVersion): {
v2/src/mcp/protocol/version-negotiation.ts:151:    version: MCPVersion;
v2/src/mcp/protocol/version-negotiation.ts:195:    clientCapabilities: MCPCapability[]
v2/src/mcp/protocol/version-negotiation.ts:196:  ): MCPCapability[] {
v2/src/mcp/protocol/version-negotiation.ts:206:  private parseVersion(version: MCPVersion): Date {
v2/src/mcp/protocol/version-negotiation.ts:225:    metadata?: MCPHandshake['metadata']
v2/src/mcp/protocol/version-negotiation.ts:226:  ): MCPHandshake {
v2/src/mcp/protocol/version-negotiation.ts:239:  getServerVersion(): MCPVersion {
v2/src/mcp/protocol/version-negotiation.ts:246:  getServerCapabilities(): MCPCapability[] {
v2/src/mcp/protocol/version-negotiation.ts:253:  hasCapability(capability: MCPCapability): boolean {
v2/src/mcp/protocol/version-negotiation.ts:260:  addCapability(capability: MCPCapability): void {
v2/src/mcp/protocol/version-negotiation.ts:270:  removeCapability(capability: MCPCapability): void {
v2/src/mcp/protocol/version-negotiation.ts:281: * Converts legacy requests to MCP 2025-11 format
v2/src/mcp/protocol/version-negotiation.ts:295:   * Convert legacy request to MCP 2025-11 format
v2/src/mcp/protocol/version-negotiation.ts:297:  convertToModern(legacyRequest: any): MCPHandshake {
v2/src/mcp/protocol/version-negotiation.ts:298:    this.logger.info('Converting legacy request to MCP 2025-11 format');
v2/src/mcp/claude-flow-tools.ts:2: * Claude-Flow specific MCP tools
v2/src/mcp/claude-flow-tools.ts:5:import type { MCPTool, MCPContext, AgentProfile, Task, MemoryEntry } from '../utils/types.js';
v2/src/mcp/claude-flow-tools.ts:10:export interface ClaudeFlowToolContext extends MCPContext {
v2/src/mcp/claude-flow-tools.ts:15: * Enhance tool schema with dynamic agent types
v2/src/mcp/claude-flow-tools.ts:17:async function enhanceToolWithAgentTypes(tool: MCPTool): Promise<MCPTool> {
v2/src/mcp/claude-flow-tools.ts:20:  // Clone the tool to avoid modifying the original
v2/src/mcp/claude-flow-tools.ts:21:  const enhancedTool = JSON.parse(JSON.stringify(tool));
v2/src/mcp/claude-flow-tools.ts:46: * Create all Claude-Flow specific MCP tools
v2/src/mcp/claude-flow-tools.ts:48:export async function createClaudeFlowTools(logger: ILogger): Promise<MCPTool[]> {
v2/src/mcp/claude-flow-tools.ts:49:  const tools = [
v2/src/mcp/claude-flow-tools.ts:50:    // Agent management tools
v2/src/mcp/claude-flow-tools.ts:57:    // Query control tools (NEW: Phase 4 - Real-time control)
v2/src/mcp/claude-flow-tools.ts:61:    // Task management tools
v2/src/mcp/claude-flow-tools.ts:68:    // Memory management tools
v2/src/mcp/claude-flow-tools.ts:75:    // System monitoring tools
v2/src/mcp/claude-flow-tools.ts:80:    // Configuration tools
v2/src/mcp/claude-flow-tools.ts:85:    // Workflow tools
v2/src/mcp/claude-flow-tools.ts:90:    // Terminal management tools
v2/src/mcp/claude-flow-tools.ts:96:  // Enhance tools with dynamic agent types
v2/src/mcp/claude-flow-tools.ts:98:    tools.map(tool => enhanceToolWithAgentTypes(tool))
v2/src/mcp/claude-flow-tools.ts:104:function createSpawnAgentTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:182:function createListAgentsTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:229:function createTerminateAgentTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:274:function createGetAgentInfoTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:309:function createCreateTaskTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:389:function createListTasksTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:445:function createGetTaskStatusTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:480:function createCancelTaskTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:517:function createAssignTaskTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:554:function createQueryMemoryTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:636:function createStoreMemoryTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:706:function createDeleteMemoryTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:738:function createExportMemoryTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:794:function createImportMemoryTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:841:function createGetSystemStatusTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:866:function createGetMetricsTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:899:function createHealthCheckTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:930:function createGetConfigTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:962:function createUpdateConfigTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:1007:function createValidateConfigTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:1038:function createExecuteWorkflowTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:1084:function createCreateWorkflowTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:1149:function createListWorkflowsTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:1180:function createExecuteCommandTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:1240:function createListTerminalsTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:1272:function createCreateTerminalTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:1318:function createSpawnParallelAgentsTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:1411:function createQueryControlTool(logger: ILogger): MCPTool {
v2/src/mcp/claude-flow-tools.ts:1508:function createListQueriesTool(logger: ILogger): MCPTool {
v2/src/mcp/server-mcp-2025.ts:2: * MCP 2025-11 Enhanced Server
v2/src/mcp/server-mcp-2025.ts:4: * Integrates all MCP 2025-11 features with full backward compatibility:
v2/src/mcp/server-mcp-2025.ts:14:import { VersionNegotiator, BackwardCompatibilityAdapter, type MCPHandshake, type MCPVersion, type MCPCapability } from './protocol/version-negotiation.js';
v2/src/mcp/server-mcp-2025.ts:15:import { MCPAsyncJobManager, type MCPToolRequest, type MCPJobHandle, type MCPJobResult } from './async/job-manager-mcp25.js';
v2/src/mcp/server-mcp-2025.ts:16:import { MCPRegistryClient, type RegistryConfig } from './registry/mcp-registry-client-2025.js';
v2/src/mcp/server-mcp-2025.ts:18:import { ProgressiveToolRegistry } from './tool-registry-progressive.js';
v2/src/mcp/server-mcp-2025.ts:21: * MCP 2025-11 server configuration
v2/src/mcp/server-mcp-2025.ts:23:export interface MCP2025ServerConfig {
v2/src/mcp/server-mcp-2025.ts:28:  enableMCP2025: boolean; // Feature flag for gradual rollout
v2/src/mcp/server-mcp-2025.ts:49:  toolsDirectory?: string;
v2/src/mcp/server-mcp-2025.ts:56: * MCP 2025-11 Enhanced Server
v2/src/mcp/server-mcp-2025.ts:58:export class MCP2025Server {
v2/src/mcp/server-mcp-2025.ts:61:  private jobManager?: MCPAsyncJobManager;
v2/src/mcp/server-mcp-2025.ts:62:  private registryClient?: MCPRegistryClient;
v2/src/mcp/server-mcp-2025.ts:64:  private toolRegistry: ProgressiveToolRegistry;
v2/src/mcp/server-mcp-2025.ts:69:    version: MCPVersion;
v2/src/mcp/server-mcp-2025.ts:70:    capabilities: MCPCapability[];
v2/src/mcp/server-mcp-2025.ts:82:    private config: MCP2025ServerConfig,
v2/src/mcp/server-mcp-2025.ts:93:    // Initialize tool registry (progressive)
v2/src/mcp/server-mcp-2025.ts:94:    this.toolRegistry = new ProgressiveToolRegistry({
v2/src/mcp/server-mcp-2025.ts:99:      toolsDirectory: config.toolsDirectory,
v2/src/mcp/server-mcp-2025.ts:102:    this.logger.info('MCP 2025-11 server created', {
v2/src/mcp/server-mcp-2025.ts:104:      mcp2025Enabled: config.enableMCP2025,
v2/src/mcp/server-mcp-2025.ts:113:    this.logger.info('Initializing MCP 2025-11 server');
v2/src/mcp/server-mcp-2025.ts:115:    // Initialize tool registry
v2/src/mcp/server-mcp-2025.ts:116:    await this.toolRegistry.initialize();
v2/src/mcp/server-mcp-2025.ts:126:      this.jobManager = new MCPAsyncJobManager(
v2/src/mcp/server-mcp-2025.ts:140:      this.registryClient = new MCPRegistryClient(
v2/src/mcp/server-mcp-2025.ts:143:        () => this.toolRegistry.getToolNames(),
v2/src/mcp/server-mcp-2025.ts:148:      // Register with MCP Registry
v2/src/mcp/server-mcp-2025.ts:150:        await this.registryClient.register();
v2/src/mcp/server-mcp-2025.ts:152:        this.logger.error('Failed to register with MCP Registry', { error });
v2/src/mcp/server-mcp-2025.ts:157:    this.logger.info('MCP 2025-11 server initialized successfully');
v2/src/mcp/server-mcp-2025.ts:163:  async handleHandshake(clientHandshake: any, sessionId: string): Promise<MCPHandshake> {
v2/src/mcp/server-mcp-2025.ts:167:    let handshake: MCPHandshake;
v2/src/mcp/server-mcp-2025.ts:213:        description: 'Enterprise AI orchestration with MCP 2025-11 support',
v2/src/mcp/server-mcp-2025.ts:232:   * Handle tool call request (with async support)
v2/src/mcp/server-mcp-2025.ts:235:    request: MCPToolRequest | any,
v2/src/mcp/server-mcp-2025.ts:237:  ): Promise<MCPJobHandle | MCPJobResult | any> {
v2/src/mcp/server-mcp-2025.ts:250:    // MCP 2025-11 format
v2/src/mcp/server-mcp-2025.ts:251:    const mcpRequest = request as MCPToolRequest;
v2/src/mcp/server-mcp-2025.ts:254:    if (!mcpRequest.tool_id) {
v2/src/mcp/server-mcp-2025.ts:255:      throw new Error('Missing tool_id in request');
v2/src/mcp/server-mcp-2025.ts:258:    // Get tool
v2/src/mcp/server-mcp-2025.ts:259:    const tool = await this.toolRegistry.getTool(mcpRequest.tool_id);
v2/src/mcp/server-mcp-2025.ts:260:    if (!tool) {
v2/src/mcp/server-mcp-2025.ts:261:      throw new Error(`Tool not found: ${mcpRequest.tool_id}`);
v2/src/mcp/server-mcp-2025.ts:267:        upgradeToolSchema(tool.inputSchema),
v2/src/mcp/server-mcp-2025.ts:285:        tool_id: mcpRequest.tool_id,
v2/src/mcp/server-mcp-2025.ts:292:          // Execute tool with progress tracking
v2/src/mcp/server-mcp-2025.ts:293:          return await tool.handler(args, {
v2/src/mcp/server-mcp-2025.ts:301:      this.logger.info('Executing tool synchronously', {
v2/src/mcp/server-mcp-2025.ts:302:        tool_id: mcpRequest.tool_id,
v2/src/mcp/server-mcp-2025.ts:307:      const result = await tool.handler(mcpRequest.arguments, {
v2/src/mcp/server-mcp-2025.ts:313:      if (this.config.validation.enabled && tool.metadata?.outputSchema) {
v2/src/mcp/server-mcp-2025.ts:315:          tool.metadata.outputSchema,
v2/src/mcp/server-mcp-2025.ts:321:            tool_id: mcpRequest.tool_id,
v2/src/mcp/server-mcp-2025.ts:327:      // Return in MCP 2025-11 format
v2/src/mcp/server-mcp-2025.ts:335:      } as MCPJobResult;
v2/src/mcp/server-mcp-2025.ts:340:   * Handle legacy tool call
v2/src/mcp/server-mcp-2025.ts:343:    this.logger.info('Handling legacy tool call', {
v2/src/mcp/server-mcp-2025.ts:344:      toolName: request.name || request.method,
v2/src/mcp/server-mcp-2025.ts:349:    const toolId = request.name || request.method;
v2/src/mcp/server-mcp-2025.ts:352:    const tool = await this.toolRegistry.getTool(toolId);
v2/src/mcp/server-mcp-2025.ts:353:    if (!tool) {
v2/src/mcp/server-mcp-2025.ts:354:      throw new Error(`Tool not found: ${toolId}`);
v2/src/mcp/server-mcp-2025.ts:357:    const result = await tool.handler(args, {
v2/src/mcp/server-mcp-2025.ts:372:  async pollJob(job_id: string): Promise<MCPJobHandle> {
v2/src/mcp/server-mcp-2025.ts:383:  async resumeJob(job_id: string): Promise<MCPJobResult> {
v2/src/mcp/server-mcp-2025.ts:449:      tools: this.toolRegistry.getMetrics(),
v2/src/mcp/server-mcp-2025.ts:486:    this.logger.info('Cleaning up MCP 2025-11 server');
v2/src/mcp/server-mcp-2025.ts:493:    // Unregister from registry
v2/src/mcp/server-mcp-2025.ts:495:      await this.registryClient.unregister();
v2/src/mcp/server-mcp-2025.ts:500:    await this.toolRegistry.cleanup();
v2/src/cli/utils.js:284:// Claude Flow MCP integration helpers
v2/src/cli/utils.js:285:export async function callRuvSwarmMCP(tool, params = {}) {
v2/src/cli/utils.js:287:    // First try real ruv-swarm MCP server
v2/src/cli/utils.js:291:    // Create JSON-RPC messages for ruv-swarm MCP
v2/src/cli/utils.js:298:        capabilities: { tools: {}, resources: {} },
v2/src/cli/utils.js:303:    const toolMessage = {
v2/src/cli/utils.js:306:      method: 'tools/call',
v2/src/cli/utils.js:308:        name: tool,
v2/src/cli/utils.js:314:    const messages = JSON.stringify(initMessage) + '\n' + JSON.stringify(toolMessage);
v2/src/cli/utils.js:317:    // Create a script that feeds the file to the REAL ruv-swarm MCP server
v2/src/cli/utils.js:341:          const toolResult = JSON.parse(response.result.content[0].text);
v2/src/cli/utils.js:342:          return toolResult;
v2/src/cli/utils.js:349:    // If MCP fails, use direct ruv-swarm CLI commands for neural training
v2/src/cli/utils.js:350:    if (tool === 'neural_train') {
v2/src/cli/utils.js:354:    // Always return realistic fallback data for other tools
v2/src/cli/utils.js:372:    if (tool === 'neural_train') {
v2/src/cli/utils.js:602:  return await callRuvSwarmMCP('neural_train', {
v2/src/cli/utils.js:611:  return await callRuvSwarmMCP('neural_patterns', {
v2/src/cli/utils.js:621:  return await callRuvSwarmMCP('swarm_status', {
v2/src/cli/utils.js:627:  return await callRuvSwarmMCP('agent_spawn', {
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:2:// optimized-claude-flow-commands.js - Batchtools-optimized Claude-Flow specific slash commands
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:4:// Create batchtools-optimized Claude-Flow specific commands
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:6:  // Help command with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:9:description: Show Claude-Flow commands and usage with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:12:# Claude-Flow Commands (Batchtools Optimized)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:18:**üöÄ Batchtools Enhancement**: All commands now include parallel processing capabilities, batch operations, and performance optimizations for maximum efficiency.
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:83:### üåç MCP Integration (Parallel)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:84:- \`./claude-flow mcp status\` - MCP server status
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:85:- \`./claude-flow mcp parallel-status\` - Check all MCP servers concurrently
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:86:- \`./claude-flow mcp tools\` - List available tools
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:88:- \`./claude-flow mcp logs\` - View MCP logs
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:96:### üöÄ Batchtools Commands (New)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:97:- \`./claude-flow batchtools status\` - Check batchtools system status
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:98:- \`./claude-flow batchtools monitor\` - Real-time performance monitoring
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:99:- \`./claude-flow batchtools optimize\` - System optimization recommendations
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:100:- \`./claude-flow batchtools benchmark\` - Performance benchmarking
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:101:- \`./claude-flow batchtools config\` - Batchtools configuration management
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:177:### Batchtools Performance Improvements
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:186:### Batchtools Configuration
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:189:  "batchtools": {
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:208:- Batchtools Guide: https://github.com/ruvnet/claude-code-flow/docs/batchtools.md
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:221:./claude-flow batchtools monitor --resources --detailed
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:230:./claude-flow batchtools optimize --auto-tune
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:233:./claude-flow batchtools benchmark --detailed --export
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:243:  console.log('  ‚úì Created optimized slash command: /claude-flow-help (Batchtools enhanced)');
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:245:  // Memory command with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:248:description: Interact with Claude-Flow memory system using batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:251:# üß† Claude-Flow Memory System (Batchtools Optimized)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:255:**üöÄ Batchtools Enhancement**: Enhanced with parallel processing capabilities, batch operations, and concurrent optimization for improved performance.
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:388:- **batchtools** - Batchtools operation data and optimization metrics
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:390:## üéØ Best Practices (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:417:## Examples (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:475:## üîß Configuration (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:477:### Memory Configuration with Batchtools
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:485:    "batchtools": {
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:512:./claude-flow memory analyze --batchtools --optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:530:For comprehensive memory system documentation and optimization guides, see: https://github.com/ruvnet/claude-code-flow/docs/memory-batchtools.md
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:534:  console.log('  ‚úì Created optimized slash command: /claude-flow-memory (Batchtools enhanced)');
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:536:  // Swarm command with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:539:description: Coordinate multi-agent swarms for complex tasks with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:542:# üêù Claude-Flow Swarm Coordination (Batchtools Optimized)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:546:**üöÄ Batchtools Enhancement**: Enhanced with parallel processing capabilities, batch operations, and concurrent optimization for maximum swarm efficiency.
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:581:## ‚öôÔ∏è Common Options (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:596:- \`--batch-optimize\` - Enable batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:600:## üåü Examples (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:722:### Batchtools Memory Operations
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:766:## üîß Advanced Configuration (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:783:### Batchtools Configuration
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:787:    "batchtools": {
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:844:./claude-flow swarm analyze --batchtools --optimization --detailed
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:864:### Batchtools Performance Improvements
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:871:For detailed documentation and optimization guides, see: https://github.com/ruvnet/claude-code-flow/docs/swarm-batchtools.md
v2/src/cli/simple-commands/init/claude-commands/optimized-claude-flow-commands.js:875:  console.log('  ‚úì Created optimized slash command: /claude-flow-swarm (Batchtools enhanced)');
v2/src/mcp/registry/mcp-registry-client-2025.ts:2: * MCP 2025-11 Registry Client
v2/src/mcp/registry/mcp-registry-client-2025.ts:5: * per MCP 2025-11 specification
v2/src/mcp/registry/mcp-registry-client-2025.ts:9:import type { MCPVersion, MCPCapability } from '../protocol/version-negotiation.js';
v2/src/mcp/registry/mcp-registry-client-2025.ts:12: * MCP Registry entry (2025-11 format)
v2/src/mcp/registry/mcp-registry-client-2025.ts:14:export interface MCPRegistryEntry {
v2/src/mcp/registry/mcp-registry-client-2025.ts:16:  version: MCPVersion;
v2/src/mcp/registry/mcp-registry-client-2025.ts:18:  tools: string[];
v2/src/mcp/registry/mcp-registry-client-2025.ts:20:  capabilities: MCPCapability[];
v2/src/mcp/registry/mcp-registry-client-2025.ts:42:  capabilities?: MCPCapability[];
v2/src/mcp/registry/mcp-registry-client-2025.ts:56:  metadata: MCPRegistryEntry['metadata'];
v2/src/mcp/registry/mcp-registry-client-2025.ts:61: * MCP 2025-11 Registry Client
v2/src/mcp/registry/mcp-registry-client-2025.ts:63:export class MCPRegistryClient {
v2/src/mcp/registry/mcp-registry-client-2025.ts:71:    private getCapabilities: () => MCPCapability[],
v2/src/mcp/registry/mcp-registry-client-2025.ts:78:   * Register server with MCP Registry
v2/src/mcp/registry/mcp-registry-client-2025.ts:80:  async register(): Promise<void> {
v2/src/mcp/registry/mcp-registry-client-2025.ts:89:      this.logger.info('Registering server with MCP Registry', {
v2/src/mcp/registry/mcp-registry-client-2025.ts:112:      this.logger.info('Server registered successfully', {
v2/src/mcp/registry/mcp-registry-client-2025.ts:119:      this.logger.error('Failed to register with MCP Registry', {
v2/src/mcp/registry/mcp-registry-client-2025.ts:129:  async updateMetadata(updates: Partial<MCPRegistryEntry>): Promise<void> {
v2/src/mcp/registry/mcp-registry-client-2025.ts:210:  async searchServers(query: RegistrySearchQuery): Promise<MCPRegistryEntry[]> {
v2/src/mcp/registry/mcp-registry-client-2025.ts:244:   * Unregister from registry
v2/src/mcp/registry/mcp-registry-client-2025.ts:246:  async unregister(): Promise<void> {
v2/src/mcp/registry/mcp-registry-client-2025.ts:255:      this.logger.info('Unregistering from MCP Registry', {
v2/src/mcp/registry/mcp-registry-client-2025.ts:276:        this.logger.info('Server unregistered successfully');
v2/src/mcp/registry/mcp-registry-client-2025.ts:279:      this.logger.error('Failed to unregister', {
v2/src/mcp/registry/mcp-registry-client-2025.ts:288:  private async buildRegistryEntry(): Promise<MCPRegistryEntry> {
v2/src/mcp/registry/mcp-registry-client-2025.ts:289:    const tools = await this.getTools();
v2/src/mcp/registry/mcp-registry-client-2025.ts:297:      tools,
v2/src/cli/simple-commands/automation-executor.js:362:      if (event.type === 'tool_use' && event.name) {
v2/src/cli/simple-commands/automation-executor.js:363:        output.tool = event.name;
v2/src/cli/simple-commands/automation-executor.js:372:        case 'tool_use':
v2/src/cli/simple-commands/automation-executor.js:373:          console.log(`    [${agent.name}] üîß Using tool: ${event.name}`);
v2/src/cli/simple-commands/automation-executor.js:398:      case 'tool_use':
v2/src/cli/simple-commands/automation-executor.js:399:        return `Using ${event.name} tool`;
v2/src/cli/simple-commands/automation-executor.js:418:      'tool_use': 'üîß',
v2/src/cli/simple-commands/automation-executor.js:581:   For each sub-agent, use the Task tool to spawn them with detailed prompts:
v2/src/cli/simple-commands/automation-executor.js:586:   Execute multiple agents simultaneously using the Task tool in a single response:
v2/src/cli/simple-commands/automation-executor.js:624:üöÄ BEGIN: Start by deploying all sub-agents with detailed prompts using the Task tool for concurrent execution. Each agent should receive comprehensive instructions for their specific MLE-STAR role.`;
v2/src/cli/simple-mcp.ts:2: * Simple MCP command implementation for Node.js compatibility
v2/src/cli/simple-mcp.ts:16:// Check if MCP server is running
v2/src/cli/simple-mcp.ts:17:async function checkMCPStatus(host: string, port: number): Promise<boolean> {
v2/src/cli/simple-mcp.ts:44:export function createMCPCommand() {
v2/src/cli/simple-mcp.ts:45:  const mcpCmd = new Command('mcp').description('Manage MCP server and tools').action(() => {
v2/src/cli/simple-mcp.ts:46:    printSuccess('MCP Server Management');
v2/src/cli/simple-mcp.ts:47:    console.log('\nüåê Available MCP commands:');
v2/src/cli/simple-mcp.ts:48:    console.log('  ‚Ä¢ mcp start - Start the MCP server');
v2/src/cli/simple-mcp.ts:49:    console.log('  ‚Ä¢ mcp status - Show MCP server status');
v2/src/cli/simple-mcp.ts:50:    console.log('  ‚Ä¢ mcp tools - List available MCP tools');
v2/src/cli/simple-mcp.ts:51:    console.log('  ‚Ä¢ mcp stop - Stop the MCP server');
v2/src/cli/simple-mcp.ts:57:    .description('Start the MCP server')
v2/src/cli/simple-mcp.ts:58:    .option('--port <port>', 'Port for MCP server', '3000')
v2/src/cli/simple-mcp.ts:59:    .option('--host <host>', 'Host for MCP server', 'localhost')
v2/src/cli/simple-mcp.ts:62:      // This is handled by the actual MCP implementation
v2/src/cli/simple-mcp.ts:63:      console.log('Starting MCP server...');
v2/src/cli/simple-mcp.ts:64:      console.log('(This command is handled by the MCP module)');
v2/src/cli/simple-mcp.ts:69:    .description('Show MCP server status')
v2/src/cli/simple-mcp.ts:73:      printSuccess('MCP Server Status:');
v2/src/cli/simple-mcp.ts:79:      const isRunning = await checkMCPStatus(host, port);
v2/src/cli/simple-mcp.ts:87:        console.log('\nüí° Use "mcp tools" to see available tools');
v2/src/cli/simple-mcp.ts:97:    .command('tools')
v2/src/cli/simple-mcp.ts:98:    .description('List available MCP tools')
v2/src/cli/simple-mcp.ts:100:      printSuccess('Available MCP Tools:');
v2/src/cli/simple-mcp.ts:105:      console.log('  ‚Ä¢ tools/list - List all available tools');
v2/src/cli/simple-mcp.ts:106:      console.log('  ‚Ä¢ tools/schema - Get schema for a specific tool');
v2/src/cli/simple-mcp.ts:107:      console.log('\nüí° Note: Additional tools available when orchestrator is running');
v2/src/cli/simple-mcp.ts:112:    .description('Stop the MCP server')
v2/src/cli/simple-mcp.ts:114:      printSuccess('Stopping MCP server...');
v2/src/cli/simple-mcp.ts:115:      console.log('üõë MCP server stop requested');
v2/src/mcp/performance-monitor.ts:2: * MCP Performance Monitoring and Optimization
v2/src/mcp/performance-monitor.ts:8:import type { MCPSession, MCPRequest, MCPResponse, MCPMetrics } from '../utils/types.js';
v2/src/mcp/performance-monitor.ts:86: * MCP Performance Monitor
v2/src/mcp/performance-monitor.ts:89:export class MCPPerformanceMonitor extends EventEmitter {
v2/src/mcp/performance-monitor.ts:119:  recordRequestStart(request: MCPRequest, session: MCPSession): string {
v2/src/mcp/performance-monitor.ts:143:  recordRequestEnd(requestId: string, response?: MCPResponse, error?: Error): void {
v2/src/mcp/performance-monitor.ts:656:  private calculateRequestSize(request: MCPRequest): number {
v2/src/mcp/performance-monitor.ts:660:  private calculateResponseSize(response: MCPResponse): number {
v2/src/cli/commands/session.ts:14:export const sessionCommand = new Command()
v2/src/mcp/sdk-integration.ts:2: * SDK Integration Layer for In-Process MCP Server
v2/src/mcp/sdk-integration.ts:5: * in-process MCP server for 10-100x performance improvement.
v2/src/mcp/sdk-integration.ts:9:import { createClaudeFlowSdkServer, ClaudeFlowToolRegistry } from './tool-registry.js';
v2/src/mcp/sdk-integration.ts:23: * Manages in-process MCP server and SDK query integration
v2/src/mcp/sdk-integration.ts:47:      logger.info('In-process MCP server disabled, using stdio fallback');
v2/src/mcp/sdk-integration.ts:51:    logger.info('Initializing in-process MCP server...');
v2/src/mcp/sdk-integration.ts:54:      // Create SDK server with all Claude-Flow tools
v2/src/mcp/sdk-integration.ts:57:      logger.info('In-process MCP server initialized successfully', {
v2/src/mcp/sdk-integration.ts:62:      logger.error('Failed to initialize in-process MCP server', { error });
v2/src/mcp/sdk-integration.ts:73:   * Create SDK query with in-process MCP server
v2/src/mcp/sdk-integration.ts:80:    // Add in-process MCP server if available
v2/src/mcp/sdk-integration.ts:87:      logger.debug('Query created with in-process MCP server', {
v2/src/mcp/sdk-integration.ts:98:   * Create SDK query for agent with in-process tools
v2/src/mcp/sdk-integration.ts:204: * Create a query with in-process MCP server
v2/src/mcp/sdk-integration.ts:226: * Get in-process MCP server config for use in SDK queries
v2/src/mcp/sdk-integration.ts:243:    throw new Error('In-process MCP server not available');
v2/src/mcp/sdk-integration.ts:253:  toolName: string,
v2/src/mcp/sdk-integration.ts:269:  logger.info('Starting performance measurement', { toolName, iterations });
v2/src/mcp/sdk-integration.ts:275:    const query = globalIntegration.query(`Execute tool: ${toolName}`, {
v2/src/mcp/sdk-integration.ts:276:      allowedTools: [toolName],
v2/src/mcp/sdk-integration.ts:300:    toolName,
v2/src/cli/index-remote.ts:32:  mcp                  Manage MCP server (status, tools, start, stop)
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:42:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:54:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:56:# Use when running from terminal or MCP tools unavailable
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:77:### Using MCP Tools (Preferred)
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:106:// Helper function to get tool descriptions
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:107:function getToolDescription(tool) {
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:108:  const toolDescriptions = {
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:112:    mcp: 'Model Context Protocol tools',
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:115:  return toolDescriptions[tool] || 'Tool access';
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:172:### Option 1: Using MCP Tools (Preferred in Claude Code)
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:194:### Option 2: Using NPX CLI (Fallback when MCP not available)
v2/src/cli/simple-commands/init/claude-commands/sparc-commands.js:230:### Using MCP Tools (Preferred)
v2/src/cli/completion.ts:9:  private commands = [
v2/src/cli/completion.ts:24:  private subcommands = {
v2/src/cli/completion.ts:113:                    COMPREPLY=($(compgen -W "${this.subcommands.agent.join(' ')}" -- "$cur"))
v2/src/cli/completion.ts:136:                    COMPREPLY=($(compgen -W "${this.subcommands.task.join(' ')}" -- "$cur"))
v2/src/cli/completion.ts:142:            COMPREPLY=($(compgen -W "${this.subcommands.memory.join(' ')}" -- "$cur"))
v2/src/cli/completion.ts:146:            COMPREPLY=($(compgen -W "${this.subcommands.config.join(' ')}" -- "$cur"))
v2/src/cli/completion.ts:161:                    COMPREPLY=($(compgen -W "${this.subcommands.session.join(' ')}" -- "$cur"))
v2/src/cli/completion.ts:182:                    COMPREPLY=($(compgen -W "${this.subcommands.workflow.join(' ')}" -- "$cur"))
v2/src/cli/completion.ts:255:    commands=(
v2/src/cli/completion.ts:286:            _arguments '1: :(${this.subcommands.agent.join(' ')})'
v2/src/cli/completion.ts:309:            _arguments '1: :(${this.subcommands.task.join(' ')})'
v2/src/cli/completion.ts:315:    _arguments '1: :(${this.subcommands.memory.join(' ')})'
v2/src/cli/completion.ts:319:    _arguments '1: :(${this.subcommands.config.join(' ')})'
v2/src/cli/completion.ts:331:            _arguments '1: :(${this.subcommands.session.join(' ')})'
v2/src/cli/completion.ts:348:            _arguments '1: :(${this.subcommands.workflow.join(' ')})'
v2/src/cli/completion.ts:434:# Agent subcommands
v2/src/cli/completion.ts:440:# Task subcommands
v2/src/cli/completion.ts:447:# Memory subcommands
v2/src/cli/completion.ts:454:# Config subcommands
v2/src/cli/completion.ts:461:# Session subcommands
v2/src/cli/completion.ts:471:# Workflow subcommands
v2/src/cli/completion.ts:479:# Completion subcommands
v2/src/cli/__tests__/simple-cli.test.js:15:  commandRegistry: new Map(),
v2/src/cli/__tests__/simple-cli.test.js:16:  registerCoreCommands: jest.fn(),
v2/src/sdk/query-control.ts:84:  registerQuery(queryId: string, agentId: string, query: Query): ControlledQuery {
v2/src/sdk/query-control.ts:98:    this.logger.info('Query registered for control', { queryId, agentId });
v2/src/sdk/query-control.ts:99:    this.emit('query:registered', { queryId, agentId });
v2/src/sdk/query-control.ts:425:   * Unregister a query
v2/src/sdk/query-control.ts:427:  unregisterQuery(queryId: string): void {
v2/src/sdk/query-control.ts:432:    this.logger.info('Query unregistered', { queryId });
v2/src/sdk/query-control.ts:433:    this.emit('query:unregistered', { queryId });
v2/src/sdk/query-control.ts:447:          this.unregisterQuery(queryId);
v2/src/mcp/mcp-server.js:3: * Claude-Flow MCP Server
v2/src/mcp/mcp-server.js:5: * Compatible with ruv-swarm MCP interface
v2/src/mcp/mcp-server.js:27:await import('./implementations/daa-tools.js').catch(() => {
v2/src/mcp/mcp-server.js:30:    require('./implementations/daa-tools');
v2/src/mcp/mcp-server.js:37:await import('./implementations/workflow-tools.js').catch(() => {
v2/src/mcp/mcp-server.js:40:    require('./implementations/workflow-tools');
v2/src/mcp/mcp-server.js:42:    console.error('Workflow tools not loaded');
v2/src/mcp/mcp-server.js:65:class ClaudeFlowMCPServer {
v2/src/mcp/mcp-server.js:71:      tools: {
v2/src/mcp/mcp-server.js:80:    this.tools = this.initializeTools();
v2/src/mcp/mcp-server.js:1061:        case 'tools/list':
v2/src/mcp/mcp-server.js:1063:        case 'tools/call':
v2/src/mcp/mcp-server.js:1097:    const toolsList = Object.values(this.tools);
v2/src/mcp/mcp-server.js:1102:        tools: toolsList,
v2/src/mcp/mcp-server.js:1168:    // Simulate tool execution based on the tool name
v2/src/mcp/mcp-server.js:2282:          tool: name,
v2/src/mcp/mcp-server.js:2543:async function startMCPServer() {
v2/src/mcp/mcp-server.js:2544:  const server = new ClaudeFlowMCPServer();
v2/src/mcp/mcp-server.js:2547:    `[${new Date().toISOString()}] INFO [claude-flow-mcp] (${server.sessionId}) Claude-Flow MCP server starting in stdio mode`,
v2/src/mcp/mcp-server.js:2609:      `[${new Date().toISOString()}] INFO [claude-flow-mcp] (${server.sessionId}) MCP: stdin closed, shutting down...`,
v2/src/mcp/mcp-server.js:2638:  startMCPServer().catch(console.error);
v2/src/mcp/mcp-server.js:2641:export { ClaudeFlowMCPServer };
v2/src/cli/formatter.ts:257:    chalk.white('  ‚Ä¢ MCP Server'),
v2/src/cli/__tests__/command-registry.test.js:7:  commandRegistry,
v2/src/cli/__tests__/command-registry.test.js:8:  registerCoreCommands,
v2/src/cli/__tests__/command-registry.test.js:78:    commandRegistry.clear();
v2/src/cli/__tests__/command-registry.test.js:89:  describe('registerCoreCommands', () => {
v2/src/cli/__tests__/command-registry.test.js:90:    test('should register all core commands', () => {
v2/src/cli/__tests__/command-registry.test.js:91:      registerCoreCommands();
v2/src/cli/__tests__/command-registry.test.js:113:        expect(commandRegistry.has(cmd)).toBe(true);
v2/src/cli/__tests__/command-registry.test.js:117:    test('should register commands with correct metadata', () => {
v2/src/cli/__tests__/command-registry.test.js:118:      registerCoreCommands();
v2/src/cli/__tests__/command-registry.test.js:120:      const initCmd = commandRegistry.get('init');
v2/src/cli/__tests__/command-registry.test.js:131:      registerCoreCommands();
v2/src/cli/__tests__/command-registry.test.js:134:    test('should return true for registered commands', () => {
v2/src/cli/__tests__/command-registry.test.js:140:    test('should return false for unregistered commands', () => {
v2/src/cli/__tests__/command-registry.test.js:149:      registerCoreCommands();
v2/src/cli/__tests__/command-registry.test.js:174:      registerCoreCommands();
v2/src/cli/__tests__/command-registry.test.js:197:    test('should display all registered commands grouped by category', () => {
v2/src/cli/__tests__/command-registry.test.js:198:      registerCoreCommands();
v2/src/cli/__tests__/command-registry.test.js:220:      registerCoreCommands();
v2/src/cli/__tests__/command-registry.test.js:221:      const commands = listCommands();
v2/src/cli/__tests__/command-registry.test.js:230:    test('should return empty array when no commands registered', () => {
v2/src/cli/__tests__/command-registry.test.js:231:      commandRegistry.clear();
v2/src/cli/__tests__/command-registry.test.js:232:      const commands = listCommands();
v2/src/cli/index.ts:31:const cli = new Command()
v2/src/cli/index.ts:56:// Add subcommands
v2/src/cli/index.ts:73:const replCommand = new Command('repl')
v2/src/cli/index.ts:87:const versionCommand = new Command('version')
v2/src/cli/index.ts:100:const completionCommand = new Command('completion')
v2/src/mcp/integrate-wrapper.ts:5:import { ClaudeCodeMCPWrapper } from './claude-code-wrapper.js';
v2/src/mcp/integrate-wrapper.ts:8: * Integration script that connects the Claude-Flow MCP wrapper
v2/src/mcp/integrate-wrapper.ts:9: * to the Claude Code MCP server
v2/src/mcp/integrate-wrapper.ts:11:export class MCPIntegration {
v2/src/mcp/integrate-wrapper.ts:13:  private wrapper: ClaudeCodeMCPWrapper;
v2/src/mcp/integrate-wrapper.ts:16:    this.wrapper = new ClaudeCodeMCPWrapper();
v2/src/mcp/integrate-wrapper.ts:21:      // Start Claude Code MCP server process
v2/src/mcp/integrate-wrapper.ts:44:      (this.wrapper as any).claudeCodeMCP = this.claudeCodeClient;
v2/src/mcp/integrate-wrapper.ts:46:      console.log('Connected to Claude Code MCP server');
v2/src/mcp/integrate-wrapper.ts:48:      console.error('Failed to connect to Claude Code MCP:', error);
v2/src/mcp/integrate-wrapper.ts:54:    // Connect to Claude Code MCP
v2/src/mcp/integrate-wrapper.ts:62:// Update the wrapper to use the real Claude Code MCP client
v2/src/mcp/integrate-wrapper.ts:63:export function injectClaudeCodeClient(wrapper: ClaudeCodeMCPWrapper, client: Client): void {
v2/src/mcp/integrate-wrapper.ts:65:  (wrapper as any).forwardToClaudeCode = async function (toolName: string, args: any) {
v2/src/mcp/integrate-wrapper.ts:67:      const result = await client.callTool(toolName, args);
v2/src/mcp/integrate-wrapper.ts:74:            text: `Error calling Claude Code tool ${toolName}: ${error instanceof Error ? error.message : String(error)}`,
v2/src/mcp/integrate-wrapper.ts:85:  const integration = new MCPIntegration();
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:1:// optimized-sparc-commands.js - Batchtools-optimized SPARC-specific slash commands
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:3:// Create batchtools-optimized SPARC mode slash command
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:13:description: ${mode.name} - ${fullDescription} (Batchtools Optimized)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:16:# ${mode.name} (Batchtools Optimized)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:21:**üöÄ Batchtools Enhancement**: This mode includes parallel processing capabilities, batch operations, and concurrent optimization for improved performance and efficiency.
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:26:### Batchtools Optimization Strategies
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:27:- **Parallel Operations**: Execute independent tasks simultaneously using batchtools
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:46:            return `- **${g[0]}**: ${g[1]?.description || getOptimizedToolDescription(g[0])} ${g[1]?.fileRegex ? `(Files matching: ${g[1].fileRegex})` : ''} - *Batchtools enabled*`;
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:54:### Batchtools Integration
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:60:## Usage (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:80:# Non-interactive mode with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:84:### Batchtools Operations
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:119:### Batchtools Memory Operations
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:151:## Batchtools Best Practices for ${mode.name}
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:155:- ${getBatchtoolsPractices(mode.slug).parallel.join('\n- ')}
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:158:- ${getBatchtoolsPractices(mode.slug).optimization.join('\n- ')}
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:161:- ${getBatchtoolsPractices(mode.slug).performance.join('\n- ')}
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:176:# Execute complete workflow with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:180:For detailed ${mode.name} documentation and batchtools integration guides, see: 
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:182:- Batchtools Integration: https://github.com/ruvnet/claude-code-flow/docs/batchtools-${mode.slug}.md
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:186:// Helper function to get optimized tool descriptions
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:187:function getOptimizedToolDescription(tool) {
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:188:  const toolDescriptions = {
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:192:    mcp: 'Model Context Protocol tools with parallel communication',
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:195:  return toolDescriptions[tool] || 'Tool access with batchtools optimization';
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:220:  return examples[slug] || 'implement feature with batchtools optimization';
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:223:// Helper function to get batchtools best practices for specific modes
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:224:function getBatchtoolsPractices(slug) {
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:315:    .map((m) => `- \`/sparc-${m.slug}\` - ${m.name} (Batchtools optimized)`)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:327:description: Execute SPARC methodology workflows with Claude-Flow and batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:330:# ‚ö°Ô∏è SPARC Development Methodology (Batchtools Optimized)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:334:**üöÄ Batchtools Enhancement**: This configuration includes parallel processing capabilities, batch operations, and concurrent optimization for improved performance and efficiency across all SPARC modes.
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:340:### Batchtools Integration
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:346:## Available SPARC Modes (Batchtools Optimized)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:372:## SPARC Methodology Phases (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:408:## Advanced Swarm Mode (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:439:./claude-flow sparc analyze --batchtools --optimization --detailed
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:454:## Best Practices (Batchtools Enhanced)
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:466:### Batchtools Performance Improvements
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:494:See \`/claude-flow-help\` for all available commands and \`/batchtools\` for detailed parallel processing documentation.
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:496:For comprehensive SPARC and batchtools documentation, see:
v2/src/cli/simple-commands/init/claude-commands/optimized-sparc-commands.js:498:- Batchtools Documentation: https://github.com/ruvnet/claude-code-flow/docs/batchtools.md
v2/src/swarm/mcp-integration-wrapper.ts:2: * MCP Integration Wrapper for Swarm System
v2/src/swarm/mcp-integration-wrapper.ts:4: * This module provides a comprehensive wrapper around MCP tools to enable
v2/src/swarm/mcp-integration-wrapper.ts:6: * tool discovery, execution, error handling, and result aggregation.
v2/src/swarm/mcp-integration-wrapper.ts:12:import { createClaudeFlowTools } from '../mcp/claude-flow-tools.js';
v2/src/swarm/mcp-integration-wrapper.ts:13:import { createRuvSwarmTools } from '../mcp/ruv-swarm-tools.js';
v2/src/swarm/mcp-integration-wrapper.ts:14:import type { MCPTool, MCPContext } from '../utils/types.js';
v2/src/swarm/mcp-integration-wrapper.ts:25:export interface MCPToolExecutionResult {
v2/src/swarm/mcp-integration-wrapper.ts:30:  toolName: string;
v2/src/swarm/mcp-integration-wrapper.ts:41:export interface MCPToolRegistry {
v2/src/swarm/mcp-integration-wrapper.ts:42:  tools: Map<string, MCPTool>;
v2/src/swarm/mcp-integration-wrapper.ts:48:export interface MCPExecutionContext extends MCPContext {
v2/src/swarm/mcp-integration-wrapper.ts:58:export interface MCPIntegrationConfig {
v2/src/swarm/mcp-integration-wrapper.ts:62:  toolTimeout: number;
v2/src/swarm/mcp-integration-wrapper.ts:73:export class MCPIntegrationWrapper extends EventEmitter {
v2/src/swarm/mcp-integration-wrapper.ts:75:  private config: MCPIntegrationConfig;
v2/src/swarm/mcp-integration-wrapper.ts:76:  private toolRegistry: MCPToolRegistry;
v2/src/swarm/mcp-integration-wrapper.ts:77:  private executionCache: Map<string, MCPToolExecutionResult> = new Map();
v2/src/swarm/mcp-integration-wrapper.ts:79:  private metrics: MCPIntegrationMetrics;
v2/src/swarm/mcp-integration-wrapper.ts:81:  constructor(config: Partial<MCPIntegrationConfig> = {}) {
v2/src/swarm/mcp-integration-wrapper.ts:84:    this.logger = new Logger('MCPIntegrationWrapper');
v2/src/swarm/mcp-integration-wrapper.ts:86:    this.toolRegistry = this.initializeToolRegistry();
v2/src/swarm/mcp-integration-wrapper.ts:93:   * Initialize the MCP integration wrapper
v2/src/swarm/mcp-integration-wrapper.ts:96:    this.logger.info('Initializing MCP integration wrapper...');
v2/src/swarm/mcp-integration-wrapper.ts:99:      // Register Claude Flow tools
v2/src/swarm/mcp-integration-wrapper.ts:101:        await this.registerClaudeFlowTools();
v2/src/swarm/mcp-integration-wrapper.ts:104:      // Register ruv-swarm tools
v2/src/swarm/mcp-integration-wrapper.ts:106:        await this.registerRuvSwarmTools();
v2/src/swarm/mcp-integration-wrapper.ts:114:      this.logger.info('MCP integration wrapper initialized successfully', {
v2/src/swarm/mcp-integration-wrapper.ts:115:        totalTools: this.toolRegistry.tools.size,
v2/src/swarm/mcp-integration-wrapper.ts:116:        categories: this.toolRegistry.categories.size,
v2/src/swarm/mcp-integration-wrapper.ts:117:        capabilities: this.toolRegistry.capabilities.size,
v2/src/swarm/mcp-integration-wrapper.ts:121:        toolCount: this.toolRegistry.tools.size,
v2/src/swarm/mcp-integration-wrapper.ts:126:      this.logger.error('Failed to initialize MCP integration wrapper', error);
v2/src/swarm/mcp-integration-wrapper.ts:135:    this.logger.info('Shutting down MCP integration wrapper...');
v2/src/swarm/mcp-integration-wrapper.ts:148:      this.logger.info('MCP integration wrapper shut down successfully');
v2/src/swarm/mcp-integration-wrapper.ts:152:      this.logger.error('Error during MCP wrapper shutdown', error);
v2/src/swarm/mcp-integration-wrapper.ts:158:   * Execute an MCP tool within a swarm context
v2/src/swarm/mcp-integration-wrapper.ts:161:    toolName: string,
v2/src/swarm/mcp-integration-wrapper.ts:163:    context: MCPExecutionContext
v2/src/swarm/mcp-integration-wrapper.ts:164:  ): Promise<MCPToolExecutionResult> {
v2/src/swarm/mcp-integration-wrapper.ts:168:    this.logger.info('Executing MCP tool', {
v2/src/swarm/mcp-integration-wrapper.ts:169:      toolName,
v2/src/swarm/mcp-integration-wrapper.ts:177:      // Check if tool exists
v2/src/swarm/mcp-integration-wrapper.ts:178:      const tool = this.toolRegistry.tools.get(toolName);
v2/src/swarm/mcp-integration-wrapper.ts:179:      if (!tool) {
v2/src/swarm/mcp-integration-wrapper.ts:180:        throw new Error(`Tool not found: ${toolName}`);
v2/src/swarm/mcp-integration-wrapper.ts:185:        const cached = await this.getCachedResult(toolName, input, context);
v2/src/swarm/mcp-integration-wrapper.ts:187:          this.logger.debug('Using cached result', { toolName, executionId });
v2/src/swarm/mcp-integration-wrapper.ts:199:      }, context.timeout || this.config.toolTimeout);
v2/src/swarm/mcp-integration-wrapper.ts:202:        // Execute tool with retry logic
v2/src/swarm/mcp-integration-wrapper.ts:204:          tool,
v2/src/swarm/mcp-integration-wrapper.ts:214:        const executionResult: MCPToolExecutionResult = {
v2/src/swarm/mcp-integration-wrapper.ts:218:          toolName,
v2/src/swarm/mcp-integration-wrapper.ts:230:          await this.cacheResult(toolName, input, context, executionResult);
v2/src/swarm/mcp-integration-wrapper.ts:236:        this.logger.info('MCP tool executed successfully', {
v2/src/swarm/mcp-integration-wrapper.ts:237:          toolName,
v2/src/swarm/mcp-integration-wrapper.ts:242:        this.emit('tool:executed', executionResult);
v2/src/swarm/mcp-integration-wrapper.ts:252:      const executionResult: MCPToolExecutionResult = {
v2/src/swarm/mcp-integration-wrapper.ts:256:        toolName,
v2/src/swarm/mcp-integration-wrapper.ts:268:      this.logger.error('MCP tool execution failed', {
v2/src/swarm/mcp-integration-wrapper.ts:269:        toolName,
v2/src/swarm/mcp-integration-wrapper.ts:275:      this.emit('tool:failed', executionResult);
v2/src/swarm/mcp-integration-wrapper.ts:281:   * Execute multiple tools in parallel
v2/src/swarm/mcp-integration-wrapper.ts:284:    toolExecutions: Array<{
v2/src/swarm/mcp-integration-wrapper.ts:285:      toolName: string;
v2/src/swarm/mcp-integration-wrapper.ts:287:      context: MCPExecutionContext;
v2/src/swarm/mcp-integration-wrapper.ts:289:  ): Promise<MCPToolExecutionResult[]> {
v2/src/swarm/mcp-integration-wrapper.ts:292:      const results: MCPToolExecutionResult[] = [];
v2/src/swarm/mcp-integration-wrapper.ts:293:      for (const execution of toolExecutions) {
v2/src/swarm/mcp-integration-wrapper.ts:295:          execution.toolName,
v2/src/swarm/mcp-integration-wrapper.ts:304:    this.logger.info('Executing tools in parallel', {
v2/src/swarm/mcp-integration-wrapper.ts:305:      toolCount: toolExecutions.length,
v2/src/swarm/mcp-integration-wrapper.ts:312:    const promises = toolExecutions.map(async (execution) => {
v2/src/swarm/mcp-integration-wrapper.ts:316:          execution.toolName,
v2/src/swarm/mcp-integration-wrapper.ts:336:          toolName: toolExecutions[index].toolName,
v2/src/swarm/mcp-integration-wrapper.ts:337:          agentId: toolExecutions[index].context.agent.id,
v2/src/swarm/mcp-integration-wrapper.ts:338:          taskId: toolExecutions[index].context.task?.id,
v2/src/swarm/mcp-integration-wrapper.ts:350:   * Get available tools with filtering options
v2/src/swarm/mcp-integration-wrapper.ts:356:  } = {}): MCPTool[] {
v2/src/swarm/mcp-integration-wrapper.ts:357:    let tools = Array.from(this.toolRegistry.tools.values());
v2/src/swarm/mcp-integration-wrapper.ts:361:      const categoryTools = this.toolRegistry.categories.get(options.category) || [];
v2/src/swarm/mcp-integration-wrapper.ts:362:      tools = tools.filter(tool => categoryTools.includes(tool.name));
v2/src/swarm/mcp-integration-wrapper.ts:367:      const capabilityTools = this.toolRegistry.capabilities.get(options.capability) || [];
v2/src/swarm/mcp-integration-wrapper.ts:368:      tools = tools.filter(tool => capabilityTools.includes(tool.name));
v2/src/swarm/mcp-integration-wrapper.ts:373:      tools = tools.filter(tool => this.hasPermission(tool, options.agent!));
v2/src/swarm/mcp-integration-wrapper.ts:376:    return tools;
v2/src/swarm/mcp-integration-wrapper.ts:380:   * Get tool information
v2/src/swarm/mcp-integration-wrapper.ts:382:  getToolInfo(toolName: string): MCPTool | null {
v2/src/swarm/mcp-integration-wrapper.ts:383:    return this.toolRegistry.tools.get(toolName) || null;
v2/src/swarm/mcp-integration-wrapper.ts:389:  getMetrics(): MCPIntegrationMetrics {
v2/src/swarm/mcp-integration-wrapper.ts:394:      toolUsageDistribution: this.calculateToolUsageDistribution(),
v2/src/swarm/mcp-integration-wrapper.ts:399:   * Create MCP execution context for swarm operations
v2/src/swarm/mcp-integration-wrapper.ts:406:  ): MCPExecutionContext {
v2/src/swarm/mcp-integration-wrapper.ts:414:      timeout: this.config.toolTimeout,
v2/src/swarm/mcp-integration-wrapper.ts:421:  private async registerClaudeFlowTools(): Promise<void> {
v2/src/swarm/mcp-integration-wrapper.ts:422:    this.logger.info('Registering Claude Flow tools...');
v2/src/swarm/mcp-integration-wrapper.ts:426:    for (const tool of claudeFlowTools) {
v2/src/swarm/mcp-integration-wrapper.ts:427:      this.toolRegistry.tools.set(tool.name, tool);
v2/src/swarm/mcp-integration-wrapper.ts:429:      // Categorize tool
v2/src/swarm/mcp-integration-wrapper.ts:430:      const category = this.categorizeClaudeFlowTool(tool.name);
v2/src/swarm/mcp-integration-wrapper.ts:431:      if (!this.toolRegistry.categories.has(category)) {
v2/src/swarm/mcp-integration-wrapper.ts:432:        this.toolRegistry.categories.set(category, []);
v2/src/swarm/mcp-integration-wrapper.ts:434:      this.toolRegistry.categories.get(category)!.push(tool.name);
v2/src/swarm/mcp-integration-wrapper.ts:437:      const capabilities = this.extractCapabilities(tool);
v2/src/swarm/mcp-integration-wrapper.ts:439:        if (!this.toolRegistry.capabilities.has(capability)) {
v2/src/swarm/mcp-integration-wrapper.ts:440:          this.toolRegistry.capabilities.set(capability, []);
v2/src/swarm/mcp-integration-wrapper.ts:442:        this.toolRegistry.capabilities.get(capability)!.push(tool.name);
v2/src/swarm/mcp-integration-wrapper.ts:446:    this.logger.info(`Registered ${claudeFlowTools.length} Claude Flow tools`);
v2/src/swarm/mcp-integration-wrapper.ts:449:  private async registerRuvSwarmTools(): Promise<void> {
v2/src/swarm/mcp-integration-wrapper.ts:450:    this.logger.info('Registering ruv-swarm tools...');
v2/src/swarm/mcp-integration-wrapper.ts:454:    for (const tool of ruvSwarmTools) {
v2/src/swarm/mcp-integration-wrapper.ts:455:      this.toolRegistry.tools.set(tool.name, tool);
v2/src/swarm/mcp-integration-wrapper.ts:457:      // Categorize tool
v2/src/swarm/mcp-integration-wrapper.ts:458:      const category = this.categorizeRuvSwarmTool(tool.name);
v2/src/swarm/mcp-integration-wrapper.ts:459:      if (!this.toolRegistry.categories.has(category)) {
v2/src/swarm/mcp-integration-wrapper.ts:460:        this.toolRegistry.categories.set(category, []);
v2/src/swarm/mcp-integration-wrapper.ts:462:      this.toolRegistry.categories.get(category)!.push(tool.name);
v2/src/swarm/mcp-integration-wrapper.ts:465:      const capabilities = this.extractCapabilities(tool);
v2/src/swarm/mcp-integration-wrapper.ts:467:        if (!this.toolRegistry.capabilities.has(capability)) {
v2/src/swarm/mcp-integration-wrapper.ts:468:          this.toolRegistry.capabilities.set(capability, []);
v2/src/swarm/mcp-integration-wrapper.ts:470:        this.toolRegistry.capabilities.get(capability)!.push(tool.name);
v2/src/swarm/mcp-integration-wrapper.ts:474:    this.logger.info(`Registered ${ruvSwarmTools.length} ruv-swarm tools`);
v2/src/swarm/mcp-integration-wrapper.ts:478:    tool: MCPTool,
v2/src/swarm/mcp-integration-wrapper.ts:480:    context: MCPExecutionContext,
v2/src/swarm/mcp-integration-wrapper.ts:494:        this.logger.debug('Executing tool attempt', {
v2/src/swarm/mcp-integration-wrapper.ts:495:          toolName: tool.name,
v2/src/swarm/mcp-integration-wrapper.ts:501:        const result = await tool.handler(input, context);
v2/src/swarm/mcp-integration-wrapper.ts:505:            toolName: tool.name,
v2/src/swarm/mcp-integration-wrapper.ts:517:          toolName: tool.name,
v2/src/swarm/mcp-integration-wrapper.ts:553:    toolName: string,
v2/src/swarm/mcp-integration-wrapper.ts:555:    context: MCPExecutionContext
v2/src/swarm/mcp-integration-wrapper.ts:556:  ): Promise<MCPToolExecutionResult | null> {
v2/src/swarm/mcp-integration-wrapper.ts:557:    const cacheKey = this.generateCacheKey(toolName, input, context);
v2/src/swarm/mcp-integration-wrapper.ts:576:    toolName: string,
v2/src/swarm/mcp-integration-wrapper.ts:578:    context: MCPExecutionContext,
v2/src/swarm/mcp-integration-wrapper.ts:579:    result: MCPToolExecutionResult
v2/src/swarm/mcp-integration-wrapper.ts:581:    const cacheKey = this.generateCacheKey(toolName, input, context);
v2/src/swarm/mcp-integration-wrapper.ts:586:    toolName: string,
v2/src/swarm/mcp-integration-wrapper.ts:588:    context: MCPExecutionContext
v2/src/swarm/mcp-integration-wrapper.ts:597:    return `${toolName}:${inputHash}:${contextHash}`;
v2/src/swarm/mcp-integration-wrapper.ts:612:  private hasPermission(tool: MCPTool, agent: SwarmAgent): boolean {
v2/src/swarm/mcp-integration-wrapper.ts:613:    // Check if agent has permission to use this tool
v2/src/swarm/mcp-integration-wrapper.ts:614:    const toolPermissions = this.toolRegistry.permissions.get(tool.name) || [];
v2/src/swarm/mcp-integration-wrapper.ts:617:    if (toolPermissions.length === 0) {
v2/src/swarm/mcp-integration-wrapper.ts:621:    // Check agent capabilities against tool permissions
v2/src/swarm/mcp-integration-wrapper.ts:623:      toolPermissions.includes(capability)
v2/src/swarm/mcp-integration-wrapper.ts:627:  private categorizeClaudeFlowTool(toolName: string): string {
v2/src/swarm/mcp-integration-wrapper.ts:628:    if (toolName.includes('agents/')) return 'agent-management';
v2/src/swarm/mcp-integration-wrapper.ts:629:    if (toolName.includes('tasks/')) return 'task-management';
v2/src/swarm/mcp-integration-wrapper.ts:630:    if (toolName.includes('memory/')) return 'memory-management';
v2/src/swarm/mcp-integration-wrapper.ts:631:    if (toolName.includes('system/')) return 'system-monitoring';
v2/src/swarm/mcp-integration-wrapper.ts:632:    if (toolName.includes('config/')) return 'configuration';
v2/src/swarm/mcp-integration-wrapper.ts:633:    if (toolName.includes('workflow/')) return 'workflow-management';
v2/src/swarm/mcp-integration-wrapper.ts:634:    if (toolName.includes('terminal/')) return 'terminal-management';
v2/src/swarm/mcp-integration-wrapper.ts:638:  private categorizeRuvSwarmTool(toolName: string): string {
v2/src/swarm/mcp-integration-wrapper.ts:639:    if (toolName.includes('swarm_')) return 'swarm-lifecycle';
v2/src/swarm/mcp-integration-wrapper.ts:640:    if (toolName.includes('agent_')) return 'agent-management';
v2/src/swarm/mcp-integration-wrapper.ts:641:    if (toolName.includes('task_')) return 'task-orchestration';
v2/src/swarm/mcp-integration-wrapper.ts:642:    if (toolName.includes('memory_')) return 'memory-persistence';
v2/src/swarm/mcp-integration-wrapper.ts:643:    if (toolName.includes('neural_')) return 'neural-capabilities';
v2/src/swarm/mcp-integration-wrapper.ts:644:    if (toolName.includes('benchmark_')) return 'performance-benchmarking';
v2/src/swarm/mcp-integration-wrapper.ts:648:  private extractCapabilities(tool: MCPTool): string[] {
v2/src/swarm/mcp-integration-wrapper.ts:651:    // Extract capabilities from tool name and description
v2/src/swarm/mcp-integration-wrapper.ts:652:    const text = `${tool.name} ${tool.description}`.toLowerCase();
v2/src/swarm/mcp-integration-wrapper.ts:670:  private updateMetrics(result: MCPToolExecutionResult): void {
v2/src/swarm/mcp-integration-wrapper.ts:681:    // Update tool-specific metrics
v2/src/swarm/mcp-integration-wrapper.ts:682:    if (!this.metrics.toolExecutions.has(result.toolName)) {
v2/src/swarm/mcp-integration-wrapper.ts:683:      this.metrics.toolExecutions.set(result.toolName, {
v2/src/swarm/mcp-integration-wrapper.ts:691:    const toolStats = this.metrics.toolExecutions.get(result.toolName)!;
v2/src/swarm/mcp-integration-wrapper.ts:692:    toolStats.count++;
v2/src/swarm/mcp-integration-wrapper.ts:693:    toolStats.totalTime += result.duration;
v2/src/swarm/mcp-integration-wrapper.ts:696:      toolStats.successCount++;
v2/src/swarm/mcp-integration-wrapper.ts:698:      toolStats.failureCount++;
v2/src/swarm/mcp-integration-wrapper.ts:716:    for (const [toolName, stats] of this.metrics.toolExecutions) {
v2/src/swarm/mcp-integration-wrapper.ts:717:      distribution[toolName] = stats.count;
v2/src/swarm/mcp-integration-wrapper.ts:746:  private initializeToolRegistry(): MCPToolRegistry {
v2/src/swarm/mcp-integration-wrapper.ts:748:      tools: new Map(),
v2/src/swarm/mcp-integration-wrapper.ts:755:  private initializeMetrics(): MCPIntegrationMetrics {
v2/src/swarm/mcp-integration-wrapper.ts:763:      toolExecutions: new Map(),
v2/src/swarm/mcp-integration-wrapper.ts:766:      toolUsageDistribution: {},
v2/src/swarm/mcp-integration-wrapper.ts:770:  private createDefaultConfig(config: Partial<MCPIntegrationConfig>): MCPIntegrationConfig {
v2/src/swarm/mcp-integration-wrapper.ts:775:      toolTimeout: 30000, // 30 seconds
v2/src/swarm/mcp-integration-wrapper.ts:789:    this.on('tool:executed', (result) => {
v2/src/swarm/mcp-integration-wrapper.ts:792:          toolName: result.toolName,
v2/src/swarm/mcp-integration-wrapper.ts:799:    this.on('tool:failed', (result) => {
v2/src/swarm/mcp-integration-wrapper.ts:802:          toolName: result.toolName,
v2/src/swarm/mcp-integration-wrapper.ts:813:interface MCPIntegrationMetrics {
v2/src/swarm/mcp-integration-wrapper.ts:820:  toolExecutions: Map<string, {
v2/src/swarm/mcp-integration-wrapper.ts:828:  toolUsageDistribution: Record<string, number>;
v2/src/swarm/mcp-integration-wrapper.ts:860:export default MCPIntegrationWrapper;
v2/src/cli/simple-cli.ts:27:üéØ ENTERPRISE FEATURES: Complete ruv-swarm integration with 27 MCP tools, neural networking, and production-ready infrastructure
v2/src/cli/simple-cli.ts:36:  ‚Ä¢ Complete ruv-swarm integration with 27 MCP tools
v2/src/cli/simple-cli.ts:112:  ‚Ä¢ 27 MCP tools for comprehensive workflow automation
v2/src/cli/simple-cli.ts:123:  ‚Ä¢ Sub-10ms MCP response times
v2/src/cli/simple-cli.ts:175:  const commands = listCommands();
v2/src/cli/simple-cli.ts:212:  // Check if this is a registered modular command
v2/src/cli/simple-cli.ts:234:      console.log('üåê MCP Server: Stopped');
v2/src/cli/simple-cli.ts:389:            const commands = subArgs[commandsFlag + 1].split(',');
v2/src/cli/simple-cli.ts:1137:              console.log('   ‚úì MCP server deployment');
v2/src/cli/simple-cli.ts:1222:            if (arg === '--tools' || arg === '-t') {
v2/src/cli/simple-cli.ts:1223:              flags.tools = subArgs[++i];
v2/src/cli/simple-cli.ts:1245:          // Build tools list
v2/src/cli/simple-cli.ts:1246:          let tools = flags.tools || 'View,Edit,Replace,GlobTool,GrepTool,LS,Bash';
v2/src/cli/simple-cli.ts:1248:            tools += ',BatchTool,dispatch_agent';
v2/src/cli/simple-cli.ts:1251:            tools += ',WebFetchTool';
v2/src/cli/simple-cli.ts:1258:            console.log(`Command: claude "<enhanced task with guidance>" --allowedTools ${tools}`);
v2/src/cli/simple-cli.ts:1261:            console.log(`Tools: ${tools}`);
v2/src/cli/simple-cli.ts:1268:            console.log(`  - Access Claude-Flow features through Bash tool`);
v2/src/cli/simple-cli.ts:1272:            console.log(`üîß Tools: ${tools}`);
v2/src/cli/simple-cli.ts:1300:${flags.config ? `- MCP Config: ${flags.config}` : ''}
v2/src/cli/simple-cli.ts:1303:- You have access to these tools: ${tools}
v2/src/cli/simple-cli.ts:1304:${flags.tools ? `- Custom tools specified: ${flags.tools}` : ''}
v2/src/cli/simple-cli.ts:1334:   **Research Mode**: Web research tools are available for information gathering.`;
v2/src/cli/simple-cli.ts:1344:   - Use appropriate tools and practices for the technology stack
v2/src/cli/simple-cli.ts:1363:   ${flags.research ? '   - Research tools are available if needed' : ''}
v2/src/cli/simple-cli.ts:1369:Begin working on your task. The orchestration features are available as tools to help you be more effective, but your primary focus should be on delivering the requested functionality.
v2/src/cli/simple-cli.ts:1385:Remember: These are optional tools. Use them when they add value to your development process.
v2/src/cli/simple-cli.ts:1396:            claudeArgs.push('--allowedTools', tools);
v2/src/cli/simple-cli.ts:2619:- Tools: [Development tools]
v2/src/cli/simple-cli.ts:3157:- Use TypeScript for type safety and better tooling
v2/src/cli/simple-cli.ts:3263:- **Tool access**: Verify required tools are available for the selected mode
v2/src/cli/simple-commands/init/performance-monitor.js:299:      'cli-tool': 1.1,
v2/src/cli/commands/swarm.ts:181:      const agentId = await coordinator.registerAgent(
v2/src/cli/commands/swarm.ts:453:${task.type === 'research' ? 'Use web search and research tools as needed.' : ''}
v2/src/cli/commands/swarm.ts:464:      let tools = 'View,GlobTool,GrepTool,LS';
v2/src/cli/commands/swarm.ts:466:        tools = 'WebFetchTool,WebSearch';
v2/src/cli/commands/swarm.ts:468:        tools = 'View,Edit,Replace,GlobTool,GrepTool,LS,Bash';
v2/src/cli/commands/swarm.ts:477:        tools,
v2/src/cli/simple-commands/init/claude-commands/claude-flow-commands.js:61:### üåç MCP Integration
v2/src/cli/simple-commands/init/claude-commands/claude-flow-commands.js:62:- \`./claude-flow mcp status\` - MCP server status
v2/src/cli/simple-commands/init/claude-commands/claude-flow-commands.js:63:- \`./claude-flow mcp tools\` - List available tools
v2/src/cli/simple-commands/init/claude-commands/claude-flow-commands.js:65:- \`./claude-flow mcp logs\` - View MCP logs
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:1:// optimized-slash-commands.js - Create batchtools-optimized Claude Code slash commands
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:12:// Create batchtools-optimized Claude Code slash commands for SPARC modes
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:15:    console.log('\nüöÄ Creating batchtools-optimized Claude Code slash commands...');
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:39:      // Create slash commands for each SPARC mode with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:46:        console.log(`  ‚úì Created optimized slash command: /sparc-${mode.slug} (Batchtools enhanced)`);
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:52:      // Create main SPARC command with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:55:      console.log('  ‚úÖ Created optimized main slash command: /sparc (Batchtools enhanced)');
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:68:    // Create claude-flow specific commands with batchtools optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:71:    // Create batchtools-specific commands
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:72:    await createBatchtoolsCommands(workingDir);
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:80:// Create batchtools-specific commands
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:81:async function createBatchtoolsCommands(workingDir) {
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:82:  // Batchtools help command
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:83:  const batchtoolsCommand = `---
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:84:name: batchtools
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:88:# üöÄ Batchtools - Parallel Processing & Batch Operations
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:90:Batchtools enable parallel execution of multiple operations for improved performance and efficiency.
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:113:const files = await batchtools.parallel([
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:124:await batchtools.createFiles([
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:135:const analysis = await batchtools.concurrent([
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:224:### Full SPARC Pipeline with Batchtools
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:239:./claude-flow batchtools monitor --real-time
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:242:./claude-flow batchtools analyze --performance --detailed
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:245:./claude-flow batchtools resources --concurrent --verbose
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:248:For detailed documentation, see: https://github.com/ruvnet/claude-code-flow/docs/batchtools.md
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:251:  await fs.writeFile(`${workingDir}/.claude/commands/batchtools.md`, batchtoolsCommand, 'utf8');
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:252:  console.log('  ‚úì Created slash command: /batchtools');
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:257:description: Monitor and optimize system performance with batchtools
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:262:Real-time performance monitoring and optimization tools for Claude-Flow operations.
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:272:### Batchtools Metrics
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:286:./claude-flow performance monitor --parallel --batchtools
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:298:./claude-flow performance analyze --batchtools --optimization
v2/src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js:324:    "batchtools": {
v2/src/cli/simple-commands/mcp-integration-layer.js:2: * MCP Integration Layer for Web UI
v2/src/cli/simple-commands/mcp-integration-layer.js:3: * Provides comprehensive integration with all Claude-Flow MCP tools
v2/src/cli/simple-commands/mcp-integration-layer.js:9:export class MCPIntegrationLayer {
v2/src/cli/simple-commands/mcp-integration-layer.js:20:    this.toolCategories = {
v2/src/cli/simple-commands/mcp-integration-layer.js:145:   * Initialize MCP integration
v2/src/cli/simple-commands/mcp-integration-layer.js:149:      // Check if MCP tools are available
v2/src/cli/simple-commands/mcp-integration-layer.js:150:      const mcpAvailable = await this.checkMCPAvailability();
v2/src/cli/simple-commands/mcp-integration-layer.js:152:        this.ui.addLog('warning', 'MCP tools not available - using mock implementations');
v2/src/cli/simple-commands/mcp-integration-layer.js:156:      // Initialize tool monitoring
v2/src/cli/simple-commands/mcp-integration-layer.js:162:      this.ui.addLog('success', 'MCP Integration Layer initialized successfully');
v2/src/cli/simple-commands/mcp-integration-layer.js:164:      this.ui.addLog('error', `Failed to initialize MCP integration: ${error.message}`);
v2/src/cli/simple-commands/mcp-integration-layer.js:170:   * Check if MCP tools are available
v2/src/cli/simple-commands/mcp-integration-layer.js:172:  async checkMCPAvailability() {
v2/src/cli/simple-commands/mcp-integration-layer.js:174:      // Try to access a simple MCP tool
v2/src/cli/simple-commands/mcp-integration-layer.js:183:   * Execute MCP tool with full error handling and retry logic
v2/src/cli/simple-commands/mcp-integration-layer.js:185:  async executeTool(toolName, parameters = {}, options = {}) {
v2/src/cli/simple-commands/mcp-integration-layer.js:191:        toolName,
v2/src/cli/simple-commands/mcp-integration-layer.js:199:      this.notifyUI('tool_start', { executionId, toolName });
v2/src/cli/simple-commands/mcp-integration-layer.js:202:      const result = await this.executeWithRetry(toolName, parameters, options);
v2/src/cli/simple-commands/mcp-integration-layer.js:206:        this.cacheResult(toolName, parameters, result);
v2/src/cli/simple-commands/mcp-integration-layer.js:218:      this.notifyUI('tool_complete', { executionId, toolName, result });
v2/src/cli/simple-commands/mcp-integration-layer.js:231:      this.notifyUI('tool_error', { executionId, toolName, error: error.message });
v2/src/cli/simple-commands/mcp-integration-layer.js:238:   * Execute tool with retry logic
v2/src/cli/simple-commands/mcp-integration-layer.js:240:  async executeWithRetry(toolName, parameters, options) {
v2/src/cli/simple-commands/mcp-integration-layer.js:249:          this.ui.addLog('info', `Retrying ${toolName} (attempt ${attempt + 1}/${maxRetries + 1})`);
v2/src/cli/simple-commands/mcp-integration-layer.js:252:        const result = await this.executeToolDirect(toolName, parameters);
v2/src/cli/simple-commands/mcp-integration-layer.js:258:          `Tool ${toolName} failed on attempt ${attempt + 1}: ${error.message}`,
v2/src/cli/simple-commands/mcp-integration-layer.js:264:      `Tool ${toolName} failed after ${maxRetries + 1} attempts: ${lastError.message}`,
v2/src/cli/simple-commands/mcp-integration-layer.js:269:   * Execute tool directly (with or without MCP)
v2/src/cli/simple-commands/mcp-integration-layer.js:271:  async executeToolDirect(toolName, parameters) {
v2/src/cli/simple-commands/mcp-integration-layer.js:273:      return this.executeMockTool(toolName, parameters);
v2/src/cli/simple-commands/mcp-integration-layer.js:277:      // Use the mcp__claude-flow__ tools that are available
v2/src/cli/simple-commands/mcp-integration-layer.js:278:      const mcpToolName = `mcp__claude-flow__${toolName}`;
v2/src/cli/simple-commands/mcp-integration-layer.js:280:      // Check if we have this tool available (would need to be passed from the calling context)
v2/src/cli/simple-commands/mcp-integration-layer.js:282:      return this.executeMockTool(toolName, parameters);
v2/src/cli/simple-commands/mcp-integration-layer.js:284:      throw new Error(`MCP tool execution failed: ${error.message}`);
v2/src/cli/simple-commands/mcp-integration-layer.js:289:   * Execute mock tool for demonstration and fallback
v2/src/cli/simple-commands/mcp-integration-layer.js:291:  async executeMockTool(toolName, parameters) {
v2/src/cli/simple-commands/mcp-integration-layer.js:295:    // Generate realistic mock responses based on tool type
v2/src/cli/simple-commands/mcp-integration-layer.js:296:    switch (toolName) {
v2/src/cli/simple-commands/mcp-integration-layer.js:363:          tool: toolName,
v2/src/cli/simple-commands/mcp-integration-layer.js:364:          message: `Mock execution of ${toolName}`,
v2/src/cli/simple-commands/mcp-integration-layer.js:372:   * Execute multiple tools in parallel
v2/src/cli/simple-commands/mcp-integration-layer.js:374:  async executeToolsParallel(toolExecutions) {
v2/src/cli/simple-commands/mcp-integration-layer.js:375:    const promises = toolExecutions.map(({ toolName, parameters, options }) =>
v2/src/cli/simple-commands/mcp-integration-layer.js:376:      this.executeTool(toolName, parameters, options),
v2/src/cli/simple-commands/mcp-integration-layer.js:383:   * Execute tools in batch with progress tracking
v2/src/cli/simple-commands/mcp-integration-layer.js:385:  async executeToolsBatch(toolExecutions, progressCallback) {
v2/src/cli/simple-commands/mcp-integration-layer.js:387:    const total = toolExecutions.length;
v2/src/cli/simple-commands/mcp-integration-layer.js:390:      const { toolName, parameters, options } = toolExecutions[i];
v2/src/cli/simple-commands/mcp-integration-layer.js:393:        const result = await this.executeTool(toolName, parameters, options);
v2/src/cli/simple-commands/mcp-integration-layer.js:401:            currentTool: toolName,
v2/src/cli/simple-commands/mcp-integration-layer.js:413:   * Cache tool results for performance
v2/src/cli/simple-commands/mcp-integration-layer.js:415:  cacheResult(toolName, parameters, result) {
v2/src/cli/simple-commands/mcp-integration-layer.js:416:    const cacheKey = this.generateCacheKey(toolName, parameters);
v2/src/cli/simple-commands/mcp-integration-layer.js:417:    const ttl = this.getCacheTTL(toolName);
v2/src/cli/simple-commands/mcp-integration-layer.js:432:  getCachedResult(toolName, parameters) {
v2/src/cli/simple-commands/mcp-integration-layer.js:433:    const cacheKey = this.generateCacheKey(toolName, parameters);
v2/src/cli/simple-commands/mcp-integration-layer.js:448:   * Generate cache key for tool execution
v2/src/cli/simple-commands/mcp-integration-layer.js:450:  generateCacheKey(toolName, parameters) {
v2/src/cli/simple-commands/mcp-integration-layer.js:451:    return `${toolName}_${JSON.stringify(parameters)}`;
v2/src/cli/simple-commands/mcp-integration-layer.js:455:   * Get cache TTL based on tool type
v2/src/cli/simple-commands/mcp-integration-layer.js:457:  getCacheTTL(toolName) {
v2/src/cli/simple-commands/mcp-integration-layer.js:458:    // Different tools have different cache lifetimes
v2/src/cli/simple-commands/mcp-integration-layer.js:474:    return ttlMap[toolName] || 60000; // Default 1 minute
v2/src/cli/simple-commands/mcp-integration-layer.js:490:   * Get tools by category
v2/src/cli/simple-commands/mcp-integration-layer.js:493:    return this.toolCategories[category] || [];
v2/src/cli/simple-commands/mcp-integration-layer.js:497:   * Get all available tool categories
v2/src/cli/simple-commands/mcp-integration-layer.js:500:    return Object.keys(this.toolCategories);
v2/src/cli/simple-commands/mcp-integration-layer.js:504:   * Get tool execution status
v2/src/cli/simple-commands/mcp-integration-layer.js:511:   * Cancel tool execution
v2/src/cli/simple-commands/mcp-integration-layer.js:517:      this.notifyUI('tool_cancelled', { executionId });
v2/src/cli/simple-commands/mcp-integration-layer.js:522:   * Start monitoring active tools
v2/src/cli/simple-commands/mcp-integration-layer.js:532:   * Update progress for running tools
v2/src/cli/simple-commands/mcp-integration-layer.js:539:        const estimatedDuration = this.getEstimatedDuration(execution.toolName);
v2/src/cli/simple-commands/mcp-integration-layer.js:546:   * Get estimated duration for tool execution
v2/src/cli/simple-commands/mcp-integration-layer.js:548:  getEstimatedDuration(toolName) {
v2/src/cli/simple-commands/mcp-integration-layer.js:556:    return durationMap[toolName] || 3000; // Default 3 seconds
v2/src/cli/simple-commands/mcp-integration-layer.js:575:    // Monitor system events that might affect tool execution
v2/src/cli/simple-commands/mcp-integration-layer.js:620:      case 'tool_start':
v2/src/cli/simple-commands/mcp-integration-layer.js:621:        return `Started ${data.toolName} (ID: ${data.executionId})`;
v2/src/cli/simple-commands/mcp-integration-layer.js:622:      case 'tool_complete':
v2/src/cli/simple-commands/mcp-integration-layer.js:623:        return `Completed ${data.toolName} successfully`;
v2/src/cli/simple-commands/mcp-integration-layer.js:624:      case 'tool_error':
v2/src/cli/simple-commands/mcp-integration-layer.js:625:        return `Failed ${data.toolName}: ${data.error}`;
v2/src/cli/simple-commands/mcp-integration-layer.js:626:      case 'tool_cancelled':
v2/src/cli/simple-commands/mcp-integration-layer.js:638:      case 'tool_complete':
v2/src/cli/simple-commands/mcp-integration-layer.js:640:      case 'tool_error':
v2/src/cli/simple-commands/mcp-integration-layer.js:642:      case 'tool_cancelled':
v2/src/cli/simple-commands/mcp-integration-layer.js:677:      totalTools: Object.values(this.toolCategories).flat().length,
v2/src/cli/simple-commands/mcp-integration-layer.js:689:export default MCPIntegrationLayer;
v2/src/cli/commands/task.ts:11:export const taskCommand = new Command()
v2/src/cli/command-registry.js:49:export const commandRegistry = new Map();
v2/src/cli/command-registry.js:52:export function registerCoreCommands() {
v2/src/cli/command-registry.js:53:  commandRegistry.set('init', {
v2/src/cli/command-registry.js:73:  commandRegistry.set('start', {
v2/src/cli/command-registry.js:80:      'start --port 8080        # Use custom MCP port',
v2/src/cli/command-registry.js:88:  commandRegistry.set('start-ui', {
v2/src/cli/command-registry.js:105:  commandRegistry.set('memory', {
v2/src/cli/command-registry.js:117:  commandRegistry.set('memory-consolidate', {
v2/src/cli/command-registry.js:143:  commandRegistry.set('sparc', {
v2/src/cli/command-registry.js:158:  commandRegistry.set('maestro', {
v2/src/cli/command-registry.js:178:  commandRegistry.set('agent', {
v2/src/cli/command-registry.js:187:      'agent mcp start --daemon                      # Start MCP server',
v2/src/cli/command-registry.js:195:  ‚Ä¢ MCP server management (213+ tools)
v2/src/cli/command-registry.js:208:  mcp          - MCP server management
v2/src/cli/command-registry.js:215:  commandRegistry.set('proxy', {
v2/src/cli/command-registry.js:254:  commandRegistry.set('task', {
v2/src/cli/command-registry.js:266:  commandRegistry.set('config', {
v2/src/cli/command-registry.js:278:  commandRegistry.set('status', {
v2/src/cli/command-registry.js:285:  commandRegistry.set('mcp', {
v2/src/cli/command-registry.js:287:    description: 'Manage MCP server and tools',
v2/src/cli/command-registry.js:289:    examples: ['mcp status', 'mcp start --port 8080', 'mcp tools --verbose', 'mcp auth setup'],
v2/src/cli/command-registry.js:292:  commandRegistry.set('monitor', {
v2/src/cli/command-registry.js:304:  commandRegistry.set('swarm', {
v2/src/cli/command-registry.js:316:  commandRegistry.set('hive-mind', {
v2/src/cli/command-registry.js:338:  ‚Ä¢ MCP tool integration for 87+ operations
v2/src/cli/command-registry.js:352:  commandRegistry.set('hive-mind-optimize', {
v2/src/cli/command-registry.js:386:  commandRegistry.set('swarm-metrics', {
v2/src/cli/command-registry.js:417:  commandRegistry.set('batch', {
v2/src/cli/command-registry.js:435:  ‚Ä¢ Configuration validation and estimation tools
v2/src/cli/command-registry.js:442:  commandRegistry.set('github', {
v2/src/cli/command-registry.js:470:  commandRegistry.set('training', {
v2/src/cli/command-registry.js:488:  commandRegistry.set('analysis', {
v2/src/cli/command-registry.js:506:  commandRegistry.set('automation', {
v2/src/cli/command-registry.js:534:  commandRegistry.set('coordination', {
v2/src/cli/command-registry.js:552:  commandRegistry.set('hooks', {
v2/src/cli/command-registry.js:572:  commandRegistry.set('hook-safety', {
v2/src/cli/command-registry.js:604:  commandRegistry.set('migrate-hooks', migrateHooksCommandConfig);
v2/src/cli/command-registry.js:606:  commandRegistry.set('fix-hook-variables', {
v2/src/cli/command-registry.js:612:  commandRegistry.set('verify', {
v2/src/cli/command-registry.js:652:  commandRegistry.set('truth', {
v2/src/cli/command-registry.js:685:  commandRegistry.set('neural', {
v2/src/cli/command-registry.js:701:  ‚Ä¢ Distributed neural training with MCP integration`,
v2/src/cli/command-registry.js:704:  commandRegistry.set('goal', {
v2/src/cli/command-registry.js:723:  commandRegistry.set('pair', {
v2/src/cli/command-registry.js:751:  commandRegistry.set('verify-train', {
v2/src/cli/command-registry.js:779:  commandRegistry.set('train-pipeline', {
v2/src/cli/command-registry.js:819:  commandRegistry.set('stream-chain', {
v2/src/cli/command-registry.js:871:  commandRegistry.set('hive', {
v2/src/cli/command-registry.js:929:  commandRegistry.set('ruv-swarm', {
v2/src/cli/command-registry.js:965:  commandRegistry.set('swarm-init', {
v2/src/cli/command-registry.js:979:  commandRegistry.set('neural-spawn', {
v2/src/cli/command-registry.js:993:  commandRegistry.set('memory-coordinate', {
v2/src/cli/command-registry.js:1007:  commandRegistry.set('config-integration', {
v2/src/cli/command-registry.js:1045:export function registerCommand(name, command) {
v2/src/cli/command-registry.js:1046:  if (commandRegistry.has(name)) {
v2/src/cli/command-registry.js:1050:  commandRegistry.set(name, {
v2/src/cli/command-registry.js:1061:  return commandRegistry.get(name);
v2/src/cli/command-registry.js:1064:// List all registered commands
v2/src/cli/command-registry.js:1066:  const commands = [];
v2/src/cli/command-registry.js:1067:  for (const [name, command] of commandRegistry.entries()) {
v2/src/cli/command-registry.js:1080:  return commandRegistry.has(name);
v2/src/cli/command-registry.js:1085:  const command = commandRegistry.get(name);
v2/src/cli/command-registry.js:1100:  const command = commandRegistry.get(name);
v2/src/cli/command-registry.js:1172:  const commands = listCommands();
v2/src/cli/command-registry.js:1186:registerCoreCommands();
v2/src/cli/help-text.js:15:  ‚Ä¢ Complete ruv-swarm integration with 90+ MCP tools
v2/src/cli/help-text.js:34:  mcp__flow-nexus__user_register         # Register for cloud features
v2/src/cli/help-text.js:96:  mcp <action>             MCP server management
v2/src/cli/help-text.js:100:üî• NEW MCP TOOLS (v2.5.0-alpha.130):
v2/src/cli/help-text.js:433:  Initialize Claude Flow v2.0.0 in your project with full MCP integration.
v2/src/cli/help-text.js:461:  ‚Ä¢ Integration with ruv-swarm MCP tools
v2/src/cli/help-text.js:467:  ‚Ä¢ Team collaboration tools
v2/src/cli/help-text.js:470:  ‚Ä¢ ruv-swarm integration with 27 MCP tools
v2/src/cli/help-text.js:501:  --port <port>    MCP server port (default: 3000)
v2/src/cli/help-text.js:509:  claude-flow start --port 8080          # Custom MCP port
v2/src/cli/help-text.js:533:  ‚Ä¢ MCP server status
v2/src/cli/help-text.js:595:  across agents with real ruv-swarm MCP integration for optimal performance.
v2/src/cli/help-text.js:807:        { name: 'mcp start', description: 'Start MCP server (NEW)' },
v2/src/mcp/orchestration-integration.ts:2: * MCP Integration with Claude-Flow Orchestration System
v2/src/mcp/orchestration-integration.ts:3: * Provides seamless integration between MCP servers and the broader orchestration components
v2/src/mcp/orchestration-integration.ts:8:import { MCPConfig, MCPSession, MCPTool, SystemEvents } from '../utils/types.js';
v2/src/mcp/orchestration-integration.ts:9:import { MCPError } from '../utils/errors.js';
v2/src/mcp/orchestration-integration.ts:10:import { MCPServer, IMCPServer } from './server.js';
v2/src/mcp/orchestration-integration.ts:11:import { MCPLifecycleManager, LifecycleState } from './lifecycle-manager.js';
v2/src/mcp/orchestration-integration.ts:12:import { MCPPerformanceMonitor } from './performance-monitor.js';
v2/src/mcp/orchestration-integration.ts:13:import { MCPProtocolManager } from './protocol-manager.js';
v2/src/mcp/orchestration-integration.ts:27:export interface MCPOrchestrationConfig {
v2/src/mcp/orchestration-integration.ts:56: * MCP Orchestration Integration Manager
v2/src/mcp/orchestration-integration.ts:57: * Manages the integration between MCP servers and orchestration components
v2/src/mcp/orchestration-integration.ts:59:export class MCPOrchestrationIntegration extends EventEmitter {
v2/src/mcp/orchestration-integration.ts:60:  private server?: IMCPServer;
v2/src/mcp/orchestration-integration.ts:61:  private lifecycleManager?: MCPLifecycleManager;
v2/src/mcp/orchestration-integration.ts:62:  private performanceMonitor?: MCPPerformanceMonitor;
v2/src/mcp/orchestration-integration.ts:63:  private protocolManager?: MCPProtocolManager;
v2/src/mcp/orchestration-integration.ts:69:  private readonly defaultConfig: MCPOrchestrationConfig = {
v2/src/mcp/orchestration-integration.ts:88:    private mcpConfig: MCPConfig,
v2/src/mcp/orchestration-integration.ts:89:    private orchestrationConfig: MCPOrchestrationConfig,
v2/src/mcp/orchestration-integration.ts:100:   * Start the MCP orchestration integration
v2/src/mcp/orchestration-integration.ts:103:    this.logger.info('Starting MCP orchestration integration');
v2/src/mcp/orchestration-integration.ts:107:      this.protocolManager = new MCPProtocolManager(this.logger);
v2/src/mcp/orchestration-integration.ts:111:        this.performanceMonitor = new MCPPerformanceMonitor(this.logger);
v2/src/mcp/orchestration-integration.ts:115:      // Create MCP server
v2/src/mcp/orchestration-integration.ts:116:      this.server = new MCPServer(
v2/src/mcp/orchestration-integration.ts:129:      this.lifecycleManager = new MCPLifecycleManager(
v2/src/mcp/orchestration-integration.ts:138:      // Register orchestration tools
v2/src/mcp/orchestration-integration.ts:139:      this.registerOrchestrationTools();
v2/src/mcp/orchestration-integration.ts:152:      this.logger.info('MCP orchestration integration started successfully');
v2/src/mcp/orchestration-integration.ts:155:      this.logger.error('Failed to start MCP orchestration integration', error);
v2/src/mcp/orchestration-integration.ts:161:   * Stop the MCP orchestration integration
v2/src/mcp/orchestration-integration.ts:164:    this.logger.info('Stopping MCP orchestration integration');
v2/src/mcp/orchestration-integration.ts:186:      this.logger.info('MCP orchestration integration stopped');
v2/src/mcp/orchestration-integration.ts:189:      this.logger.error('Error stopping MCP orchestration integration', error);
v2/src/mcp/orchestration-integration.ts:209:   * Get MCP server instance
v2/src/mcp/orchestration-integration.ts:211:  getServer(): IMCPServer | undefined {
v2/src/mcp/orchestration-integration.ts:218:  getLifecycleManager(): MCPLifecycleManager | undefined {
v2/src/mcp/orchestration-integration.ts:225:  getPerformanceMonitor(): MCPPerformanceMonitor | undefined {
v2/src/mcp/orchestration-integration.ts:232:  getProtocolManager(): MCPProtocolManager | undefined {
v2/src/mcp/orchestration-integration.ts:242:      throw new MCPError(`Component ${component} is not enabled`);
v2/src/mcp/orchestration-integration.ts:262:      throw new MCPError(`Unknown component: ${component}`);
v2/src/mcp/orchestration-integration.ts:306:      this.logger.info('MCP server state changed', {
v2/src/mcp/orchestration-integration.ts:338:      this.logger.warn('MCP performance alert triggered', {
v2/src/mcp/orchestration-integration.ts:361:      this.logger.info('MCP optimization suggestion', {
v2/src/mcp/orchestration-integration.ts:371:  private registerOrchestrationTools(): void {
v2/src/mcp/orchestration-integration.ts:374:    // Register orchestrator tools
v2/src/mcp/orchestration-integration.ts:376:      this.registerOrchestratorTools();
v2/src/mcp/orchestration-integration.ts:379:    // Register swarm tools
v2/src/mcp/orchestration-integration.ts:381:      this.registerSwarmTools();
v2/src/mcp/orchestration-integration.ts:384:    // Register agent tools
v2/src/mcp/orchestration-integration.ts:386:      this.registerAgentTools();
v2/src/mcp/orchestration-integration.ts:389:    // Register resource tools
v2/src/mcp/orchestration-integration.ts:391:      this.registerResourceTools();
v2/src/mcp/orchestration-integration.ts:394:    // Register memory tools
v2/src/mcp/orchestration-integration.ts:396:      this.registerMemoryTools();
v2/src/mcp/orchestration-integration.ts:399:    // Register monitoring tools
v2/src/mcp/orchestration-integration.ts:401:      this.registerMonitoringTools();
v2/src/mcp/orchestration-integration.ts:404:    // Register terminal tools
v2/src/mcp/orchestration-integration.ts:406:      this.registerTerminalTools();
v2/src/mcp/orchestration-integration.ts:410:  private registerOrchestratorTools(): void {
v2/src/mcp/orchestration-integration.ts:411:    const tools: MCPTool[] = [
v2/src/mcp/orchestration-integration.ts:420:          throw new MCPError('Orchestrator status not available');
v2/src/mcp/orchestration-integration.ts:437:          throw new MCPError('Orchestrator task listing not available');
v2/src/mcp/orchestration-integration.ts:442:    for (const tool of tools) {
v2/src/mcp/orchestration-integration.ts:443:      this.server!.registerTool(tool);
v2/src/mcp/orchestration-integration.ts:447:  private registerSwarmTools(): void {
v2/src/mcp/orchestration-integration.ts:448:    const tools: MCPTool[] = [
v2/src/mcp/orchestration-integration.ts:457:          throw new MCPError('Swarm coordinator status not available');
v2/src/mcp/orchestration-integration.ts:468:          throw new MCPError('Swarm agent listing not available');
v2/src/mcp/orchestration-integration.ts:473:    for (const tool of tools) {
v2/src/mcp/orchestration-integration.ts:474:      this.server!.registerTool(tool);
v2/src/mcp/orchestration-integration.ts:478:  private registerAgentTools(): void {
v2/src/mcp/orchestration-integration.ts:479:    const tools: MCPTool[] = [
v2/src/mcp/orchestration-integration.ts:488:          throw new MCPError('Agent listing not available');
v2/src/mcp/orchestration-integration.ts:506:          throw new MCPError('Agent spawning not available');
v2/src/mcp/orchestration-integration.ts:511:    for (const tool of tools) {
v2/src/mcp/orchestration-integration.ts:512:      this.server!.registerTool(tool);
v2/src/mcp/orchestration-integration.ts:516:  private registerResourceTools(): void {
v2/src/mcp/orchestration-integration.ts:517:    const tools: MCPTool[] = [
v2/src/mcp/orchestration-integration.ts:526:          throw new MCPError('Resource listing not available');
v2/src/mcp/orchestration-integration.ts:537:          throw new MCPError('Resource manager status not available');
v2/src/mcp/orchestration-integration.ts:542:    for (const tool of tools) {
v2/src/mcp/orchestration-integration.ts:543:      this.server!.registerTool(tool);
v2/src/mcp/orchestration-integration.ts:547:  private registerMemoryTools(): void {
v2/src/mcp/orchestration-integration.ts:548:    const tools: MCPTool[] = [
v2/src/mcp/orchestration-integration.ts:565:          throw new MCPError('Memory query not available');
v2/src/mcp/orchestration-integration.ts:584:          throw new MCPError('Memory storage not available');
v2/src/mcp/orchestration-integration.ts:589:    for (const tool of tools) {
v2/src/mcp/orchestration-integration.ts:590:      this.server!.registerTool(tool);
v2/src/mcp/orchestration-integration.ts:594:  private registerMonitoringTools(): void {
v2/src/mcp/orchestration-integration.ts:595:    const tools: MCPTool[] = [
v2/src/mcp/orchestration-integration.ts:604:          throw new MCPError('Monitoring metrics not available');
v2/src/mcp/orchestration-integration.ts:615:          throw new MCPError('Alert listing not available');
v2/src/mcp/orchestration-integration.ts:620:    for (const tool of tools) {
v2/src/mcp/orchestration-integration.ts:621:      this.server!.registerTool(tool);
v2/src/mcp/orchestration-integration.ts:625:  private registerTerminalTools(): void {
v2/src/mcp/orchestration-integration.ts:626:    const tools: MCPTool[] = [
v2/src/mcp/orchestration-integration.ts:635:          throw new MCPError('Terminal session listing not available');
v2/src/mcp/orchestration-integration.ts:653:          throw new MCPError('Terminal execution not available');
v2/src/mcp/orchestration-integration.ts:658:    for (const tool of tools) {
v2/src/mcp/orchestration-integration.ts:659:      this.server!.registerTool(tool);
v2/src/mcp/orchestration-integration.ts:830:      throw new MCPError('Orchestrator component not available');
v2/src/mcp/orchestration-integration.ts:837:      throw new MCPError('Swarm coordinator component not available');
v2/src/mcp/orchestration-integration.ts:844:      throw new MCPError('Agent manager component not available');
v2/src/mcp/orchestration-integration.ts:851:      throw new MCPError('Resource manager component not available');
v2/src/mcp/orchestration-integration.ts:858:      throw new MCPError('Memory manager component not available');
v2/src/mcp/orchestration-integration.ts:865:      throw new MCPError('Monitor component not available');
v2/src/mcp/orchestration-integration.ts:872:      throw new MCPError('Terminal manager component not available');
v2/src/cli/simple-orchestrator.ts:36:// Simple MCP server
v2/src/cli/simple-orchestrator.ts:37:function startMCPServer(port: number) {
v2/src/cli/simple-orchestrator.ts:38:  console.log(`üåê Starting MCP server on port ${port}...`);
v2/src/cli/simple-orchestrator.ts:39:  // In a real implementation, this would start the actual MCP server
v2/src/cli/simple-orchestrator.ts:412:                    const commands = ['help', 'status', 'agent', 'task', 'memory', 'config', 'start', 'stop'];
v2/src/cli/simple-orchestrator.ts:681:‚Ä¢ MCP Server: <span class="${componentStatus.mcpServer ? 'success' : 'error'}">${componentStatus.mcpServer ? 'Active' : 'Inactive'}</span>
v2/src/cli/simple-orchestrator.ts:845:  // Start MCP Server
v2/src/cli/simple-orchestrator.ts:847:  startMCPServer(mcpPort);
v2/src/cli/simple-orchestrator.ts:848:  console.log('‚úÖ MCP Server started');
v2/src/cli/simple-orchestrator.ts:877:  console.log('   ‚Ä¢ MCP Server: Active');
v2/src/cli/commands/ruv-swarm.ts:13:import { isRuvSwarmAvailable, initializeRuvSwarmIntegration } from '../../mcp/ruv-swarm-tools.js';
v2/src/cli/commands/ruv-swarm.ts:407:    console.log('Neural subcommands:');
v2/src/cli/commands/ruv-swarm.ts:498:    console.log('Config subcommands:');
v2/src/cli/init/batch-tools.ts:1:// init/batch-tools.ts - Batch tools coordination guides
v2/src/cli/init/batch-tools.ts:11:This guide explains how to use Claude Code's batch tools effectively for swarm orchestration and parallel task execution.
v2/src/cli/init/batch-tools.ts:384:This guide provides the foundation for effective batch tool coordination in Claude-Flow swarm operations.
v2/src/cli/init/batch-tools.ts:387:  await fs.writeFile(path.join(batchToolsDir, 'batch-tools-guide.md'), batchToolsGuide);
v2/src/cli/init/batch-tools.ts:388:  console.log('  ‚úÖ Created batch-tools-guide.md');
v2/src/cli/maestro-cli-bridge.ts:393:    const mockMCPServer = {} as any;
v2/src/cli/maestro-cli-bridge.ts:400:      mockMCPServer,
v2/src/cli/swarm-standalone.js:164:Use all available tools including file operations, web search, and code execution as needed.`;
v2/src/cli/commands/verification.ts:23: * Main verification command that provides subcommands
v2/src/cli/commands/verification.ts:247:    subcommands: {
v2/src/cli/commands/verification.ts:309: * Integration function for registering commands with CLI framework
v2/src/cli/commands/verification.ts:311:export function registerVerificationCommands(commandRegistry: any): void {
v2/src/cli/commands/verification.ts:314:    commandRegistry.register({
v2/src/cli/commands/verification.ts:326:    commandRegistry.register({
v2/src/cli/commands/verification.ts:336:    logger.info('Verification commands registered successfully');
v2/src/cli/commands/verification.ts:338:    logger.error('Failed to register verification commands:', error);
v2/src/cli/commands/verification.ts:348:  register: registerVerificationCommands,
v2/src/mcp/server-with-wrapper.ts:3: * MCP Server entry point that uses the wrapper by default
v2/src/mcp/server-with-wrapper.ts:6:import { ClaudeCodeMCPWrapper } from './claude-code-wrapper.js';
v2/src/mcp/server-with-wrapper.ts:10:  process.env.CLAUDE_FLOW_LEGACY_MCP === 'true' || process.argv.includes('--legacy');
v2/src/mcp/server-with-wrapper.ts:14:    console.error('Starting Claude-Flow MCP in legacy mode...');
v2/src/mcp/server-with-wrapper.ts:17:    if (module.runMCPServer) {
v2/src/mcp/server-with-wrapper.ts:18:      await module.runMCPServer();
v2/src/mcp/server-with-wrapper.ts:22:      console.error('Could not find runMCPServer function in legacy server');
v2/src/mcp/server-with-wrapper.ts:26:    console.error('Starting Claude-Flow MCP with Claude Code wrapper...');
v2/src/mcp/server-with-wrapper.ts:27:    const wrapper = new ClaudeCodeMCPWrapper();
v2/src/cli/ui/compatible-ui.ts:387:      name: 'MCP Server',
v2/src/cli/init/index.ts:7:import { createBatchToolsGuide } from './batch-tools.js';
v2/src/cli/init/index.ts:46:        // Phase 4: Create batch tools guides
v2/src/cli/init/index.ts:47:        console.log('\nüîß Phase 4: Creating batch tools guides...');
v2/src/cli/init/index.ts:60:        console.log('   üîß Created batch tools coordination guides');
v2/src/cli/init/index.ts:66:        console.log('   3. Review batch tools guide for orchestration patterns');
v2/src/cli/init/index.ts:72:          console.log('   7. Use Task tool for parallel agent execution');
v2/src/cli/commands/checkpoint.ts:13:export const checkpointCommand = new Command()
v2/src/__tests__/permission-manager.test.ts:41:    toolName: 'test-tool',
v2/src/__tests__/permission-manager.test.ts:42:    toolInput: {},
v2/src/__tests__/permission-manager.test.ts:102:        rules: [{ toolName: 'test-tool' }],
v2/src/__tests__/permission-manager.test.ts:107:      const query = createMockQuery({ toolName: 'test-tool' });
v2/src/__tests__/permission-manager.test.ts:117:        rules: [{ toolName: 'test-tool' }],
v2/src/__tests__/permission-manager.test.ts:122:      const query = createMockQuery({ toolName: 'test-tool' });
v2/src/__tests__/permission-manager.test.ts:132:        rules: [{ toolName: 'test-tool' }],
v2/src/__tests__/permission-manager.test.ts:137:      const query = createMockQuery({ toolName: 'test-tool' });
v2/src/__tests__/permission-manager.test.ts:146:      const query = createMockQuery({ toolName: 'unknown-tool' });
v2/src/__tests__/permission-manager.test.ts:157:            toolName: 'test-tool',
v2/src/__tests__/permission-manager.test.ts:164:            toolName: 'test-tool',
v2/src/__tests__/permission-manager.test.ts:173:      const query = createMockQuery({ toolName: 'test-tool' });
v2/src/__tests__/permission-manager.test.ts:185:          { toolName: 'tool-1' },
v2/src/__tests__/permission-manager.test.ts:186:          { toolName: 'tool-2' },
v2/src/__tests__/permission-manager.test.ts:201:          { toolName: 'tool-1' },
v2/src/__tests__/permission-manager.test.ts:202:          { toolName: 'tool-2' },
v2/src/__tests__/permission-manager.test.ts:211:        rules: [{ toolName: 'tool-3' }],
v2/src/__tests__/permission-manager.test.ts:218:      expect(config?.rules[0].toolName).toBe('tool-3');
v2/src/__tests__/permission-manager.test.ts:226:          { toolName: 'tool-1' },
v2/src/__tests__/permission-manager.test.ts:227:          { toolName: 'tool-2' },
v2/src/__tests__/permission-manager.test.ts:236:        rules: [{ toolName: 'tool-1' }],
v2/src/__tests__/permission-manager.test.ts:243:      expect(config?.rules[0].toolName).toBe('tool-2');
v2/src/__tests__/permission-manager.test.ts:290:      const query = createMockQuery({ toolName: 'test-tool' });
v2/src/__tests__/permission-manager.test.ts:299:        rules: [{ toolName: 'test-tool' }],
v2/src/__tests__/permission-manager.test.ts:310:      const query = createMockQuery({ toolName: 'test-tool' });
v2/src/__tests__/permission-manager.test.ts:323:      const query1 = createMockQuery({ toolName: 'tool-1' });
v2/src/__tests__/permission-manager.test.ts:324:      const query2 = createMockQuery({ toolName: 'tool-2' });
v2/src/__tests__/permission-manager.test.ts:342:      const query = createMockQuery({ toolName: 'test-tool' });
v2/src/__tests__/permission-manager.test.ts:354:    it('should match exact tool names', async () => {
v2/src/__tests__/permission-manager.test.ts:357:        rules: [{ toolName: 'exact-match' }],
v2/src/__tests__/permission-manager.test.ts:362:      const query = createMockQuery({ toolName: 'exact-match' });
v2/src/__tests__/permission-manager.test.ts:371:        rules: [{ toolName: '*' }],
v2/src/__tests__/permission-manager.test.ts:376:      const query = createMockQuery({ toolName: 'any-tool' });
v2/src/__tests__/permission-manager.test.ts:385:        rules: [{ toolName: 'test-*' }],
v2/src/__tests__/permission-manager.test.ts:390:      const query = createMockQuery({ toolName: 'test-something' });
v2/src/__tests__/permission-manager.test.ts:405:      const query = createMockQuery({ toolName: 'any-tool' });
v2/src/__tests__/permission-manager.test.ts:416:        rules: [{ toolName: 'test-tool' }],
v2/src/__tests__/permission-manager.test.ts:421:      const query = createMockQuery({ toolName: 'test-tool' });
v2/src/__tests__/permission-manager.test.ts:430:        rules: [{ toolName: 'test-tool' }],
v2/src/__tests__/permission-manager.test.ts:435:      const query = createMockQuery({ toolName: 'test-tool' });
v2/src/__tests__/permission-manager.test.ts:477:      rules: [{ toolName: 'singleton-test' }],
v2/src/__tests__/permission-manager.test.ts:483:    expect(config?.rules.some(r => r.toolName === 'singleton-test')).toBe(true);
v2/src/cli/commands/hive.ts:92:    const queenId = await coordinator.registerAgent('Queen-Genesis', 'coordinator', [
v2/src/cli/commands/hive.ts:150:    const agentId = await coordinator.registerAgent(
v2/src/cli/init/swarm-commands.ts:38:Multi-agent research coordination with distributed intelligence gathering using batch tools.
v2/src/cli/cli-core.ts:22:  subcommands?: Command[];
v2/src/cli/cli-core.ts:262:    const commands = Array.from(new Set(this.commands.values()));
v2/src/cli/cli-core.ts:308:    // Import and register all commands
v2/src/cli/simple-cli.js:68:üéØ ENTERPRISE FEATURES: Complete ruv-swarm integration with 90+ MCP tools, neural networking, and production-ready infrastructure
v2/src/cli/simple-cli.js:78:  ‚Ä¢ Complete ruv-swarm integration with 27 MCP tools
v2/src/cli/simple-cli.js:148:  ‚Ä¢ 27 MCP tools for comprehensive workflow automation
v2/src/cli/simple-cli.js:159:  ‚Ä¢ Sub-10ms MCP response times
v2/src/cli/simple-cli.js:211:  const commands = listCommands();
v2/src/cli/simple-cli.js:316:  // Check if this is a registered modular command
v2/src/cli/simple-cli.js:339:      console.log('üåê MCP Server: Stopped');
v2/src/cli/simple-cli.js:495:            const commands = subArgs[commandsFlag + 1].split(',');
v2/src/cli/simple-cli.js:1243:              console.log('   ‚úì MCP server deployment');
v2/src/cli/simple-cli.js:1328:            if (arg === '--tools' || arg === '-t') {
v2/src/cli/simple-cli.js:1329:              flags.tools = subArgs[++i];
v2/src/cli/simple-cli.js:1351:          // Build tools list
v2/src/cli/simple-cli.js:1352:          let tools = flags.tools || 'View,Edit,Replace,GlobTool,GrepTool,LS,Bash';
v2/src/cli/simple-cli.js:1354:            tools += ',BatchTool,dispatch_agent';
v2/src/cli/simple-cli.js:1357:            tools += ',WebFetchTool';
v2/src/cli/simple-cli.js:1364:            console.log(`Command: claude "<enhanced task with guidance>" --allowedTools ${tools}`);
v2/src/cli/simple-cli.js:1367:            console.log(`Tools: ${tools}`);
v2/src/cli/simple-cli.js:1374:            console.log(`  - Access Claude-Flow features through Bash tool`);
v2/src/cli/simple-cli.js:1378:            console.log(`üîß Tools: ${tools}`);
v2/src/cli/simple-cli.js:1406:${flags.config ? `- MCP Config: ${flags.config}` : ''}
v2/src/cli/simple-cli.js:1409:- You have access to these tools: ${tools}
v2/src/cli/simple-cli.js:1410:${flags.tools ? `- Custom tools specified: ${flags.tools}` : ''}
v2/src/cli/simple-cli.js:1440:   **Research Mode**: Web research tools are available for information gathering.`;
v2/src/cli/simple-cli.js:1450:   - Use appropriate tools and practices for the technology stack
v2/src/cli/simple-cli.js:1469:   ${flags.research ? '   - Research tools are available if needed' : ''}
v2/src/cli/simple-cli.js:1475:Begin working on your task. The orchestration features are available as tools to help you be more effective, but your primary focus should be on delivering the requested functionality.
v2/src/cli/simple-cli.js:1491:Remember: These are optional tools. Use them when they add value to your development process.
v2/src/cli/simple-cli.js:1502:            claudeArgs.push('--allowedTools', tools);
v2/src/cli/simple-cli.js:2744:- Tools: [Development tools]
v2/src/cli/simple-cli.js:3282:- Use TypeScript for type safety and better tooling
v2/src/cli/simple-cli.js:3388:- **Tool access**: Verify required tools are available for the selected mode
v2/src/cli/commands/swarm-new.ts.disabled:21:  let swarmPrompt = `You are orchestrating a Claude Flow Swarm with advanced MCP tool coordination.
v2/src/cli/commands/swarm-new.ts.disabled:180:MCP TOOL PATTERN:
v2/src/cli/commands/swarm-new.ts.disabled:257:üîß AVAILABLE MCP TOOLS FOR SWARM COORDINATION:
v2/src/cli/commands/swarm-new.ts.disabled:350:ü§ù AGENT TYPES & THEIR MCP TOOL USAGE:
v2/src/cli/commands/swarm-new.ts.disabled:353:- Primary tools: swarm_monitor, agent_assign, task_create
v2/src/cli/commands/swarm-new.ts.disabled:358:- Primary tools: memory_search, memory_store
v2/src/cli/commands/swarm-new.ts.disabled:363:- Primary tools: task_update, memory_retrieve, memory_store
v2/src/cli/commands/swarm-new.ts.disabled:368:- Primary tools: memory_search, swarm_monitor
v2/src/cli/commands/swarm-new.ts.disabled:373:- Primary tools: task_status, agent_communicate
v2/src/cli/commands/swarm-new.ts.disabled:377:üìù EXAMPLE MCP TOOL USAGE PATTERNS:
v2/src/cli/commands/swarm-new.ts.disabled:410:Start by spawning a coordinator agent and creating the initial task structure. Use the MCP tools to orchestrate the swarm, coordinate agents, and track progress. Remember to store important decisions and artifacts in collective memory for other agents to access.
v2/src/cli/commands/swarm-new.ts.disabled:650:      const agentId = await coordinator.registerAgent(
v2/src/cli/commands/swarm-new.ts.disabled:941:        tools: ['git', 'npm', 'deno'],
v2/src/cli/commands/swarm-new.ts.disabled:961:        tools: ['git', 'npm', 'deno', 'docker'],
v2/src/cli/commands/swarm-new.ts.disabled:981:        tools: ['browser', 'search-engines'],
v2/src/cli/commands/swarm-new.ts.disabled:1001:        tools: ['jupyter', 'data-tools'],
v2/src/cli/commands/swarm-new.ts.disabled:1021:        tools: ['test-runners', 'coverage-tools'],
v2/src/cli/commands/swarm-new.ts.disabled:1041:        tools: ['static-analysis', 'linters'],
v2/src/swarm/coordinator.ts:343:  async registerAgent(
v2/src/swarm/coordinator.ts:375:        tools: [],
v2/src/swarm/coordinator.ts:426:        toolConfigs: {},
v2/src/swarm/coordinator.ts:467:  async unregisterAgent(agentId: string): Promise<void> {
v2/src/swarm/coordinator.ts:473:    this.logger.info('Unregistering agent', { agentId, name: agent.name });
v2/src/swarm/coordinator.ts:622:        tools: this.getRequiredTools(type),
v2/src/swarm/coordinator.ts:1109:          caps.tools.includes(capability)
v2/src/swarm/coordinator.ts:1776:        tools: this.getRequiredTools(type),
v2/src/swarm/coordinator.ts:2221:        return ['test-runner', 'coverage-tool'];
v2/src/swarm/coordinator.ts:2225:        return ['data-tools', 'visualization'];
v2/src/swarm/coordinator.ts:2472:    const tools = new Set<string>();
v2/src/swarm/coordinator.ts:2474:    // Basic tools for all tasks
v2/src/swarm/coordinator.ts:2475:    tools.add('View');
v2/src/swarm/coordinator.ts:2476:    tools.add('Edit');
v2/src/swarm/coordinator.ts:2477:    tools.add('Bash');
v2/src/swarm/coordinator.ts:2479:    // Add tools based on task type
v2/src/swarm/coordinator.ts:2482:        tools.add('Create');
v2/src/swarm/coordinator.ts:2483:        tools.add('Write');
v2/src/swarm/coordinator.ts:2484:        tools.add('MultiEdit');
v2/src/swarm/coordinator.ts:2485:        tools.add('Test');
v2/src/swarm/coordinator.ts:2488:        tools.add('Test');
v2/src/swarm/coordinator.ts:2489:        tools.add('View');
v2/src/swarm/coordinator.ts:2492:        tools.add('Write');
v2/src/swarm/coordinator.ts:2493:        tools.add('Create');
v2/src/swarm/coordinator.ts:2496:        tools.add('Analyze');
v2/src/swarm/coordinator.ts:2497:        tools.add('Search');
v2/src/swarm/coordinator.ts:2500:        tools.add('WebSearch');
v2/src/swarm/coordinator.ts:2501:        tools.add('Search');
v2/src/swarm/coordinator.ts:2505:    // Add tools based on agent capabilities
v2/src/swarm/coordinator.ts:2507:      tools.add('FileSystem');
v2/src/swarm/coordinator.ts:2510:      tools.add('Terminal');
v2/src/swarm/coordinator.ts:2513:      tools.add('WebSearch');
v2/src/swarm/coordinator.ts:2516:      tools.add('API');
v2/src/swarm/coordinator.ts:2519:    return Array.from(tools);
v2/src/cli/commands/config.ts:10:export const configCommand = new Command('config').description('Configuration management commands');
v2/src/cli/init/sparc-environment.ts:10:  // Create comprehensive CLAUDE.md with batch tools integration
v2/src/cli/init/sparc-environment.ts:13:  console.log('  ‚úÖ Created CLAUDE.md with batch tools and swarm orchestration');
v2/src/cli/init/sparc-environment.ts:15:  console.log('  ‚úÖ SPARC environment configured with batch tools integration');
v2/src/cli/init/sparc-environment.ts:23:        'SPARC: orchestrator\\nYou are an AI orchestrator coordinating multiple specialized agents to complete complex tasks efficiently using TodoWrite, TodoRead, Task, and Memory tools.',
v2/src/cli/init/sparc-environment.ts:24:      tools: ['TodoWrite', 'TodoRead', 'Task', 'Memory', 'Bash'],
v2/src/cli/init/sparc-environment.ts:30:      tools: ['Read', 'Write', 'Edit', 'Bash', 'Glob', 'Grep', 'TodoWrite'],
v2/src/cli/init/sparc-environment.ts:36:      tools: ['WebSearch', 'WebFetch', 'Read', 'Write', 'Memory', 'TodoWrite', 'Task'],
v2/src/cli/init/sparc-environment.ts:42:      tools: ['Read', 'Write', 'Edit', 'Bash', 'TodoWrite', 'Task'],
v2/src/cli/init/sparc-environment.ts:48:      tools: ['Read', 'Write', 'Glob', 'Memory', 'TodoWrite', 'Task'],
v2/src/cli/init/sparc-environment.ts:54:      tools: ['Read', 'Edit', 'Grep', 'Bash', 'TodoWrite', 'Memory'],
v2/src/cli/init/sparc-environment.ts:60:      tools: ['Read', 'Edit', 'Bash', 'Grep', 'TodoWrite', 'Memory'],
v2/src/cli/init/sparc-environment.ts:66:      tools: ['Read', 'Write', 'Edit', 'Bash', 'TodoWrite', 'Task'],
v2/src/cli/init/sparc-environment.ts:72:      tools: ['Read', 'Grep', 'Bash', 'Write', 'Memory', 'TodoWrite', 'Task'],
v2/src/cli/init/sparc-environment.ts:78:      tools: ['Read', 'Edit', 'Bash', 'Grep', 'TodoWrite', 'Memory'],
v2/src/cli/init/sparc-environment.ts:84:      tools: ['Read', 'Write', 'Glob', 'Memory', 'TodoWrite'],
v2/src/cli/init/sparc-environment.ts:90:      tools: ['Read', 'Write', 'Edit', 'Memory', 'TodoWrite'],
v2/src/cli/init/sparc-environment.ts:96:      tools: ['Read', 'Write', 'WebSearch', 'Memory', 'TodoWrite', 'Task'],
v2/src/cli/init/sparc-environment.ts:102:      tools: ['TodoWrite', 'TodoRead', 'Task', 'Memory', 'Bash'],
v2/src/cli/init/sparc-environment.ts:107:        'SPARC: memory-manager\\nYou manage knowledge and memory systems using Memory tools for persistent storage and TodoWrite for knowledge organization.',
v2/src/cli/init/sparc-environment.ts:108:      tools: ['Memory', 'Read', 'Write', 'TodoWrite', 'TodoRead'],
v2/src/cli/init/sparc-environment.ts:113:        'SPARC: batch-executor\\nYou excel at executing multiple tasks in parallel using batch tool operations and Task coordination for maximum efficiency.',
v2/src/cli/init/sparc-environment.ts:114:      tools: ['Task', 'Bash', 'Read', 'Write', 'TodoWrite', 'Memory'],
v2/src/cli/init/sparc-environment.ts:120:      tools: ['TodoWrite', 'TodoRead', 'Task', 'Bash', 'Memory'],
v2/src/cli/init/sparc-environment.ts:129:This CLAUDE.md file configures Claude Code to help you BUILD YOUR OWN APPLICATIONS using the claude-flow orchestration system. Claude-flow is a tool to help you develop software - it is NOT the project you should be modifying.
v2/src/cli/init/sparc-environment.ts:134:- Focus on YOUR PROJECT'S code, not the orchestration tool
v2/src/cli/init/sparc-environment.ts:153:Claude-flow provides powerful AI orchestration tools to accelerate YOUR application development. Use these commands to build YOUR project:
v2/src/cli/init/sparc-environment.ts:283:./claude-flow memory store "app_type" "SaaS project management tool"
v2/src/cli/init/sparc-environment.ts:288:./claude-flow sparc run architect "Design scalable SaaS architecture for project management tool"
v2/src/mcp/fixes/mcp-error-fixes.js:2: * MCP Error Fixes
v2/src/mcp/fixes/mcp-error-fixes.js:102:// Wrapper function to handle ruv-swarm MCP responses
v2/src/mcp/fixes/mcp-error-fixes.js:103:export function wrapRuvSwarmResponse(toolName, response) {
v2/src/mcp/fixes/mcp-error-fixes.js:116:    // Apply specific fixes based on tool name
v2/src/mcp/fixes/mcp-error-fixes.js:117:    switch (toolName) {
v2/src/mcp/fixes/mcp-error-fixes.js:135:    console.error(`Error wrapping response for ${toolName}:`, error);
v2/src/mcp/fixes/mcp-error-fixes.js:144:// Export for use in MCP server
v2/src/cli/commands/neural-goal-init.js:15:export async function registerNeuralGoalCommands(program) {
v2/src/cli/commands/neural-goal-init.js:69:## MCP Integration
v2/src/cli/commands/neural-goal-init.js:136:## MCP Integration
v2/src/cli/commands/neural-goal-init.js:187:export default { registerNeuralGoalCommands };
v2/src/cli/commands/monitor.ts:30:export const monitorCommand = new Command()
v2/src/cli/commands/monitor.ts:454:      { type: 'network_event', message: 'MCP connection established', level: 'info' as const },
v2/src/__tests__/session-forking.test.ts:60:            tools: [],
v2/src/__tests__/session-forking.test.ts:73:            parent_tool_use_id: null,
v2/src/__tests__/session-forking.test.ts:127:            tools: [],
v2/src/__tests__/session-forking.test.ts:173:              tools: [],
v2/src/__tests__/session-forking.test.ts:209:            tools: [],
v2/src/__tests__/session-forking.test.ts:248:            tools: [],
v2/src/__tests__/session-forking.test.ts:290:    it('should register a query for control', () => {
v2/src/__tests__/session-forking.test.ts:299:      const controlled = controller.registerQuery('query-1', 'agent-1', mockQuery);
v2/src/__tests__/session-forking.test.ts:316:      controller.registerQuery('query-1', 'agent-1', mockQuery);
v2/src/__tests__/session-forking.test.ts:335:      controller.registerQuery('query-1', 'agent-1', mockQuery);
v2/src/__tests__/session-forking.test.ts:354:      controller.registerQuery('query-1', 'agent-1', mockQuery);
v2/src/__tests__/session-forking.test.ts:373:      controller.registerQuery('query-1', 'agent-1', mockQuery);
v2/src/__tests__/session-forking.test.ts:391:      controller.registerQuery('query-1', 'agent-1', mockQuery);
v2/src/__tests__/session-forking.test.ts:411:      controller.registerQuery('query-1', 'agent-1', mockQuery);
v2/src/__tests__/session-forking.test.ts:434:      controller.registerQuery('query-1', 'agent-1', mockQuery);
v2/src/__tests__/session-forking.test.ts:456:      controller.registerQuery('query-1', 'agent-1', mockQuery);
v2/src/cli/init/claude-config.ts:52:  console.log('  ‚úÖ Created .claude/config.json with batch tools configuration');
v2/src/cli/init/claude-config.ts:65:    description: 'Batch tools configuration for Claude Code orchestration',
v2/src/cli/init/claude-config.ts:66:    tools: {
v2/src/cli/init/claude-config.ts:142:  await fs.writeFile('.claude/configs/batch-tools.json', JSON.stringify(batchConfig, null, 2));
v2/src/cli/init/claude-config.ts:143:  console.log('  ‚úÖ Created batch tools configuration');
v2/src/cli/init/claude-config.ts:158:        tools: ['WebSearch', 'WebFetch', 'Memory', 'TodoWrite', 'Task'],
v2/src/cli/init/claude-config.ts:166:        tools: ['Read', 'Write', 'Edit', 'Bash', 'Memory', 'TodoWrite', 'Task'],
v2/src/cli/init/claude-config.ts:174:        tools: ['Read', 'Bash', 'Memory', 'TodoWrite', 'Task'],
v2/src/cli/init/claude-config.ts:182:        tools: ['Read', 'Write', 'Bash', 'TodoWrite', 'Task'],
v2/src/cli/init/claude-config.ts:190:        tools: ['Read', 'Edit', 'Bash', 'Memory', 'TodoWrite'],
v2/src/cli/init/claude-config.ts:198:        tools: ['Read', 'Write', 'Bash', 'TodoWrite', 'Memory'],
v2/src/cli/commands/sparc.ts:150:    // Build tools based on mode groups
v2/src/cli/commands/sparc.ts:151:    const tools = buildToolsFromGroups(mode.groups);
v2/src/cli/commands/sparc.ts:157:      console.log(`Tools: ${tools}`);
v2/src/cli/commands/sparc.ts:168:    console.log(`üîß Tools: ${tools}`);
v2/src/cli/commands/sparc.ts:173:    await executeClaudeWithSparc(enhancedTask, tools, instanceId, ctx.flags);
v2/src/cli/commands/sparc.ts:247:      const tools = buildToolsFromGroups(mode.groups);
v2/src/cli/commands/sparc.ts:250:      await executeClaudeWithSparc(enhancedTask, tools, instanceId, ctx.flags);
v2/src/cli/commands/sparc.ts:329:      const tools = buildToolsFromGroups(mode.groups);
v2/src/cli/commands/sparc.ts:332:      await executeClaudeWithSparc(enhancedTask, tools, instanceId, ctx.flags);
v2/src/cli/commands/sparc.ts:429:  const toolMappings: Record<string, string[]> = {
v2/src/cli/commands/sparc.ts:433:    mcp: ['mcp_tools'],
v2/src/cli/commands/sparc.ts:437:  const tools = new Set<string>();
v2/src/cli/commands/sparc.ts:439:  // Always include basic tools
v2/src/cli/commands/sparc.ts:440:  tools.add('View');
v2/src/cli/commands/sparc.ts:441:  tools.add('Edit');
v2/src/cli/commands/sparc.ts:442:  tools.add('Bash');
v2/src/cli/commands/sparc.ts:448:      if (toolMappings[groupName]) {
v2/src/cli/commands/sparc.ts:449:        toolMappings[groupName].forEach((tool) => tools.add(tool));
v2/src/cli/commands/sparc.ts:451:    } else if (toolMappings[group]) {
v2/src/cli/commands/sparc.ts:452:      toolMappings[group].forEach((tool) => tools.add(tool));
v2/src/cli/commands/sparc.ts:456:  return Array.from(tools).join(',');
v2/src/cli/commands/sparc.ts:461:  tools: string,
v2/src/cli/commands/sparc.ts:466:  claudeArgs.push('--allowedTools', tools);
v2/src/cli/commands/sparc.ts:536:  console.log('  --config <file>          MCP configuration file');
v2/src/cli/agents/coordinator.ts:66:      tools: [
v2/src/cli/agents/coordinator.ts:356:        tools: [],
v2/src/cli/agents/coordinator.ts:528:    toolConfigs: {
v2/src/cli/agents/coordinator.ts:66:      tools: [
v2/src/cli/agents/coordinator.ts:356:        tools: [],
v2/src/cli/agents/coordinator.ts:528:    toolConfigs: {
v2/src/cli/commands/index.ts:61:    subcommands: [
v2/src/cli/commands/index.ts:95:    subcommands: [
v2/src/cli/commands/index.ts:176:          console.log('üí° Use MCP Flow Nexus tools in Claude Code for full functionality');
v2/src/cli/commands/index.ts:288:        description: 'MCP server port',
v2/src/cli/commands/index.ts:306:        console.log('   ‚úì MCP Server');
v2/src/cli/commands/index.ts:472:          console.log('Available subcommands: create, list, assign, workflow');
v2/src/cli/commands/index.ts:527:            console.log('Available subcommands:');
v2/src/cli/commands/index.ts:604:            console.log('Available subcommands (basic): spawn, list');
v2/src/cli/commands/index.ts:652:        console.log(`üåê MCP Server: ${isRunning ? 'Running' : 'Stopped'}`);
v2/src/cli/commands/index.ts:730:          console.log(`üåê MCP Server: ${isRunning ? 'Running' : 'Stopped'}`);
v2/src/cli/commands/index.ts:747:  // MCP command
v2/src/cli/commands/index.ts:750:    description: 'Manage MCP server and tools',
v2/src/cli/commands/index.ts:760:            // MCP server is part of the orchestrator start process
v2/src/cli/commands/index.ts:769:            success(`MCP server is running as part of the orchestration system`);
v2/src/cli/commands/index.ts:771:            console.log(`üîß Available tools: Research, Code, Terminal, Memory`);
v2/src/cli/commands/index.ts:772:            console.log(`üìö Use 'claude-flow mcp tools' to see all available tools`);
v2/src/cli/commands/index.ts:774:            error(`Failed to check MCP server: ${(err as Error).message}`);
v2/src/cli/commands/index.ts:785:              info('MCP server is not running');
v2/src/cli/commands/index.ts:788:                "MCP server runs as part of the orchestrator. Use 'claude-flow stop' to stop the entire system",
v2/src/cli/commands/index.ts:792:            error(`Failed to check MCP server: ${(err as Error).message}`);
v2/src/cli/commands/index.ts:802:            success('MCP Server Status:');
v2/src/cli/commands/index.ts:814:            error(`Failed to get MCP status: ${(err as Error).message}`);
v2/src/cli/commands/index.ts:819:        case 'tools': {
v2/src/cli/commands/index.ts:821:            success('Available MCP Tools:');
v2/src/cli/commands/index.ts:842:            error(`Failed to list tools: ${(err as Error).message}`);
v2/src/cli/commands/index.ts:852:            success('MCP Configuration:');
v2/src/cli/commands/index.ts:855:            error(`Failed to show MCP config: ${(err as Error).message}`);
v2/src/cli/commands/index.ts:863:              "MCP server runs as part of the orchestrator. Use 'claude-flow stop' then 'claude-flow start' to restart the entire system",
v2/src/cli/commands/index.ts:866:            error(`Failed to restart MCP server: ${(err as Error).message}`);
v2/src/cli/commands/index.ts:876:            success(`MCP Server Logs (last ${lines} lines):`);
v2/src/cli/commands/index.ts:877:            console.log('2024-01-10 10:00:00 [INFO] MCP server started on localhost:3000');
v2/src/cli/commands/index.ts:878:            console.log('2024-01-10 10:00:01 [INFO] Tools registered: 12');
v2/src/cli/commands/index.ts:891:          console.log('Available subcommands: start, stop, status, tools, config, restart, logs');
v2/src/cli/commands/index.ts:1046:          console.log('Available subcommands: store, query, export, import, stats, cleanup');
v2/src/cli/commands/index.ts:1065:        name: 'tools',
v2/src/cli/commands/index.ts:1067:        description: 'Allowed tools (comma-separated)',
v2/src/cli/commands/index.ts:1079:        description: 'MCP config file path',
v2/src/cli/commands/index.ts:1145:            // Build allowed tools list
v2/src/cli/commands/index.ts:1146:            let tools =
v2/src/cli/commands/index.ts:1147:              (ctx.flags.tools as string) || 'View,Edit,Replace,GlobTool,GrepTool,LS,Bash';
v2/src/cli/commands/index.ts:1150:              tools += ',BatchTool,dispatch_agent';
v2/src/cli/commands/index.ts:1154:              tools += ',WebFetchTool';
v2/src/cli/commands/index.ts:1179:   - You have access to these tools: ${tools}`;
v2/src/cli/commands/index.ts:1211:   - Use the Bash tool to run \`npx claude-flow\` commands
v2/src/cli/commands/index.ts:1226:To interact with Claude-Flow, use the Bash tool:
v2/src/cli/commands/index.ts:1247:            claudeCmd.push('--allowedTools', tools);
v2/src/cli/commands/index.ts:1264:                `Command: claude "<enhanced task with guidance>" --allowedTools ${tools}`,
v2/src/cli/commands/index.ts:1268:              console.log(`Tools: ${tools}`);
v2/src/cli/commands/index.ts:1275:              console.log(`  - Access Claude-Flow features through Bash tool`);
v2/src/cli/commands/index.ts:1281:            console.log(`üîß Tools: ${tools}`);
v2/src/cli/commands/index.ts:1357:              // Add tools
v2/src/cli/commands/index.ts:1358:              if (task.tools) {
v2/src/cli/commands/index.ts:1359:                const toolsList = Array.isArray(task.tools) ? task.tools.join(',') : task.tools;
v2/src/cli/commands/index.ts:1360:                claudeCmd.push('--allowedTools', toolsList);
v2/src/cli/commands/index.ts:1435:          console.log('Available subcommands: spawn, batch');
v2/src/cli/commands/index.ts:1762:        description: 'MCP config file',
v2/src/cli/commands/index.ts:1826:        description: 'MCP configuration file',
v2/src/cli/commands/index.ts:1952:        description: 'MCP config file',
v2/src/cli/commands/index.ts:2070:        console.log('   ‚úì MCP Server with enhanced transport');
v2/src/cli/commands/index.ts:2099:        { name: 'port', short: 'p', description: 'MCP server port', type: 'number', default: 3000 },
v2/src/cli/commands/index.ts:2102:          description: 'MCP transport type (stdio, http)',
v2/src/cli/commands/index.ts:2146:        console.log('  -t, --tools <tools>        Allowed tools (comma-separated)');
v2/src/cli/commands/index.ts:2148:        console.log('  -c, --config <file>        MCP config file path');
v2/src/cli/commands/index.ts:2164:          `  ${blue('claude-flow claude spawn')} "fix payment bug" --tools "View,Edit,Bash" --no-permissions`,
v2/src/cli/commands/index.ts:2194:        console.log('  -c, --config <file>        MCP config file');
v2/src/cli/commands/index.ts:2247:        console.log('  -c, --config <file>      MCP configuration file');
v2/src/cli/commands/index.ts:2281:        console.log('  -p, --port <port>         MCP server port (default: 3000)');
v2/src/cli/commands/index.ts:2282:        console.log('  --mcp-transport <type>    MCP transport type (stdio, http)');
v2/src/cli/commands/index.ts:2379:        console.log('  mcp          MCP server management');
v2/src/cli/commands/index.ts:2613:- **CLI Interface**: Command-line tools for managing the system
v2/src/cli/commands/index.ts:2617:- **MCP Integration**: Model Context Protocol server for Claude integration
v2/src/cli/commands/memory.ts:284:export const memoryCommand = new Command()
v2/src/cli/commands/claude.ts:11:export const claudeCommand = new Command()
v2/src/cli/commands/claude.ts:24:    '-t, --tools <tools>',
v2/src/cli/commands/claude.ts:25:    'Allowed tools (comma-separated)',
v2/src/cli/commands/claude.ts:29:  .option('-c, --config <config>', 'MCP config file path')
v2/src/cli/commands/claude.ts:45:      // Build allowed tools list
v2/src/cli/commands/claude.ts:46:      let tools = options.tools;
v2/src/cli/commands/claude.ts:47:      if (options.parallel && !tools.includes('BatchTool')) {
v2/src/cli/commands/claude.ts:48:        tools += ',BatchTool,dispatch_agent';
v2/src/cli/commands/claude.ts:50:      if (options.research && !tools.includes('WebFetchTool')) {
v2/src/cli/commands/claude.ts:51:        tools += ',WebFetchTool';
v2/src/cli/commands/claude.ts:56:      claudeArgs.push('--allowedTools', tools);
v2/src/cli/commands/claude.ts:76:        console.log(`  Tools: ${tools}`);
v2/src/cli/commands/claude.ts:85:      console.log(chalk.gray(`Tools: ${tools}`));
v2/src/cli/commands/claude.ts:137:        // Add tools
v2/src/cli/commands/claude.ts:138:        if (task.tools) {
v2/src/cli/commands/claude.ts:141:            Array.isArray(task.tools) ? task.tools.join(',') : task.tools,
v2/src/cli/commands/agent.ts:61:  const agentCommand = new Command('agent')
v2/src/cli/commands/hive-mind/task.ts:18:export const taskCommand = new Command('task')
v2/src/cli/commands/hive-mind/resume.ts:13:export const resumeCommand = new Command('resume')
v2/src/cli/agents/capabilities.ts:24:  tools?: string[];
v2/src/cli/agents/capabilities.ts:66:  registerAgentCapabilities(agentId: string, capabilities: AgentCapabilities): void {
v2/src/cli/agents/capabilities.ts:238:    const arrayFields = ['languages', 'frameworks', 'domains', 'tools'] as const;
v2/src/cli/agents/capabilities.ts:272:            capabilities.tools.includes(item),
v2/src/cli/agents/capabilities.ts:412:      tools: [],
v2/src/cli/agents/capabilities.ts:585:      tools: [],
v2/src/cli/agents/capabilities.ts:603:          tools: ['web-search', 'document-analyzer', 'data-extractor'],
v2/src/cli/agents/capabilities.ts:617:          tools: ['git', 'editor', 'debugger', 'linter'],
v2/src/cli/agents/capabilities.ts:629:          tools: ['data-processor', 'chart-generator', 'statistical-analyzer'],
v2/src/cli/agents/capabilities.ts:640:          tools: ['architecture-diagrams', 'system-modeler', 'design-patterns'],
v2/src/cli/agents/capabilities.ts:652:          tools: ['test-runner', 'coverage-analyzer', 'browser-automation'],
v2/src/cli/agents/capabilities.ts:662:          tools: ['task-manager', 'workflow-orchestrator', 'communication-hub'],
v2/src/cli/agents/capabilities.ts:24:  tools?: string[];
v2/src/cli/agents/capabilities.ts:66:  registerAgentCapabilities(agentId: string, capabilities: AgentCapabilities): void {
v2/src/cli/agents/capabilities.ts:238:    const arrayFields = ['languages', 'frameworks', 'domains', 'tools'] as const;
v2/src/cli/agents/capabilities.ts:272:            capabilities.tools.includes(item),
v2/src/cli/agents/capabilities.ts:412:      tools: [],
v2/src/cli/agents/capabilities.ts:585:      tools: [],
v2/src/cli/agents/capabilities.ts:603:          tools: ['web-search', 'document-analyzer', 'data-extractor'],
v2/src/cli/agents/capabilities.ts:617:          tools: ['git', 'editor', 'debugger', 'linter'],
v2/src/cli/agents/capabilities.ts:629:          tools: ['data-processor', 'chart-generator', 'statistical-analyzer'],
v2/src/cli/agents/capabilities.ts:640:          tools: ['architecture-diagrams', 'system-modeler', 'design-patterns'],
v2/src/cli/agents/capabilities.ts:652:          tools: ['test-runner', 'coverage-analyzer', 'browser-automation'],
v2/src/cli/agents/capabilities.ts:662:          tools: ['task-manager', 'workflow-orchestrator', 'communication-hub'],
v2/src/cli/commands/hive-mind/index.ts:19:export const hiveMindCommand = new Command('hive-mind')
v2/src/cli/commands/start/types.ts:18:  MCP_SERVER = 'mcp-server',
v2/src/cli/commands/start/types.ts:18:  MCP_SERVER = 'mcp-server',
v2/src/cli/commands/hive-mind/stop.ts:13:export const stopCommand = new Command('stop')
v2/src/cli/commands/hive-mind/wizard.ts:29:export const wizardCommand = new Command('wizard')
v2/src/cli/commands/hive-mind/optimize-memory.ts:4: * Provides comprehensive memory optimization tools for the Hive Mind system.
v2/src/cli/commands/hive-mind/optimize-memory.ts:15:  const command = new Command('optimize-memory')
v2/src/cli/commands/hive-mind/pause.ts:13:export const pauseCommand = new Command('pause')
v2/src/cli/commands/enterprise.ts:316:          console.log(`${bold('Available subcommands:')}`);
v2/src/cli/commands/enterprise.ts:572:              console.log('Available environment subcommands: create, list');
v2/src/cli/commands/enterprise.ts:580:          console.log(`${bold('Available subcommands:')}`);
v2/src/cli/commands/enterprise.ts:679:              console.log('Available provider subcommands: add, list');
v2/src/cli/commands/enterprise.ts:774:              console.log('Available resource subcommands: create, list, scale, delete');
v2/src/cli/commands/enterprise.ts:865:          console.log(`${bold('Available subcommands:')}`);
v2/src/cli/commands/enterprise.ts:1012:              console.log('Available incident subcommands: create, list');
v2/src/cli/commands/enterprise.ts:1109:          console.log(`${bold('Available subcommands:')}`);
v2/src/cli/commands/enterprise.ts:1188:              console.log('Available dashboard subcommands: create, list');
v2/src/cli/commands/enterprise.ts:1437:              console.log('Available predict subcommands: train, predict');
v2/src/cli/commands/enterprise.ts:1445:          console.log(`${bold('Available subcommands:')}`);
v2/src/cli/commands/enterprise.ts:1750:          console.log(`${bold('Available subcommands:')}`);
v2/src/cli/commands/hive-mind/spawn.ts:63:export const spawnCommand = new Command('spawn')
v2/src/cli/commands/mcp.ts:2: * MCP command for Claude-Flow
v2/src/cli/commands/mcp.ts:9:import { MCPServer, type IMCPServer } from '../../mcp/server.js';
v2/src/cli/commands/mcp.ts:12:  createMCPServer,
v2/src/cli/commands/mcp.ts:13:  isMCP2025Available,
v2/src/cli/commands/mcp.ts:15:  type ExtendedMCPConfig,
v2/src/cli/commands/mcp.ts:17:import type { MCP2025Server } from '../../mcp/server-mcp-2025.js';
v2/src/cli/commands/mcp.ts:19:let mcpServer: IMCPServer | MCP2025Server | null = null;
v2/src/cli/commands/mcp.ts:21:export const mcpCommand = new Command()
v2/src/cli/commands/mcp.ts:22:  .description('Manage MCP server and tools')
v2/src/cli/commands/mcp.ts:25:    console.log('  start   - Start the MCP server');
v2/src/cli/commands/mcp.ts:26:    console.log('  stop    - Stop the MCP server');
v2/src/cli/commands/mcp.ts:27:    console.log('  status  - Show MCP server status');
v2/src/cli/commands/mcp.ts:28:    console.log('  tools   - List available MCP tools');
v2/src/cli/commands/mcp.ts:29:    console.log('  config  - Show MCP configuration');
v2/src/cli/commands/mcp.ts:30:    console.log('  restart - Restart the MCP server');
v2/src/cli/commands/mcp.ts:31:    console.log('  logs    - Show MCP server logs');
v2/src/cli/commands/mcp.ts:35:    new Command()
v2/src/cli/commands/mcp.ts:36:      .description('Start the MCP server')
v2/src/cli/commands/mcp.ts:37:      .option('-p, --port <port:number>', 'Port for MCP server', { default: 3000 })
v2/src/cli/commands/mcp.ts:38:      .option('-h, --host <host:string>', 'Host for MCP server', { default: 'localhost' })
v2/src/cli/commands/mcp.ts:42:      .option('--mcp2025', 'Enable MCP 2025-11 features (version negotiation, async jobs, etc.)', {
v2/src/cli/commands/mcp.ts:50:          // Check if MCP 2025-11 dependencies are available
v2/src/cli/commands/mcp.ts:51:          const mcp2025Available = isMCP2025Available();
v2/src/cli/commands/mcp.ts:52:          const enableMCP2025 = options.mcp2025 && mcp2025Available;
v2/src/cli/commands/mcp.ts:57:                '‚ö†Ô∏è  MCP 2025-11 dependencies not found. Install with: npm install uuid ajv ajv-formats ajv-errors'
v2/src/cli/commands/mcp.ts:60:            console.log(chalk.yellow('   Falling back to legacy MCP server...'));
v2/src/cli/commands/mcp.ts:64:          const mcpConfig: ExtendedMCPConfig = {
v2/src/cli/commands/mcp.ts:70:              enableMCP2025,
v2/src/cli/commands/mcp.ts:72:              enableVersionNegotiation: enableMCP2025,
v2/src/cli/commands/mcp.ts:73:              enableAsyncJobs: enableMCP2025,
v2/src/cli/commands/mcp.ts:75:              enableSchemaValidation: enableMCP2025,
v2/src/cli/commands/mcp.ts:78:            mcp2025: enableMCP2025
v2/src/cli/commands/mcp.ts:86:                    enabled: process.env.MCP_REGISTRY_ENABLED === 'true',
v2/src/cli/commands/mcp.ts:87:                    url: process.env.MCP_REGISTRY_URL,
v2/src/cli/commands/mcp.ts:88:                    apiKey: process.env.MCP_REGISTRY_API_KEY,
v2/src/cli/commands/mcp.ts:99:          mcpServer = await createMCPServer(mcpConfig, eventBus, logger, {
v2/src/cli/commands/mcp.ts:108:          console.log(chalk.green(`‚úÖ MCP server started on ${options.host}:${options.port}`));
v2/src/cli/commands/mcp.ts:110:            chalk.cyan(`üéØ Mode: ${enableMCP2025 ? 'MCP 2025-11 Enhanced' : 'Legacy Compatible'}`)
v2/src/cli/commands/mcp.ts:118:          if (enableMCP2025) {
v2/src/cli/commands/mcp.ts:129:          console.error(chalk.red(`‚ùå Failed to start MCP server: ${(error as Error).message}`));
v2/src/cli/commands/mcp.ts:130:          logger.error('MCP server startup failed', { error });
v2/src/cli/commands/mcp.ts:137:    new Command().description('Stop the MCP server').action(async () => {
v2/src/cli/commands/mcp.ts:142:          console.log(chalk.green('‚úÖ MCP server stopped'));
v2/src/cli/commands/mcp.ts:144:          console.log(chalk.yellow('‚ö†Ô∏è  MCP server is not running'));
v2/src/cli/commands/mcp.ts:147:        console.error(chalk.red(`‚ùå Failed to stop MCP server: ${(error as Error).message}`));
v2/src/cli/commands/mcp.ts:154:    new Command().description('Show MCP server status').action(async () => {
v2/src/cli/commands/mcp.ts:159:        console.log(chalk.cyan('MCP Server Status:'));
v2/src/cli/commands/mcp.ts:173:        console.error(chalk.red(`‚ùå Failed to get MCP status: ${(error as Error).message}`));
v2/src/cli/commands/mcp.ts:178:    'tools',
v2/src/cli/commands/mcp.ts:179:    new Command().description('List available MCP tools').action(() => {
v2/src/cli/commands/mcp.ts:180:      console.log(chalk.cyan('Available MCP Tools:'));
v2/src/cli/commands/mcp.ts:205:    new Command().description('Show MCP configuration').action(async () => {
v2/src/cli/commands/mcp.ts:209:        console.log(chalk.cyan('MCP Configuration:'));
v2/src/cli/commands/mcp.ts:212:        console.error(chalk.red(`‚ùå Failed to show MCP config: ${(error as Error).message}`));
v2/src/cli/commands/mcp.ts:218:    new Command().description('Restart the MCP server').action(async () => {
v2/src/cli/commands/mcp.ts:220:        console.log(chalk.yellow('üîÑ Stopping MCP server...'));
v2/src/cli/commands/mcp.ts:225:        console.log(chalk.yellow('üîÑ Starting MCP server...'));
v2/src/cli/commands/mcp.ts:229:        mcpServer = await createMCPServer(config.mcp, eventBus, logger, {
v2/src/cli/commands/mcp.ts:235:          chalk.green(`‚úÖ MCP server restarted on ${config.mcp.host}:${config.mcp.port}`),
v2/src/cli/commands/mcp.ts:238:        console.error(chalk.red(`‚ùå Failed to restart MCP server: ${(error as Error).message}`));
v2/src/cli/commands/mcp.ts:245:    new Command()
v2/src/cli/commands/mcp.ts:246:      .description('Show MCP server logs')
v2/src/cli/commands/mcp.ts:249:        console.log(chalk.cyan(`MCP Server Logs (last ${options.lines} lines):`));
v2/src/cli/commands/mcp.ts:253:          '2024-01-10 10:00:00 [INFO] MCP server started on localhost:3000',
v2/src/cli/commands/mcp.ts:254:          '2024-01-10 10:00:01 [INFO] Tools registered: 12',
v2/src/cli/commands/start/process-manager.ts:12:import { MCPServer } from '../../../mcp/server.js';
v2/src/cli/commands/start/process-manager.ts:23:  private mcpServer: MCPServer | undefined;
v2/src/cli/commands/start/process-manager.ts:60:        name: 'MCP Server',
v2/src/cli/commands/start/process-manager.ts:61:        type: ProcessType.MCP_SERVER,
v2/src/cli/commands/start/process-manager.ts:125:        case ProcessType.MCP_SERVER:
v2/src/cli/commands/start/process-manager.ts:126:          this.mcpServer = new MCPServer(this.config.mcp, eventBus, logger);
v2/src/cli/commands/start/process-manager.ts:184:        case ProcessType.MCP_SERVER:
v2/src/cli/commands/hive-mind/ps.ts:13:export const psCommand = new Command('ps')
v2/src/cli/commands/start/process-manager.ts:12:import { MCPServer } from '../../../mcp/server.js';
v2/src/cli/commands/start/process-manager.ts:23:  private mcpServer: MCPServer | undefined;
v2/src/cli/commands/start/process-manager.ts:60:        name: 'MCP Server',
v2/src/cli/commands/start/process-manager.ts:61:        type: ProcessType.MCP_SERVER,
v2/src/cli/commands/start/process-manager.ts:125:        case ProcessType.MCP_SERVER:
v2/src/cli/commands/start/process-manager.ts:126:          this.mcpServer = new MCPServer(this.config.mcp, eventBus, logger);
v2/src/cli/commands/start/process-manager.ts:184:        case ProcessType.MCP_SERVER:
v2/src/cli/commands/hive-mind/init.ts:17:export const initCommand = new Command('init')
v2/src/cli/commands/hive-mind/status.ts:16:export const statusCommand = new Command('status')
v2/src/cli/agents/tester.ts:98:      tools: [
v2/src/cli/agents/tester.ts:693:    toolConfigs: {
v2/src/cli/agents/tester.ts:98:      tools: [
v2/src/cli/agents/tester.ts:693:    toolConfigs: {
v2/src/cli/commands/hook.ts:332:// Export hook subcommands for better CLI integration
v2/src/cli/commands/hook.ts:333:export const hookSubcommands = [
v2/src/cli/agents/analyst.ts:314:      tools: [
v2/src/cli/agents/analyst.ts:1072:    toolConfigs: {
v2/src/cli/agents/analyst.ts:314:      tools: [
v2/src/cli/agents/analyst.ts:1072:    toolConfigs: {
v2/src/cli/commands/session.ts:14:export const sessionCommand = new Command()
v2/src/cli/commands/maestro.ts:5:export const maestroCommand = new Command('maestro')
v2/src/cli/agents/index.ts:286:  register(agent: BaseAgent): void {
v2/src/cli/agents/index.ts:289:    this.logger.info('Agent registered for lifecycle management', {
v2/src/cli/agents/index.ts:296:   * Initialize all registered agents
v2/src/cli/agents/index.ts:317:   * Shutdown all registered agents
v2/src/cli/agents/index.ts:343:   * Get all registered agents
v2/src/cli/agents/index.ts:286:  register(agent: BaseAgent): void {
v2/src/cli/agents/index.ts:289:    this.logger.info('Agent registered for lifecycle management', {
v2/src/cli/agents/index.ts:296:   * Initialize all registered agents
v2/src/cli/agents/index.ts:317:   * Shutdown all registered agents
v2/src/cli/agents/index.ts:343:   * Get all registered agents
v2/src/cli/commands/hive.ts:92:    const queenId = await coordinator.registerAgent('Queen-Genesis', 'coordinator', [
v2/src/cli/commands/hive.ts:150:    const agentId = await coordinator.registerAgent(
v2/src/cli/commands/workflow.ts:14:export const workflowCommand = new Command()
v2/src/cli/commands/start/start-command.ts:17:export const startCommand = new Command()
v2/src/cli/commands/start/start-command.ts:20:  .option('-p, --port <port:number>', 'MCP server port', { default: 3000 })
v2/src/cli/commands/start/start-command.ts:21:  .option('--mcp-transport <transport:string>', 'MCP transport type (stdio, http)', {
v2/src/cli/commands/start/start-command.ts:82:      // Override MCP settings from CLI options
v2/src/cli/commands/start/start-command.ts:17:export const startCommand = new Command()
v2/src/cli/commands/start/start-command.ts:20:  .option('-p, --port <port:number>', 'MCP server port', { default: 3000 })
v2/src/cli/commands/start/start-command.ts:21:  .option('--mcp-transport <transport:string>', 'MCP transport type (stdio, http)', {
v2/src/cli/commands/start/start-command.ts:82:      // Override MCP settings from CLI options
v2/src/cli/agents/researcher.ts:53:      tools: [
v2/src/cli/agents/researcher.ts:376:    permissions: ['web-search', 'data-access', 'file-read', 'api-access', 'research-tools'],
v2/src/cli/agents/researcher.ts:401:    toolConfigs: {},
v2/src/cli/commands/mcp.ts:2: * MCP command for Claude-Flow
v2/src/cli/commands/mcp.ts:9:import { MCPServer, type IMCPServer } from '../../mcp/server.js';
v2/src/cli/commands/mcp.ts:12:  createMCPServer,
v2/src/cli/commands/mcp.ts:13:  isMCP2025Available,
v2/src/cli/commands/mcp.ts:15:  type ExtendedMCPConfig,
v2/src/cli/commands/mcp.ts:17:import type { MCP2025Server } from '../../mcp/server-mcp-2025.js';
v2/src/cli/commands/mcp.ts:19:let mcpServer: IMCPServer | MCP2025Server | null = null;
v2/src/cli/commands/mcp.ts:21:export const mcpCommand = new Command()
v2/src/cli/commands/mcp.ts:22:  .description('Manage MCP server and tools')
v2/src/cli/commands/mcp.ts:25:    console.log('  start   - Start the MCP server');
v2/src/cli/commands/mcp.ts:26:    console.log('  stop    - Stop the MCP server');
v2/src/cli/commands/mcp.ts:27:    console.log('  status  - Show MCP server status');
v2/src/cli/commands/mcp.ts:28:    console.log('  tools   - List available MCP tools');
v2/src/cli/commands/mcp.ts:29:    console.log('  config  - Show MCP configuration');
v2/src/cli/commands/mcp.ts:30:    console.log('  restart - Restart the MCP server');
v2/src/cli/commands/mcp.ts:31:    console.log('  logs    - Show MCP server logs');
v2/src/cli/commands/mcp.ts:35:    new Command()
v2/src/cli/commands/mcp.ts:36:      .description('Start the MCP server')
v2/src/cli/commands/mcp.ts:37:      .option('-p, --port <port:number>', 'Port for MCP server', { default: 3000 })
v2/src/cli/commands/mcp.ts:38:      .option('-h, --host <host:string>', 'Host for MCP server', { default: 'localhost' })
v2/src/cli/commands/mcp.ts:42:      .option('--mcp2025', 'Enable MCP 2025-11 features (version negotiation, async jobs, etc.)', {
v2/src/cli/commands/mcp.ts:50:          // Check if MCP 2025-11 dependencies are available
v2/src/cli/commands/mcp.ts:51:          const mcp2025Available = isMCP2025Available();
v2/src/cli/commands/mcp.ts:52:          const enableMCP2025 = options.mcp2025 && mcp2025Available;
v2/src/cli/commands/mcp.ts:57:                '‚ö†Ô∏è  MCP 2025-11 dependencies not found. Install with: npm install uuid ajv ajv-formats ajv-errors'
v2/src/cli/commands/mcp.ts:60:            console.log(chalk.yellow('   Falling back to legacy MCP server...'));
v2/src/cli/commands/mcp.ts:64:          const mcpConfig: ExtendedMCPConfig = {
v2/src/cli/commands/mcp.ts:70:              enableMCP2025,
v2/src/cli/commands/mcp.ts:72:              enableVersionNegotiation: enableMCP2025,
v2/src/cli/commands/mcp.ts:73:              enableAsyncJobs: enableMCP2025,
v2/src/cli/commands/mcp.ts:75:              enableSchemaValidation: enableMCP2025,
v2/src/cli/commands/mcp.ts:78:            mcp2025: enableMCP2025
v2/src/cli/commands/mcp.ts:86:                    enabled: process.env.MCP_REGISTRY_ENABLED === 'true',
v2/src/cli/commands/mcp.ts:87:                    url: process.env.MCP_REGISTRY_URL,
v2/src/cli/commands/mcp.ts:88:                    apiKey: process.env.MCP_REGISTRY_API_KEY,
v2/src/cli/commands/mcp.ts:99:          mcpServer = await createMCPServer(mcpConfig, eventBus, logger, {
v2/src/cli/commands/mcp.ts:108:          console.log(chalk.green(`‚úÖ MCP server started on ${options.host}:${options.port}`));
v2/src/cli/commands/mcp.ts:110:            chalk.cyan(`üéØ Mode: ${enableMCP2025 ? 'MCP 2025-11 Enhanced' : 'Legacy Compatible'}`)
v2/src/cli/commands/mcp.ts:118:          if (enableMCP2025) {
v2/src/cli/commands/mcp.ts:129:          console.error(chalk.red(`‚ùå Failed to start MCP server: ${(error as Error).message}`));
v2/src/cli/commands/mcp.ts:130:          logger.error('MCP server startup failed', { error });
v2/src/cli/commands/mcp.ts:137:    new Command().description('Stop the MCP server').action(async () => {
v2/src/cli/commands/mcp.ts:142:          console.log(chalk.green('‚úÖ MCP server stopped'));
v2/src/cli/commands/mcp.ts:144:          console.log(chalk.yellow('‚ö†Ô∏è  MCP server is not running'));
v2/src/cli/commands/mcp.ts:147:        console.error(chalk.red(`‚ùå Failed to stop MCP server: ${(error as Error).message}`));
v2/src/cli/commands/mcp.ts:154:    new Command().description('Show MCP server status').action(async () => {
v2/src/cli/commands/mcp.ts:159:        console.log(chalk.cyan('MCP Server Status:'));
v2/src/cli/commands/mcp.ts:173:        console.error(chalk.red(`‚ùå Failed to get MCP status: ${(error as Error).message}`));
v2/src/cli/commands/mcp.ts:178:    'tools',
v2/src/cli/commands/mcp.ts:179:    new Command().description('List available MCP tools').action(() => {
v2/src/cli/commands/mcp.ts:180:      console.log(chalk.cyan('Available MCP Tools:'));
v2/src/cli/commands/mcp.ts:205:    new Command().description('Show MCP configuration').action(async () => {
v2/src/cli/commands/mcp.ts:209:        console.log(chalk.cyan('MCP Configuration:'));
v2/src/cli/commands/mcp.ts:212:        console.error(chalk.red(`‚ùå Failed to show MCP config: ${(error as Error).message}`));
v2/src/cli/commands/mcp.ts:218:    new Command().description('Restart the MCP server').action(async () => {
v2/src/cli/commands/mcp.ts:220:        console.log(chalk.yellow('üîÑ Stopping MCP server...'));
v2/src/cli/commands/mcp.ts:225:        console.log(chalk.yellow('üîÑ Starting MCP server...'));
v2/src/cli/commands/mcp.ts:229:        mcpServer = await createMCPServer(config.mcp, eventBus, logger, {
v2/src/cli/commands/mcp.ts:235:          chalk.green(`‚úÖ MCP server restarted on ${config.mcp.host}:${config.mcp.port}`),
v2/src/cli/commands/mcp.ts:238:        console.error(chalk.red(`‚ùå Failed to restart MCP server: ${(error as Error).message}`));
v2/src/cli/commands/mcp.ts:245:    new Command()
v2/src/cli/commands/mcp.ts:246:      .description('Show MCP server logs')
v2/src/cli/commands/mcp.ts:249:        console.log(chalk.cyan(`MCP Server Logs (last ${options.lines} lines):`));
v2/src/cli/commands/mcp.ts:253:          '2024-01-10 10:00:00 [INFO] MCP server started on localhost:3000',
v2/src/cli/commands/mcp.ts:254:          '2024-01-10 10:00:01 [INFO] Tools registered: 12',
v2/src/cli/commands/agent.ts:61:  const agentCommand = new Command('agent')
v2/src/swarm/advanced-orchestrator.ts:6: * It integrates with existing MCP tools and provides production-ready
v2/src/swarm/advanced-orchestrator.ts:634:        tools: ['bash', 'read', 'write', 'edit'],
v2/src/swarm/advanced-orchestrator.ts:681:      await this.coordinator.registerAgent(agent.name, agent.type, agent.capabilities);
v2/src/swarm/advanced-orchestrator.ts:1194:    this.coordinator.on('agent:registered', (agent) => {
v2/src/swarm/advanced-orchestrator.ts:1195:      this.logger.info('Coordinator agent registered', { agentId: agent.id });
v2/src/cli/commands/neural-goal-init.js:15:export async function registerNeuralGoalCommands(program) {
v2/src/cli/commands/neural-goal-init.js:69:## MCP Integration
v2/src/cli/commands/neural-goal-init.js:136:## MCP Integration
v2/src/cli/commands/neural-goal-init.js:187:export default { registerNeuralGoalCommands };
v2/src/cli/commands/workflow.ts:14:export const workflowCommand = new Command()
v2/src/cli/commands/enterprise.ts:316:          console.log(`${bold('Available subcommands:')}`);
v2/src/cli/commands/enterprise.ts:572:              console.log('Available environment subcommands: create, list');
v2/src/cli/commands/enterprise.ts:580:          console.log(`${bold('Available subcommands:')}`);
v2/src/cli/commands/enterprise.ts:679:              console.log('Available provider subcommands: add, list');
v2/src/cli/commands/enterprise.ts:774:              console.log('Available resource subcommands: create, list, scale, delete');
v2/src/cli/commands/enterprise.ts:865:          console.log(`${bold('Available subcommands:')}`);
v2/src/cli/commands/enterprise.ts:1012:              console.log('Available incident subcommands: create, list');
v2/src/cli/commands/enterprise.ts:1109:          console.log(`${bold('Available subcommands:')}`);
v2/src/cli/commands/enterprise.ts:1188:              console.log('Available dashboard subcommands: create, list');
v2/src/cli/commands/enterprise.ts:1437:              console.log('Available predict subcommands: train, predict');
v2/src/cli/commands/enterprise.ts:1445:          console.log(`${bold('Available subcommands:')}`);
v2/src/cli/commands/enterprise.ts:1750:          console.log(`${bold('Available subcommands:')}`);
v2/src/__tests__/benchmarks/performance.bench.ts:5: * Benchmarks session forking, hook matchers, and in-process MCP
v2/src/__tests__/benchmarks/performance.bench.ts:278:          const toolName = 'memory_store';
v2/src/__tests__/benchmarks/performance.bench.ts:279:          const matches = patterns.filter((pattern) => pattern.test(toolName));
v2/src/__tests__/benchmarks/performance.bench.ts:364:          const toolName = 'memory_store';
v2/src/__tests__/benchmarks/performance.bench.ts:365:          const matchedHooks = hooks.filter((h) => h.matcher.test(toolName));
v2/src/__tests__/benchmarks/performance.bench.ts:382:  describe('Phase 6: In-Process MCP Performance', () => {
v2/src/__tests__/benchmarks/performance.bench.ts:383:    it('should benchmark in-process tool call (target: <0.1ms)', async () => {
v2/src/__tests__/benchmarks/performance.bench.ts:389:        'In-Process MCP Tool Call',
v2/src/__tests__/benchmarks/performance.bench.ts:401:    it('should benchmark stdio MCP overhead (baseline)', async () => {
v2/src/__tests__/benchmarks/performance.bench.ts:405:        'Stdio MCP Overhead Simulation',
v2/src/__tests__/benchmarks/performance.bench.ts:472:    it('should benchmark tool registration overhead', async () => {
v2/src/__tests__/benchmarks/performance.bench.ts:476:          const tools = new Map();
v2/src/__tests__/benchmarks/performance.bench.ts:477:          tools.set('swarm_init', { handler: async () => {} });
v2/src/__tests__/benchmarks/performance.bench.ts:478:          tools.set('agent_spawn', { handler: async () => {} });
v2/src/__tests__/benchmarks/performance.bench.ts:479:          tools.set('memory_store', { handler: async () => {} });
v2/src/__tests__/benchmarks/performance.bench.ts:481:          expect(tools.size).toBe(3);
v2/src/__tests__/benchmarks/performance.bench.ts:561:        console.log(`In-Process MCP: ${avgTime.toFixed(4)}ms average`);
v2/src/cli/commands/maestro.ts:5:export const maestroCommand = new Command('maestro')
v2/src/__tests__/in-process-mcp.test.ts:2: * Comprehensive Test Suite for In-Process MCP Server
v2/src/__tests__/in-process-mcp.test.ts:4: * Tests in-process MCP server implementation, SDK integration,
v2/src/__tests__/in-process-mcp.test.ts:5: * performance improvements, and tool routing.
v2/src/__tests__/in-process-mcp.test.ts:9:import { InProcessMCPServer, createInProcessServer } from '../mcp/in-process-server.js';
v2/src/__tests__/in-process-mcp.test.ts:10:import { ClaudeFlowToolRegistry, createToolRegistry } from '../mcp/tool-registry.js';
v2/src/__tests__/in-process-mcp.test.ts:16:import type { MCPTool } from '../utils/types.js';
v2/src/__tests__/in-process-mcp.test.ts:18:describe('InProcessMCPServer', () => {
v2/src/__tests__/in-process-mcp.test.ts:19:  let server: InProcessMCPServer;
v2/src/__tests__/in-process-mcp.test.ts:36:    it('should register a tool', () => {
v2/src/__tests__/in-process-mcp.test.ts:37:      const tool: MCPTool = {
v2/src/__tests__/in-process-mcp.test.ts:38:        name: 'test/tool',
v2/src/__tests__/in-process-mcp.test.ts:39:        description: 'Test tool',
v2/src/__tests__/in-process-mcp.test.ts:50:      server.registerTool(tool);
v2/src/__tests__/in-process-mcp.test.ts:51:      expect(server.getToolNames()).toContain('test/tool');
v2/src/__tests__/in-process-mcp.test.ts:54:    it('should unregister a tool', () => {
v2/src/__tests__/in-process-mcp.test.ts:55:      const tool: MCPTool = {
v2/src/__tests__/in-process-mcp.test.ts:56:        name: 'test/tool',
v2/src/__tests__/in-process-mcp.test.ts:57:        description: 'Test tool',
v2/src/__tests__/in-process-mcp.test.ts:62:      server.registerTool(tool);
v2/src/__tests__/in-process-mcp.test.ts:63:      expect(server.getToolNames()).toContain('test/tool');
v2/src/__tests__/in-process-mcp.test.ts:65:      const removed = server.unregisterTool('test/tool');
v2/src/__tests__/in-process-mcp.test.ts:67:      expect(server.getToolNames()).not.toContain('test/tool');
v2/src/__tests__/in-process-mcp.test.ts:70:    it('should get tool metadata', () => {
v2/src/__tests__/in-process-mcp.test.ts:71:      const tool: MCPTool = {
v2/src/__tests__/in-process-mcp.test.ts:72:        name: 'test/tool',
v2/src/__tests__/in-process-mcp.test.ts:73:        description: 'Test tool',
v2/src/__tests__/in-process-mcp.test.ts:78:      server.registerTool(tool);
v2/src/__tests__/in-process-mcp.test.ts:79:      const retrieved = server.getTool('test/tool');
v2/src/__tests__/in-process-mcp.test.ts:81:      expect(retrieved?.name).toBe('test/tool');
v2/src/__tests__/in-process-mcp.test.ts:86:    it('should execute a tool successfully', async () => {
v2/src/__tests__/in-process-mcp.test.ts:87:      const tool: MCPTool = {
v2/src/__tests__/in-process-mcp.test.ts:89:        description: 'Echo tool',
v2/src/__tests__/in-process-mcp.test.ts:100:      server.registerTool(tool);
v2/src/__tests__/in-process-mcp.test.ts:109:    it('should handle tool execution errors', async () => {
v2/src/__tests__/in-process-mcp.test.ts:110:      const tool: MCPTool = {
v2/src/__tests__/in-process-mcp.test.ts:112:        description: 'Error tool',
v2/src/__tests__/in-process-mcp.test.ts:119:      server.registerTool(tool);
v2/src/__tests__/in-process-mcp.test.ts:127:    it('should throw error for non-existent tool', async () => {
v2/src/__tests__/in-process-mcp.test.ts:135:    it('should record metrics for tool calls', async () => {
v2/src/__tests__/in-process-mcp.test.ts:136:      const tool: MCPTool = {
v2/src/__tests__/in-process-mcp.test.ts:138:        description: 'Metric test tool',
v2/src/__tests__/in-process-mcp.test.ts:143:      server.registerTool(tool);
v2/src/__tests__/in-process-mcp.test.ts:148:      expect(metrics[0].toolName).toBe('test/metric');
v2/src/__tests__/in-process-mcp.test.ts:153:      const tool: MCPTool = {
v2/src/__tests__/in-process-mcp.test.ts:155:        description: 'Stats test tool',
v2/src/__tests__/in-process-mcp.test.ts:163:      server.registerTool(tool);
v2/src/__tests__/in-process-mcp.test.ts:172:      expect(stats.toolStats['test/stats']).toBeDefined();
v2/src/__tests__/in-process-mcp.test.ts:173:      expect(stats.toolStats['test/stats'].totalCalls).toBe(5);
v2/src/__tests__/in-process-mcp.test.ts:174:      expect(stats.toolStats['test/stats'].successRate).toBe(1);
v2/src/__tests__/in-process-mcp.test.ts:178:      const tool: MCPTool = {
v2/src/__tests__/in-process-mcp.test.ts:180:        description: 'Latency test tool',
v2/src/__tests__/in-process-mcp.test.ts:188:      server.registerTool(tool);
v2/src/__tests__/in-process-mcp.test.ts:198:    it('should cache read-only tool results', async () => {
v2/src/__tests__/in-process-mcp.test.ts:201:      const tool: MCPTool = {
v2/src/__tests__/in-process-mcp.test.ts:208:      server.registerTool(tool);
v2/src/__tests__/in-process-mcp.test.ts:222:      const tool: MCPTool = {
v2/src/__tests__/in-process-mcp.test.ts:229:      server.registerTool(tool);
v2/src/__tests__/in-process-mcp.test.ts:240:      const tool: MCPTool = {
v2/src/__tests__/in-process-mcp.test.ts:247:      server.registerTool(tool);
v2/src/__tests__/in-process-mcp.test.ts:271:      const tool: MCPTool = {
v2/src/__tests__/in-process-mcp.test.ts:273:        description: 'Context test tool',
v2/src/__tests__/in-process-mcp.test.ts:281:      server.registerTool(tool);
v2/src/__tests__/in-process-mcp.test.ts:294:      expect(info.toolCount).toBe(0);
v2/src/__tests__/in-process-mcp.test.ts:295:      expect(Array.isArray(info.tools)).toBe(true);
v2/src/__tests__/in-process-mcp.test.ts:315:  it('should load all Claude-Flow tools', async () => {
v2/src/__tests__/in-process-mcp.test.ts:316:    const toolNames = registry.getToolNames();
v2/src/__tests__/in-process-mcp.test.ts:317:    expect(toolNames.length).toBeGreaterThan(20); // At least 20+ tools
v2/src/__tests__/in-process-mcp.test.ts:319:    // Check for key tool categories
v2/src/__tests__/in-process-mcp.test.ts:320:    expect(toolNames.some(name => name.startsWith('agents/'))).toBe(true);
v2/src/__tests__/in-process-mcp.test.ts:321:    expect(toolNames.some(name => name.startsWith('tasks/'))).toBe(true);
v2/src/__tests__/in-process-mcp.test.ts:322:    expect(toolNames.some(name => name.startsWith('memory/'))).toBe(true);
v2/src/__tests__/in-process-mcp.test.ts:323:    expect(toolNames.some(name => name.startsWith('system/'))).toBe(true);
v2/src/__tests__/in-process-mcp.test.ts:326:  it('should route tool calls correctly', async () => {
v2/src/__tests__/in-process-mcp.test.ts:393:    // Create a simple test tool
v2/src/__tests__/in-process-mcp.test.ts:403:    const testTool: MCPTool = {
v2/src/__tests__/in-process-mcp.test.ts:405:      description: 'Benchmark test tool',
v2/src/__tests__/in-process-mcp.test.ts:410:    inProcessServer!.registerTool(testTool);
v2/src/__tests__/in-process-mcp.test.ts:457:  let server: InProcessMCPServer;
v2/src/__tests__/in-process-mcp.test.ts:467:  it('should handle concurrent tool calls', async () => {
v2/src/__tests__/in-process-mcp.test.ts:468:    const tool: MCPTool = {
v2/src/__tests__/in-process-mcp.test.ts:478:    server.registerTool(tool);
v2/src/__tests__/in-process-mcp.test.ts:491:    const tool: MCPTool = {
v2/src/__tests__/in-process-mcp.test.ts:498:    server.registerTool(tool);
v2/src/__tests__/in-process-mcp.test.ts:509:    const tool: MCPTool = {
v2/src/__tests__/in-process-mcp.test.ts:516:    server.registerTool(tool);
v2/src/cli/commands/help-new.ts:9:export const helpCommand = new Command()
v2/src/cli/agents/base-agent.ts:340:      toolConfigs: {},
v2/src/cli/commands/help-new.ts:9:export const helpCommand = new Command()
v2/src/verification/interfaces.ts:47:  mcp_tools: boolean;
v2/src/cli/agents/hive-agents.ts:51:      tools: ['consensus', 'delegation'],
v2/src/cli/agents/hive-agents.ts:167:      tools: ['git', 'npm', 'docker'],
v2/src/cli/agents/hive-agents.ts:279:      tools: ['web-search', 'data-analysis'],
v2/src/cli/agents/hive-agents.ts:391:      tools: ['linting', 'testing', 'security-scan'],
v2/src/cli/agents/hive-agents.ts:504:      tools: ['design-patterns', 'documentation'],
v2/src/__tests__/integration/swarm-sdk-integration.test.ts:5: * Tests session forking, hook matchers, and in-process MCP integration
v2/src/cli/agents/coder.ts:100:      tools: [
v2/src/cli/agents/coder.ts:921:    toolConfigs: {
v2/src/cli/agents/coder.ts:100:      tools: [
v2/src/cli/agents/coder.ts:921:    toolConfigs: {
v2/src/cli/agents/architect.ts:115:      tools: [
v2/src/cli/agents/architect.ts:851:    toolConfigs: {
v2/src/cli/agents/hive-agents.ts:51:      tools: ['consensus', 'delegation'],
v2/src/cli/agents/hive-agents.ts:167:      tools: ['git', 'npm', 'docker'],
v2/src/cli/agents/hive-agents.ts:279:      tools: ['web-search', 'data-analysis'],
v2/src/cli/agents/hive-agents.ts:391:      tools: ['linting', 'testing', 'security-scan'],
v2/src/cli/agents/hive-agents.ts:504:      tools: ['design-patterns', 'documentation'],
v2/src/cli/commands/help.ts:12:export const helpCommand = new Command()
v2/src/cli/commands/help.ts:181:        description: 'Spawn Claude with custom tools',
v2/src/cli/commands/help.ts:182:        command: 'claude-flow claude spawn "analyze codebase" --tools "View,Edit,GrepTool,LS"',
v2/src/cli/commands/help.ts:183:        explanation: 'Specifies exactly which tools Claude can use for the task',
v2/src/cli/commands/help.ts:200:      '‚Ä¢ --tools, -t: Specify allowed tools (default: View,Edit,Replace,GlobTool,GrepTool,LS,Bash)',
v2/src/cli/commands/help.ts:202:      '‚Ä¢ --config, -c: Path to MCP configuration file',
v2/src/cli/commands/help.ts:362:      '‚Ä¢ CLAUDE_FLOW_MCP_PORT: Override MCP port',
v2/src/cli/commands/help.ts:565:      '‚Ä¢ Check: MCP transport settings match between client and server',
v2/src/cli/commands/help.ts:12:export const helpCommand = new Command()
v2/src/cli/commands/help.ts:181:        description: 'Spawn Claude with custom tools',
v2/src/cli/commands/help.ts:182:        command: 'claude-flow claude spawn "analyze codebase" --tools "View,Edit,GrepTool,LS"',
v2/src/cli/commands/help.ts:183:        explanation: 'Specifies exactly which tools Claude can use for the task',
v2/src/cli/commands/help.ts:200:      '‚Ä¢ --tools, -t: Specify allowed tools (default: View,Edit,Replace,GlobTool,GrepTool,LS,Bash)',
v2/src/cli/commands/help.ts:202:      '‚Ä¢ --config, -c: Path to MCP configuration file',
v2/src/cli/commands/help.ts:362:      '‚Ä¢ CLAUDE_FLOW_MCP_PORT: Override MCP port',
v2/src/cli/commands/help.ts:565:      '‚Ä¢ Check: MCP transport settings match between client and server',
v2/src/cli/agents/base-agent.ts:340:      toolConfigs: {},
v2/src/cli/agents/researcher.ts:53:      tools: [
v2/src/cli/agents/researcher.ts:376:    permissions: ['web-search', 'data-access', 'file-read', 'api-access', 'research-tools'],
v2/src/cli/agents/researcher.ts:401:    toolConfigs: {},
v2/src/verification/hooks.ts:227:    this.registerHooks();
v2/src/verification/hooks.ts:234:  private registerHooks(): void {
v2/src/verification/hooks.ts:236:    this.registerPreTaskHook();
v2/src/verification/hooks.ts:239:    this.registerPostTaskHook();
v2/src/verification/hooks.ts:242:    this.registerIntegrationTestHook();
v2/src/verification/hooks.ts:245:    this.registerTruthTelemetryHook();
v2/src/verification/hooks.ts:248:    this.registerRollbackTriggerHook();
v2/src/verification/hooks.ts:250:    logger.info('Verification hooks registered successfully');
v2/src/verification/hooks.ts:255:  private registerPreTaskHook(): void {
v2/src/verification/hooks.ts:322:    agenticHookManager.register(preTaskHook);
v2/src/verification/hooks.ts:368:  private registerPostTaskHook(): void {
v2/src/verification/hooks.ts:432:    agenticHookManager.register(postTaskHook);
v2/src/verification/hooks.ts:466:  private registerIntegrationTestHook(): void {
v2/src/verification/hooks.ts:535:    agenticHookManager.register(integrationTestHook);
v2/src/verification/hooks.ts:638:  private registerTruthTelemetryHook(): void {
v2/src/verification/hooks.ts:709:    agenticHookManager.register(truthTelemetryHook);
v2/src/verification/hooks.ts:749:  private registerRollbackTriggerHook(): void {
v2/src/verification/hooks.ts:824:    agenticHookManager.register(rollbackTriggerHook);
v2/src/cli/agents/README.md:140:- **Tool Configuration**: Customizable tool settings and preferences
v2/src/cli/agents/README.md:207:- **Swarm Coordination**: Works with ruv-swarm MCP tools
v2/src/cli/agents/README.md:140:- **Tool Configuration**: Customizable tool settings and preferences
v2/src/cli/agents/README.md:207:- **Swarm Coordination**: Works with ruv-swarm MCP tools
v2/src/cli/swarm-standalone.js:164:Use all available tools including file operations, web search, and code execution as needed.`;
v2/src/cli/agents/architect.ts:115:      tools: [
v2/src/cli/agents/architect.ts:851:    toolConfigs: {
v2/src/cli/commands/migrate.ts:15:  const command = new Command('migrate');
v2/src/cli/commands/migrate.ts:15:  const command = new Command('migrate');
v2/src/cli/commands/config-integration.ts:219:      console.log(`  MCP Tools: ${status.ruvSwarmConfig.integration.enableMCPTools ? '‚úÖ' : '‚ùå'}`);
v2/src/cli/repl.ts:103:    // Complete subcommands and arguments
v2/src/cli/commands/claude-api.ts:13:export const claudeApiCommand = new Command()
v2/src/cli/create-enhanced-task.js:6: * @param {string} tools - Comma-separated list of available tools
v2/src/cli/create-enhanced-task.js:9:export function createEnhancedTask(task, flags, instanceId, tools) {
v2/src/cli/create-enhanced-task.js:24:${flags.config ? `- MCP Config: ${flags.config}` : ''}
v2/src/cli/create-enhanced-task.js:42:   - You have access to these tools: ${tools}
v2/src/cli/create-enhanced-task.js:43:   ${flags.tools ? `- Custom tools specified: ${flags.tools}` : ''}`;
v2/src/cli/create-enhanced-task.js:84:   - Use the Bash tool to run \`npx claude-flow\` commands
v2/src/cli/create-enhanced-task.js:96:To interact with Claude-Flow, use the Bash tool:
v2/src/cli/commands/status.ts:13:export const statusCommand = new Command()
v2/src/verification/simple-hooks.ts:48:      this.registerSimpleHooks();
v2/src/verification/simple-hooks.ts:52:  private registerSimpleHooks(): void {
v2/src/verification/simple-hooks.ts:130:    agenticHookManager.register(preTaskHook);
v2/src/verification/simple-hooks.ts:131:    agenticHookManager.register(postTaskHook);
v2/src/verification/simple-hooks.ts:133:    logger.info('Simple verification hooks registered successfully');
v2/src/swarm/types.ts:80:  tools: string[]; // Available tools
v2/src/swarm/types.ts:189:  toolConfigs: Record<string, any>;
v2/src/swarm/types.ts:296:  tools: string[];
v2/src/verification/security.ts:388:  async registerAgent(agentId: string, capabilities: string[], securityLevel: AgentIdentity['securityLevel']): Promise<AgentIdentity> {
v2/src/verification/security.ts:423:      throw new Error('Agent not registered');
v2/src/verification/security.ts:502:  // List all registered agents
v2/src/verification/security.ts:755:  registerNode(nodeId: string): void {
v2/src/verification/security.ts:769:      throw new Error('Node not registered');
v2/src/verification/security.ts:795:      throw new Error('Node not registered');
v2/src/verification/security.ts:1082:      this.byzantine.registerNode(participant);
v2/src/verification/security.ts:1087:      await this.auth.registerAgent(participantId, ['verify', 'sign'], 'HIGH');
v2/src/verification/security.ts:1240:    // Check if agent is registered
v2/src/verification/security.ts:1243:      return { success: false, reason: 'Agent not registered' };
v2/src/verification/security.ts:1303:  async registerAgent(
v2/src/verification/security.ts:1309:      throw new Error('Agent already registered');
v2/src/verification/security.ts:1312:    const identity = await this.auth.registerAgent(agentId, capabilities, securityLevel);
v2/src/verification/security.ts:1313:    this.byzantine.registerNode(agentId);
v2/src/swarm/claude-code-interface.ts:101:  tools?: string[];
v2/src/swarm/claude-code-interface.ts:699:    // Add tools if specified
v2/src/swarm/claude-code-interface.ts:700:    if (options.tools && options.tools.length > 0) {
v2/src/swarm/claude-code-interface.ts:701:      args.push('--allowedTools', options.tools.join(','));
v2/src/swarm/claude-code-interface.ts:975:        toolConfigs: {},
v2/src/swarm/claude-code-interface.ts:1002:      tools: capabilities.filter(c => ['bash', 'git', 'npm'].includes(c)),
v2/src/verification/security-bypass-test.ts:31:    this.middleware.registerMiddleware(threatIntel);
v2/src/verification/security-bypass-test.ts:261:      await this.security.registerAgent('rate-limit-test', ['verify'], 'MEDIUM');
v2/src/verification/security-bypass-test.ts:300:      await this.security.registerAgent('crypto-test', ['verify'], 'HIGH');
v2/src/verification/security-bypass-test.ts:334:      await this.security.registerAgent('byzantine-test', ['verify'], 'MEDIUM');
v2/src/verification/security-bypass-test.ts:374:      await this.security.registerAgent('audit-test', ['verify'], 'LOW');
v2/src/verification/security-bypass-test.ts:395:      await this.security.registerAgent('low-priv-test', ['verify'], 'LOW');
v2/src/verification/security-bypass-test.ts:454:      requestId: 'unregistered-test',
v2/src/verification/security-bypass-test.ts:466:    await this.security.registerAgent('invalid-sig-test', ['verify'], 'MEDIUM');
v2/src/verification/security-bypass-test.ts:598:        await this.security.registerAgent(agent, ['verify'], 'MEDIUM');
v2/src/verification/middleware.ts:23:  registerMiddleware(middleware: SecurityMiddleware): void {
v2/src/verification/middleware.ts:29:  // Unregister middleware
v2/src/verification/middleware.ts:30:  unregisterMiddleware(name: string): boolean {
v2/src/verification/middleware.ts:34:      console.log(`Unregistered security middleware: ${name}`);
v2/src/verification/middleware.ts:81:  // Get registered middleware info
v2/src/verification/cli-integration.ts:425:    const commands = [
v2/src/verification/cli-integration.ts:447:  const commands = {
v2/src/verification/cli-integration.ts:507:      const preTaskHook = verificationHookManager['registerPreTaskHook'] || (() => {});
v2/src/verification/rollback.ts:817:    this.registerStrategy({
v2/src/verification/rollback.ts:843:    this.registerStrategy({
v2/src/verification/rollback.ts:871:    this.registerStrategy({
v2/src/verification/rollback.ts:894:    this.registerStrategy({
v2/src/verification/rollback.ts:917:  public registerStrategy(strategy: RecoveryStrategy): void {
v2/src/verification/rollback.ts:919:    this.emit('strategy_registered', strategy.name);
v2/src/verification/tests.ts:248:      await this.security.registerAgent('rate-limit-test-agent', ['verify'], 'MEDIUM');
v2/src/verification/tests.ts:294:      await this.security.registerAgent('byzantine-test-agent', ['verify'], 'MEDIUM');
v2/src/verification/tests.ts:476:        await this.security.registerAgent(agentId, ['verify'], 'MEDIUM');
v2/src/verification/tests.ts:668:      await this.security.registerAgent(agentId, ['verify'], 'HIGH');
v2/src/verification/tests.ts:684:      await this.security.registerAgent(agentId, ['verify'], 'MEDIUM');
v2/src/verification/examples.ts:43:    await this.registerDefaultAgents();
v2/src/verification/examples.ts:49:  private async registerDefaultAgents(): Promise<void> {
v2/src/verification/examples.ts:59:        await this.security.registerAgent(agent.id, agent.capabilities, agent.level);
v2/src/verification/examples.ts:62:        console.error(`Failed to register agent ${agent.id}:`, error.message);
v2/src/verification/examples.ts:77:      console.log(`+ Agent registered: ${identity.agentId} (level: ${identity.securityLevel})`);
v2/src/verification/examples.ts:128:    this.middlewareManager.registerMiddleware(this.threatIntelligence);
v2/src/verification/examples.ts:129:    this.middlewareManager.registerMiddleware(new IPFilterMiddleware(
v2/src/verification/examples.ts:170:    await this.security.registerAgent('high-security-verifier', ['verify', 'audit', 'sign'], 'CRITICAL');
v2/src/verification/examples.ts:199:  private registeredAgents = new Set<string>();
v2/src/verification/examples.ts:206:  async registerClaudeFlowAgent(agentConfig: {
v2/src/verification/examples.ts:215:    await this.security.registerAgent(agentConfig.agentId, capabilities, securityLevel);
v2/src/verification/examples.ts:216:    this.registeredAgents.add(agentConfig.agentId);
v2/src/verification/examples.ts:231:    if (!this.registeredAgents.has(agentId)) {
v2/src/verification/examples.ts:232:      throw new Error(`Agent ${agentId} not registered for secure operations`);
v2/src/verification/examples.ts:282:    for (const agentId of this.registeredAgents) {
v2/src/verification/examples.ts:285:        registered: true,
v2/src/verification/examples.ts:446:    await this.registerProductionAgents();
v2/src/verification/examples.ts:454:  private async registerProductionAgents(): Promise<void> {
v2/src/verification/examples.ts:463:      await this.security.registerAgent(agent.id, agent.capabilities, agent.level);
v2/src/verification/examples.ts:545:await wrapper.registerClaudeFlowAgent({
v2/src/swarm/executor-v2.ts:327:    // Add tools
v2/src/swarm/executor-v2.ts:328:    if (task.requirements.tools.length > 0) {
v2/src/swarm/executor-v2.ts:329:      args.push('--allowedTools', task.requirements.tools.join(','));
v2/src/swarm/strategies/research.ts:857:        tools: ['WebFetchTool', 'WebSearch'],
v2/src/verification/README.md:49:const agentIdentity = await security.registerAgent(
v2/src/verification/README.md:188:     console.log('Agent not registered');
v2/src/verification/README.md:262:await security.registerAgent(id, capabilities, level);
v2/src/swarm/prompt-cli.ts:16:const program = new Command();
v2/src/swarm/sparc-executor.ts:419:    if (desc.includes('cli') || desc.includes('command')) return 'cli-tool';
v2/src/swarm/sparc-executor.ts:902:    app.register_blueprint(api_bp, url_prefix='/api')
v2/src/swarm/sparc-executor.ts:1159:        'setup.py': `from setuptools import setup, find_packages
v2/src/swarm/hive-mind-integration.ts:849:    // Implementation would send knowledge to agent through MCP tools
v2/src/swarm/strategies/auto.ts:575:        tools: this.getRequiredTools(params.type),
v2/src/swarm/strategies/auto.ts:611:    const toolMap: Record<string, string[]> = {
v2/src/swarm/strategies/auto.ts:618:      deployment: ['terminal', 'file-system', 'deployment-tools'],
v2/src/swarm/strategies/auto.ts:619:      monitoring: ['monitoring-tools', 'analyst'],
v2/src/swarm/strategies/auto.ts:620:      coordination: ['communication-tools'],
v2/src/swarm/strategies/auto.ts:621:      communication: ['communication-tools'],
v2/src/swarm/strategies/auto.ts:622:      maintenance: ['file-system', 'terminal', 'monitoring-tools'],
v2/src/swarm/strategies/auto.ts:625:      integration: ['integration-tools', 'file-system', 'terminal'],
v2/src/swarm/strategies/auto.ts:629:    return toolMap[type] || ['file-system'];
v2/src/swarm/strategies/auto.ts:817:          caps.tools.includes(capability)
v2/src/swarm/executor.ts:459:    // Add tools
v2/src/swarm/executor.ts:460:    if (task.requirements.tools.length > 0) {
v2/src/swarm/executor.ts:461:      args.push('--allowedTools', task.requirements.tools.join(','));
