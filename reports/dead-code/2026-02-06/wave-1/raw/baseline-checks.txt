### root build:ts
cwd=/Users/alessiorocchi/Projects/claude-flow cmd=npm run build:ts

> claude-flow@3.1.0-alpha.1 build:ts
> cd v3/@claude-flow/cli && npm run build || true


> @claude-flow/cli@3.1.0-alpha.1 build
> tsc

exit_code=0

### root test
cwd=/Users/alessiorocchi/Projects/claude-flow cmd=npm test

> claude-flow@3.1.0-alpha.1 test
> vitest


 DEV  v1.6.1 /Users/alessiorocchi/Projects/claude-flow

 ✓ v3/@claude-flow/guidance/tests/uncertainty.test.ts  (83 tests) 8ms
 ✓ v3/@claude-flow/claims/tests/work-stealing-service.test.ts  (36 tests) 8ms
 ✓ v3/@claude-flow/claims/tests/claim-service.test.ts  (43 tests) 9ms
 ✓ v3/@claude-flow/guidance/tests/truth-anchors.test.ts  (89 tests) 9ms
 ✓ v3/@claude-flow/plugins/__tests__/ruvector-integration.test.ts  (68 tests | 3 skipped) 20ms
 ✓ v3/@claude-flow/plugins/__tests__/ruvector-bridge.test.ts  (102 tests) 32ms
 ✓ v3/@claude-flow/guidance/tests/analyzer.test.ts  (172 tests) 60ms
 ❯ v2/src/verification/tests/mocks/false-reporting-scenarios.test.ts  (0 test)
 ✓ v3/@claude-flow/guidance/tests/temporal.test.ts  (98 tests) 160ms
 ✓ v3/@claude-flow/claims/tests/load-balancer.test.ts  (27 tests) 8ms
 ✓ v3/@claude-flow/claims/tests/events.test.ts  (36 tests) 7ms
 ✓ v3/@claude-flow/guidance/tests/trust.test.ts  (99 tests) 11ms
 ❯ v2/src/verification/tests/e2e/verification-pipeline.test.ts  (0 test)
 ✓ v3/@claude-flow/swarm/__tests__/queen-coordinator.test.ts  (68 tests) 24ms
 ❯ v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/orders.test.js  (0 test)
 ✓ v3/plugins/gastown-bridge/tests/convoy.test.ts  (63 tests) 7ms
 ✓ v3/plugins/gastown-bridge/tests/wasm-loader.test.ts  (47 tests) 12ms
 ✓ v3/@claude-flow/guidance/tests/manifest-validator.test.ts  (59 tests) 6ms
 ✓ v3/@claude-flow/cli/__tests__/services/headless-worker-executor.test.ts  (61 tests) 174ms
 ✓ v3/plugins/agentic-qe/__tests__/tools/chaos-inject.test.ts  (43 tests) 6ms
 ✓ v3/plugins/gastown-bridge/tests/mcp-tools.test.ts  (34 tests) 5ms
 ✓ v3/@claude-flow/guidance/tests/capabilities.test.ts  (68 tests) 6ms
 ✓ v3/@claude-flow/guidance/tests/evolution.test.ts  (44 tests) 6ms
 ❯ v2/src/verification/tests/performance/verification-overhead.test.ts  (0 test)
 ✓ v3/plugins/gastown-bridge/tests/types.test.ts  (55 tests) 5ms
 ✓ v3/@claude-flow/guidance/tests/memory-gate.test.ts  (48 tests) 6ms
 ✓ v3/plugins/agentic-qe/__tests__/bridges.test.ts  (44 tests) 5ms
 ✓ v3/@claude-flow/guidance/tests/hooks.test.ts  (38 tests) 14ms
 ✓ v3/@claude-flow/guidance/tests/generators.test.ts  (68 tests) 5ms
 ✓ v3/@claude-flow/cli/__tests__/ruvector/coverage-router.test.ts  (39 tests) 6ms
 ❯ v2/src/verification/tests/integration/cross-agent-communication.test.ts  (0 test)
 ❯ v2/tests/integration/mcp-pattern-persistence.test.js  (0 test)
 ✓ v3/@claude-flow/guidance/tests/artifacts.test.ts  (49 tests) 9ms
 ✓ v3/@claude-flow/guidance/tests/coherence.test.ts  (56 tests) 5ms
 ❯ v2/tests/unit/terminal/terminal-manager.test.ts  (0 test)
 ❯ v2/tests/unit/core/orchestrator.test.ts  (0 test)
 ✓ v3/@claude-flow/guidance/tests/conformance-kit.test.ts  (42 tests) 11ms
 ✓ v3/plugins/gastown-bridge/tests/bridges.test.ts  (43 tests) 6ms
 ✓ v3/@claude-flow/cli/__tests__/ruvector/diff-classifier.test.ts  (53 tests) 8ms
 ✓ v3/plugins/prime-radiant/__tests__/plugin.test.ts  (42 tests) 366ms
 ✓ v3/plugins/gastown-bridge/tests/validators.test.ts  (63 tests) 4ms
 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts  (48 tests | 28 failed) 16ms
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/portfolio-risk > should handle valid input
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/portfolio-risk > should calculate concentration risk
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/portfolio-risk > should reject unauthorized access
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/portfolio-risk > should reject empty holdings
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/portfolio-risk > should reject invalid symbol format
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/portfolio-risk > should log audit entries
     → expected "spy" to be called with arguments: [ ObjectContaining{…} ]

Received: 



Number of calls: 0

   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/anomaly-detect > should handle valid input
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/anomaly-detect > should reject unauthorized access
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/anomaly-detect > should reject invalid transaction UUID
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/anomaly-detect > should reject invalid timestamp
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/anomaly-detect > should reject empty transactions
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/market-regime > should handle valid input
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/market-regime > should include regime characteristics
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/market-regime > should reject missing market data
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/market-regime > should reject insufficient price data
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/compliance-check > should handle valid input
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/compliance-check > should check Basel III compliance
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/compliance-check > should handle as-of date
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/compliance-check > should reject missing entity
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/compliance-check > should reject empty regulations
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/stress-test > should handle valid input
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/stress-test > should handle multiple scenarios
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/stress-test > should identify VaR breaches
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/stress-test > should reject unauthorized access
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/stress-test > should reject empty scenarios
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/stress-test > should reject empty portfolio holdings
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > Audit Logging > should log audit entries with required fields
     → expected "spy" to be called with arguments: [ ObjectContaining{…} ]

Received: 



Number of calls: 0

   ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > Error Handling > should include error details in response
     → expected undefined to be true // Object.is equality
 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts  (49 tests | 34 failed) 21ms
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Tool Registry > should have version 1.0.0
     → expected '3.0.0-alpha.1' to be '1.0.0' // Object.is equality
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Tool Registry > should get tool by name
     → getTool is not a function
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Tool Registry > should return undefined for unknown tool
     → getTool is not a function
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Tool Registry > should get all tool names
     → getToolNames is not a function
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/clause-extract > should have correct tool definition
     → expected [ undefined ] to include 'document'
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/clause-extract > should handle valid input
     → expected undefined not to be undefined
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/clause-extract > should use default options
     → expected undefined to be 'US' // Object.is equality
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/clause-extract > should reject unauthorized access
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/clause-extract > should reject document exceeding size limit
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/risk-assess > should have correct tool definition
     → expected [ undefined ] to include 'document'
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/risk-assess > should handle valid input
     → expected undefined not to be undefined
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/risk-assess > should reject missing partyRole
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/risk-assess > should reject invalid partyRole
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/contract-compare > should have correct tool definition
     → expected [ undefined ] to include 'baseDocument'
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/contract-compare > should handle valid input
     → expected undefined not to be undefined
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/contract-compare > should use default comparison mode
     → expected undefined to be 'full' // Object.is equality
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/contract-compare > should reject missing base document
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/contract-compare > should reject documents exceeding size limit
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/obligation-track > should have correct tool definition
     → expected [ undefined ] to include 'document'
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/obligation-track > should handle valid input
     → expected undefined not to be undefined
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/obligation-track > should reject missing document
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/playbook-match > should have correct tool definition
     → expected [ undefined ] to include 'document'
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/playbook-match > should handle valid input
     → expected undefined not to be undefined
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/playbook-match > should use default strictness
     → expected undefined to be 'moderate' // Object.is equality
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/playbook-match > should reject unauthorized access (playbook-match is partner only)
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/playbook-match > should reject playbook exceeding size limit
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Authorization & Role Permissions > should restrict paralegal access
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Authorization & Role Permissions > should deny client access to all tools
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Matter Isolation > should include matter context in audit logs
     → expected "spy" to be called with arguments: [ ObjectContaining{…} ]

Received: 



Number of calls: 0

   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Audit Logging > should log successful operations
     → expected "spy" to be called with arguments: [ ObjectContaining{…} ]

Received: 



Number of calls: 0

   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Audit Logging > should include document hash in audit
     → expected "spy" to be called with arguments: [ ObjectContaining{…} ]

Received: 



Number of calls: 0

   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Error Handling > should handle validation errors gracefully
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Error Handling > should include error code in response
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Performance > should include analysis time in results
     → expected undefined not to be undefined
 ❯ v2/tests/integration/agentdb/compatibility.test.js  (0 test)
 ✓ v3/@claude-flow/guidance/tests/gateway.test.ts  (54 tests) 5ms
 ❯ v2/tests/performance/agentdb/benchmarks.test.js  (0 test)
 ✓ v3/@claude-flow/plugins/__tests__/ruvector-quantization.test.ts  (28 tests) 1263ms
 ❯ v2/tests/performance/benchmark.test.ts  (0 test)
 ✓ v3/@claude-flow/testing/src/v2-compat/api-compat.test.ts  (59 tests) 11ms
 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts  (48 tests | 17 failed | 1 skipped) 1051ms
   ❯ v3/@claude-flow/cli/__tests__/commands.test.ts > Agent Commands > agent spawn > should spawn agent with type flag
     → expected {} to have property "agentId"
   ❯ v3/@claude-flow/cli/__tests__/commands.test.ts > Agent Commands > agent spawn > should spawn agent with custom name
     → expected {} to have property "agentId" with value 'my-tester'
   ❯ v3/@claude-flow/cli/__tests__/commands.test.ts > Agent Commands > agent list > should list all agents
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/commands.test.ts > Agent Commands > agent list > should filter by agent type
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/commands.test.ts > Agent Commands > agent list > should filter by status
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/commands.test.ts > Agent Commands > agent list > should include inactive agents with --all flag
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/commands.test.ts > Agent Commands > agent status > should show agent status
     → expected {} to have property "id"
   ❯ v3/@claude-flow/cli/__tests__/commands.test.ts > Agent Commands > agent stop > should stop agent
     → expected {} to have property "agentId" with value 'agent-123'
   ❯ v3/@claude-flow/cli/__tests__/commands.test.ts > Swarm Commands > swarm init > should initialize swarm with default topology
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/commands.test.ts > Swarm Commands > swarm init > should initialize swarm with custom topology
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/commands.test.ts > Swarm Commands > swarm init > should enable V3 mode
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/commands.test.ts > Swarm Commands > swarm init > should set max agents
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/commands.test.ts > Memory Commands > memory retrieve > should retrieve data
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/commands.test.ts > Memory Commands > memory search > should search memory
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/commands.test.ts > Memory Commands > memory list > should list memory entries
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/commands.test.ts > Memory Commands > memory delete > should delete entry
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/commands.test.ts > Memory Commands > memory stats > should show memory statistics
     → expected false to be true // Object.is equality
 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts  (56 tests | 24 failed | 4 skipped) 1506ms
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Status Command > status (default) > should perform health check
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Status Command > status tasks > should show task status
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Status Command > status memory > should show memory status
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task create > should create task with type and description
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task create > should create task with priority
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task list > should list tasks
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task list > should filter by status
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task list > should show all tasks
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task status > should get task status
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task cancel > should cancel task
     → expected {} to have property "cancelled" with value true
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task assign > should assign task to agent
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task retry > should retry failed task
     → expected {} to have property "newTaskId"
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session list > should list sessions
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session list > should filter active sessions
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session list > should include archived sessions
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session save > should save session with name
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session save > should save session with description
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session save > should exclude memory when requested
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session restore > should restore session
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session restore > should restore only memory
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session delete > should delete session
     → expected {} to have property "deleted" with value true
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session export > should export in YAML format
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session import > should import session from file
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session current > should show current session
     → expected false to be true // Object.is equality
 ✓ v3/plugins/agentic-qe/__tests__/tools/security-scan.test.ts  (37 tests) 4ms
 ❯ v3/__tests__/integration/workflow-integration.test.ts  (15 tests | 2 failed) 291ms
   ❯ v3/__tests__/integration/workflow-integration.test.ts > Full Workflow Integration Tests > should support workflow resume after interruption
     → expected 'completed' to be 'paused' // Object.is equality
   ❯ v3/__tests__/integration/workflow-integration.test.ts > Full Workflow Integration Tests > should support workflow composition and nesting
     → expected 3 to be greater than or equal to 4
 ❯ v2/tests/unit/core/enhanced-orchestrator.test.ts  (0 test)
 ✓ v3/@claude-flow/guidance/tests/proof.test.ts  (44 tests) 7ms
 ❯ v2/tests/unit/utils/helpers.test.ts  (0 test)
 ✓ v3/plugins/agentic-qe/__tests__/tools/analyze-coverage.test.ts  (35 tests) 6ms
 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts  (50 tests | 32 failed) 17ms
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Tool Registry > should have version 0.1.0
     → expected '3.0.0-alpha.1' to be '0.1.0' // Object.is equality
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Tool Registry > should get tool by name
     → getTool is not a function
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Tool Registry > should return undefined for unknown tool
     → getTool is not a function
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Tool Registry > should get all tool names
     → getToolNames is not a function
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/semantic-search > should have correct tool definition
     → expected [ undefined ] to include 'query'
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/semantic-search > should handle valid input
     → expected undefined not to be undefined
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/semantic-search > should reject missing query
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/semantic-search > should reject query exceeding max length
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/semantic-search > should reject topK outside valid range
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/architecture-analyze > should have correct tool definition
     → expected [ undefined ] to include 'targetPath'
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/architecture-analyze > should handle valid input
     → expected undefined not to be undefined
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/architecture-analyze > should reject missing targetPath
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/architecture-analyze > should reject targetPath exceeding max length
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/refactor-impact > should have correct tool definition
     → expected [ undefined ] to include 'targetPath'
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/refactor-impact > should handle valid input
     → expected undefined not to be undefined
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/refactor-impact > should reject missing targetPath
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/refactor-impact > should reject missing changeType
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/refactor-impact > should reject invalid changeType
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/split-suggest > should have correct tool definition
     → expected [ undefined ] to include 'targetPath'
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/split-suggest > should handle valid input
     → expected undefined not to be undefined
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/split-suggest > should use default threshold
     → expected undefined to be 500 // Object.is equality
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/split-suggest > should reject missing targetPath
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/split-suggest > should reject threshold outside valid range
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/learn-patterns > should have correct tool definition
     → expected [ undefined ] to include 'targetPath'
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/learn-patterns > should handle valid input
     → expected undefined not to be undefined
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/learn-patterns > should reject missing targetPath
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/learn-patterns > should reject minConfidence outside valid range
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Security - Secret Masking > should mask secrets in search results
     → data.results is not iterable
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Error Handling > should handle validation errors gracefully
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Error Handling > should include timestamp in error response
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Performance Logging > should log duration on success
     → expected "spy" to be called with arguments: [ StringContaining "completed", …(1) ]

Received: 



Number of calls: 0

   ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Performance Logging > should include analysis time in results
     → expected undefined not to be undefined
 ✓ v3/plugins/prime-radiant/__tests__/tools/consensus-verify.test.ts  (25 tests) 4ms
 ✓ v3/plugins/prime-radiant/__tests__/engines/causal.test.ts  (23 tests) 4ms
 ✓ v3/@claude-flow/testing/src/v2-compat/hooks-compat.test.ts  (75 tests) 15ms
 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts  (46 tests | 23 failed) 14ms
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/patient-similarity > should handle valid input
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/patient-similarity > should reject unauthorized access
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/patient-similarity > should reject invalid ICD-10 codes
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/patient-similarity > should log audit entries
     → expected "spy" to be called with arguments: [ ObjectContaining{…} ]

Received: 



Number of calls: 0

   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/drug-interactions > should handle valid input
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/drug-interactions > should handle conditions
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/drug-interactions > should reject empty medications list
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/drug-interactions > should reject unauthorized access
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/clinical-pathways > should handle valid input
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/clinical-pathways > should handle constraints
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/clinical-pathways > should reject missing diagnosis
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/literature-search > should handle valid input
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/literature-search > should handle source filters
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/literature-search > should handle evidence level filter
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/literature-search > should reject missing query
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/literature-search > should reject query exceeding max length
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/ontology-navigate > should handle valid input
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/ontology-navigate > should use default depth
     → Cannot read properties of undefined (reading '0')
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/ontology-navigate > should reject missing code
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/ontology-navigate > should reject missing ontology
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/ontology-navigate > should reject invalid depth
     → expected undefined to be true // Object.is equality
   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > Audit Logging > should log successful operations
     → expected "spy" to be called with arguments: [ ObjectContaining{…} ]

Received: 



Number of calls: 0

   ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > Error Handling > should include timestamp in error responses
     → expected undefined to be true // Object.is equality
 ✓ v3/@claude-flow/mcp/__tests__/mcp.test.ts  (47 tests) 9ms
 ✓ v3/@claude-flow/guidance/tests/persistence.test.ts  (35 tests) 571ms
 ✓ v3/@claude-flow/security/__tests__/acceptance/security-compliance.test.ts  (34 tests) 5ms
 ✓ v3/plugins/prime-radiant/__tests__/wasm-bridge.test.ts  (32 tests) 338ms
 ✓ v3/plugins/teammate-plugin/tests/teammate-bridge.test.ts  (32 tests) 21ms
 ❯ v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/products.test.js  (0 test)
 ✓ v3/@claude-flow/cli/__tests__/ruvector/ast-analyzer.test.ts  (52 tests) 11ms
 ✓ v3/@claude-flow/testing/src/v2-compat/mcp-compat.test.ts  (69 tests) 13ms
 ✓ v3/plugins/financial-risk/tests/types.test.ts  (47 tests) 16ms
 ✓ v3/@claude-flow/guidance/tests/benchmark.test.ts  (23 tests) 221ms
stdout | v3/@claude-flow/guidance/tests/benchmark.test.ts > Benchmark Summary > should print results table

==========================================================================================
  GUIDANCE CONTROL PLANE — PERFORMANCE BENCHMARK REPORT
==========================================================================================
Benchmark                                             ops/sec     avg μs   total ms
------------------------------------------------------------------------------------------
ContinueGate.evaluate(healthy)                      5,274,495       0.19       1.90
ContinueGate.evaluate(stop)                         4,355,164       0.23       2.30
ContinueGate.evaluateWithHistory(cooldown)         19,805,275       0.05       0.50
ThreatDetector.analyzeInput(clean)                  2,236,907       0.45       4.47
ThreatDetector.analyzeInput(malicious)                567,239       1.76      17.63
ThreatDetector.getThreatScore(1k)                     177,339       5.64       5.64
CollusionDetector.detectCollusion(100)                122,997       8.13       8.13
CollusionDetector.detectCollusion(1k)                  20,514      48.75       4.87
MemoryQuorum.propose(eviction)                        709,178       1.41       7.05
MemoryQuorum.vote+resolve                             201,447       4.96      24.82
Gateway.evaluate(full pipeline)                       583,249       1.71      17.15
MemoryWriteGate.evaluateWrite(clean)                  125,428       7.97      79.73
MemoryWriteGate.evaluateWrite(50 entries)             123,753       8.08       8.08
CoherenceScheduler.computeCoherence(20)             2,717,515       0.37       3.68
TrustAccumulator.recordOutcome                      8,664,881       0.12       1.15
TrustAccumulator.getScore+getTier(100)              8,788,312       0.11       1.14
AuthorityGate.canPerform                           12,975,773       0.08       0.77
AuthorityGate.canPerform(escalation)                2,507,496       0.40       3.99
Classifier.classify(reversible)                     2,233,389       0.45       4.48
Classifier.classify(irreversible)                   5,689,496       0.18       1.76
MetaGovernor.checkAllInvariants(4)                  6,360,651       0.16       1.57
MetaGovernor.validateOptimizerAction                4,360,452       0.23       0.23
------------------------------------------------------------------------------------------
Total benchmarks: 22
==========================================================================================


 ✓ v3/@claude-flow/guidance/tests/continue-gate.test.ts  (42 tests) 11ms
 ✓ v3/plugins/agentic-qe/__tests__/plugin.test.ts  (33 tests) 6ms
 ❯ v3/@claude-flow/performance/__tests__/attention.test.ts  (0 test)
 ❯ v3/plugins/code-intelligence/tests/types.test.ts  (54 tests | 2 failed) 10ms
   ❯ v3/plugins/code-intelligence/tests/types.test.ts > Code Intelligence Types > Secret Patterns > should detect API keys in quotes
     → expected false to be true // Object.is equality
   ❯ v3/plugins/code-intelligence/tests/types.test.ts > Code Intelligence Types > maskSecrets > should mask GitHub tokens
     → expected 'const token = "ghp_abcdefghijklmnopqr…' to contain '[REDACTED]'
 ✓ v3/mcp/__tests__/session-tools.test.ts  (43 tests) 21ms
stderr | v3/mcp/__tests__/session-tools.test.ts > Session Tools > Error Handling > should handle orchestrator errors gracefully
Failed to collect task queue: Error: Orchestrator error
    at /Users/alessiorocchi/Projects/claude-flow/v3/mcp/__tests__/session-tools.test.ts:535:52
    at file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:135:14
    at file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:60:26
    at runTest (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:781:17)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runFiles (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:958:5)
    at startTests (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:967:3)
    at file:///Users/alessiorocchi/Projects/claude-flow/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:116:7

stderr | v3/mcp/__tests__/session-tools.test.ts > Session Tools > Error Handling > should handle swarm coordinator errors gracefully
Failed to collect agent states: Error: Swarm error
    at /Users/alessiorocchi/Projects/claude-flow/v3/mcp/__tests__/session-tools.test.ts:547:56
    at file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:135:14
    at file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:60:26
    at runTest (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:781:17)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runFiles (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:958:5)
    at startTests (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:967:3)
    at file:///Users/alessiorocchi/Projects/claude-flow/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:116:7
Failed to collect swarm state: Error: Swarm error
    at /Users/alessiorocchi/Projects/claude-flow/v3/mcp/__tests__/session-tools.test.ts:547:56
    at file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:135:14
    at file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:60:26
    at runTest (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:781:17)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runFiles (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:958:5)
    at startTests (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:967:3)
    at file:///Users/alessiorocchi/Projects/claude-flow/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:116:7

stderr | v3/mcp/__tests__/session-tools.test.ts > Session Tools > Error Handling > should handle memory service errors gracefully
Failed to collect memory entries: Error: Memory error
    at /Users/alessiorocchi/Projects/claude-flow/v3/mcp/__tests__/session-tools.test.ts:559:65
    at file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:135:14
    at file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:60:26
    at runTest (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:781:17)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runFiles (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:958:5)
    at startTests (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:967:3)
    at file:///Users/alessiorocchi/Projects/claude-flow/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:116:7

 ✓ v3/plugins/teammate-plugin/tests/utils.test.ts  (63 tests) 1969ms
 ✓ v3/plugins/prime-radiant/__tests__/engines/spectral.test.ts  (25 tests) 6ms
 ✓ v3/@claude-flow/neural/__tests__/patterns.test.ts  (39 tests) 10ms
 ✓ v3/@claude-flow/cli/__tests__/ruvector/index.test.ts  (33 tests) 11ms
 ✓ v3/mcp/__tests__/task-tools.test.ts  (41 tests) 13ms
stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/create > should create a task with required fields
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/create > should create a task with all optional fields
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/list > should list all tasks with no filters
Failed to list tasks via orchestrator: TypeError: Cannot read properties of undefined (reading 'tasks')
    at handleListTasks (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:328:23)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/list > should filter tasks by status
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)
Failed to list tasks via orchestrator: TypeError: Cannot read properties of undefined (reading 'tasks')
    at handleListTasks (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:328:23)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/list > should apply pagination
Failed to list tasks via orchestrator: TypeError: Cannot read properties of undefined (reading 'tasks')
    at handleListTasks (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:328:23)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/list > should apply sorting
Failed to list tasks via orchestrator: TypeError: Cannot read properties of undefined (reading 'tasks')
    at handleListTasks (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:328:23)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/status > should get task status
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)
Failed to get task status via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleTaskStatus (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:434:20)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/status > should include metrics when requested
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)
Failed to get task status via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleTaskStatus (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:434:20)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/status > should include history when requested
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)
Failed to get task status via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleTaskStatus (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:434:20)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/status > should throw error for non-existent task
Failed to get task status via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleTaskStatus (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:434:20)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/cancel > should cancel a pending task
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)
Failed to cancel task via orchestrator: TypeError: Cannot read properties of undefined (reading 'cancelled')
    at handleCancelTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:522:27)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/cancel > should include cancellation reason
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)
Failed to cancel task via orchestrator: TypeError: Cannot read properties of undefined (reading 'cancelled')
    at handleCancelTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:522:27)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/cancel > should throw error for non-existent task
Failed to cancel task via orchestrator: TypeError: Cannot read properties of undefined (reading 'cancelled')
    at handleCancelTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:522:27)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/assign > should assign a task to an agent
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)
Failed to assign task via orchestrator: TypeError: Cannot read properties of undefined (reading 'assigned')
    at handleAssignTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:600:26)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/assign > should fail reassignment without flag
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)
Failed to assign task via orchestrator: TypeError: Cannot read properties of undefined (reading 'assigned')
    at handleAssignTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:600:26)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/assign > should allow reassignment with flag
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)
Failed to assign task via orchestrator: TypeError: Cannot read properties of undefined (reading 'assigned')
    at handleAssignTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:600:26)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/update > should update task priority
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)
Failed to update task via orchestrator: TypeError: Cannot read properties of undefined (reading 'updated')
    at handleUpdateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:671:25)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/update > should update task description
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)
Failed to update task via orchestrator: TypeError: Cannot read properties of undefined (reading 'updated')
    at handleUpdateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:671:25)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/update > should merge metadata
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)
Failed to update task via orchestrator: TypeError: Cannot read properties of undefined (reading 'updated')
    at handleUpdateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:671:25)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/dependencies > should clear all dependencies
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/results > should get task results
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)
Failed to get task results via orchestrator: TypeError: Cannot read properties of undefined (reading 'status')
    at handleTaskResults (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:820:24)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/results > should support different result formats
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)
Failed to get task results via orchestrator: TypeError: Cannot read properties of undefined (reading 'status')
    at handleTaskResults (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:820:24)
Failed to get task results via orchestrator: TypeError: Cannot read properties of undefined (reading 'status')
    at handleTaskResults (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:820:24)

stderr | v3/mcp/__tests__/task-tools.test.ts > Task Tools > tasks/results > should optionally include artifacts
Failed to create task via orchestrator: TypeError: Cannot read properties of undefined (reading 'id')
    at handleCreateTask (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:278:24)
Failed to get task results via orchestrator: TypeError: Cannot read properties of undefined (reading 'status')
    at handleTaskResults (/Users/alessiorocchi/Projects/claude-flow/v3/mcp/tools/task-tools.ts:820:24)

 ❯ v2/src/maestro/tests/native-hive-mind-integration.test.ts  (0 test)
 ✓ v3/plugins/prime-radiant/__tests__/engines/cohomology.test.ts  (30 tests) 4ms
 ❯ v3/@claude-flow/security/__tests__/unit/safe-executor.test.ts  (0 test)
 ❯ v2/src/verification/tests/unit/truth-scoring.test.ts  (0 test)
 ✓ v3/@claude-flow/hooks/__tests__/workers.test.ts  (31 tests) 341ms
 ❯ v3/@claude-flow/performance/__tests__/benchmarks.test.ts  (0 test)
 ❯ v2/tests/unit/cli/commands/init/validation.test.js  (0 test)
 ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts  (35 tests | 18 failed) 7ms
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Plugin Integration Types > should export all plugin types
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Plugin Integration Types > should export all class instances
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Plugin Metadata > reasoningBankPlugin should have correct metadata
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Plugin Metadata > semanticCodeSearchPlugin should have correct metadata
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Plugin Metadata > sonaLearningPlugin should have correct metadata
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Plugin Metadata > intentRouterPlugin should have correct metadata
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Plugin Metadata > mcpToolOptimizerPlugin should have correct metadata
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Plugin Metadata > hookPatternLibraryPlugin should have correct metadata
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > MCP Tool Definitions > reasoningBankPlugin should define expected tools
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > MCP Tool Definitions > semanticCodeSearchPlugin should define expected tools
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > MCP Tool Definitions > sonaLearningPlugin should define expected tools
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > MCP Tool Definitions > intentRouterPlugin should define expected tools
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > MCP Tool Definitions > mcpToolOptimizerPlugin should define expected tools
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > MCP Tool Definitions > hookPatternLibraryPlugin should define expected tools
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Hook Definitions > reasoningBankPlugin should define learning hooks
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Hook Definitions > intentRouterPlugin should define routing hooks
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Hook Definitions > mcpToolOptimizerPlugin should define optimization hooks
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
   ❯ v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Hook Definitions > hookPatternLibraryPlugin should define file operation hooks
     → Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
 ❯ v3/plugins/legal-contracts/tests/types.test.ts  (44 tests | 1 failed) 8ms
   ❯ v3/plugins/legal-contracts/tests/types.test.ts > Legal Contracts Types > PlaybookMatchInputSchema > should validate with priority clauses
     → expected false to be true // Object.is equality
 ❯ v2/tests/integration/mcp.test.ts  (0 test)
 ✓ v3/@claude-flow/testing/src/v2-compat/cli-compat.test.ts  (67 tests) 12ms
 ✓ v3/@claude-flow/plugins/__tests__/ruvector-migrations.test.ts  (42 tests) 2886ms
 ❯ v2/tests/mcp/mcp-2025-compliance.test.ts  (0 test)
 ❯ v2/tests/unit/mcp/mcp-interface.test.ts  (0 test)
 ❯ v2/src/__tests__/integration/swarm-sdk-integration.test.ts  (0 test)
 ✓ v3/@claude-flow/plugins/__tests__/dependency-graph.test.ts  (46 tests) 5ms
 ❯ v2/src/__tests__/regression/backward-compatibility.test.ts  (0 test)
 ❯ v2/src/mcp/tests/mcp-integration.test.ts  (0 test)
 ✓ v3/@claude-flow/cli/__tests__/cli.test.ts  (33 tests | 1 skipped) 166ms
 ✓ v3/@claude-flow/cli/__tests__/ruvector/q-learning-router.test.ts  (45 tests) 133ms
 ❯ v2/tests/unit/cli/commands/init/rollback.test.js  (0 test)
 ✓ v3/@claude-flow/cli/__tests__/ruvector/graph-analyzer.test.ts  (29 tests | 1 skipped) 416ms
 ✓ v3/plugins/agentic-qe/__tests__/tools/generate-tests.test.ts  (33 tests) 4ms
 ✓ v3/@claude-flow/neural/__tests__/algorithms.test.ts  (44 tests) 373ms
stderr | v3/@claude-flow/neural/__tests__/algorithms.test.ts > DQN Algorithm > should perform DQN update
DQN update exceeded target: 12.11ms > 10ms

stderr | v3/@claude-flow/neural/__tests__/algorithms.test.ts > DQN Algorithm > should update under performance target (<10ms)
DQN update exceeded target: 13.38ms > 10ms

stderr | v3/@claude-flow/neural/__tests__/algorithms.test.ts > PPO Algorithm > should perform PPO update with clipping
PPO update exceeded target: 11.93ms > 10ms

stderr | v3/@claude-flow/neural/__tests__/algorithms.test.ts > Decision Transformer > should train on buffered trajectories
DT training exceeded target: 50.12ms > 10ms

stderr | v3/@claude-flow/neural/__tests__/algorithms.test.ts > Decision Transformer > should train under performance target (<10ms per batch)
DT training exceeded target: 12.09ms > 10ms

stderr | v3/@claude-flow/neural/__tests__/algorithms.test.ts > Decision Transformer > should handle causal attention masking
DT training exceeded target: 86.41ms > 10ms

stderr | v3/@claude-flow/neural/__tests__/algorithms.test.ts > Decision Transformer > should handle varying trajectory lengths
DT training exceeded target: 113.02ms > 10ms

 ❯ v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/auth.test.js  (0 test)
 ✓ v3/@claude-flow/security/__tests__/integration/security-flow.test.ts  (20 tests) 5ms
 ✓ v3/plugins/healthcare-clinical/tests/types.test.ts  (42 tests) 6ms
 ❯ v2/src/__tests__/in-process-mcp.test.ts  (0 test)
 ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts  (26 tests | 11 failed) 12ms
   ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > version constraints > should validate dependency versions during initialization
     → Invalid plugin: does not implement IPlugin interface
   ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > version constraints > should pass validation with compatible versions
     → Invalid plugin: does not implement IPlugin interface
   ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > safe unload > should prevent unload of plugins with dependents
     → Invalid plugin: does not implement IPlugin interface
   ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > safe unload > should allow cascade unload
     → Invalid plugin: does not implement IPlugin interface
   ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > safe unload > should allow force unload
     → Invalid plugin: does not implement IPlugin interface
   ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > initialization strategies > should support parallel-safe initialization
     → Invalid plugin: does not implement IPlugin interface
   ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > hot reload > should reload a plugin
     → Invalid plugin: does not implement IPlugin interface
   ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > hot reload > should preserve state during reload
     → Invalid plugin: does not implement IPlugin interface
   ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > conflict resolution > should error on conflict by default
     → promise resolved "undefined" instead of rejecting
   ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > conflict resolution > should support namespace strategy
     → expected [ 'tool', 'plugin-2:tool' ] to include 'plugin-1:tool'
   ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > shutdown > should shutdown all plugins
     → Invalid plugin: does not implement IPlugin interface
stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > registration > should register a plugin
[INFO] Plugin registered: test-plugin v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > registration > should reject duplicate plugins
[INFO] Plugin registered: test-plugin v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > registration > should respect max plugins limit
[INFO] Plugin registered: plugin-1 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: plugin-2 v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > version constraints > should check maxCoreVersion
[INFO] Plugin registered: test-plugin v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > version constraints > should validate dependency versions during initialization
[INFO] Plugin registered: dep-plugin v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > version constraints > should pass validation with compatible versions
[INFO] Plugin registered: dep-plugin v1.5.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > safe unload > should prevent unload of plugins with dependents
[INFO] Plugin registered: base-plugin v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > safe unload > should allow cascade unload
[INFO] Plugin registered: base-plugin v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > safe unload > should allow force unload
[INFO] Plugin registered: base-plugin v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > initialization strategies > should initialize sequentially by default
[INFO] Plugin registered: plugin-1 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: plugin-2 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin initialized: plugin-1 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin initialized: plugin-2 { component: 'EnhancedPluginRegistry' }
[INFO] Registry initialized with 2 plugins (sequential) { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > initialization strategies > should support parallel initialization
[INFO] Plugin registered: plugin-1 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: plugin-2 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: plugin-3 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Registry initialized with 3 plugins (parallel) { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > initialization strategies > should support parallel-safe initialization
[INFO] Plugin registered: base v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > hot reload > should reject name mismatch
[INFO] Plugin registered: original v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin initialized: original { component: 'EnhancedPluginRegistry' }
[INFO] Registry initialized with 1 plugins (sequential) { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > conflict resolution > should error on conflict by default
[INFO] Plugin registered: plugin-1 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: plugin-2 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin initialized: plugin-1 { component: 'EnhancedPluginRegistry' }
[INFO] Registry initialized with 2 plugins (sequential) { component: 'EnhancedPluginRegistry' }

stderr | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > conflict resolution > should error on conflict by default
[ERROR] Failed to initialize plugin plugin-2: mcpTools: shared-tool conflict between plugin-1 and plugin-2 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > conflict resolution > should support first-wins strategy
[INFO] Plugin registered: plugin-1 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: plugin-2 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin initialized: plugin-1 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin initialized: plugin-2 { component: 'EnhancedPluginRegistry' }
[INFO] Registry initialized with 2 plugins (sequential) { component: 'EnhancedPluginRegistry' }

stderr | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > conflict resolution > should support first-wins strategy
[WARN] mcpTools: shared-tool already registered by plugin-1, ignoring from plugin-2 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > conflict resolution > should support namespace strategy
[INFO] Plugin registered: plugin-1 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: plugin-2 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin initialized: plugin-1 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin initialized: plugin-2 { component: 'EnhancedPluginRegistry' }
[INFO] Registry initialized with 2 plugins (sequential) { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > health check > should return health status for all plugins
[INFO] Plugin registered: healthy-plugin v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin initialized: healthy-plugin { component: 'EnhancedPluginRegistry' }
[INFO] Registry initialized with 1 plugins (sequential) { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > health check > should report unhealthy for uninitialized plugins
[INFO] Plugin registered: uninitialized-plugin v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > stats > should return correct statistics
[INFO] Plugin registered: plugin-1 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: plugin-2 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin initialized: plugin-1 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin initialized: plugin-2 { component: 'EnhancedPluginRegistry' }
[INFO] Registry initialized with 2 plugins (sequential) { component: 'EnhancedPluginRegistry' }

 ❯ v2/tests/production/performance-validation.test.ts  (0 test)
 ❯ v3/__tests__/integration/plugin-integration.test.ts  (15 tests | 2 failed) 110ms
   ❯ v3/__tests__/integration/plugin-integration.test.ts > Plugin Integration Tests > should support plugin priority ordering
     → expected [ 10, 100, 50 ] to deeply equal [ 100, 50, 10 ]
   ❯ v3/__tests__/integration/plugin-integration.test.ts > Plugin Integration Tests > should support plugin versioning and compatibility checks
     → promise resolved "undefined" instead of rejecting
 ✓ v3/plugins/test-intelligence/tests/mcp-tools.test.ts  (37 tests) 10ms
 ✓ v3/mcp/__tests__/system-tools.test.ts  (38 tests) 9ms
 ❯ v2/tests/session-serialization.test.js  (0 test)
 ✓ v3/plugins/hyperbolic-reasoning/tests/bridges.test.ts  (32 tests) 5ms
stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generateSessionContext > should return V3 development context
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

 ✓ v3/plugins/prime-radiant/__tests__/tools/coherence-check.test.ts  (25 tests) 5ms
 ✓ v3/plugins/hyperbolic-reasoning/tests/types.test.ts  (45 tests) 6ms
 ❯ v2/tests/security/init-security.test.js  (0 test)
 ❯ v2/tests/production/deployment-validation.test.ts  (0 test)
 ✓ v3/plugins/test-intelligence/tests/types.test.ts  (42 tests) 7ms
 ❯ v2/src/__tests__/permission-manager.test.ts  (0 test)
stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > initialization > should initialize in in-memory mode when dependencies are not available
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > initialization > should only initialize once
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > storePattern > should store a new pattern
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

 ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts  (41 tests | 18 failed) 478ms
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > CognitiveBridge > retrieve > should retrieve stored item
     → expected 0.9 to be 0.8 // Object.is equality
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > CognitiveBridge > decay > should apply decay to stored items
     → actual value must be number or bigint, received "undefined"
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > CognitiveBridge > focus > should handle focus on non-existent items
     → expected [ 'non-existent' ] to not include 'non-existent'
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > initialization > should initialize successfully
     → this._module.setMode is not a function
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > initialization > should cleanup on destroy
     → this._module.setMode is not a function
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > learn > should learn from trajectories
     → this._module.setMode is not a function
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > learn > should return 0 for empty trajectories
     → this._module.setMode is not a function
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > learn > should throw when not initialized
     → this._module.setMode is not a function
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > predict > should predict action from state
     → this._module.setMode is not a function
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > predict > should return explore action for unknown states
     → this._module.setMode is not a function
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > pattern management > should store pattern
     → this._module.setMode is not a function
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > pattern management > should find similar patterns
     → this._module.setMode is not a function
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > pattern management > should update pattern success rate
     → this._module.setMode is not a function
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > LoRA operations > should apply LoRA transformation
     → this._module.setMode is not a function
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > LoRA operations > should update LoRA weights
     → this._module.setMode is not a function
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > EWC operations > should compute Fisher information
     → this._module.setMode is not a function
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > EWC operations > should consolidate without throwing
     → this._module.setMode is not a function
   ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > mode management > should set and get mode
     → this._module.setMode is not a function
 ✓ v3/@claude-flow/mcp/__tests__/integration.test.ts  (18 tests) 154ms
 ❯ v2/tests/production/environment-validation.test.ts  (0 test)
 ❯ v2/src/__tests__/session-forking.test.ts  (0 test)
 ✓ v3/plugins/quantum-optimizer/tests/types.test.ts  (37 tests) 6ms
 ❯ v2/src/__tests__/hook-matchers.test.ts  (0 test)
 ❯ v3/@claude-flow/shared/src/events/event-store.test.ts  (24 tests | 24 failed) 5ms
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Appending > should append events to the store
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Appending > should increment version for each event
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Appending > should maintain version per aggregate
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Retrieval > should retrieve events by aggregate ID
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Retrieval > should retrieve events from specific version
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Retrieval > should retrieve events by type
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Filtering > should filter by aggregate types
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Filtering > should filter by event types
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Filtering > should filter by aggregate IDs
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Filtering > should support pagination
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Replay > should replay all events
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Replay > should replay from specific version
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Snapshots > should save snapshots
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Snapshots > should return latest snapshot
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Statistics > should provide event store statistics
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > AgentStateProjection > should build agent state from events
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > AgentStateProjection > should track task assignments
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > AgentStateProjection > should track completed tasks
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > AgentStateProjection > should filter agents by status
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > TaskHistoryProjection > should build task history from events
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > TaskHistoryProjection > should calculate average task duration
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > MemoryIndexProjection > should build memory index from events
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > MemoryIndexProjection > should track memory deletions
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
   ❯ v3/@claude-flow/shared/src/events/event-store.test.ts > MemoryIndexProjection > should calculate total size by namespace
     → Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
stderr | v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Appending > should append events to the store
failed to asynchronously prepare wasm: Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
Aborted(Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm')

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_embed_hierarchy handler > should handle valid hierarchy input
[hyperbolic-reasoning] Embed hierarchy { nodes: 4, model: 'poincare_ball', dimensions: 32 }
[hyperbolic-reasoning] Hierarchy embedded {
  nodes: 4,
  curvature: -0.9919386446317014,
  mapScore: 0.3333333333333333,
  durationMs: '13.19'
}

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_embed_hierarchy handler > should handle poincare_ball model
[hyperbolic-reasoning] Embed hierarchy { nodes: 1, model: 'poincare_ball', dimensions: undefined }
[hyperbolic-reasoning] Hierarchy embedded { nodes: 1, curvature: -1, mapScore: 1, durationMs: '0.22' }

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_embed_hierarchy handler > should handle klein model
[hyperbolic-reasoning] Embed hierarchy { nodes: 1, model: 'klein', dimensions: undefined }

stderr | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_embed_hierarchy handler > should handle klein model
[hyperbolic-reasoning] Embedding failed { error: 'Index embed_1770417943745 already exists' }

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_embed_hierarchy handler > should compute embedding metrics
[hyperbolic-reasoning] Embed hierarchy { nodes: 2, model: 'poincare_ball', dimensions: undefined }
[hyperbolic-reasoning] Hierarchy embedded {
  nodes: 2,
  curvature: -0.9980051954908293,
  mapScore: 0,
  durationMs: '6.59'
}

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_taxonomic_reason handler > should handle is_a query with valid taxonomy
[hyperbolic-reasoning] Embed hierarchy { nodes: 5, model: 'poincare_ball', dimensions: undefined }
[hyperbolic-reasoning] Hierarchy embedded {
  nodes: 5,
  curvature: -0.9811137519148811,
  mapScore: 0,
  durationMs: '24.92'
}
[hyperbolic-reasoning] Taxonomic reason { type: 'is_a', subject: 'dog' }
[hyperbolic-reasoning] Taxonomic reasoning completed { type: 'is_a', confidence: 0.9971565658025492, durationMs: '0.08' }

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_taxonomic_reason handler > should return error for non-existent taxonomy
[hyperbolic-reasoning] Embed hierarchy { nodes: 5, model: 'poincare_ball', dimensions: undefined }
[hyperbolic-reasoning] Hierarchy embedded {
  nodes: 5,
  curvature: -0.9812749862480931,
  mapScore: 0,
  durationMs: '24.02'
}
[hyperbolic-reasoning] Taxonomic reason { type: 'is_a', subject: 'dog' }

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_taxonomic_reason handler > should handle similarity query
[hyperbolic-reasoning] Embed hierarchy { nodes: 5, model: 'poincare_ball', dimensions: undefined }
[hyperbolic-reasoning] Hierarchy embedded {
  nodes: 5,
  curvature: -0.9813401549616972,
  mapScore: 0,
  durationMs: '25.30'
}
[hyperbolic-reasoning] Taxonomic reason { type: 'similarity', subject: 'cat' }
[hyperbolic-reasoning] Taxonomic reasoning completed { type: 'similarity', confidence: 1, durationMs: '0.06' }

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_semantic_search handler > should handle valid search input
[hyperbolic-reasoning] Embed hierarchy { nodes: 5, model: 'poincare_ball', dimensions: undefined }
[hyperbolic-reasoning] Hierarchy embedded {
  nodes: 5,
  curvature: -0.9851222166947675,
  mapScore: 0,
  durationMs: '23.63'
}
[hyperbolic-reasoning] Semantic search { index: 'embed_1770417943854', mode: 'nearest', topK: 10 }
[hyperbolic-reasoning] Semantic search completed { results: 5, mode: 'nearest', durationMs: '0.21' }

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_semantic_search handler > should return error for non-existent index
[hyperbolic-reasoning] Embed hierarchy { nodes: 5, model: 'poincare_ball', dimensions: undefined }
[hyperbolic-reasoning] Hierarchy embedded {
  nodes: 5,
  curvature: -0.984888289439934,
  mapScore: 0,
  durationMs: '23.74'
}
[hyperbolic-reasoning] Semantic search { index: 'non-existent-index', mode: 'nearest', topK: 10 }

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_semantic_search handler > should respect topK limit
[hyperbolic-reasoning] Embed hierarchy { nodes: 5, model: 'poincare_ball', dimensions: undefined }
[hyperbolic-reasoning] Hierarchy embedded {
  nodes: 5,
  curvature: -0.9848981139113498,
  mapScore: 0,
  durationMs: '28.04'
}
[hyperbolic-reasoning] Semantic search { index: 'embed_1770417943907', mode: 'nearest', topK: 2 }
[hyperbolic-reasoning] Semantic search completed { results: 2, mode: 'nearest', durationMs: '0.08' }

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_semantic_search handler > should return distance metrics
[hyperbolic-reasoning] Embed hierarchy { nodes: 5, model: 'poincare_ball', dimensions: undefined }
[hyperbolic-reasoning] Hierarchy embedded {
  nodes: 5,
  curvature: -0.9847358876700171,
  mapScore: 0,
  durationMs: '23.69'
}
[hyperbolic-reasoning] Semantic search { index: 'embed_1770417943931', mode: 'nearest', topK: 3 }
[hyperbolic-reasoning] Semantic search completed { results: 3, mode: 'nearest', durationMs: '0.08' }

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_hierarchy_compare handler > should handle valid comparison input
[hyperbolic-reasoning] Hierarchy compare { sourceNodes: 3, targetNodes: 3, method: 'gromov_wasserstein' }
[hyperbolic-reasoning] Hierarchy comparison completed { alignments: 3, structuralSimilarity: 1, durationMs: '23.63' }

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_hierarchy_compare handler > should handle all alignment methods
[hyperbolic-reasoning] Hierarchy compare { sourceNodes: 1, targetNodes: 1, method: 'wasserstein' }
[hyperbolic-reasoning] Hierarchy comparison completed { alignments: 1, structuralSimilarity: 1, durationMs: '0.07' }
[hyperbolic-reasoning] Hierarchy compare { sourceNodes: 1, targetNodes: 1, method: 'gromov_wasserstein' }
[hyperbolic-reasoning] Hierarchy comparison completed { alignments: 1, structuralSimilarity: 1, durationMs: '0.04' }
[hyperbolic-reasoning] Hierarchy compare { sourceNodes: 1, targetNodes: 1, method: 'tree_edit' }
[hyperbolic-reasoning] Hierarchy comparison completed { alignments: 1, structuralSimilarity: 1, durationMs: '0.03' }
[hyperbolic-reasoning] Hierarchy compare { sourceNodes: 1, targetNodes: 1, method: 'subtree_isomorphism' }
[hyperbolic-reasoning] Hierarchy comparison completed { alignments: 1, structuralSimilarity: 1, durationMs: '0.03' }

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_hierarchy_compare handler > should compute alignment between hierarchies
[hyperbolic-reasoning] Hierarchy compare { sourceNodes: 2, targetNodes: 2, method: 'gromov_wasserstein' }
[hyperbolic-reasoning] Hierarchy comparison completed { alignments: 2, structuralSimilarity: 1, durationMs: '11.71' }

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_entailment_graph handler > should handle build action
[hyperbolic-reasoning] Entailment graph { action: 'build', concepts: 3 }
[hyperbolic-reasoning] Entailment graph built { nodes: 3, edges: 0, durationMs: '1.88' }

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_entailment_graph handler > should handle query action after build
[hyperbolic-reasoning] Entailment graph { action: 'build', concepts: 2 }
[hyperbolic-reasoning] Entailment graph built { nodes: 2, edges: 0, durationMs: '0.35' }
[hyperbolic-reasoning] Entailment graph { action: 'query', concepts: undefined }

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_entailment_graph handler > should handle query action with message about pre-built graph
[hyperbolic-reasoning] Entailment graph { action: 'query', concepts: undefined }

stdout | v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_entailment_graph handler > should handle prune action
[hyperbolic-reasoning] Entailment graph { action: 'build', concepts: 2 }
[hyperbolic-reasoning] Entailment graph built { nodes: 2, edges: 0, durationMs: '0.31' }
[hyperbolic-reasoning] Entailment graph { action: 'prune', concepts: undefined }

 ❯ v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts  (30 tests | 1 failed | 2 skipped) 242ms
   ❯ v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_embed_hierarchy handler > should handle klein model
     → expected true to be undefined
 ✓ v3/plugins/cognitive-kernel/tests/types.test.ts  (42 tests) 5ms
 ✓ v3/@claude-flow/plugins/__tests__/ruvector-streaming.test.ts  (26 tests) 4717ms
 ✓ v3/@claude-flow/cli/__tests__/mcp-client.test.ts  (34 tests) 9ms
 ❯ v2/tests/production/security-validation.test.ts  (0 test)
 ✓ v3/@claude-flow/neural/__tests__/sona.test.ts  (23 tests) 7ms
 ❯ v3/@claude-flow/shared/src/hooks/hooks.test.ts  (23 tests | 1 failed) 110ms
   ❯ v3/@claude-flow/shared/src/hooks/hooks.test.ts > HookExecutor > should execute hooks sequentially with context chaining
     → expected +0 to be 2 // Object.is equality
 ✓ v3/plugins/neural-coordination/tests/mcp-tools.test.ts  (30 tests) 7ms
stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/neural-consensus handler > should handle valid input
[neural-coordination] Processing neural consensus {
  topic: 'Choose deployment strategy',
  agentCount: 3,
  protocol: 'neural_voting'
}
[neural-coordination] Neural consensus completed {
  consensusReached: true,
  selectedOption: 'blue-green',
  rounds: 1,
  durationMs: '1.63'
}

stderr | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/neural-consensus handler > should return error for insufficient agents
[neural-coordination] Input validation failed {
  error: '[\n' +
    '  {\n' +
    '    "code": "too_small",\n' +
    '    "minimum": 2,\n' +
    '    "type": "array",\n' +
    '    "inclusive": true,\n' +
    '    "exact": false,\n' +
    '    "message": "Array must contain at least 2 element(s)",\n' +
    '    "path": [\n' +
    '      "agents"\n' +
    '    ]\n' +
    '  }\n' +
    ']'
}

stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/neural-consensus handler > should handle all protocols
[neural-coordination] Processing neural consensus { topic: 'Test', agentCount: 2, protocol: 'neural_voting' }
[neural-coordination] Neural consensus completed {
  consensusReached: true,
  selectedOption: '1',
  rounds: 4,
  durationMs: '0.10'
}
[neural-coordination] Processing neural consensus { topic: 'Test', agentCount: 2, protocol: 'iterative_refinement' }
[neural-coordination] Neural consensus completed {
  consensusReached: true,
  selectedOption: '2',
  rounds: 1,
  durationMs: '0.05'
}
[neural-coordination] Processing neural consensus { topic: 'Test', agentCount: 2, protocol: 'auction' }
[neural-coordination] Neural consensus completed {
  consensusReached: true,
  selectedOption: '1',
  rounds: 1,
  durationMs: '0.05'
}
[neural-coordination] Processing neural consensus { topic: 'Test', agentCount: 2, protocol: 'contract_net' }
[neural-coordination] Neural consensus completed {
  consensusReached: true,
  selectedOption: '1',
  rounds: 1,
  durationMs: '0.06'
}

stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/neural-consensus handler > should report divergent agents
[neural-coordination] Processing neural consensus {
  topic: 'Contentious topic',
  agentCount: 2,
  protocol: 'iterative_refinement'
}
[neural-coordination] Neural consensus completed {
  consensusReached: false,
  selectedOption: null,
  rounds: 3,
  durationMs: '0.06'
}

stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/topology-optimize handler > should handle valid input
[neural-coordination] Optimizing topology { agentCount: 3, objective: 'minimize_latency' }
[neural-coordination] Topology optimization completed { topology: 'mesh', edges: 0, durationMs: '0.18' }

stderr | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/topology-optimize handler > should return error for insufficient agents
[neural-coordination] Input validation failed {
  error: '[\n' +
    '  {\n' +
    '    "code": "too_small",\n' +
    '    "minimum": 2,\n' +
    '    "type": "array",\n' +
    '    "inclusive": true,\n' +
    '    "exact": false,\n' +
    '    "message": "Array must contain at least 2 element(s)",\n' +
    '    "path": [\n' +
    '      "agents"\n' +
    '    ]\n' +
    '  }\n' +
    ']'
}

stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/topology-optimize handler > should handle all topology types
[neural-coordination] Optimizing topology { agentCount: 3, objective: 'minimize_latency' }
[neural-coordination] Topology optimization completed { topology: 'mesh', edges: 3, durationMs: '0.06' }
[neural-coordination] Optimizing topology { agentCount: 3, objective: 'minimize_latency' }
[neural-coordination] Topology optimization completed { topology: 'tree', edges: 2, durationMs: '0.05' }
[neural-coordination] Optimizing topology { agentCount: 3, objective: 'minimize_latency' }
[neural-coordination] Topology optimization completed { topology: 'ring', edges: 3, durationMs: '0.04' }
[neural-coordination] Optimizing topology { agentCount: 3, objective: 'minimize_latency' }
[neural-coordination] Topology optimization completed { topology: 'star', edges: 2, durationMs: '0.03' }
[neural-coordination] Optimizing topology { agentCount: 3, objective: 'minimize_latency' }
[neural-coordination] Topology optimization completed { topology: 'hybrid', edges: 2, durationMs: '0.03' }

stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/topology-optimize handler > should compute topology metrics
[neural-coordination] Optimizing topology { agentCount: 3, objective: 'minimize_latency' }
[neural-coordination] Topology optimization completed { topology: 'hybrid', edges: 2, durationMs: '0.03' }

stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/collective-memory handler > should handle store action
[neural-coordination] Processing collective memory { action: 'store', scope: 'team' }
[neural-coordination] Collective memory operation completed { action: 'store', scope: 'team', durationMs: '0.04' }

stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/collective-memory handler > should handle retrieve action
[neural-coordination] Processing collective memory { action: 'store', scope: 'team' }
[neural-coordination] Collective memory operation completed { action: 'store', scope: 'team', durationMs: '0.02' }
[neural-coordination] Processing collective memory { action: 'retrieve', scope: 'team' }
[neural-coordination] Collective memory operation completed { action: 'retrieve', scope: 'team', durationMs: '0.02' }

stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/collective-memory handler > should handle consolidate action
[neural-coordination] Processing collective memory { action: 'consolidate', scope: 'team' }
[neural-coordination] Collective memory operation completed { action: 'consolidate', scope: 'team', durationMs: '0.03' }

stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/collective-memory handler > should handle forget action
[neural-coordination] Processing collective memory { action: 'forget', scope: 'team' }
[neural-coordination] Collective memory operation completed { action: 'forget', scope: 'team', durationMs: '0.02' }

stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/collective-memory handler > should handle synchronize action
[neural-coordination] Processing collective memory { action: 'synchronize', scope: 'global' }
[neural-coordination] Collective memory operation completed { action: 'synchronize', scope: 'global', durationMs: '0.02' }

stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/collective-memory handler > should return error for missing key on store
[neural-coordination] Processing collective memory { action: 'store', scope: 'team' }

stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/emergent-protocol handler > should handle valid input
[neural-coordination] Training emergent protocol { taskType: 'coordination', episodes: 100 }
[neural-coordination] Emergent protocol training completed { vocabularySize: 10, successRate: '0.582', durationMs: '0.07' }

stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/emergent-protocol handler > should generate symbols for task objectives
[neural-coordination] Training emergent protocol { taskType: 'navigation', episodes: 500 }
[neural-coordination] Emergent protocol training completed { vocabularySize: 20, successRate: '0.784', durationMs: '0.03' }

stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/emergent-protocol handler > should generate composition rules when interpretability enabled
[neural-coordination] Training emergent protocol { taskType: 'test', episodes: 1000 }
[neural-coordination] Emergent protocol training completed { vocabularySize: 20, successRate: '0.889', durationMs: '0.04' }

stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/swarm-behavior handler > should handle valid input
[neural-coordination] Orchestrating swarm behavior { behavior: 'flocking', adaptiveRules: true }
[neural-coordination] Swarm behavior orchestrated { behavior: 'flocking', emergenceScore: '0.928', durationMs: '0.04' }

stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/swarm-behavior handler > should handle all behavior types
[neural-coordination] Orchestrating swarm behavior { behavior: 'flocking', adaptiveRules: true }
[neural-coordination] Swarm behavior orchestrated { behavior: 'flocking', emergenceScore: '0.823', durationMs: '0.02' }
[neural-coordination] Orchestrating swarm behavior { behavior: 'foraging', adaptiveRules: true }
[neural-coordination] Swarm behavior orchestrated { behavior: 'foraging', emergenceScore: '0.720', durationMs: '0.01' }
[neural-coordination] Orchestrating swarm behavior { behavior: 'formation', adaptiveRules: true }
[neural-coordination] Swarm behavior orchestrated { behavior: 'formation', emergenceScore: '0.997', durationMs: '0.01' }
[neural-coordination] Orchestrating swarm behavior { behavior: 'task_allocation', adaptiveRules: true }
[neural-coordination] Swarm behavior orchestrated {
  behavior: 'task_allocation',
  emergenceScore: '0.826',
  durationMs: '0.01'
}
[neural-coordination] Orchestrating swarm behavior { behavior: 'exploration', adaptiveRules: true }
[neural-coordination] Swarm behavior orchestrated {
  behavior: 'exploration',
  emergenceScore: '0.716',
  durationMs: '0.01'
}
[neural-coordination] Orchestrating swarm behavior { behavior: 'aggregation', adaptiveRules: true }
[neural-coordination] Swarm behavior orchestrated {
  behavior: 'aggregation',
  emergenceScore: '0.817',
  durationMs: '0.01'
}
[neural-coordination] Orchestrating swarm behavior { behavior: 'dispersion', adaptiveRules: true }
[neural-coordination] Swarm behavior orchestrated { behavior: 'dispersion', emergenceScore: '0.683', durationMs: '0.01' }

stdout | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/swarm-behavior handler > should compute swarm metrics
[neural-coordination] Orchestrating swarm behavior { behavior: 'flocking', adaptiveRules: true }
[neural-coordination] Swarm behavior orchestrated { behavior: 'flocking', emergenceScore: '0.909', durationMs: '0.01' }

stderr | v3/plugins/neural-coordination/tests/mcp-tools.test.ts > coordination/swarm-behavior handler > should return error for invalid behavior
[neural-coordination] Input validation failed {
  error: '[\n' +
    '  {\n' +
    '    "received": "invalid_behavior",\n' +
    '    "code": "invalid_enum_value",\n' +
    '    "options": [\n' +
    '      "flocking",\n' +
    '      "foraging",\n' +
    '      "formation",\n' +
    '      "task_allocation",\n' +
    '      "exploration",\n' +
    '      "aggregation",\n' +
    '      "dispersion"\n' +
    '    ],\n' +
    '    "path": [\n' +
    '      "behavior"\n' +
    '    ],\n' +
    `    "message": "Invalid enum value. Expected 'flocking' | 'foraging' | 'formation' | 'task_allocation' | 'exploration' | 'aggregation' | 'dispersion', received 'invalid_behavior'"\n` +
    '  }\n' +
    ']'
}

 ✓ v3/plugins/neural-coordination/tests/types.test.ts  (41 tests) 6ms
 ❯ v3/@claude-flow/security/__tests__/unit/path-validator.test.ts  (0 test)
 ❯ v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts  (32 tests | 2 failed) 11ms
   ❯ v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/working-memory handler > should handle allocate action
     → expected true to be undefined
   ❯ v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/working-memory handler > should handle update action
     → expected true to be undefined
stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/working-memory handler > should handle allocate action
[cognitive-kernel] Processing working memory { action: 'allocate', capacity: 7 }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/working-memory handler > should handle update action
[cognitive-kernel] Processing working memory { action: 'update', capacity: 7 }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/working-memory handler > should handle retrieve action
[cognitive-kernel] Processing working memory { action: 'retrieve', capacity: 7 }
[cognitive-kernel] Working memory operation completed { action: 'retrieve', slotsUsed: 0, durationMs: '0.11' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/working-memory handler > should handle clear action
[cognitive-kernel] Processing working memory { action: 'clear', capacity: 7 }
[cognitive-kernel] Working memory operation completed { action: 'clear', slotsUsed: 0, durationMs: '0.08' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/working-memory handler > should handle consolidate action
[cognitive-kernel] Processing working memory { action: 'consolidate', capacity: 7 }
[cognitive-kernel] Working memory operation completed { action: 'consolidate', slotsUsed: 0, durationMs: '0.08' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/working-memory handler > should respect capacity limit
[cognitive-kernel] Processing working memory { action: 'allocate', capacity: 3 }
[cognitive-kernel] Working memory operation completed { action: 'allocate', slotsUsed: 1, durationMs: '0.07' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/attention-control handler > should handle valid input
[cognitive-kernel] Controlling attention { mode: 'focus', targetCount: 2 }
[cognitive-kernel] Attention control completed { mode: 'focus', focus: 2, durationMs: '0.18' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/attention-control handler > should handle all attention modes
[cognitive-kernel] Controlling attention { mode: 'focus', targetCount: 0 }
[cognitive-kernel] Attention control completed { mode: 'focus', focus: 0, durationMs: '0.03' }
[cognitive-kernel] Controlling attention { mode: 'diffuse', targetCount: 0 }
[cognitive-kernel] Attention control completed { mode: 'diffuse', focus: 0, durationMs: '0.02' }
[cognitive-kernel] Controlling attention { mode: 'selective', targetCount: 0 }
[cognitive-kernel] Attention control completed { mode: 'selective', focus: 0, durationMs: '0.03' }
[cognitive-kernel] Controlling attention { mode: 'divided', targetCount: 0 }
[cognitive-kernel] Attention control completed { mode: 'divided', focus: 0, durationMs: '0.01' }
[cognitive-kernel] Controlling attention { mode: 'sustained', targetCount: 0 }
[cognitive-kernel] Attention control completed { mode: 'sustained', focus: 0, durationMs: '0.02' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/attention-control handler > should compute attention state
[cognitive-kernel] Controlling attention { mode: 'selective', targetCount: 1 }
[cognitive-kernel] Attention control completed { mode: 'selective', focus: 1, durationMs: '0.03' }

stderr | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/attention-control handler > should return error for invalid mode
[cognitive-kernel] Input validation failed {
  error: '[\n' +
    '  {\n' +
    '    "received": "invalid_mode",\n' +
    '    "code": "invalid_enum_value",\n' +
    '    "options": [\n' +
    '      "focus",\n' +
    '      "diffuse",\n' +
    '      "selective",\n' +
    '      "divided",\n' +
    '      "sustained"\n' +
    '    ],\n' +
    '    "path": [\n' +
    '      "mode"\n' +
    '    ],\n' +
    `    "message": "Invalid enum value. Expected 'focus' | 'diffuse' | 'selective' | 'divided' | 'sustained', received 'invalid_mode'"\n` +
    '  }\n' +
    ']'
}

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/meta-monitor handler > should handle valid input
[cognitive-kernel] Performing meta-cognitive monitoring { monitoringTypes: 3, interventions: true }
[cognitive-kernel] Meta-cognitive monitoring completed { confidence: '0.75', errorsDetected: 0, durationMs: '0.08' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/meta-monitor handler > should compute assessment metrics
[cognitive-kernel] Performing meta-cognitive monitoring { monitoringTypes: 2, interventions: true }
[cognitive-kernel] Meta-cognitive monitoring completed { confidence: '0.73', errorsDetected: 0, durationMs: '0.03' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/meta-monitor handler > should generate interventions when enabled
[cognitive-kernel] Performing meta-cognitive monitoring { monitoringTypes: 0, interventions: true }
[cognitive-kernel] Meta-cognitive monitoring completed { confidence: '0.87', errorsDetected: 0, durationMs: '0.02' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/meta-monitor handler > should handle all reflection depths
[cognitive-kernel] Performing meta-cognitive monitoring { monitoringTypes: 0, interventions: true }
[cognitive-kernel] Meta-cognitive monitoring completed { confidence: '0.83', errorsDetected: 0, durationMs: '0.02' }
[cognitive-kernel] Performing meta-cognitive monitoring { monitoringTypes: 0, interventions: true }
[cognitive-kernel] Meta-cognitive monitoring completed { confidence: '0.83', errorsDetected: 0, durationMs: '0.02' }
[cognitive-kernel] Performing meta-cognitive monitoring { monitoringTypes: 0, interventions: true }
[cognitive-kernel] Meta-cognitive monitoring completed { confidence: '0.74', errorsDetected: 0, durationMs: '0.02' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/scaffold handler > should handle valid input
[cognitive-kernel] Generating scaffold { complexity: 'moderate', scaffoldType: 'decomposition' }
[cognitive-kernel] Scaffold generated { scaffoldType: 'decomposition', stepCount: 4, durationMs: '0.07' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/scaffold handler > should generate appropriate steps for complexity
[cognitive-kernel] Generating scaffold { complexity: 'simple', scaffoldType: 'decomposition' }
[cognitive-kernel] Scaffold generated { scaffoldType: 'decomposition', stepCount: 2, durationMs: '0.02' }
[cognitive-kernel] Generating scaffold { complexity: 'expert', scaffoldType: 'decomposition' }
[cognitive-kernel] Scaffold generated { scaffoldType: 'decomposition', stepCount: 8, durationMs: '0.02' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/scaffold handler > should handle all scaffold types
[cognitive-kernel] Generating scaffold { complexity: 'simple', scaffoldType: 'decomposition' }
[cognitive-kernel] Scaffold generated { scaffoldType: 'decomposition', stepCount: 2, durationMs: '0.01' }
[cognitive-kernel] Generating scaffold { complexity: 'simple', scaffoldType: 'analogy' }
[cognitive-kernel] Scaffold generated { scaffoldType: 'analogy', stepCount: 2, durationMs: '0.02' }
[cognitive-kernel] Generating scaffold { complexity: 'simple', scaffoldType: 'worked_example' }
[cognitive-kernel] Scaffold generated { scaffoldType: 'worked_example', stepCount: 2, durationMs: '0.02' }
[cognitive-kernel] Generating scaffold { complexity: 'simple', scaffoldType: 'socratic' }
[cognitive-kernel] Scaffold generated { scaffoldType: 'socratic', stepCount: 2, durationMs: '0.02' }
[cognitive-kernel] Generating scaffold { complexity: 'simple', scaffoldType: 'metacognitive_prompting' }
[cognitive-kernel] Scaffold generated {
  scaffoldType: 'metacognitive_prompting',
  stepCount: 2,
  durationMs: '0.03'
}
[cognitive-kernel] Generating scaffold { complexity: 'simple', scaffoldType: 'chain_of_thought' }
[cognitive-kernel] Scaffold generated { scaffoldType: 'chain_of_thought', stepCount: 2, durationMs: '0.02' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/scaffold handler > should include hints and checkpoints in steps
[cognitive-kernel] Generating scaffold { complexity: 'moderate', scaffoldType: 'chain_of_thought' }
[cognitive-kernel] Scaffold generated { scaffoldType: 'chain_of_thought', stepCount: 4, durationMs: '0.01' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/cognitive-load handler > should handle valid input
[cognitive-kernel] Managing cognitive load { optimization: 'balanced', threshold: 0.8 }
[cognitive-kernel] Cognitive load management completed { totalLoad: '0.50', overloaded: false, durationMs: '0.04' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/cognitive-load handler > should detect overload condition
[cognitive-kernel] Managing cognitive load { optimization: 'balanced', threshold: 0.8 }
[cognitive-kernel] Cognitive load management completed { totalLoad: '1.00', overloaded: true, durationMs: '0.03' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/cognitive-load handler > should not detect overload for low load
[cognitive-kernel] Managing cognitive load { optimization: 'balanced', threshold: 0.8 }
[cognitive-kernel] Cognitive load management completed { totalLoad: '0.20', overloaded: false, durationMs: '0.02' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/cognitive-load handler > should handle all optimization strategies
[cognitive-kernel] Managing cognitive load { optimization: 'reduce_extraneous', threshold: 0.8 }
[cognitive-kernel] Cognitive load management completed { totalLoad: '0.20', overloaded: false, durationMs: '0.02' }
[cognitive-kernel] Managing cognitive load { optimization: 'chunk_intrinsic', threshold: 0.8 }
[cognitive-kernel] Cognitive load management completed { totalLoad: '0.20', overloaded: false, durationMs: '0.01' }
[cognitive-kernel] Managing cognitive load { optimization: 'maximize_germane', threshold: 0.8 }
[cognitive-kernel] Cognitive load management completed { totalLoad: '0.20', overloaded: false, durationMs: '0.01' }
[cognitive-kernel] Managing cognitive load { optimization: 'balanced', threshold: 0.8 }
[cognitive-kernel] Cognitive load management completed { totalLoad: '0.20', overloaded: false, durationMs: '0.01' }

stdout | v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/cognitive-load handler > should provide recommendations
[cognitive-kernel] Managing cognitive load { optimization: 'balanced', threshold: 0.8 }
[cognitive-kernel] Cognitive load management completed { totalLoad: '0.65', overloaded: false, durationMs: '0.01' }

 ❯ v2/tests/performance/init-performance.test.js  (0 test)
 ❯ v2/tests/production/integration-validation.test.ts  (0 test)
 ❯ v2/examples/05-swarm-apps/rest-api-advanced/tests/unit/auth.service.test.js  (0 test)
 ✓ v3/@claude-flow/guidance/tests/wasm-kernel.test.ts  (15 tests) 105ms
stdout | v3/@claude-flow/guidance/tests/wasm-kernel.test.ts > WASM Kernel: 10k Event Acceptance > processes 10,000 synthetic events with identical proof root hash

--- 10k Event Proof Chain ---
JS:   23.3ms (429858 chains/sec)
WASM: 24.6ms (405977 chains/sec)
Ratio: 0.94x
Root hash: 401145a23c07a921...

stdout | v3/@claude-flow/guidance/tests/wasm-kernel.test.ts > WASM Kernel: 10k Event Acceptance > batch processes 10,000 SHA-256 hashes

--- 10k SHA-256 Hash Throughput ---
Individual: 5.5ms (1805923 ops/sec)
Batch:      6.9ms (1442516 ops/sec)
Batch speedup: 0.80x

stdout | v3/@claude-flow/guidance/tests/wasm-kernel.test.ts > WASM Kernel: 10k Event Acceptance > secret scanning throughput on 10,000 inputs

--- 10k Secret Scanning ---
Clean: 6.1ms (1626215 scans/sec)
Dirty: 10.8ms (921804 scans/sec)

 ✓ v3/plugins/test-intelligence/tests/bridges.test.ts  (28 tests) 8ms
 ❯ v2/tests/unit/cli/commands/init/batch-init.test.js  (0 test)
 ❯ v3/__tests__/integration/memory-integration.test.ts  (15 tests | 1 failed) 7ms
   ❯ v3/__tests__/integration/memory-integration.test.ts > Memory Integration Tests > should persist memory across backend reinitialization
     → expected undefined not to be undefined
 ❯ v3/@claude-flow/security/__tests__/input-validator.test.ts  (0 test)
stdout | v3/@claude-flow/providers/src/__tests__/provider-integration.test.ts > Provider Integration Tests > RuVector Provider (ruvllm) > should complete request with CPU-friendly Qwen model
[INFO] Initializing ruvector provider { model: 'qwen2.5:0.5b', temperature: undefined, maxTokens: 100 }

stdout | v3/@claude-flow/providers/src/__tests__/provider-integration.test.ts > Provider Integration Tests > RuVector Provider (ruvllm) > should complete request with CPU-friendly Qwen model
[INFO] RuVector ruvLLM native module loaded 

 ❯ v3/__tests__/integration/swarm-integration.test.ts  (15 tests | 2 failed) 145ms
   ❯ v3/__tests__/integration/swarm-integration.test.ts > Swarm Integration Tests > should handle agent failures gracefully
     → Agent crashed
   ❯ v3/__tests__/integration/swarm-integration.test.ts > Swarm Integration Tests > should handle dynamic agent scaling
     → expected 6 to be 2 // Object.is equality
 ✓ v3/plugins/perf-optimizer/tests/types.test.ts  (35 tests) 5ms
stdout | v3/@claude-flow/providers/src/__tests__/provider-integration.test.ts > Provider Integration Tests > RuVector Provider (ruvllm) > should complete request with CPU-friendly Qwen model
<empty line>
stderr | v3/@claude-flow/providers/src/__tests__/provider-integration.test.ts > Provider Integration Tests > RuVector Provider (ruvllm) > should complete request with CPU-friendly Qwen model
[WARN] Neither RuVector nor Ollama available. Provider may not work. 

 ✓ v3/__tests__/integration/mcp-integration.test.ts  (16 tests) 5ms
 ❯ v2/tests/mcp/mcp-2025-core.test.ts  (0 test)
 ❯ v2/src/utils/__tests__/github-cli-safety-wrapper.test.js  (0 test)
stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_annealing_solve handler > should handle valid QUBO input
[quantum-optimizer] Annealing solve { variables: 5, type: 'qubo' }
[quantum-optimizer] Annealing completed { energy: -3, samples: 100, durationMs: '13.94' }

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_annealing_solve handler > should handle all problem types
[quantum-optimizer] Annealing solve { variables: 3, type: 'qubo' }
[quantum-optimizer] Annealing completed { energy: 0, samples: 100, durationMs: '53.78' }
[quantum-optimizer] Annealing solve { variables: 3, type: 'ising' }
[quantum-optimizer] Annealing completed { energy: 0, samples: 100, durationMs: '54.24' }
[quantum-optimizer] Annealing solve { variables: 3, type: 'sat' }
[quantum-optimizer] Annealing completed { energy: 0, samples: 100, durationMs: '53.54' }
[quantum-optimizer] Annealing solve { variables: 3, type: 'max_cut' }
[quantum-optimizer] Annealing completed { energy: 0, samples: 100, durationMs: '52.75' }
[quantum-optimizer] Annealing solve { variables: 3, type: 'tsp' }
[quantum-optimizer] Annealing completed { energy: 0, samples: 100, durationMs: '53.90' }
[quantum-optimizer] Annealing solve { variables: 3, type: 'dependency' }
[quantum-optimizer] Annealing completed { energy: 0, samples: 100, durationMs: '53.94' }

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_annealing_solve handler > should handle temperature schedules
[quantum-optimizer] Annealing solve { variables: 5, type: 'qubo' }
[quantum-optimizer] Annealing completed { energy: 0, samples: 100, durationMs: '73.90' }

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_qaoa_optimize handler > should handle valid QAOA input
[quantum-optimizer] QAOA optimize { nodes: 4, depth: 2 }
[quantum-optimizer] QAOA completed {
  energy: -2.05859375,
  approximationRatio: 0.586159951594533,
  durationMs: '90.07'
}

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_qaoa_optimize handler > should handle all problem types
[quantum-optimizer] QAOA optimize { nodes: 3, depth: undefined }
[quantum-optimizer] QAOA completed {
  energy: -1.0419921875,
  approximationRatio: 0.5933896284168565,
  durationMs: '106.01'
}
[quantum-optimizer] QAOA optimize { nodes: 3, depth: undefined }
[quantum-optimizer] QAOA completed {
  energy: -1.0390625,
  approximationRatio: 0.5917212414578588,
  durationMs: '103.17'
}
[quantum-optimizer] QAOA optimize { nodes: 3, depth: undefined }
[quantum-optimizer] QAOA completed {
  energy: -1.0361328125,
  approximationRatio: 0.590052854498861,
  durationMs: '101.54'
}
[quantum-optimizer] QAOA optimize { nodes: 3, depth: undefined }
[quantum-optimizer] QAOA completed {
  energy: -1.052734375,
  approximationRatio: 0.5995070472665148,
  durationMs: '102.59'
}

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_qaoa_optimize handler > should handle all optimizers
[quantum-optimizer] QAOA optimize { nodes: 3, depth: 3 }
[quantum-optimizer] QAOA completed {
  energy: -0.5224609375,
  approximationRatio: 0.5950580153758542,
  durationMs: '97.01'
}
[quantum-optimizer] QAOA optimize { nodes: 3, depth: 3 }
[quantum-optimizer] QAOA completed {
  energy: -0.52734375,
  approximationRatio: 0.60061930523918,
  durationMs: '100.64'
}
[quantum-optimizer] QAOA optimize { nodes: 3, depth: 3 }
[quantum-optimizer] QAOA completed {
  energy: -0.53125,
  approximationRatio: 0.6050683371298405,
  durationMs: '99.52'
}
[quantum-optimizer] QAOA optimize { nodes: 3, depth: 3 }
[quantum-optimizer] QAOA completed {
  energy: -0.533203125,
  approximationRatio: 0.6072928530751709,
  durationMs: '99.12'
}

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_qaoa_optimize handler > should return approximation ratio
[quantum-optimizer] QAOA optimize { nodes: 4, depth: 3 }
[quantum-optimizer] QAOA completed {
  energy: -1.5546875,
  approximationRatio: 0.5902382308276386,
  durationMs: '129.73'
}

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_grover_search handler > should handle valid search input
[quantum-optimizer] Grover search { size: 1000, structure: 'unstructured' }
[quantum-optimizer] Grover search completed { found: 10, queries: 19, durationMs: '1.34' }

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_grover_search handler > should handle all structure types
[quantum-optimizer] Grover search { size: 100, structure: 'unstructured' }
[quantum-optimizer] Grover search completed { found: 10, queries: 14, durationMs: '0.17' }
[quantum-optimizer] Grover search { size: 100, structure: 'database' }
[quantum-optimizer] Grover search completed { found: 6, queries: 14, durationMs: '0.09' }
[quantum-optimizer] Grover search { size: 100, structure: 'tree' }
[quantum-optimizer] Grover search completed { found: 7, queries: 14, durationMs: '0.17' }
[quantum-optimizer] Grover search { size: 100, structure: 'graph' }
[quantum-optimizer] Grover search completed { found: 9, queries: 14, durationMs: '0.12' }

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_grover_search handler > should handle all amplification methods
[quantum-optimizer] Grover search { size: 100, structure: 'unstructured' }
[quantum-optimizer] Grover search completed { found: 7, queries: 14, durationMs: '0.09' }
[quantum-optimizer] Grover search { size: 100, structure: 'unstructured' }
[quantum-optimizer] Grover search completed { found: 5, queries: 14, durationMs: '0.08' }
[quantum-optimizer] Grover search { size: 100, structure: 'unstructured' }
[quantum-optimizer] Grover search completed { found: 6, queries: 14, durationMs: '0.08' }

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_grover_search handler > should return query count
[quantum-optimizer] Grover search { size: 10000, structure: 'unstructured' }
[quantum-optimizer] Grover search completed { found: 10, queries: 21, durationMs: '2.72' }

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_dependency_resolve handler > should handle valid dependency input
[quantum-optimizer] Dependency resolve { packages: 3, solver: 'hybrid' }
[quantum-optimizer] Dependency resolution completed { resolved: 3, conflicts: 0, durationMs: '1.14' }

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_dependency_resolve handler > should handle all minimize objectives
[quantum-optimizer] Dependency resolve { packages: 1, solver: 'hybrid' }
[quantum-optimizer] Dependency resolution completed { resolved: 1, conflicts: 0, durationMs: '0.05' }
[quantum-optimizer] Dependency resolve { packages: 1, solver: 'hybrid' }
[quantum-optimizer] Dependency resolution completed { resolved: 1, conflicts: 0, durationMs: '0.03' }
[quantum-optimizer] Dependency resolve { packages: 1, solver: 'hybrid' }
[quantum-optimizer] Dependency resolution completed { resolved: 1, conflicts: 0, durationMs: '0.03' }
[quantum-optimizer] Dependency resolve { packages: 1, solver: 'hybrid' }
[quantum-optimizer] Dependency resolution completed { resolved: 1, conflicts: 0, durationMs: '0.03' }

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_dependency_resolve handler > should handle all solver types
[quantum-optimizer] Dependency resolve { packages: 1, solver: 'quantum_annealing' }
[quantum-optimizer] Dependency resolution completed { resolved: 1, conflicts: 0, durationMs: '0.05' }
[quantum-optimizer] Dependency resolve { packages: 1, solver: 'qaoa' }
[quantum-optimizer] Dependency resolution completed { resolved: 1, conflicts: 0, durationMs: '0.03' }
[quantum-optimizer] Dependency resolve { packages: 1, solver: 'hybrid' }
[quantum-optimizer] Dependency resolution completed { resolved: 1, conflicts: 0, durationMs: '0.02' }

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_dependency_resolve handler > should return resolution order
[quantum-optimizer] Dependency resolve { packages: 3, solver: 'hybrid' }
[quantum-optimizer] Dependency resolution completed { resolved: 3, conflicts: 0, durationMs: '0.06' }

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_schedule_optimize handler > should handle valid schedule input
[quantum-optimizer] Schedule optimize { tasks: 3, resources: 2 }
[quantum-optimizer] Schedule optimization completed {
  makespan: 30,
  cost: 37.5,
  score: 0.03225806451612903,
  durationMs: '0.28'
}

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_schedule_optimize handler > should handle all objectives
[quantum-optimizer] Schedule optimize { tasks: 1, resources: 1 }
[quantum-optimizer] Schedule optimization completed {
  makespan: 10,
  cost: 0,
  score: 0.09090909090909091,
  durationMs: '0.04'
}
[quantum-optimizer] Schedule optimize { tasks: 1, resources: 1 }
[quantum-optimizer] Schedule optimization completed { makespan: 10, cost: 0, score: 1, durationMs: '0.03' }
[quantum-optimizer] Schedule optimize { tasks: 1, resources: 1 }
[quantum-optimizer] Schedule optimization completed { makespan: 10, cost: 0, score: 0, durationMs: '0.03' }
[quantum-optimizer] Schedule optimize { tasks: 1, resources: 1 }
[quantum-optimizer] Schedule optimization completed {
  makespan: 10,
  cost: 0,
  score: 0.33636363636363636,
  durationMs: '0.05'
}

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_schedule_optimize handler > should compute schedule metrics
[quantum-optimizer] Schedule optimize { tasks: 2, resources: 1 }
[quantum-optimizer] Schedule optimization completed {
  makespan: 30,
  cost: 0,
  score: 0.03225806451612903,
  durationMs: '0.05'
}

stdout | v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_schedule_optimize handler > should identify critical path
[quantum-optimizer] Schedule optimize { tasks: 3, resources: 1 }
[quantum-optimizer] Schedule optimization completed {
  makespan: 40,
  cost: 0,
  score: 0.024390243902439025,
  durationMs: '0.05'
}

 ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts  (32 tests | 10 failed) 1458ms
   ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_annealing_solve handler > should handle valid QUBO input
     → expected { solution: { …(5) }, …(3) } to have property "details"
   ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_qaoa_optimize handler > should handle valid QAOA input
     → expected { solution: { …(4) }, …(3) } to have property "details"
   ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_qaoa_optimize handler > should return approximation ratio
     → Cannot convert undefined or null to object
   ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_grover_search handler > should handle valid search input
     → expected { solutions: [ …(10) ], …(4) } to have property "details"
   ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_grover_search handler > should return query count
     → Cannot convert undefined or null to object
   ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_dependency_resolve handler > should handle valid dependency input
     → expected { resolved: { …(3) }, …(4) } to have property "details"
   ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_dependency_resolve handler > should return resolution order
     → Cannot convert undefined or null to object
   ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_schedule_optimize handler > should handle valid schedule input
     → expected { schedule: [ { …(4) }, …(2) ], …(5) } to have property "details"
   ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_schedule_optimize handler > should compute schedule metrics
     → Cannot convert undefined or null to object
   ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_schedule_optimize handler > should identify critical path
     → Cannot convert undefined or null to object
stderr | v3/@claude-flow/providers/src/__tests__/provider-integration.test.ts > Provider Integration Tests > RuVector Provider (ruvllm) > should complete request with CPU-friendly Qwen model
<empty line>
stdout | v3/@claude-flow/providers/src/__tests__/provider-integration.test.ts > Provider Integration Tests > RuVector Provider (ruvllm) > should complete request with CPU-friendly Qwen model
RuVector/Ollama not available, test details: Error: Unhandled error. ({
  provider: 'ruvector',
  error: LLMProviderError: <!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/0c62f21760e72255.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-48c73a90a1ca00de.js"/><script src="/_next/static/chunks/fd9d1056-925430c5a4767c0e.js" async=""></script><script src="/_next/static/chunks/2117-f7a8ff1eb730b318.js" async=""></script><script src="/_next/static/chunks/main-app-5294d1645fe5526e.js" async=""></script><script src="/_next/static/chunks/app/layout-44be3188d3acb012.js" async=""></script><meta name="robots" content="noindex"/><title>404: This page could not be found.</title><title>Asset Intelligence Platform</title><meta name="description" content="Investment intelligence dashboard for risk and return analysis"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="antialiased"><div style="font-family:system-ui,&quot;Segoe UI&quot;,Roboto,Helvetica,Arial,sans-serif,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;;height:100vh;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center"><div><style>body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}</style><h1 class="next-error-h1" style="display:inline-block;margin:0 20px 0 0;padding:0 23px 0 0;font-size:24px;font-weight:500;vertical-align:top;line-height:49px">404</h1><div style="display:inline-block"><h2 style="font-size:14px;font-weight:400;line-height:49px;margin:0">This page could not be found.</h2></div></div></div><script src="/_next/static/chunks/webpack-48c73a90a1ca00de.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/0c62f21760e72255.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"2:I[12846,[],\"\"]\n4:I[4707,[],\"\"]\n5:I[36423,[],\"\"]\n6:I[72174,[\"3185\",\"static/chunks/app/layout-44be3188d3acb012.js\"],\"AuthProvider\"]\nc:I[61060,[],\"\"]\n7:{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"}\n8:{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"}\n9:{\"display\":\"inline-block\"}\na:{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0}\nd:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L2\",null,{\"buildId\":\"ehUoS-pcTimo4Iv7p0C2k\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"query\"],\"initialTree\":[\"\",{\"children\":[\"/_not-found\",{\"children\":[\"__PAGE__\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"/_not-found\",{\"children\":[\"__PAGE__\",{},[[\"$L3\",[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],null],null],null]},[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"/_not-found\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/0c62f21760e72255.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"antialiased\",\"children\":[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":\"$7\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":\"$8\",\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":\"$9\",\"children\":[\"$\",\"h2\",null,{\"style\":\"$a\",\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]}]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[[\"$\",\"meta\",null,{\"name\":\"robots\",\"content\":\"noindex\"}],\"$Lb\"],\"globalErrorComponent\":\"$c\",\"missingSlots\":\"$Wd\"}]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Asset Intelligence Platform\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Investment intelligence dashboard for risk and return analysis\"}]]\n3:null\n"])</script></body></html>
      at RuVectorProvider.handleErrorResponse (/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/providers/src/ruvector-provider.ts:640:11)
      at processTicksAndRejections (node:internal/process/task_queues:104:5)
      at RuVectorProvider.doComplete (/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/providers/src/ruvector-provider.ts:242:9)
      at /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/providers/src/base-provider.ts:216:16
      at CircuitBreaker.execute (/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/providers/src/base-provider.ts:58:22)
      at RuVectorProvider.complete (/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/providers/src/base-provider.ts:215:24)
      at /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/providers/src/__tests__/provider-integration.test.ts:223:26
      at runTest (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:781:11)
      at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
      at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15) {
    code: 'RUVECTOR_404',
    provider: 'custom',
    statusCode: 404,
    retryable: true,
    details: {
      error: '<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/0c62f21760e72255.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-48c73a90a1ca00de.js"/><script src="/_next/static/chunks/fd9d1056-925430c5a4767c0e.js" async=""></script><script src="/_next/static/chunks/2117-f7a8ff1eb730b318.js" async=""></script><script src="/_next/static/chunks/main-app-5294d1645fe5526e.js" async=""></script><script src="/_next/static/chunks/app/layout-44be3188d3acb012.js" async=""></script><meta name="robots" content="noindex"/><title>404: This page could not be found.</title><title>Asset Intelligence Platform</title><meta name="description" content="Investment intelligence dashboard for risk and return analysis"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="antialiased"><div style="font-family:system-ui,&quot;Segoe UI&quot;,Roboto,Helvetica,Arial,sans-serif,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;;height:100vh;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center"><div><style>body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}</style><h1 class="next-error-h1" style="display:inline-block;margin:0 20px 0 0;padding:0 23px 0 0;font-size:24px;font-weight:500;vertical-align:top;line-height:49px">404</h1><div style="display:inline-block"><h2 style="font-size:14px;font-weight:400;line-height:49px;margin:0">This page could not be found.</h2></div></div></div><script src="/_next/static/chunks/webpack-48c73a90a1ca00de.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\\"/_next/static/css/0c62f21760e72255.css\\",\\"style\\"]\\n"])</script><script>self.__next_f.push([1,"2:I[12846,[],\\"\\"]\\n4:I[4707,[],\\"\\"]\\n5:I[36423,[],\\"\\"]\\n6:I[72174,[\\"3185\\",\\"static/chunks/app/layout-44be3188d3acb012.js\\"],\\"AuthProvider\\"]\\nc:I[61060,[],\\"\\"]\\n7:{\\"fontFamily\\":\\"system-ui,\\\\\\"Segoe UI\\\\\\",Roboto,Helvetica,Arial,sans-serif,\\\\\\"Apple Color Emoji\\\\\\",\\\\\\"Segoe UI Emoji\\\\\\"\\",\\"height\\":\\"100vh\\",\\"textAlign\\":\\"center\\",\\"display\\":\\"flex\\",\\"flexDirection\\":\\"column\\",\\"alignItems\\":\\"center\\",\\"justifyContent\\":\\"center\\"}\\n8:{\\"display\\":\\"inline-block\\",\\"margin\\":\\"0 20px 0 0\\",\\"padding\\":\\"0 23px 0 0\\",\\"fontSize\\":24,\\"fontWeight\\":500,\\"verticalAlign\\":\\"top\\",\\"lineHeight\\":\\"49px\\"}\\n9:{\\"display\\":\\"inline-block\\"}\\na:{\\"fontSize\\":14,\\"fontWeight\\":400,\\"lineHeight\\":\\"49px\\",\\"margin\\":0}\\nd:[]\\n"])</script><script>self.__next_f.push([1,"0:[\\"$\\",\\"$L2\\",null,{\\"buildId\\":\\"ehUoS-pcTimo4Iv7p0C2k\\",\\"assetPrefix\\":\\"\\",\\"urlParts\\":[\\"\\",\\"query\\"],\\"initialTree\\":[\\"\\",{\\"children\\":[\\"/_not-found\\",{\\"children\\":[\\"__PAGE__\\",{}]}]},\\"$undefined\\",\\"$undefined\\",true],\\"initialSeedData\\":[\\"\\",{\\"children\\":[\\"/_not-found\\",{\\"children\\":[\\"__PAGE__\\",{},[[\\"$L3\\",[[\\"$\\",\\"title\\",null,{\\"children\\":\\"404: This page could not be found.\\"}],[\\"$\\",\\"div\\",null,{\\"style\\":{\\"fontFamily\\":\\"system-ui,\\\\\\"Segoe UI\\\\\\",Roboto,Helvetica,Arial,sans-serif,\\\\\\"Apple Color Emoji\\\\\\",\\\\\\"Segoe UI Emoji\\\\\\"\\",\\"height\\":\\"100vh\\",\\"textAlign\\":\\"center\\",\\"display\\":\\"flex\\",\\"flexDirection\\":\\"column\\",\\"alignItems\\":\\"center\\",\\"justifyContent\\":\\"center\\"},\\"children\\":[\\"$\\",\\"div\\",null,{\\"children\\":[[\\"$\\",\\"style\\",null,{\\"dangerouslySetInnerHTML\\":{\\"__html\\":\\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\\"}}],[\\"$\\",\\"h1\\",null,{\\"className\\":\\"next-error-h1\\",\\"style\\":{\\"display\\":\\"inline-block\\",\\"margin\\":\\"0 20px 0 0\\",\\"padding\\":\\"0 23px 0 0\\",\\"fontSize\\":24,\\"fontWeight\\":500,\\"verticalAlign\\":\\"top\\",\\"lineHeight\\":\\"49px\\"},\\"children\\":\\"404\\"}],[\\"$\\",\\"div\\",null,{\\"style\\":{\\"display\\":\\"inline-block\\"},\\"children\\":[\\"$\\",\\"h2\\",null,{\\"style\\":{\\"fontSize\\":14,\\"fontWeight\\":400,\\"lineHeight\\":\\"49px\\",\\"margin\\":0},\\"children\\":\\"This page could not be found.\\"}]}]]}]}]],null],null],null]},[null,[\\"$\\",\\"$L4\\",null,{\\"parallelRouterKey\\":\\"children\\",\\"segmentPath\\":[\\"children\\",\\"/_not-found\\",\\"children\\"],\\"error\\":\\"$undefined\\",\\"errorStyles\\":\\"$undefined\\",\\"errorScripts\\":\\"$undefined\\",\\"template\\":[\\"$\\",\\"$L5\\",null,{}],\\"templateStyles\\":\\"$undefined\\",\\"templateScripts\\":\\"$undefined\\",\\"notFound\\":\\"$undefined\\",\\"notFoundStyles\\":\\"$undefined\\"}]],null]},[[[[\\"$\\",\\"link\\",\\"0\\",{\\"rel\\":\\"stylesheet\\",\\"href\\":\\"/_next/static/css/0c62f21760e72255.css\\",\\"precedence\\":\\"next\\",\\"crossOrigin\\":\\"$undefined\\"}]],[\\"$\\",\\"html\\",null,{\\"lang\\":\\"en\\",\\"children\\":[\\"$\\",\\"body\\",null,{\\"className\\":\\"antialiased\\",\\"children\\":[\\"$\\",\\"$L6\\",null,{\\"children\\":[\\"$\\",\\"$L4\\",null,{\\"parallelRouterKey\\":\\"children\\",\\"segmentPath\\":[\\"children\\"],\\"error\\":\\"$undefined\\",\\"errorStyles\\":\\"$undefined\\",\\"errorScripts\\":\\"$undefined\\",\\"template\\":[\\"$\\",\\"$L5\\",null,{}],\\"templateStyles\\":\\"$undefined\\",\\"templateScripts\\":\\"$undefined\\",\\"notFound\\":[[\\"$\\",\\"title\\",null,{\\"children\\":\\"404: This page could not be found.\\"}],[\\"$\\",\\"div\\",null,{\\"style\\":\\"$7\\",\\"children\\":[\\"$\\",\\"div\\",null,{\\"children\\":[[\\"$\\",\\"style\\",null,{\\"dangerouslySetInnerHTML\\":{\\"__html\\":\\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\\"}}],[\\"$\\",\\"h1\\",null,{\\"className\\":\\"next-error-h1\\",\\"style\\":\\"$8\\",\\"children\\":\\"404\\"}],[\\"$\\",\\"div\\",null,{\\"style\\":\\"$9\\",\\"children\\":[\\"$\\",\\"h2\\",null,{\\"style\\":\\"$a\\",\\"children\\":\\"This page could not be found.\\"}]}]]}]}]],\\"notFoundStyles\\":[]}]}]}]}]],null],null],\\"couldBeIntercepted\\":false,\\"initialHead\\":[[\\"$\\",\\"meta\\",null,{\\"name\\":\\"robots\\",\\"content\\":\\"noindex\\"}],\\"$Lb\\"],\\"globalErrorComponent\\":\\"$c\\",\\"missingSlots\\":\\"$Wd\\"}]\\n"])</script><script>self.__next_f.push([1,"b:[[\\"$\\",\\"meta\\",\\"0\\",{\\"name\\":\\"viewport\\",\\"content\\":\\"width=device-width, initial-scale=1\\"}],[\\"$\\",\\"meta\\",\\"1\\",{\\"charSet\\":\\"utf-8\\"}],[\\"$\\",\\"title\\",\\"2\\",{\\"children\\":\\"Asset Intelligence Platform\\"}],[\\"$\\",\\"meta\\",\\"3\\",{\\"name\\":\\"description\\",\\"content\\":\\"Investment intelligence dashboard for risk and return analysis\\"}]]\\n3:null\\n"])</script></body></html>'
    }
  },
  request: {
    messages: [ [Object] ],
    model: 'qwen2.5:0.5b',
    maxTokens: 50,
    temperature: 0.1,
    requestId: 'test-1770417945541'
  }
})
    at RuVectorProvider.emit (node:events:497:17)
    at RuVectorProvider.complete (/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/providers/src/base-provider.ts:236:12)
    at processTicksAndRejections (node:internal/process/task_queues:104:5)
    at /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/providers/src/__tests__/provider-integration.test.ts:223:26
    at runTest (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:781:11)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runFiles (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:958:5)
    at startTests (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:967:3) {
  code: 'ERR_UNHANDLED_ERROR',
  context: {
    provider: 'ruvector',
    error: LLMProviderError: <!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/0c62f21760e72255.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-48c73a90a1ca00de.js"/><script src="/_next/static/chunks/fd9d1056-925430c5a4767c0e.js" async=""></script><script src="/_next/static/chunks/2117-f7a8ff1eb730b318.js" async=""></script><script src="/_next/static/chunks/main-app-5294d1645fe5526e.js" async=""></script><script src="/_next/static/chunks/app/layout-44be3188d3acb012.js" async=""></script><meta name="robots" content="noindex"/><title>404: This page could not be found.</title><title>Asset Intelligence Platform</title><meta name="description" content="Investment intelligence dashboard for risk and return analysis"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="antialiased"><div style="font-family:system-ui,&quot;Segoe UI&quot;,Roboto,Helvetica,Arial,sans-serif,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;;height:100vh;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center"><div><style>body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}</style><h1 class="next-error-h1" style="display:inline-block;margin:0 20px 0 0;padding:0 23px 0 0;font-size:24px;font-weight:500;vertical-align:top;line-height:49px">404</h1><div style="display:inline-block"><h2 style="font-size:14px;font-weight:400;line-height:49px;margin:0">This page could not be found.</h2></div></div></div><script src="/_next/static/chunks/webpack-48c73a90a1ca00de.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/0c62f21760e72255.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"2:I[12846,[],\"\"]\n4:I[4707,[],\"\"]\n5:I[36423,[],\"\"]\n6:I[72174,[\"3185\",\"static/chunks/app/layout-44be3188d3acb012.js\"],\"AuthProvider\"]\nc:I[61060,[],\"\"]\n7:{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"}\n8:{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"}\n9:{\"display\":\"inline-block\"}\na:{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0}\nd:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L2\",null,{\"buildId\":\"ehUoS-pcTimo4Iv7p0C2k\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"query\"],\"initialTree\":[\"\",{\"children\":[\"/_not-found\",{\"children\":[\"__PAGE__\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"/_not-found\",{\"children\":[\"__PAGE__\",{},[[\"$L3\",[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],null],null],null]},[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"/_not-found\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/0c62f21760e72255.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"antialiased\",\"children\":[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":\"$7\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":\"$8\",\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":\"$9\",\"children\":[\"$\",\"h2\",null,{\"style\":\"$a\",\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]}]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[[\"$\",\"meta\",null,{\"name\":\"robots\",\"content\":\"noindex\"}],\"$Lb\"],\"globalErrorComponent\":\"$c\",\"missingSlots\":\"$Wd\"}]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Asset Intelligence Platform\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Investment intelligence dashboard for risk and return analysis\"}]]\n3:null\n"])</script></body></html>
        at RuVectorProvider.handleErrorResponse (/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/providers/src/ruvector-provider.ts:640:11)
        at processTicksAndRejections (node:internal/process/task_queues:104:5)
        at RuVectorProvider.doComplete (/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/providers/src/ruvector-provider.ts:242:9)
        at /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/providers/src/base-provider.ts:216:16
        at CircuitBreaker.execute (/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/providers/src/base-provider.ts:58:22)
        at RuVectorProvider.complete (/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/providers/src/base-provider.ts:215:24)
        at /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/providers/src/__tests__/provider-integration.test.ts:223:26
        at runTest (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:781:11)
        at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
        at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15) {
      code: 'RUVECTOR_404',
      provider: 'custom',
      statusCode: 404,
      retryable: true,
      details: [Object]
    },
    request: {
      messages: [Array],
      model: 'qwen2.5:0.5b',
      maxTokens: 50,
      temperature: 0.1,
      requestId: 'test-1770417945541'
    }
  }
}

stdout | v3/@claude-flow/providers/src/__tests__/provider-integration.test.ts > Provider Integration Tests > RuVector Provider (ruvllm) > should search memory with HNSW
[INFO] Initializing ruvector provider { model: 'qwen2.5:0.5b', temperature: undefined, maxTokens: 100 }
[INFO] RuVector ruvLLM native module loaded 

 ✓ v3/plugins/neural-coordination/tests/bridges.test.ts  (34 tests) 97ms
 ✓ v3/@claude-flow/shared/__tests__/hooks/session-hooks.test.ts  (18 tests) 30ms
stdout | v3/@claude-flow/providers/src/__tests__/provider-integration.test.ts > Provider Integration Tests > RuVector Provider (ruvllm) > should search memory with HNSW
<empty line>
stderr | v3/@claude-flow/providers/src/__tests__/provider-integration.test.ts > Provider Integration Tests > RuVector Provider (ruvllm) > should search memory with HNSW
[WARN] Neither RuVector nor Ollama available. Provider may not work. 

 ✓ v3/@claude-flow/swarm/__tests__/coordinator.test.ts  (21 tests) 2508ms
stdout | v3/plugins/perf-optimizer/tests/mcp-tools.test.ts > perf/bottleneck-detect handler > should handle valid input
[perf-optimizer] Detecting bottlenecks { spanCount: 2, scope: [ 'cpu', 'memory', 'database' ] }
[perf-optimizer] Bottleneck detection completed { bottlenecksFound: 1, overallScore: '0.75', durationMs: '1.49' }

stdout | v3/plugins/perf-optimizer/tests/mcp-tools.test.ts > perf/bottleneck-detect handler > should handle empty spans
[perf-optimizer] Detecting bottlenecks { spanCount: 0, scope: [ 'all' ] }
[perf-optimizer] Bottleneck detection completed { bottlenecksFound: 0, overallScore: '1.00', durationMs: '0.08' }

stdout | v3/plugins/perf-optimizer/tests/mcp-tools.test.ts > perf/bottleneck-detect handler > should detect slow spans as bottlenecks
[perf-optimizer] Detecting bottlenecks { spanCount: 1, scope: [ 'all' ] }
[perf-optimizer] Bottleneck detection completed { bottlenecksFound: 1, overallScore: '0.50', durationMs: '0.14' }

stdout | v3/plugins/perf-optimizer/tests/mcp-tools.test.ts > perf/memory-analyze handler > should handle valid input
[perf-optimizer] Analyzing memory { hasSnapshot: false, timelinePoints: undefined }
[perf-optimizer] Memory analysis completed { leaksFound: 1, gcPressure: '0.15', durationMs: '0.11' }

stdout | v3/plugins/perf-optimizer/tests/mcp-tools.test.ts > perf/memory-analyze handler > should handle empty input
[perf-optimizer] Analyzing memory { hasSnapshot: false, timelinePoints: undefined }
[perf-optimizer] Memory analysis completed { leaksFound: 1, gcPressure: '0.15', durationMs: '0.04' }

stdout | v3/plugins/perf-optimizer/tests/mcp-tools.test.ts > perf/memory-analyze handler > should detect potential leaks
[perf-optimizer] Analyzing memory { hasSnapshot: false, timelinePoints: 5 }
[perf-optimizer] Memory analysis completed { leaksFound: 1, gcPressure: '0.00', durationMs: '0.04' }

stdout | v3/plugins/perf-optimizer/tests/mcp-tools.test.ts > perf/query-optimize handler > should handle valid input
[perf-optimizer] Optimizing queries { queryCount: 2 }
[perf-optimizer] Query optimization completed { patternsFound: 0, indexSuggestions: 0, durationMs: '0.37' }

stdout | v3/plugins/perf-optimizer/tests/mcp-tools.test.ts > perf/query-optimize handler > should detect N+1 patterns
[perf-optimizer] Optimizing queries { queryCount: 5 }
[perf-optimizer] Query optimization completed { patternsFound: 0, indexSuggestions: 0, durationMs: '0.07' }

stdout | v3/plugins/perf-optimizer/tests/mcp-tools.test.ts > perf/query-optimize handler > should suggest indexes for slow queries
[perf-optimizer] Optimizing queries { queryCount: 1 }
[perf-optimizer] Query optimization completed { patternsFound: 1, indexSuggestions: 1, durationMs: '0.15' }

stdout | v3/plugins/perf-optimizer/tests/mcp-tools.test.ts > perf/bundle-optimize handler > should handle valid input
[perf-optimizer] Optimizing bundle {
  statsPath: '/path/to/stats.json',
  analysis: [ 'tree_shaking', 'code_splitting' ]
}
[perf-optimizer] Bundle optimization completed {
  optimizationsFound: 2,
  potentialSavingsKb: '180',
  durationMs: '0.08'
}

stdout | v3/plugins/perf-optimizer/tests/mcp-tools.test.ts > perf/bundle-optimize handler > should calculate potential savings
[perf-optimizer] Optimizing bundle {
  statsPath: '/path/to/bundle.json',
  analysis: [ 'duplicate_deps', 'large_modules' ]
}
[perf-optimizer] Bundle optimization completed {
  optimizationsFound: 2,
  potentialSavingsKb: '300',
  durationMs: '0.03'
}

stdout | v3/plugins/perf-optimizer/tests/mcp-tools.test.ts > perf/config-optimize handler > should handle valid input
[perf-optimizer] Optimizing configuration { workloadType: 'api', objective: 'latency' }
[perf-optimizer] Configuration optimization completed { recommendations: 2, durationMs: '0.15' }

 ✓ v3/plugins/perf-optimizer/tests/mcp-tools.test.ts  (29 tests) 7ms
stdout | v3/plugins/perf-optimizer/tests/mcp-tools.test.ts > perf/config-optimize handler > should handle all objective types
[perf-optimizer] Optimizing configuration { workloadType: 'web', objective: 'latency' }
[perf-optimizer] Configuration optimization completed { recommendations: 1, durationMs: '0.03' }
[perf-optimizer] Optimizing configuration { workloadType: 'web', objective: 'throughput' }
[perf-optimizer] Configuration optimization completed { recommendations: 1, durationMs: '0.02' }
[perf-optimizer] Optimizing configuration { workloadType: 'web', objective: 'cost' }
[perf-optimizer] Configuration optimization completed { recommendations: 1, durationMs: '0.02' }
[perf-optimizer] Optimizing configuration { workloadType: 'web', objective: 'balanced' }
[perf-optimizer] Configuration optimization completed { recommendations: 1, durationMs: '0.02' }

stdout | v3/plugins/perf-optimizer/tests/mcp-tools.test.ts > perf/config-optimize handler > should provide optimization recommendations
[perf-optimizer] Optimizing configuration { workloadType: 'batch', objective: 'throughput' }
[perf-optimizer] Configuration optimization completed { recommendations: 2, durationMs: '0.05' }

 ❯ v2/tests/sdk/verification.test.ts  (0 test)
 ❯ v2/tests/mcp/progressive-disclosure.test.ts  (0 test)
 ❯ v3/@claude-flow/security/__tests__/token-generator.test.ts  (0 test)
 ✓ v3/@claude-flow/shared/__tests__/hooks/git-commit.test.ts  (39 tests) 5ms
 ❯ v2/bin/__tests__/swarm.test.js  (0 test)
 ❯ v2/src/cli/simple-commands/__tests__/swarm.test.js  (0 test)
 ✓ v3/@claude-flow/providers/src/__tests__/provider-integration.test.ts  (10 tests | 8 skipped) 979ms
stderr | v3/@claude-flow/providers/src/__tests__/provider-integration.test.ts > Provider Integration Tests > RuVector Provider (ruvllm) > should search memory with HNSW
<empty line>
stdout | v3/@claude-flow/providers/src/__tests__/provider-integration.test.ts > Provider Integration Tests > RuVector Provider (ruvllm) > should search memory with HNSW
Memory search results: []
[INFO] ruvector provider destroyed 

 ❯ v3/@claude-flow/security/__tests__/unit/token-generator.test.ts  (0 test)
 ✓ v3/plugins/quantum-optimizer/tests/bridges.test.ts  (17 tests) 4ms
 ❯ v2/src/swarm/__tests__/prompt-copier.test.ts  (0 test)
stdout | v3/@claude-flow/plugins/__tests__/collection-manager.test.ts > PluginCollectionManager > loadCollection > should load a collection
[INFO] Plugin registered: plugin-a v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/collection-manager.test.ts > PluginCollectionManager > loadCollection > should register enabled plugins
[INFO] Plugin registered: plugin-a v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/collection-manager.test.ts > PluginCollectionManager > unloadCollection > should unload a collection and its plugins
[INFO] Plugin registered: plugin-a v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin unregistered: plugin-a { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/collection-manager.test.ts > PluginCollectionManager > enablePlugin > should enable a disabled plugin
[INFO] Plugin registered: plugin-a v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/collection-manager.test.ts > PluginCollectionManager > disablePlugin > should disable an enabled plugin
[INFO] Plugin registered: plugin-a v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin unregistered: plugin-a { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/collection-manager.test.ts > PluginCollectionManager > togglePlugin > should toggle plugin state
[INFO] Plugin registered: plugin-a v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin unregistered: plugin-a { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: plugin-a v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/collection-manager.test.ts > PluginCollectionManager > bulk operations > should enable all plugins
[INFO] Plugin registered: plugin-a v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: plugin-b v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/collection-manager.test.ts > PluginCollectionManager > bulk operations > should disable all plugins
[INFO] Plugin registered: plugin-a v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: plugin-b v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin unregistered: plugin-b { component: 'EnhancedPluginRegistry' }
[INFO] Plugin unregistered: plugin-a { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/collection-manager.test.ts > PluginCollectionManager > filtering > should get plugins by category
[INFO] Plugin registered: tool-1 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: agent-1 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: tool-2 v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/collection-manager.test.ts > PluginCollectionManager > filtering > should get plugins by tag
[INFO] Plugin registered: plugin-1 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: plugin-2 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: plugin-3 v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/collection-manager.test.ts > PluginCollectionManager > filtering > should search plugins by name
[INFO] Plugin registered: auth-plugin v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: cache-plugin v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: auth-helper v1.0.0 { component: 'EnhancedPluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/collection-manager.test.ts > PluginCollectionManager > state persistence > should export state
[INFO] Plugin registered: plugin-a v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin unregistered: plugin-a { component: 'EnhancedPluginRegistry' }

 ✓ v3/@claude-flow/plugins/__tests__/collection-manager.test.ts  (20 tests) 6ms
stdout | v3/@claude-flow/plugins/__tests__/collection-manager.test.ts > PluginCollectionManager > statistics > should return correct stats
[INFO] Plugin registered: tool-1 v1.0.0 { component: 'EnhancedPluginRegistry' }
[INFO] Plugin registered: hook-1 v1.0.0 { component: 'EnhancedPluginRegistry' }

 ❯ v2/tests/unit/components.test.ts  (0 test)
 ❯ v2/tests/unit/cli/start/process-manager.test.ts  (0 test)
 ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts  (18 tests | 18 failed) 11ms
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Initialization > should initialize both backends
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Store Operations > should store entries in both backends (dual-write)
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Store Operations > should handle bulk inserts
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Exact Match Queries (SQLite) > should route exact key queries to SQLite
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Exact Match Queries (SQLite) > should handle prefix queries via SQLite
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Semantic Search (AgentDB) > should perform semantic search via AgentDB
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Semantic Search (AgentDB) > should support semantic search with filters
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Hybrid Queries > should combine semantic and structured queries (union)
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Hybrid Queries > should support semantic-first strategy
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > CRUD Operations > should update entries in both backends
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > CRUD Operations > should delete entries from both backends
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Namespace Operations > should list all namespaces
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Namespace Operations > should count entries per namespace
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Namespace Operations > should clear namespace in both backends
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Statistics > should provide combined statistics
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Health Check > should report healthy status for both backends
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Query Routing > should auto-route semantic queries to AgentDB
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
   ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Query Routing > should auto-route exact queries to SQLite
     → Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
 ❯ v3/@claude-flow/plugins/__tests__/security.test.ts  (40 tests | 1 failed) 109ms
   ❯ v3/@claude-flow/plugins/__tests__/security.test.ts > JSON Security > safeJsonParse > should strip dangerous keys
     → expected { …(12) } to be undefined
 ❯ v2/tests/unit/mcp/recovery.test.ts  (0 test)
stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Initialization > should initialize successfully
[hnsw-bridge] WASM module not available, using fallback implementation undefined

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Initialization > should initialize with custom config
[hnsw-bridge] WASM module not available, using fallback implementation undefined

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Initialization > should handle HIPAA-compliant config
[hnsw-bridge] WASM module not available, using fallback implementation undefined

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Initialization > should handle double initialization gracefully
[hnsw-bridge] WASM module not available, using fallback implementation undefined
[hnsw-bridge] WASM module not available, using fallback implementation undefined

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Lifecycle > should destroy successfully
[hnsw-bridge] WASM module not available, using fallback implementation undefined

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Lifecycle > should reinitialize after destroy
[hnsw-bridge] WASM module not available, using fallback implementation undefined
[hnsw-bridge] WASM module not available, using fallback implementation undefined

stdout | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Vector Operations > should add vector
[hnsw-bridge] Added vector { id: 'patient-1', index: 0 }

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Vector Operations > should add vector
[hnsw-bridge] WASM module not available, using fallback implementation undefined

stdout | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Vector Operations > should add patient with features
[hnsw-bridge] Added vector { id: 'P12345', index: 0 }

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Vector Operations > should add patient with features
[hnsw-bridge] WASM module not available, using fallback implementation undefined

stdout | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Vector Operations > should search for similar vectors
[hnsw-bridge] Added vector { id: 'p1', index: 0 }
[hnsw-bridge] Added vector { id: 'p2', index: 1 }
[hnsw-bridge] Added vector { id: 'p3', index: 2 }
[hnsw-bridge] Search completed { topK: 2, resultCount: 2, searchTimeMs: 0.229750000000422 }

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Vector Operations > should search for similar vectors
[hnsw-bridge] WASM module not available, using fallback implementation undefined

stdout | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Vector Operations > should search by patient features
[hnsw-bridge] Added vector { id: 'P001', index: 0 }
[hnsw-bridge] Added vector { id: 'P002', index: 1 }
[hnsw-bridge] Search completed { topK: 5, resultCount: 2, searchTimeMs: 0.057124999999359716 }

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Vector Operations > should search by patient features
[hnsw-bridge] WASM module not available, using fallback implementation undefined

stdout | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Vector Operations > should delete vector
[hnsw-bridge] Added vector { id: 'to-delete', index: 0 }

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Vector Operations > should delete vector
[hnsw-bridge] WASM module not available, using fallback implementation undefined

stdout | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Vector Operations > should return count
[hnsw-bridge] Added vector { id: 'v1', index: 0 }
[hnsw-bridge] Added vector { id: 'v2', index: 1 }

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > Vector Operations > should return count
[hnsw-bridge] WASM module not available, using fallback implementation undefined

stdout | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > JavaScript Fallback > should work without WASM
[hnsw-bridge] Added vector { id: 'test', index: 0 }
[hnsw-bridge] Search completed { topK: 1, resultCount: 1, searchTimeMs: 0.005332999999154708 }

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareHNSWBridge > JavaScript Fallback > should work without WASM
[hnsw-bridge] WASM module not available, using fallback implementation undefined

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > Initialization > should initialize successfully
[gnn-bridge] WASM module not available, using fallback implementation undefined

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > Initialization > should initialize with custom config
[gnn-bridge] WASM module not available, using fallback implementation undefined

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > Initialization > should handle double initialization gracefully
[gnn-bridge] WASM module not available, using fallback implementation undefined
[gnn-bridge] WASM module not available, using fallback implementation undefined

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > Lifecycle > should destroy successfully
[gnn-bridge] WASM module not available, using fallback implementation undefined

stdout | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > Graph Operations > should load drug interaction graph
[gnn-bridge] Graph loaded { nodes: 2, edges: 1 }

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > Graph Operations > should load drug interaction graph
[gnn-bridge] WASM module not available, using fallback implementation undefined

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > Graph Operations > should analyze drug interactions using built-in graph
[gnn-bridge] WASM module not available, using fallback implementation undefined

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > Graph Operations > should check drug interactions using built-in data
[gnn-bridge] WASM module not available, using fallback implementation undefined

stdout | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > Graph Operations > should predict clinical pathway
[gnn-bridge] Graph loaded { nodes: 3, edges: 2 }
[gnn-bridge] Pathway predicted {
  startNode: 'diagnosis',
  endNode: 'step2',
  pathLength: 3,
  durationMs: 0.03533400000014808
}

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > Graph Operations > should predict clinical pathway
[gnn-bridge] WASM module not available, using fallback implementation undefined

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > Graph Operations > should get clinical pathway from built-in data
[gnn-bridge] WASM module not available, using fallback implementation undefined

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > Error Handling > should handle empty drug list
[gnn-bridge] WASM module not available, using fallback implementation undefined

stdout | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > JavaScript Fallback > should work without WASM
[gnn-bridge] Graph loaded { nodes: 1, edges: 0 }

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > JavaScript Fallback > should work without WASM
[gnn-bridge] WASM module not available, using fallback implementation undefined

stdout | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > Memory Management > should release resources on destroy
[gnn-bridge] Graph loaded { nodes: 100, edges: 200 }

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > Memory Management > should release resources on destroy
[gnn-bridge] WASM module not available, using fallback implementation undefined

stdout | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > Memory Management > should handle multiple init/destroy cycles
[gnn-bridge] Graph loaded { nodes: 1, edges: 0 }
[gnn-bridge] Graph loaded { nodes: 1, edges: 0 }
[gnn-bridge] Graph loaded { nodes: 1, edges: 0 }

stderr | v3/plugins/healthcare-clinical/tests/bridges.test.ts > HealthcareGNNBridge > Memory Management > should handle multiple init/destroy cycles
[gnn-bridge] WASM module not available, using fallback implementation undefined
[gnn-bridge] WASM module not available, using fallback implementation undefined
[gnn-bridge] WASM module not available, using fallback implementation undefined

 ✓ v3/plugins/healthcare-clinical/tests/bridges.test.ts  (32 tests) 11ms
 ❯ v2/tests/unit/cli/start/system-monitor.test.ts  (0 test)
 ✓ v3/plugins/perf-optimizer/tests/bridges.test.ts  (29 tests) 13ms
 ❯ v2/tests/integration/init-workflow.test.js  (0 test)
 ❯ v2/src/__tests__/sdk-integration.test.ts  (0 test)
 ❯ v3/@claude-flow/security/__tests__/credential-generator.test.ts  (0 test)
 ✓ v3/@claude-flow/cli/__tests__/config-adapter.test.ts  (5 tests) 1ms
 ✓ v3/@claude-flow/plugins/examples/plugin-creator/plugin-creator.test.ts  (27 tests) 5ms
stdout | v3/@claude-flow/plugins/examples/plugin-creator/plugin-creator.test.ts > Plugin Creator Plugin > generateHookCode > should create working handler
Hook triggered: hook:post-task-complete { taskId: '123' }

 ✓ v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts  (22 tests) 6ms
stdout | v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts > PluginRegistry > register > should register a plugin
[INFO] Plugin registered: test-plugin v1.0.0 { component: 'PluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts > PluginRegistry > register > should reject duplicate plugin names
[INFO] Plugin registered: test-plugin v1.0.0 { component: 'PluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts > PluginRegistry > register > should respect max plugins limit
[INFO] Plugin registered: p1 v1.0.0 { component: 'PluginRegistry' }
[INFO] Plugin registered: p2 v1.0.0 { component: 'PluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts > PluginRegistry > register > should accept plugin factory functions
[INFO] Plugin registered: factory-plugin v1.0.0 { component: 'PluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts > PluginRegistry > unregister > should unregister a plugin
[INFO] Plugin registered: test-plugin v1.0.0 { component: 'PluginRegistry' }
[INFO] Plugin initialized: test-plugin { component: 'PluginRegistry' }
[INFO] Registry initialized with 1 plugins { component: 'PluginRegistry' }
[INFO] Plugin unregistered: test-plugin { component: 'PluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts > PluginRegistry > initialize > should initialize all plugins
[INFO] Plugin registered: p1 v1.0.0 { component: 'PluginRegistry' }
[INFO] Plugin registered: p2 v1.0.0 { component: 'PluginRegistry' }
[INFO] Plugin initialized: p1 { component: 'PluginRegistry' }
[INFO] Plugin initialized: p2 { component: 'PluginRegistry' }
[INFO] Registry initialized with 2 plugins { component: 'PluginRegistry' }
[INFO] Plugin shutdown: p2 { component: 'PluginRegistry' }
[INFO] Plugin shutdown: p1 { component: 'PluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts > PluginRegistry > initialize > should throw if already initialized
[INFO] Registry initialized with 0 plugins { component: 'PluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts > PluginRegistry > initialize > should skip disabled plugins
[INFO] Plugin registered: disabled v1.0.0 { component: 'PluginRegistry' }
[INFO] Plugin disabled is disabled, skipping initialization { component: 'PluginRegistry' }
[INFO] Registry initialized with 1 plugins { component: 'PluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts > PluginRegistry > initialize > should respect dependency order
[INFO] Plugin registered: child v1.0.0 { component: 'PluginRegistry' }
[INFO] Plugin registered: parent v1.0.0 { component: 'PluginRegistry' }
[INFO] Plugin initialized: parent { component: 'PluginRegistry' }
[DEBUG] Dependency validated: parent { component: 'PluginRegistry', plugin: 'child' }
[INFO] Plugin initialized: child { component: 'PluginRegistry' }
[INFO] Registry initialized with 2 plugins { component: 'PluginRegistry' }
[INFO] Plugin shutdown: parent { component: 'PluginRegistry' }
[INFO] Plugin shutdown: child { component: 'PluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts > PluginRegistry > initialize > should detect circular dependencies
[INFO] Plugin registered: a v1.0.0 { component: 'PluginRegistry' }
[INFO] Plugin registered: b v1.0.0 { component: 'PluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts > PluginRegistry > shutdown > should shutdown all plugins in reverse order
[INFO] Plugin registered: first v1.0.0 { component: 'PluginRegistry' }
[INFO] Plugin registered: second v1.0.0 { component: 'PluginRegistry' }
[INFO] Plugin initialized: first { component: 'PluginRegistry' }
[INFO] Plugin initialized: second { component: 'PluginRegistry' }
[INFO] Registry initialized with 2 plugins { component: 'PluginRegistry' }
[INFO] Plugin shutdown: second { component: 'PluginRegistry' }
[INFO] Plugin shutdown: first { component: 'PluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts > PluginRegistry > extension points > should collect MCP tools from plugins
[INFO] Plugin registered: tool-plugin v1.0.0 { component: 'PluginRegistry' }
[INFO] Plugin initialized: tool-plugin { component: 'PluginRegistry' }
[INFO] Registry initialized with 1 plugins { component: 'PluginRegistry' }
[INFO] Plugin shutdown: tool-plugin { component: 'PluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts > PluginRegistry > health check > should return health status for all plugins
[INFO] Plugin registered: test v1.0.0 { component: 'PluginRegistry' }
[INFO] Plugin initialized: test { component: 'PluginRegistry' }
[INFO] Registry initialized with 1 plugins { component: 'PluginRegistry' }
[INFO] Plugin shutdown: test { component: 'PluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts > PluginRegistry > health check > should report unhealthy for uninitialized plugins
[INFO] Plugin registered: test v1.0.0 { component: 'PluginRegistry' }
[INFO] Plugin test is disabled, skipping initialization { component: 'PluginRegistry' }
[INFO] Registry initialized with 1 plugins { component: 'PluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts > PluginRegistry > stats > should return accurate statistics
[INFO] Plugin registered: p1 v1.0.0 { component: 'PluginRegistry' }
[INFO] Plugin registered: p2 v1.0.0 { component: 'PluginRegistry' }
[INFO] Plugin initialized: p1 { component: 'PluginRegistry' }
[INFO] Plugin initialized: p2 { component: 'PluginRegistry' }
[INFO] Registry initialized with 2 plugins { component: 'PluginRegistry' }
[INFO] Plugin shutdown: p2 { component: 'PluginRegistry' }
[INFO] Plugin shutdown: p1 { component: 'PluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts > BasePlugin > should properly manage lifecycle state
[INFO] Plugin registered: lifecycle-test v1.0.0 { component: 'PluginRegistry' }
[INFO] Plugin initialized: lifecycle-test { component: 'PluginRegistry' }
[INFO] Registry initialized with 1 plugins { component: 'PluginRegistry' }
[INFO] Plugin shutdown: lifecycle-test { component: 'PluginRegistry' }

stdout | v3/@claude-flow/plugins/__tests__/plugin-registry.test.ts > BasePlugin > should provide accurate health checks
[INFO] Plugin registered: health-test v1.0.0 { component: 'PluginRegistry' }
[INFO] Plugin initialized: health-test { component: 'PluginRegistry' }
[INFO] Registry initialized with 1 plugins { component: 'PluginRegistry' }

 ❯ v2/src/swarm/optimizations/__tests__/optimization.test.ts  (0 test)
 ❯ v2/tests/unit/api/claude-client-errors.test.ts  (0 test)
 ❯ v3/@claude-flow/swarm/__tests__/topology.test.ts  (46 tests | 1 failed) 5007ms
   ❯ v3/@claude-flow/swarm/__tests__/topology.test.ts > TopologyManager > Event Emission > should emit topology.rebalanced event
     → Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
stdout | v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Explicit Provider Selection > should create database with better-sqlite3 provider
better-sqlite3 not available, skipping test

 ❯ v3/@claude-flow/memory/src/database-provider.test.ts  (14 tests | 10 failed) 30ms
   ❯ v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Automatic Provider Selection > should create database with auto provider selection
     → near "references": syntax error
   ❯ v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Automatic Provider Selection > should create persistent database with auto provider
     → near "references": syntax error
   ❯ v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Explicit Provider Selection > should create database with sql.js provider
     → near "references": syntax error
   ❯ v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Cross-Platform Functionality > should handle CRUD operations consistently across providers
     → near "references": syntax error
   ❯ v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Cross-Platform Functionality > should handle namespace operations across providers
     → near "references": syntax error
   ❯ v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Cross-Platform Functionality > should handle bulk operations across providers
     → near "references": syntax error
   ❯ v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Health Check > should perform health check
     → near "references": syntax error
   ❯ v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Statistics > should provide backend statistics
     → near "references": syntax error
   ❯ v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Error Handling > should handle missing entries gracefully
     → near "references": syntax error
   ❯ v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Error Handling > should handle empty queries
     → near "references": syntax error
 ❯ v3/@claude-flow/security/__tests__/path-validator.test.ts  (0 test)
 ❯ v3/@claude-flow/security/__tests__/unit/password-hasher.test.ts  (0 test)
 ✓ v3/@claude-flow/shared/__tests__/hooks/file-organization.test.ts  (43 tests) 5ms
 ❯ v2/tests/unit/mcp/tools.test.ts  (0 test)
 ❯ v3/@claude-flow/security/__tests__/safe-executor.test.ts  (0 test)
 ❯ v2/tests/integration/hive-mind-schema.test.js  (0 test)
 ❯ v3/@claude-flow/plugins/__tests__/sdk.test.ts  (18 tests | 3 failed) 5ms
   ❯ v3/@claude-flow/plugins/__tests__/sdk.test.ts > HookBuilder > should build a hook with conditions
     → (intermediate value).withName(...).withDescription(...).withPriority(...).when is not a function
   ❯ v3/@claude-flow/plugins/__tests__/sdk.test.ts > HookBuilder > should apply transformers
     → (intermediate value).withName(...).transform is not a function
   ❯ v3/@claude-flow/plugins/__tests__/sdk.test.ts > HookBuilder > should support synchronous mode
     → (intermediate value).synchronous(...).handle is not a function
 ✓ v3/@claude-flow/shared/__tests__/hooks/bash-safety.test.ts  (34 tests) 5ms
 ❯ v2/tests/unit/performance.test.js  (0 test)
 ❯ v2/tests/unit/cli/commands/init/init-core.test.js  (0 test)
 ✓ v3/@claude-flow/guidance/tests/ledger.test.ts  (22 tests) 3ms
 ❯ v2/tests/integration/agent-booster.test.js  (0 test)
 ❯ v2/tests/integration/real-metrics.test.js  (0 test)
 ❯ v2/tests/unit/cli/start/process-ui.test.ts  (0 test)
 ❯ v2/tests/integration/json-output.test.ts  (0 test)
 ✓ v3/@claude-flow/guidance/tests/integration.test.ts  (14 tests) 21ms
 ✓ v3/@claude-flow/browser/tests/agent-browser-adapter.test.ts  (27 tests) 4ms
 ✓ v3/plugins/legal-contracts/tests/bridges.test.ts  (13 tests) 3ms
stderr | v3/plugins/legal-contracts/tests/bridges.test.ts > DAGBridge > Initialization > should initialize successfully
WASM DAG module not available, using JS fallback

stderr | v3/plugins/legal-contracts/tests/bridges.test.ts > DAGBridge > Initialization > should handle double initialization gracefully
WASM DAG module not available, using JS fallback

stderr | v3/plugins/legal-contracts/tests/bridges.test.ts > DAGBridge > Build Dependency Graph > should build dependency graph from obligations
WASM DAG module not available, using JS fallback

stderr | v3/plugins/legal-contracts/tests/bridges.test.ts > DAGBridge > Build Dependency Graph > should handle empty obligations
WASM DAG module not available, using JS fallback

stderr | v3/plugins/legal-contracts/tests/bridges.test.ts > DAGBridge > Build Dependency Graph > should identify critical path
WASM DAG module not available, using JS fallback

stderr | v3/plugins/legal-contracts/tests/bridges.test.ts > DAGBridge > Topological Sort > should perform topological sort
WASM DAG module not available, using JS fallback

stderr | v3/plugins/legal-contracts/tests/bridges.test.ts > DAGBridge > Topological Sort > should handle empty input
WASM DAG module not available, using JS fallback

stderr | v3/plugins/legal-contracts/tests/bridges.test.ts > DAGBridge > Cycle Detection > should detect no cycles in valid DAG
WASM DAG module not available, using JS fallback

stderr | v3/plugins/legal-contracts/tests/bridges.test.ts > DAGBridge > Cycle Detection > should detect simple cycle
WASM DAG module not available, using JS fallback
Cycle detected in obligation dependencies
Cycle detected in obligation dependencies

stderr | v3/plugins/legal-contracts/tests/bridges.test.ts > DAGBridge > JavaScript Fallback > should work without WASM
WASM DAG module not available, using JS fallback

stderr | v3/plugins/legal-contracts/tests/bridges.test.ts > DAGBridge > Memory Management > should handle multiple operations
WASM DAG module not available, using JS fallback

 ✓ v3/@claude-flow/claims/tests/domain.test.ts  (19 tests) 4ms
 ❯ v2/tests/integration/cross-platform-portability.test.js  (0 test)
stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Initialization > should initialize successfully
[AgentDB] better-sqlite3 not available, using sql.js WASM
✅ Using sql.js (WASM SQLite, no build tools required)

 ❯ v2/tests/integration/system-integration.test.ts  (0 test)
 ❯ v2/src/cli/simple-commands/__tests__/agent.test.js  (0 test)
 ❯ v2/bin/__tests__/agent.test.js  (0 test)
stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialEconomyBridge > Initialization > should initialize successfully
[economy-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialEconomyBridge > Initialization > should initialize with custom config
[economy-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialEconomyBridge > Initialization > should handle double initialization gracefully
[economy-bridge] WASM module not available, using JavaScript fallback undefined
[economy-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialEconomyBridge > Lifecycle > should destroy successfully
[economy-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialEconomyBridge > Lifecycle > should reinitialize after destroy
[economy-bridge] WASM module not available, using JavaScript fallback undefined
[economy-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialEconomyBridge > Risk Calculations > should calculate risk metrics for portfolio
[economy-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialEconomyBridge > Risk Calculations > should handle empty portfolio
[economy-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialEconomyBridge > Risk Calculations > should run Monte Carlo simulation
[economy-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialEconomyBridge > Risk Calculation Methods > should calculate VaR
[economy-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialEconomyBridge > Risk Calculation Methods > should calculate CVaR
[economy-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialEconomyBridge > JavaScript Fallback > should work without WASM
[economy-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialEconomyBridge > Memory Management > should release resources on destroy
[economy-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialEconomyBridge > Memory Management > should handle multiple init/destroy cycles
[economy-bridge] WASM module not available, using JavaScript fallback undefined
[economy-bridge] WASM module not available, using JavaScript fallback undefined
[economy-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialSparseBridge > Initialization > should initialize successfully
[sparse-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialSparseBridge > Initialization > should initialize with custom config
[sparse-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialSparseBridge > Initialization > should handle double initialization gracefully
[sparse-bridge] WASM module not available, using JavaScript fallback undefined
[sparse-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialSparseBridge > Lifecycle > should destroy successfully
[sparse-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialSparseBridge > Anomaly Detection > should detect anomalies in transactions
[sparse-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialSparseBridge > Anomaly Detection > should handle empty transactions
[sparse-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialSparseBridge > Anomaly Detection > should detect transaction anomalies with FinancialTransaction objects
[sparse-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialSparseBridge > Market Regime Classification > should classify market regime
[sparse-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialSparseBridge > JavaScript Fallback > should work without WASM
[sparse-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialSparseBridge > Memory Management > should release resources on destroy
[sparse-bridge] WASM module not available, using JavaScript fallback undefined

stderr | v3/plugins/financial-risk/tests/bridges.test.ts > FinancialSparseBridge > Memory Management > should handle multiple init/destroy cycles
[sparse-bridge] WASM module not available, using JavaScript fallback undefined
[sparse-bridge] WASM module not available, using JavaScript fallback undefined
[sparse-bridge] WASM module not available, using JavaScript fallback undefined

 ✓ v3/plugins/financial-risk/tests/bridges.test.ts  (28 tests) 9ms
 ❯ v2/tests/integration/ui-display-fixes.test.ts  (0 test)
 ✓ v3/@claude-flow/browser/tests/memory-integration.test.ts  (16 tests) 5ms
 ❯ v2/src/swarm/__tests__/integration.test.ts  (0 test)
 ❯ v2/tests/integration/sdk-integration.test.ts  (0 test)
 ❯ v3/@claude-flow/security/__tests__/password-hasher.test.ts  (0 test)
 ✓ v3/@claude-flow/guidance/tests/gates.test.ts  (32 tests) 4ms
 ✓ v3/plugins/code-intelligence/tests/bridges.test.ts  (19 tests) 7ms
stderr | v3/plugins/code-intelligence/tests/bridges.test.ts > GNNBridge > Initialization > should initialize successfully
WASM GNN module not available, using JS fallback

stderr | v3/plugins/code-intelligence/tests/bridges.test.ts > GNNBridge > Initialization > should initialize with custom embedding dimension
WASM GNN module not available, using JS fallback

stderr | v3/plugins/code-intelligence/tests/bridges.test.ts > GNNBridge > Initialization > should handle double initialization gracefully
WASM GNN module not available, using JS fallback

stderr | v3/plugins/code-intelligence/tests/bridges.test.ts > GNNBridge > Build Code Graph > should build code graph from files
WASM GNN module not available, using JS fallback

stderr | v3/plugins/code-intelligence/tests/bridges.test.ts > GNNBridge > Build Code Graph > should handle empty file list
WASM GNN module not available, using JS fallback

stderr | v3/plugins/code-intelligence/tests/bridges.test.ts > GNNBridge > Build Code Graph > should detect file types correctly
WASM GNN module not available, using JS fallback

stderr | v3/plugins/code-intelligence/tests/bridges.test.ts > GNNBridge > Compute Node Embeddings > should compute embeddings for graph nodes
WASM GNN module not available, using JS fallback

stderr | v3/plugins/code-intelligence/tests/bridges.test.ts > GNNBridge > Compute Node Embeddings > should return embeddings of correct dimension
WASM GNN module not available, using JS fallback

stderr | v3/plugins/code-intelligence/tests/bridges.test.ts > GNNBridge > Compute Node Embeddings > should handle empty graph
WASM GNN module not available, using JS fallback

stderr | v3/plugins/code-intelligence/tests/bridges.test.ts > GNNBridge > Impact Prediction > should predict impact of changes
WASM GNN module not available, using JS fallback

stderr | v3/plugins/code-intelligence/tests/bridges.test.ts > GNNBridge > Impact Prediction > should handle empty changed files
WASM GNN module not available, using JS fallback

stderr | v3/plugins/code-intelligence/tests/bridges.test.ts > GNNBridge > Community Detection > should detect communities in code graph
WASM GNN module not available, using JS fallback

stderr | v3/plugins/code-intelligence/tests/bridges.test.ts > GNNBridge > Community Detection > should handle single node graph
WASM GNN module not available, using JS fallback

stderr | v3/plugins/code-intelligence/tests/bridges.test.ts > GNNBridge > Pattern Matching > should find similar patterns
WASM GNN module not available, using JS fallback

stderr | v3/plugins/code-intelligence/tests/bridges.test.ts > GNNBridge > JavaScript Fallback > should work without WASM
WASM GNN module not available, using JS fallback

stderr | v3/plugins/code-intelligence/tests/bridges.test.ts > GNNBridge > Performance > should handle large file lists efficiently
WASM GNN module not available, using JS fallback

stderr | v3/plugins/code-intelligence/tests/bridges.test.ts > GNNBridge > Memory Management > should handle multiple graph operations
WASM GNN module not available, using JS fallback

 ❯ v2/tests/unit/cli/commands/init/templates.test.ts  (0 test)
 ✓ v3/@claude-flow/browser/tests/workflow-templates.test.ts  (25 tests) 6ms
 ❯ v2/src/cli/__tests__/utils.test.js  (0 test)
 ✓ v3/@claude-flow/browser/tests/reasoningbank-adapter.test.ts  (12 tests) 3ms
stdout | v3/@claude-flow/browser/tests/reasoningbank-adapter.test.ts > ReasoningBankAdapter > verdict recording > should record verdict for trajectory
[ReasoningBank] Verdict for traj-3: SUCCESS - Works great

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Initialization > should initialize successfully
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Initialization > should initialize successfully
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Initialization > should handle missing agentdb gracefully
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Initialization > should handle missing agentdb gracefully
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Basic CRUD Operations > should store and retrieve entries
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Basic CRUD Operations > should store and retrieve entries
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Basic CRUD Operations > should get entry by key
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Basic CRUD Operations > should get entry by key
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Basic CRUD Operations > should update entries
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Basic CRUD Operations > should update entries
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Basic CRUD Operations > should delete entries
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Basic CRUD Operations > should delete entries
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Query Operations > should query by namespace
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Query Operations > should query by namespace
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Query Operations > should query by exact key
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Query Operations > should query by exact key
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Query Operations > should query by prefix
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Query Operations > should query by prefix
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Query Operations > should query by tags
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Query Operations > should query by tags
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Vector Search > should perform brute-force search when agentdb unavailable
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Vector Search > should perform brute-force search when agentdb unavailable
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings
HNSW search failed: Error: Unknown controller: hnsw
    at AgentDB.getController (file:///Users/alessiorocchi/Projects/claude-flow/v3/node_modules/agentdb/src/core/AgentDB.ts:160:15)
    at AgentDBBackend.searchWithAgentDB (/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/memory/src/agentdb-backend.ts:776:33)
    at AgentDBBackend.search (/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/memory/src/agentdb-backend.ts:384:34)
    at /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/memory/src/agentdb-backend.test.ts:193:37
    at runTest (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:781:11)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runFiles (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:958:5)
    at startTests (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:967:3)

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Vector Search > should handle semantic queries
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Vector Search > should handle semantic queries
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings
HNSW search failed: Error: Unknown controller: hnsw
    at AgentDB.getController (file:///Users/alessiorocchi/Projects/claude-flow/v3/node_modules/agentdb/src/core/AgentDB.ts:160:15)
    at AgentDBBackend.searchWithAgentDB (/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/memory/src/agentdb-backend.ts:776:33)
    at AgentDBBackend.search (/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/memory/src/agentdb-backend.ts:384:34)
    at AgentDBBackend.semanticSearch (/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/memory/src/agentdb-backend.ts:846:17)
    at AgentDBBackend.query (/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/memory/src/agentdb-backend.ts:354:40)
    at /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/memory/src/agentdb-backend.test.ts:209:37
    at runTest (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:781:11)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///Users/alessiorocchi/Projects/claude-flow/node_modules/@vitest/runner/dist/index.js:909:15)

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Bulk Operations > should bulk insert entries
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Bulk Operations > should bulk insert entries
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Bulk Operations > should bulk delete entries
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Bulk Operations > should bulk delete entries
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Statistics and Health > should provide backend statistics
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Statistics and Health > should provide backend statistics
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Statistics and Health > should perform health checks
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Statistics and Health > should perform health checks
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Namespace Operations > should list namespaces
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Namespace Operations > should list namespaces
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Namespace Operations > should count entries by namespace
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Namespace Operations > should count entries by namespace
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Namespace Operations > should clear namespace
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Namespace Operations > should clear namespace
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Graceful Degradation > should work without agentdb package
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Graceful Degradation > should work without agentdb package
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

 ✓ v3/@claude-flow/memory/src/agentdb-backend.test.ts  (21 tests) 1069ms
stdout | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Graceful Degradation > should indicate availability status
[AgentDB] better-sqlite3 not available, using sql.js WASM
[AgentDB] Using RuVector backend (native)
[AgentDB] Initialized with sql.js WASM + ruvector vector backend

stderr | v3/@claude-flow/memory/src/agentdb-backend.test.ts > AgentDBBackend > Graceful Degradation > should indicate availability status
⚠️  Transformers.js initialization failed: 
Something went wrong installing the "sharp" module

Cannot find module '../build/Release/sharp-darwin-arm64v8.node'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/sharp.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/constructor.js
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/sharp/lib/index.js

Possible solutions:
- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"
- Install for the current darwin-arm64v8 runtime: "npm install --platform=darwin --arch=arm64v8 sharp"
- Consult the installation documentation: https://sharp.pixelplumbing.com/install
   Falling back to mock embeddings for testing
   This is normal if:
     • Running offline/without internet access
     • Model not yet downloaded (~90MB on first use)
     • Network connectivity issues
   To use real embeddings:
     • Ensure internet connectivity for first-time model download
     • Or pre-download: npx agentdb install-embeddings

stderr | v3/@claude-flow/integration/src/__tests__/agent-adapter.test.ts > AgentAdapter > Initialization > should initialize successfully
[AgentDB Patch] Controller index not found: /Users/alessiorocchi/Projects/claude-flow/node_modules/agentdb/dist/controllers/index.js

 ❯ v3/@claude-flow/swarm/__tests__/consensus.test.ts  (37 tests | 1 failed) 5777ms
   ❯ v3/@claude-flow/swarm/__tests__/consensus.test.ts > Byzantine Consensus > Fault Tolerance > should achieve consensus with 2f+1 votes
     → Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ❯ v2/tests/integration/reasoningbank-integration.test.js  (0 test)
 ✓ v3/@claude-flow/guidance/tests/optimizer.test.ts  (9 tests) 6ms
 ❯ v2/tests/integration/error-handling-patterns.test.js  (0 test)
 ✓ v3/@claude-flow/integration/src/__tests__/agent-adapter.test.ts  (15 tests) 515ms
 ✓ v3/@claude-flow/browser/tests/security-integration.test.ts  (30 tests) 11ms
 ❯ v3/@claude-flow/security/__tests__/unit/credential-generator.test.ts  (0 test)
 ✓ v3/@claude-flow/shared/__tests__/hooks/task-hooks.test.ts  (16 tests) 3ms
 ❯ v2/src/cli/__tests__/command-registry.test.js  (0 test)
 ❯ v2/tests/unit/cli/commands/task-parsing.test.js  (0 test)
 ✓ v3/@claude-flow/guidance/tests/compiler.test.ts  (11 tests) 14ms
 ❯ v2/src/cli/__tests__/simple-cli.test.js  (0 test)
Usage: notes [options] [command]

CLI tool for managing notes - Created by Claude Flow Swarm

Options:
  -V, --version          output the version number
  -h, --help             display help for command

Commands:
  add [options] <title>  Add a new note
  list [options]         List all notes
  search <query>         Search notes by title, content, or tags
  delete <id>            Delete a note by ID
  view <id>              View a specific note
  stats                  Show notes statistics
  info                   Show swarm creation information
  help [command]         display help for command
 ❯ v2/examples/05-swarm-apps/swarm-sample/notes.test.js  (0 test)
 ✓ v3/@claude-flow/guidance/tests/retriever.test.ts  (17 tests) 73ms
 ❯ v2/examples/05-swarm-apps/rest-api/tests/products.test.js  (0 test)
stderr | v3/@claude-flow/integration/src/__tests__/token-optimizer.test.ts > TokenOptimizer
[AgentDB Patch] Controller index not found: /Users/alessiorocchi/Projects/claude-flow/node_modules/agentdb/dist/controllers/index.js

 ❯ v3/@claude-flow/integration/src/__tests__/token-optimizer.test.ts  (16 tests | 1 failed) 549ms
   ❯ v3/@claude-flow/integration/src/__tests__/token-optimizer.test.ts > TokenOptimizer > initialization > should detect agentic-flow availability
     → expected false to be true // Object.is equality
 ❯ v2/tests/unit/ui/csv-export.test.ts  (0 test)
 ❯ v3/@claude-flow/aidefence/__tests__/threat-detection.test.ts  (16 tests | 3 failed) 20ms
   ❯ v3/@claude-flow/aidefence/__tests__/threat-detection.test.ts > ThreatDetectionService > detect() > should detect API keys
     → expected false to be true // Object.is equality
   ❯ v3/@claude-flow/aidefence/__tests__/threat-detection.test.ts > ThreatDetectionService > AIDefence facade > should provide simple API
     → expected undefined to be true // Object.is equality
   ❯ v3/@claude-flow/aidefence/__tests__/threat-detection.test.ts > ThreatDetectionService > AIDefence facade > should track statistics
     → expected undefined to be 3 // Object.is equality
 ❯ v2/tests/unit/core/event-bus.test.ts  (0 test)
 ❯ v2/tests/integration/portability-fixes.test.js  (0 test)
 ❯ v2/tests/unit/mcp/server.test.ts  (0 test)
 ❯ v2/tests/hive-mind-sigint.test.js  (0 test)
 ↓ v3/@claude-flow/browser/tests/e2e/browser-e2e.test.ts  (12 tests | 12 skipped)
 ❯ v2/examples/05-swarm-apps/rest-api/tests/users.test.js  (0 test)
 ❯ v2/tests/integration/functional-portability.test.js  (0 test)
 ✓ v3/@claude-flow/integration/src/__tests__/agentic-flow-agent.test.ts  (11 tests) 229ms
 ❯ v2/tests/cli/init-settings-local.test.js  (0 test)
 ✓ v3/@claude-flow/browser/tests/browser-service.test.ts  (18 tests) 8ms
 ❯ v2/tests/unit/utils/npx-isolated-cache.test.js  (0 test)
 ❯ v3/@claude-flow/embeddings/src/__tests__/embedding-service.test.ts  (16 tests | 1 failed) 20ms
   ❯ v3/@claude-flow/embeddings/src/__tests__/embedding-service.test.ts > Similarity Functions > computeSimilarity > should support euclidean metric
     → expected 0.4142135623730951 to be close to 1.4142135623730951, received difference is 1, but expected 0.005
 ❯ v3/@claude-flow/shared/src/hooks/verify-exports.test.ts  (6 tests | 3 failed) 630ms
   ❯ v3/@claude-flow/shared/src/hooks/verify-exports.test.ts > Hooks Module Exports > should create instances from exported factories
     → Cannot find module './index.js'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/shared/src/hooks/verify-exports.test.ts
   ❯ v3/@claude-flow/shared/src/hooks/verify-exports.test.ts > Hooks Module Exports > should have all 26 hook events defined
     → Cannot find module './index.js'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/shared/src/hooks/verify-exports.test.ts
   ❯ v3/@claude-flow/shared/src/hooks/verify-exports.test.ts > Hooks Module Exports > should have all 5 priority levels defined
     → Cannot find module './index.js'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/shared/src/hooks/verify-exports.test.ts
 ❯ v2/tests/unit/utils/error-recovery.test.ts  (0 test)
 ❯ v2/tests/unit/cli/commands/init/npx-isolation.test.js  (0 test)
 ❯ v2/tests/unit/cli/swarm-ui-display.test.ts  (0 test)
 ❯ v2/tests/unit/cli/simple-commands/monitor.test.js  (0 test)
 ❯ v2/benchmark/archive/old-files/hello_world.test.js  (0 test)
stdout | file:/Users/alessiorocchi/Projects/claude-flow/v2/benchmark/archive/old-files/hello_world.js:11:9
Hello, World!

stdout | file:/Users/alessiorocchi/Projects/claude-flow/v2/benchmark/archive/old-files/hello_world.js:12:9
Hello, Claude!

stdout | v2/benchmark/archive/old-files/hello_world.test.js:24:9
Testing helloWorld function:


stdout | test (/Users/alessiorocchi/Projects/claude-flow/v2/benchmark/archive/old-files/hello_world.test.js:11:17)
✅ Should return "Hello, World!" with no parameters
✅ Should greet by name when provided
✅ Should convert numbers to strings
✅ Should convert boolean to string
✅ Should handle null as string
✅ Should handle undefined as default

stdout | v2/benchmark/archive/old-files/hello_world.test.js:63:9

Testing helloWorldAdvanced function:


stderr | test (/Users/alessiorocchi/Projects/claude-flow/v2/benchmark/archive/old-files/hello_world.test.js:13:17)
❌ Should handle empty string as default
❌ Should handle whitespace-only string as default
❌ Should trim whitespace from names
❌ Should use default style when not specified
❌ Should use formal greeting style
❌ Should use casual greeting style
❌ Should use enthusiastic greeting style
❌ Should use morning greeting style
❌ Should use evening greeting style
❌ Should fallback to default for unknown style
❌ Should handle both parameters as defaults

stderr | test (/Users/alessiorocchi/Projects/claude-flow/v2/benchmark/archive/old-files/hello_world.test.js:14:17)
   Error: Expected "Hello, World!" but got "Hello, !"
   Error: Expected "Hello, World!" but got "Hello,    !"
   Error: Expected "Hello, Bob!" but got "Hello,   Bob  !"
   Error: helloWorldAdvanced is not a function
   Error: helloWorldAdvanced is not a function
   Error: helloWorldAdvanced is not a function
   Error: helloWorldAdvanced is not a function
   Error: helloWorldAdvanced is not a function
   Error: helloWorldAdvanced is not a function
   Error: helloWorldAdvanced is not a function
   Error: helloWorldAdvanced is not a function

stdout | v2/benchmark/archive/old-files/hello_world.test.js:98:9

✨ Test suite completed!

 ❯ v2/tests/integration/start-command.test.ts  (0 test)
 ✓ v3/@claude-flow/cli/__tests__/config-loading.test.ts  (3 tests) 35ms
 ❯ v2/tests/unit/fix-typos-syntax.test.js  (0 test)
 ❯ v2/tests/integration/start-compatibility.test.ts  (0 test)
 ❯ v2/src/tests/validation-consistency.test.ts  (0 test)
 ✓ v3/@claude-flow/deployment/src/__tests__/release-manager.test.ts  (8 tests) 3ms
 ✓ v3/@claude-flow/hooks/__tests__/statusline/statusline-collision.test.ts  (4 tests) 3613ms
 ❯ v2/tests/integration/hook-basic.test.js  (0 test)
 ❯ v2/examples/05-swarm-apps/rest-api/tests/server.test.js  (0 test)
 ❯ v2/examples/05-swarm-apps/swarm-created-app/task-manager.test.js  (0 test)
stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generateSessionContext > should include HNSW performance targets
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generateSessionContext > should include code quality rules
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generateSessionContext > should include learned patterns count
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

 ❯ v2/examples/user-api/server.test.js  (0 test)
stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > storePattern > should update existing pattern if duplicate detected
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

 ✓ v3/@claude-flow/hooks/__tests__/hooks.test.ts  (3 tests) 2ms
 ❯ v2/tests/integration/cli-simple.test.js  (0 test)
 ✓ v3/@claude-flow/testing/__tests__/framework.test.ts  (3 tests) 1ms
 ❯ v2/tests/unit/incremental-updates.test.ts  (0 test)
 ❯ v2/tests/cli/environment-handling.test.ts  (0 test)
 ❯ v2/src/migration/tests/migration-system.test.ts  (0 test)
 ❯ v2/bin/__tests__/memory.test.js  (0 test)
 ❯ v2/src/cli/simple-commands/__tests__/memory.test.js  (0 test)
 ❯ v2/bin/__tests__/task.test.js  (0 test)
 ❯ v2/src/cli/simple-commands/__tests__/task.test.js  (0 test)
stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePromptContext > should detect security domain
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

 ❯ v2/tests/unit/ui/console/analysis-tools.test.js  (0 test)
 ❯ v2/tests/unit/simple-example.test.ts  (0 test)
 ❯ v2/tests/unit/example.test.ts  (0 test)
stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > storePattern > should store multiple different patterns
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

 ❯ v2/examples/flask-api-sparc/__tests__/test_main.test.ts  (0 test)
 ❯ v2/examples/data-pipeline/__tests__/test_main.test.js  (0 test)
 ❯ v2/examples/data-pipeline/__tests__/test_main.test.ts  (0 test)
stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > storePattern > should store patterns with metadata
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePromptContext > should detect testing domain
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePromptContext > should include relevant learned patterns
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreEditGuidance > security checks > should block .env files
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreEditGuidance > security checks > should block .pem files
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreEditGuidance > security checks > should block credentials files
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreEditGuidance > security checks > should block secret files
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreEditGuidance > security checks > should block password files
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreEditGuidance > warning checks > should warn about production files
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreEditGuidance > warning checks > should warn about prod files
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreEditGuidance > warning checks > should warn about live files
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > searchPatterns > should return patterns sorted by similarity
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreEditGuidance > file type guidance > should provide testing guidance for test files
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreEditGuidance > file type guidance > should provide security guidance for auth files
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreEditGuidance > file type guidance > should provide memory guidance for cache files
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreEditGuidance > file type guidance > should provide swarm guidance for coordinator files
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > searchPatterns > should limit results to k
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreEditGuidance > file type guidance > should provide TypeScript guidance for .ts files
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreEditGuidance > should allow normal files without specific guidance
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePostEditFeedback > should detect console.log in non-test files
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > searchPatterns > should accept Float32Array as query
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePostEditFeedback > should not flag console.log in test files
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePostEditFeedback > should detect TODO/FIXME comments
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePostEditFeedback > should detect any type in TypeScript
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePostEditFeedback > should warn about large files
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePostEditFeedback > should detect hardcoded secrets
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > searchPatterns > should update metrics on search
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePostEditFeedback > should allow clean files
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreCommandGuidance > dangerous commands > should block rm -rf
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreCommandGuidance > dangerous commands > should block DROP DATABASE
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreCommandGuidance > dangerous commands > should block git reset --hard
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreCommandGuidance > dangerous commands > should block force push
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreCommandGuidance > risky commands > should warn about npm publish
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreCommandGuidance > risky commands > should warn about git push
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreCommandGuidance > risky commands > should warn about kubectl apply
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreCommandGuidance > helpful commands > should provide guidance for test commands
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreCommandGuidance > helpful commands > should provide guidance for vitest
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreCommandGuidance > helpful commands > should provide guidance for build commands
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreCommandGuidance > helpful commands > should provide guidance for tsc
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generatePreCommandGuidance > should allow safe commands
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generateRoutingGuidance > should recommend security-architect for security tasks
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generateRoutingGuidance > should recommend test-architect for testing tasks
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > generateGuidance > should generate guidance with domain detection
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generateRoutingGuidance > should include alternatives
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generateRoutingGuidance > should include usage instructions
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generateStopCheck > should allow stopping when patterns are consolidated
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > generateGuidance > should detect security domain
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > generateGuidance > should detect testing domain
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > generateGuidance > should include agent suggestion
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > routeTask > should route security tasks to security-architect
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > routeTask > should route testing tasks to test-architect
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > routeTask > should route performance tasks to performance-engineer
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > routeTask > should provide alternatives
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider > generateStopCheck > should block stopping when too many unconsolidated patterns
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts > GuidanceProvider with default ReasoningBank > should create provider without explicit ReasoningBank
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

 ✓ v3/@claude-flow/hooks/src/__tests__/guidance-provider.test.ts  (47 tests) 89302ms
stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > routeTask > should default to coder for general tasks
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > recordOutcome > should update pattern quality on success
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > recordOutcome > should update pattern quality on failure
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > recordOutcome > should handle non-existent pattern gracefully
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > consolidate > should prune old low-quality patterns
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > consolidate > should return consolidation stats
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > exportPatterns / importPatterns > should export all patterns
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > exportPatterns / importPatterns > should import patterns
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > exportPatterns / importPatterns > should not import duplicate patterns
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > getStats > should return accurate statistics
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > events > should emit pattern:stored event
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > events > should emit outcome:recorded event
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

stdout | v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts > ReasoningBank > events > should emit consolidated event
[ReasoningBank] Initialized with AgentDB + HNSW (M=16, efConstruction=200)

 ✓ v3/@claude-flow/hooks/src/__tests__/reasoningbank.test.ts  (31 tests) 109559ms

⎯⎯⎯⎯⎯ Failed Suites 127 ⎯⎯⎯⎯⎯⎯

 FAIL  v2/tests/hive-mind-sigint.test.js [ v2/tests/hive-mind-sigint.test.js ]
 FAIL  v2/tests/session-serialization.test.js [ v2/tests/session-serialization.test.js ]
 FAIL  v2/bin/__tests__/agent.test.js [ v2/bin/__tests__/agent.test.js ]
 FAIL  v2/bin/__tests__/memory.test.js [ v2/bin/__tests__/memory.test.js ]
 FAIL  v2/bin/__tests__/swarm.test.js [ v2/bin/__tests__/swarm.test.js ]
 FAIL  v2/bin/__tests__/task.test.js [ v2/bin/__tests__/task.test.js ]
 FAIL  v2/src/__tests__/hook-matchers.test.ts [ v2/src/__tests__/hook-matchers.test.ts ]
 FAIL  v2/src/__tests__/permission-manager.test.ts [ v2/src/__tests__/permission-manager.test.ts ]
 FAIL  v2/src/tests/validation-consistency.test.ts [ v2/src/tests/validation-consistency.test.ts ]
 FAIL  v2/tests/cli/environment-handling.test.ts [ v2/tests/cli/environment-handling.test.ts ]
 FAIL  v2/tests/cli/init-settings-local.test.js [ v2/tests/cli/init-settings-local.test.js ]
 FAIL  v2/tests/integration/agent-booster.test.js [ v2/tests/integration/agent-booster.test.js ]
 FAIL  v2/tests/integration/cross-platform-portability.test.js [ v2/tests/integration/cross-platform-portability.test.js ]
 FAIL  v2/tests/integration/error-handling-patterns.test.js [ v2/tests/integration/error-handling-patterns.test.js ]
 FAIL  v2/tests/integration/functional-portability.test.js [ v2/tests/integration/functional-portability.test.js ]
 FAIL  v2/tests/integration/hive-mind-schema.test.js [ v2/tests/integration/hive-mind-schema.test.js ]
 FAIL  v2/tests/integration/hook-basic.test.js [ v2/tests/integration/hook-basic.test.js ]
 FAIL  v2/tests/integration/init-workflow.test.js [ v2/tests/integration/init-workflow.test.js ]
 FAIL  v2/tests/integration/json-output.test.ts [ v2/tests/integration/json-output.test.ts ]
 FAIL  v2/tests/integration/mcp.test.ts [ v2/tests/integration/mcp.test.ts ]
 FAIL  v2/tests/integration/start-command.test.ts [ v2/tests/integration/start-command.test.ts ]
 FAIL  v2/tests/integration/system-integration.test.ts [ v2/tests/integration/system-integration.test.ts ]
 FAIL  v2/tests/integration/ui-display-fixes.test.ts [ v2/tests/integration/ui-display-fixes.test.ts ]
 FAIL  v2/tests/mcp/mcp-2025-compliance.test.ts [ v2/tests/mcp/mcp-2025-compliance.test.ts ]
 FAIL  v2/tests/mcp/mcp-2025-core.test.ts [ v2/tests/mcp/mcp-2025-core.test.ts ]
 FAIL  v2/tests/mcp/progressive-disclosure.test.ts [ v2/tests/mcp/progressive-disclosure.test.ts ]
 FAIL  v2/tests/performance/benchmark.test.ts [ v2/tests/performance/benchmark.test.ts ]
 FAIL  v2/tests/performance/init-performance.test.js [ v2/tests/performance/init-performance.test.js ]
 FAIL  v2/tests/production/deployment-validation.test.ts [ v2/tests/production/deployment-validation.test.ts ]
 FAIL  v2/tests/production/environment-validation.test.ts [ v2/tests/production/environment-validation.test.ts ]
 FAIL  v2/tests/production/integration-validation.test.ts [ v2/tests/production/integration-validation.test.ts ]
 FAIL  v2/tests/production/performance-validation.test.ts [ v2/tests/production/performance-validation.test.ts ]
 FAIL  v2/tests/production/security-validation.test.ts [ v2/tests/production/security-validation.test.ts ]
 FAIL  v2/tests/security/init-security.test.js [ v2/tests/security/init-security.test.js ]
 FAIL  v2/tests/unit/components.test.ts [ v2/tests/unit/components.test.ts ]
 FAIL  v2/tests/unit/example.test.ts [ v2/tests/unit/example.test.ts ]
 FAIL  v2/tests/unit/incremental-updates.test.ts [ v2/tests/unit/incremental-updates.test.ts ]
 FAIL  v2/tests/unit/performance.test.js [ v2/tests/unit/performance.test.js ]
 FAIL  v2/tests/unit/simple-example.test.ts [ v2/tests/unit/simple-example.test.ts ]
 FAIL  v2/src/__tests__/integration/swarm-sdk-integration.test.ts [ v2/src/__tests__/integration/swarm-sdk-integration.test.ts ]
 FAIL  v2/src/__tests__/regression/backward-compatibility.test.ts [ v2/src/__tests__/regression/backward-compatibility.test.ts ]
 FAIL  v2/src/cli/__tests__/command-registry.test.js [ v2/src/cli/__tests__/command-registry.test.js ]
 FAIL  v2/src/cli/__tests__/simple-cli.test.js [ v2/src/cli/__tests__/simple-cli.test.js ]
 FAIL  v2/src/cli/__tests__/utils.test.js [ v2/src/cli/__tests__/utils.test.js ]
 FAIL  v2/src/maestro/tests/native-hive-mind-integration.test.ts [ v2/src/maestro/tests/native-hive-mind-integration.test.ts ]
 FAIL  v2/src/migration/tests/migration-system.test.ts [ v2/src/migration/tests/migration-system.test.ts ]
 FAIL  v2/src/mcp/tests/mcp-integration.test.ts [ v2/src/mcp/tests/mcp-integration.test.ts ]
 FAIL  v2/src/utils/__tests__/github-cli-safety-wrapper.test.js [ v2/src/utils/__tests__/github-cli-safety-wrapper.test.js ]
 FAIL  v2/tests/performance/agentdb/benchmarks.test.js [ v2/tests/performance/agentdb/benchmarks.test.js ]
 FAIL  v2/tests/unit/api/claude-client-errors.test.ts [ v2/tests/unit/api/claude-client-errors.test.ts ]
 FAIL  v2/tests/integration/agentdb/compatibility.test.js [ v2/tests/integration/agentdb/compatibility.test.js ]
 FAIL  v2/tests/unit/cli/swarm-ui-display.test.ts [ v2/tests/unit/cli/swarm-ui-display.test.ts ]
 FAIL  v2/tests/unit/core/enhanced-orchestrator.test.ts [ v2/tests/unit/core/enhanced-orchestrator.test.ts ]
 FAIL  v2/tests/unit/mcp/mcp-interface.test.ts [ v2/tests/unit/mcp/mcp-interface.test.ts ]
 FAIL  v2/tests/unit/mcp/recovery.test.ts [ v2/tests/unit/mcp/recovery.test.ts ]
 FAIL  v2/tests/unit/mcp/server.test.ts [ v2/tests/unit/mcp/server.test.ts ]
 FAIL  v2/tests/unit/mcp/tools.test.ts [ v2/tests/unit/mcp/tools.test.ts ]
 FAIL  v2/tests/unit/terminal/terminal-manager.test.ts [ v2/tests/unit/terminal/terminal-manager.test.ts ]
 FAIL  v2/tests/unit/ui/csv-export.test.ts [ v2/tests/unit/ui/csv-export.test.ts ]
 FAIL  v2/tests/unit/utils/npx-isolated-cache.test.js [ v2/tests/unit/utils/npx-isolated-cache.test.js ]
 FAIL  v2/src/cli/simple-commands/__tests__/agent.test.js [ v2/src/cli/simple-commands/__tests__/agent.test.js ]
 FAIL  v2/src/cli/simple-commands/__tests__/memory.test.js [ v2/src/cli/simple-commands/__tests__/memory.test.js ]
 FAIL  v2/src/cli/simple-commands/__tests__/swarm.test.js [ v2/src/cli/simple-commands/__tests__/swarm.test.js ]
 FAIL  v2/src/cli/simple-commands/__tests__/task.test.js [ v2/src/cli/simple-commands/__tests__/task.test.js ]
 FAIL  v2/src/swarm/optimizations/__tests__/optimization.test.ts [ v2/src/swarm/optimizations/__tests__/optimization.test.ts ]
 FAIL  v2/tests/unit/cli/commands/task-parsing.test.js [ v2/tests/unit/cli/commands/task-parsing.test.js ]
 FAIL  v2/tests/unit/cli/simple-commands/monitor.test.js [ v2/tests/unit/cli/simple-commands/monitor.test.js ]
 FAIL  v2/tests/unit/ui/console/analysis-tools.test.js [ v2/tests/unit/ui/console/analysis-tools.test.js ]
 FAIL  v2/tests/unit/cli/commands/init/batch-init.test.js [ v2/tests/unit/cli/commands/init/batch-init.test.js ]
 FAIL  v2/tests/unit/cli/commands/init/init-core.test.js [ v2/tests/unit/cli/commands/init/init-core.test.js ]
 FAIL  v2/tests/unit/cli/commands/init/npx-isolation.test.js [ v2/tests/unit/cli/commands/init/npx-isolation.test.js ]
 FAIL  v2/tests/unit/cli/commands/init/rollback.test.js [ v2/tests/unit/cli/commands/init/rollback.test.js ]
 FAIL  v2/tests/unit/cli/commands/init/templates.test.ts [ v2/tests/unit/cli/commands/init/templates.test.ts ]
 FAIL  v2/tests/unit/cli/commands/init/validation.test.js [ v2/tests/unit/cli/commands/init/validation.test.js ]
Error: Failed to load url @jest/globals (resolved id: @jest/globals) in /Users/alessiorocchi/Projects/claude-flow/v2/tests/unit/terminal/terminal-manager.test.ts. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51969:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/422]⎯

 FAIL  v2/examples/user-api/server.test.js [ v2/examples/user-api/server.test.js ]
Error: Cannot find module 'supertest'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v2/examples/user-api/server.test.js
 ❯ TracingChannel.traceSync node:diagnostics_channel:328:14
 ❯ v2/examples/user-api/server.test.js:1:17
      1| const request = require('supertest');
       |                 ^
      2| const app = require('./server');
      3| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'MODULE_NOT_FOUND', requireStack: [ '/Users/alessiorocchi/Projects/claude-flow/v2/examples/user-api/server.test.js' ] }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/422]⎯

 FAIL  v2/src/__tests__/in-process-mcp.test.ts [ v2/src/__tests__/in-process-mcp.test.ts ]
Error: Failed to load url @anthropic-ai/claude-code/sdk (resolved id: @anthropic-ai/claude-code/sdk) in /Users/alessiorocchi/Projects/claude-flow/v2/src/mcp/tool-registry.ts. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51969:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/422]⎯

 FAIL  v2/src/__tests__/sdk-integration.test.ts [ v2/src/__tests__/sdk-integration.test.ts ]
ReferenceError: describe is not defined
 ❯ v2/src/__tests__/sdk-integration.test.ts:17:1
     15| import { SDKCompatibilityLayer } from '../sdk/compatibility-layer';
     16| 
     17| describe('SDK Integration Tests - v2.5-alpha.130', () => {
       | ^
     18|   let newClient: ClaudeClientV25;
     19|   let sdkAdapter: ClaudeFlowSDKAdapter;

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/422]⎯

 FAIL  v2/src/__tests__/session-forking.test.ts [ v2/src/__tests__/session-forking.test.ts ]
 FAIL  v2/tests/integration/sdk-integration.test.ts [ v2/tests/integration/sdk-integration.test.ts ]
 FAIL  v2/tests/sdk/verification.test.ts [ v2/tests/sdk/verification.test.ts ]
Error: Failed to load url @anthropic-ai/claude-code (resolved id: @anthropic-ai/claude-code) in /Users/alessiorocchi/Projects/claude-flow/v2/src/sdk/session-forking.ts. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51969:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/422]⎯

 FAIL  v2/tests/integration/cli-simple.test.js [ v2/tests/integration/cli-simple.test.js ]
ReferenceError: describe is not defined
 ❯ v2/tests/integration/cli-simple.test.js:13:1
     11| const __dirname = path.dirname(__filename);
     12| 
     13| describe('CLI Basic Tests', () => {
       | ^
     14|   test('should pass basic test', () => {
     15|     expect(true).toBe(true);

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/422]⎯

 FAIL  v2/tests/integration/mcp-pattern-persistence.test.js [ v2/tests/integration/mcp-pattern-persistence.test.js ]
Error: Failed to load url ../../src/memory/enhanced-memory.js (resolved id: ../../src/memory/enhanced-memory.js) in /Users/alessiorocchi/Projects/claude-flow/v2/tests/integration/mcp-pattern-persistence.test.js. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51969:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/422]⎯

 FAIL  v2/tests/integration/portability-fixes.test.js [ v2/tests/integration/portability-fixes.test.js ]
ReferenceError: describe is not defined
 ❯ v2/tests/integration/portability-fixes.test.js:13:1
     11| const __dirname = path.dirname(__filename);
     12| 
     13| describe('Portability Fixes Integration Tests', () => {
       | ^
     14|   describe('Source Code Verification', () => {
     15|     test('ruv-swarm-wrapper.js should use structured error handling', …

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/422]⎯

 FAIL  v2/tests/integration/real-metrics.test.js [ v2/tests/integration/real-metrics.test.js ]
ReferenceError: describe is not defined
 ❯ v2/tests/integration/real-metrics.test.js:11:1
      9| const projectRoot = path.resolve(process.cwd());
     10| 
     11| describe('Real Metrics Integration Tests', () => {
       | ^
     12|   
     13|   test('monitor.js should exist and contain real metrics collection', …

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/422]⎯

 FAIL  v2/tests/integration/reasoningbank-integration.test.js [ v2/tests/integration/reasoningbank-integration.test.js ]
ReferenceError: describe is not defined
 ❯ v2/tests/integration/reasoningbank-integration.test.js:16:1
     14| const TEST_DB_PATH = '.swarm/test-memory.db';
     15| 
     16| describe('ReasoningBank Integration', () => {
       | ^
     17|   beforeAll(async () => {
     18|     // Ensure test directory exists

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/422]⎯

 FAIL  v2/tests/integration/start-compatibility.test.ts [ v2/tests/integration/start-compatibility.test.ts ]
ReferenceError: describe is not defined
 ❯ v2/tests/integration/start-compatibility.test.ts:5:1
      3|  */
      4| 
      5| describe('Start Command Backward Compatibility', () => {
       | ^
      6|   describe('simple-commands functionality', () => {
      7|     it('should export startCommand from simple-commands', async () => {

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/422]⎯

 FAIL  v2/tests/unit/fix-typos-syntax.test.js [ v2/tests/unit/fix-typos-syntax.test.js ]
ReferenceError: describe is not defined
 ❯ v2/tests/unit/fix-typos-syntax.test.js:10:1
      8| const __dirname = path.dirname(__filename);
      9| 
     10| describe('Typo and Syntax Fixes', () => {
       | ^
     11|   describe('daa-tools.js processCommunication fix', () => {
     12|     test('should have fixed processCommuncation to processCommunicatio…

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/422]⎯

 FAIL  v2/benchmark/archive/old-files/hello_world.test.js [ v2/benchmark/archive/old-files/hello_world.test.js ]
Error: No test suite found in file /Users/alessiorocchi/Projects/claude-flow/v2/benchmark/archive/old-files/hello_world.test.js
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/422]⎯

 FAIL  v2/examples/05-swarm-apps/swarm-created-app/task-manager.test.js [ v2/examples/05-swarm-apps/swarm-created-app/task-manager.test.js ]
ReferenceError: require is not defined in ES module scope, you can use import instead
This file is being treated as an ES module because it has a '.js' file extension and '/Users/alessiorocchi/Projects/claude-flow/v2/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
 ❯ v2/examples/05-swarm-apps/swarm-created-app/task-manager.js:62:1
 ❯ TracingChannel.traceSync node:diagnostics_channel:328:14

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/422]⎯

 FAIL  v2/examples/05-swarm-apps/swarm-sample/notes.test.js [ v2/examples/05-swarm-apps/swarm-sample/notes.test.js ]
Error: process.exit unexpectedly called with "1"
 ❯ Command._exit node_modules/commander/lib/command.js:512:13
 ❯ Command.help node_modules/commander/lib/command.js:2405:10
 ❯ Command._parseCommand node_modules/commander/lib/command.js:1480:12
 ❯ Command.parse node_modules/commander/lib/command.js:1064:10
 ❯ v2/examples/05-swarm-apps/swarm-sample/notes.js:273:9
    271| 
    272| // Parse command line arguments
    273| program.parse(process.argv);
       |         ^
    274| 
    275| // Export for testing

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/422]⎯

 FAIL  v2/examples/flask-api-sparc/__tests__/test_main.test.ts [ v2/examples/flask-api-sparc/__tests__/test_main.test.ts ]
Error: Transform failed with 1 error:
/Users/alessiorocchi/Projects/claude-flow/v2/examples/flask-api-sparc/__tests__/test_main.test.ts:1:5: ERROR: Expected ";" but found "file"
 ❯ failureErrorWithLog node_modules/vite/node_modules/esbuild/lib/main.js:1472:15
 ❯ node_modules/vite/node_modules/esbuild/lib/main.js:755:50
 ❯ responseCallbacks.<computed> node_modules/vite/node_modules/esbuild/lib/main.js:622:9
 ❯ handleIncomingPacket node_modules/vite/node_modules/esbuild/lib/main.js:677:12
 ❯ Socket.readFromStdout node_modules/vite/node_modules/esbuild/lib/main.js:600:7
 ❯ Socket.emit node:events:508:20

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/422]⎯

 FAIL  v2/examples/data-pipeline/__tests__/test_main.test.js [ v2/examples/data-pipeline/__tests__/test_main.test.js ]
Error: Expected ';', '}' or <eof>
 ❯ getRollupError node_modules/rollup/dist/es/shared/parseAst.js:402:41
 ❯ convertProgram node_modules/rollup/dist/es/shared/parseAst.js:1108:26
 ❯ parseAstAsync node_modules/rollup/dist/es/shared/parseAst.js:2094:106
 ❯ ssrTransformScript node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:52430:11
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:52028:72

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/422]⎯

 FAIL  v2/examples/data-pipeline/__tests__/test_main.test.ts [ v2/examples/data-pipeline/__tests__/test_main.test.ts ]
Error: Transform failed with 1 error:
/Users/alessiorocchi/Projects/claude-flow/v2/examples/data-pipeline/__tests__/test_main.test.ts:1:5: ERROR: Expected ";" but found "file"
 ❯ failureErrorWithLog node_modules/vite/node_modules/esbuild/lib/main.js:1472:15
 ❯ node_modules/vite/node_modules/esbuild/lib/main.js:755:50
 ❯ responseCallbacks.<computed> node_modules/vite/node_modules/esbuild/lib/main.js:622:9
 ❯ handleIncomingPacket node_modules/vite/node_modules/esbuild/lib/main.js:677:12
 ❯ Socket.readFromStdout node_modules/vite/node_modules/esbuild/lib/main.js:600:7
 ❯ Socket.emit node:events:508:20

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/422]⎯

 FAIL  v2/src/swarm/__tests__/integration.test.ts [ v2/src/swarm/__tests__/integration.test.ts ]
ReferenceError: describe is not defined
 ❯ v2/src/swarm/__tests__/integration.test.ts:8:1
      6| import { PromptConfigManager } from '../prompt-utils.js';
      7| 
      8| describe('Prompt Copying Integration Tests', () => {
       | ^
      9|   let tempDir: string;
     10|   let testManager: PromptManager;

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[19/422]⎯

 FAIL  v2/src/swarm/__tests__/prompt-copier.test.ts [ v2/src/swarm/__tests__/prompt-copier.test.ts ]
ReferenceError: describe is not defined
 ❯ v2/src/swarm/__tests__/prompt-copier.test.ts:9:1
      7| import { PromptConfigManager, PromptValidator } from '../prompt-utils.…
      8| 
      9| describe('PromptCopier', () => {
       | ^
     10|   let tempDir: string;
     11|   let sourceDir: string;

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[20/422]⎯

 FAIL  v2/tests/unit/core/event-bus.test.ts [ v2/tests/unit/core/event-bus.test.ts ]
 FAIL  v2/tests/unit/core/orchestrator.test.ts [ v2/tests/unit/core/orchestrator.test.ts ]
Error: Failed to load url ../../../test.utils (resolved id: ../../../test.utils) in /Users/alessiorocchi/Projects/claude-flow/v2/tests/unit/core/orchestrator.test.ts. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51969:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[21/422]⎯

 FAIL  v2/tests/unit/utils/error-recovery.test.ts [ v2/tests/unit/utils/error-recovery.test.ts ]
Error: Failed to load url fs-extra (resolved id: fs-extra) in /Users/alessiorocchi/Projects/claude-flow/v2/tests/integration/mcp-pattern-persistence.test.js. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51969:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22/422]⎯

 FAIL  v2/tests/unit/utils/helpers.test.ts [ v2/tests/unit/utils/helpers.test.ts ]
Error: Transform failed with 1 error:
/Users/alessiorocchi/Projects/claude-flow/v2/tests/unit/utils/helpers.test.ts:476:27: ERROR: Expected "]" but found ")"
 ❯ failureErrorWithLog node_modules/vite/node_modules/esbuild/lib/main.js:1472:15
 ❯ node_modules/vite/node_modules/esbuild/lib/main.js:755:50
 ❯ responseCallbacks.<computed> node_modules/vite/node_modules/esbuild/lib/main.js:622:9
 ❯ handleIncomingPacket node_modules/vite/node_modules/esbuild/lib/main.js:677:12
 ❯ Socket.readFromStdout node_modules/vite/node_modules/esbuild/lib/main.js:600:7
 ❯ Socket.emit node:events:508:20

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[23/422]⎯

 FAIL  v3/@claude-flow/performance/__tests__/attention.test.ts [ v3/@claude-flow/performance/__tests__/attention.test.ts ]
 FAIL  v3/@claude-flow/performance/__tests__/benchmarks.test.ts [ v3/@claude-flow/performance/__tests__/benchmarks.test.ts ]
Error: Cannot find module '@ruvector/attention-darwin-arm64'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/@ruvector/attention/index.js
 ❯ TracingChannel.traceSync node:diagnostics_channel:328:14
 ❯ Object.<anonymous> v3/node_modules/@ruvector/attention/index.js:126:29

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'MODULE_NOT_FOUND', requireStack: [ '/Users/alessiorocchi/Projects/claude-flow/v3/node_modules/@ruvector/attention/index.js' ] }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[24/422]⎯

 FAIL  v3/@claude-flow/security/__tests__/credential-generator.test.ts [ v3/@claude-flow/security/__tests__/credential-generator.test.ts ]
Error: Failed to load url ../../security/credential-generator.js (resolved id: ../../security/credential-generator.js) in /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/security/__tests__/credential-generator.test.ts. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51969:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[25/422]⎯

 FAIL  v3/@claude-flow/security/__tests__/input-validator.test.ts [ v3/@claude-flow/security/__tests__/input-validator.test.ts ]
Error: Failed to load url ../../security/input-validator.js (resolved id: ../../security/input-validator.js) in /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/security/__tests__/input-validator.test.ts. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51969:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[26/422]⎯

 FAIL  v3/@claude-flow/security/__tests__/password-hasher.test.ts [ v3/@claude-flow/security/__tests__/password-hasher.test.ts ]
Error: Failed to load url ../../security/password-hasher.js (resolved id: ../../security/password-hasher.js) in /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/security/__tests__/password-hasher.test.ts. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51969:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[27/422]⎯

 FAIL  v3/@claude-flow/security/__tests__/path-validator.test.ts [ v3/@claude-flow/security/__tests__/path-validator.test.ts ]
Error: Failed to load url ../../security/path-validator.js (resolved id: ../../security/path-validator.js) in /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/security/__tests__/path-validator.test.ts. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51969:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[28/422]⎯

 FAIL  v3/@claude-flow/security/__tests__/safe-executor.test.ts [ v3/@claude-flow/security/__tests__/safe-executor.test.ts ]
Error: Failed to load url ../../security/safe-executor.js (resolved id: ../../security/safe-executor.js) in /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/security/__tests__/safe-executor.test.ts. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51969:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[29/422]⎯

 FAIL  v3/@claude-flow/security/__tests__/token-generator.test.ts [ v3/@claude-flow/security/__tests__/token-generator.test.ts ]
Error: Failed to load url ../../security/token-generator.js (resolved id: ../../security/token-generator.js) in /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/security/__tests__/token-generator.test.ts. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51969:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[30/422]⎯

 FAIL  v2/examples/05-swarm-apps/rest-api/tests/products.test.js [ v2/examples/05-swarm-apps/rest-api/tests/products.test.js ]
Error: Cannot find module 'supertest'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api/tests/products.test.js
 ❯ TracingChannel.traceSync node:diagnostics_channel:328:14
 ❯ v2/examples/05-swarm-apps/rest-api/tests/products.test.js:1:17
      1| const request = require('supertest');
       |                 ^
      2| const app = require('../src/server');
      3| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'MODULE_NOT_FOUND', requireStack: [ '/Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api/tests/products.test.js' ] }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[31/422]⎯

 FAIL  v2/examples/05-swarm-apps/rest-api/tests/server.test.js [ v2/examples/05-swarm-apps/rest-api/tests/server.test.js ]
Error: Cannot find module 'supertest'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api/tests/server.test.js
 ❯ TracingChannel.traceSync node:diagnostics_channel:328:14
 ❯ v2/examples/05-swarm-apps/rest-api/tests/server.test.js:1:17
      1| const request = require('supertest');
       |                 ^
      2| const app = require('../src/server');
      3| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'MODULE_NOT_FOUND', requireStack: [ '/Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api/tests/server.test.js' ] }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[32/422]⎯

 FAIL  v2/examples/05-swarm-apps/rest-api/tests/users.test.js [ v2/examples/05-swarm-apps/rest-api/tests/users.test.js ]
Error: Cannot find module 'supertest'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api/tests/users.test.js
 ❯ TracingChannel.traceSync node:diagnostics_channel:328:14
 ❯ v2/examples/05-swarm-apps/rest-api/tests/users.test.js:1:17
      1| const request = require('supertest');
       |                 ^
      2| const app = require('../src/server');
      3| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'MODULE_NOT_FOUND', requireStack: [ '/Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api/tests/users.test.js' ] }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[33/422]⎯

 FAIL  v2/src/verification/tests/e2e/verification-pipeline.test.ts [ v2/src/verification/tests/e2e/verification-pipeline.test.ts ]
ReferenceError: describe is not defined
 ❯ v2/src/verification/tests/e2e/verification-pipeline.test.ts:84:1
     82| }
     83| 
     84| describe('Verification Pipeline E2E Tests', () => {
       | ^
     85|   let tempDir: string;
     86|   let pipeline: VerificationPipeline;

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[34/422]⎯

 FAIL  v2/src/verification/tests/integration/cross-agent-communication.test.ts [ v2/src/verification/tests/integration/cross-agent-communication.test.ts ]
ReferenceError: describe is not defined
 ❯ v2/src/verification/tests/integration/cross-agent-communication.test.ts:57:1
     55| }
     56| 
     57| describe('Cross-Agent Communication Verification', () => {
       | ^
     58|   let communicationBus: EventEmitter;
     59|   let mockAgents: Map<string, MockAgent>;

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[35/422]⎯

 FAIL  v2/src/verification/tests/mocks/false-reporting-scenarios.test.ts [ v2/src/verification/tests/mocks/false-reporting-scenarios.test.ts ]
ReferenceError: require is not defined in ES module scope, you can use import instead
This file is being treated as an ES module because it has a '.js' file extension and '/Users/alessiorocchi/Projects/claude-flow/v2/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
 ❯ v2/.claude/helpers/truth-score.js:8:12
      6|  */
      7| 
      8| const fs = require('fs').promises;
       |            ^
      9| const path = require('path');
     10| const { execSync } = require('child_process');
 ❯ TracingChannel.traceSync node:diagnostics_channel:328:14

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[36/422]⎯

 FAIL  v2/src/verification/tests/performance/verification-overhead.test.ts [ v2/src/verification/tests/performance/verification-overhead.test.ts ]
ReferenceError: describe is not defined
 ❯ v2/src/verification/tests/performance/verification-overhead.test.ts:50:1
     48| }
     49| 
     50| describe('Verification System Performance Benchmarks', () => {
       | ^
     51|   let tempDir: string;
     52|   let calculator: any;

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[37/422]⎯

 FAIL  v2/src/verification/tests/unit/truth-scoring.test.ts [ v2/src/verification/tests/unit/truth-scoring.test.ts ]
ReferenceError: describe is not defined
 ❯ v2/src/verification/tests/unit/truth-scoring.test.ts:19:1
     17| import TruthScoreCalculator from '../../../../.claude/helpers/truth-sc…
     18| 
     19| describe('Truth Scoring System', () => {
       | ^
     20|   let calculator: any;
     21|   let tempDir: string;

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[38/422]⎯

 FAIL  v2/tests/unit/cli/start/process-manager.test.ts [ v2/tests/unit/cli/start/process-manager.test.ts ]
 FAIL  v2/tests/unit/cli/start/process-ui.test.ts [ v2/tests/unit/cli/start/process-ui.test.ts ]
 FAIL  v2/tests/unit/cli/start/system-monitor.test.ts [ v2/tests/unit/cli/start/system-monitor.test.ts ]
Error: Failed to load url ../../../../test.utils (resolved id: ../../../../test.utils) in /Users/alessiorocchi/Projects/claude-flow/v2/tests/unit/cli/start/process-manager.test.ts. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51969:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[39/422]⎯

 FAIL  v3/@claude-flow/security/__tests__/unit/credential-generator.test.ts [ v3/@claude-flow/security/__tests__/unit/credential-generator.test.ts ]
Error: Failed to load url ../../../security/credential-generator.js (resolved id: ../../../security/credential-generator.js) in /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/security/__tests__/unit/credential-generator.test.ts. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51969:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[40/422]⎯

 FAIL  v3/@claude-flow/security/__tests__/unit/password-hasher.test.ts [ v3/@claude-flow/security/__tests__/unit/password-hasher.test.ts ]
 FAIL  v3/@claude-flow/security/__tests__/unit/path-validator.test.ts [ v3/@claude-flow/security/__tests__/unit/path-validator.test.ts ]
 FAIL  v3/@claude-flow/security/__tests__/unit/safe-executor.test.ts [ v3/@claude-flow/security/__tests__/unit/safe-executor.test.ts ]
Error: Failed to load url ../../helpers/create-mock (resolved id: ../../helpers/create-mock) in /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/security/__tests__/unit/safe-executor.test.ts. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51969:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[41/422]⎯

 FAIL  v3/@claude-flow/security/__tests__/unit/token-generator.test.ts [ v3/@claude-flow/security/__tests__/unit/token-generator.test.ts ]
Error: Failed to load url ../../../security/token-generator.js (resolved id: ../../../security/token-generator.js) in /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/security/__tests__/unit/token-generator.test.ts. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51969:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[42/422]⎯

 FAIL  v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/auth.test.js [ v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/auth.test.js ]
Error: Cannot find module 'supertest'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/auth.test.js
 ❯ TracingChannel.traceSync node:diagnostics_channel:328:14
 ❯ v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/auth.test.js:1:17
      1| const request = require('supertest');
       |                 ^
      2| const app = require('../../server');
      3| const User = require('../../src/models/User');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'MODULE_NOT_FOUND', requireStack: [ '/Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/auth.test.js' ] }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[43/422]⎯

 FAIL  v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/orders.test.js [ v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/orders.test.js ]
Error: Cannot find module 'supertest'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/orders.test.js
 ❯ TracingChannel.traceSync node:diagnostics_channel:328:14
 ❯ v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/orders.test.js:1:17
      1| const request = require('supertest');
       |                 ^
      2| const app = require('../../server');
      3| const User = require('../../src/models/User');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'MODULE_NOT_FOUND', requireStack: [ '/Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/orders.test.js' ] }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[44/422]⎯

 FAIL  v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/products.test.js [ v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/products.test.js ]
Error: Cannot find module 'supertest'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/products.test.js
 ❯ TracingChannel.traceSync node:diagnostics_channel:328:14
 ❯ v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/products.test.js:1:17
      1| const request = require('supertest');
       |                 ^
      2| const app = require('../../server');
      3| const User = require('../../src/models/User');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'MODULE_NOT_FOUND', requireStack: [ '/Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api-advanced/tests/integration/products.test.js' ] }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[45/422]⎯

 FAIL  v2/examples/05-swarm-apps/rest-api-advanced/tests/unit/auth.service.test.js [ v2/examples/05-swarm-apps/rest-api-advanced/tests/unit/auth.service.test.js ]
Error: Cannot find module 'mongoose'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api-advanced/src/models/User.js
- /Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api-advanced/src/services/auth.service.js
- /Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api-advanced/tests/unit/auth.service.test.js
 ❯ TracingChannel.traceSync node:diagnostics_channel:328:14
 ❯ Object.<anonymous> v2/examples/05-swarm-apps/rest-api-advanced/src/models/User.js:1:18

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'MODULE_NOT_FOUND', requireStack: [ '/Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api-advanced/src/models/User.js', '/Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api-advanced/src/services/auth.service.js', '/Users/alessiorocchi/Projects/claude-flow/v2/examples/05-swarm-apps/rest-api-advanced/tests/unit/auth.service.test.js' ] }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[46/422]⎯

⎯⎯⎯⎯⎯⎯ Failed Tests 295 ⎯⎯⎯⎯⎯⎯

 FAIL  v3/__tests__/integration/memory-integration.test.ts > Memory Integration Tests > should persist memory across backend reinitialization
AssertionError: expected undefined not to be undefined
 ❯ v3/__tests__/integration/memory-integration.test.ts:133:23
    131| 
    132|     const retrieved = await hybridBackend.retrieve('persistent-mem');
    133|     expect(retrieved).toBeDefined();
       |                       ^
    134|     expect(retrieved?.content).toBe(memory.content);
    135|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[47/422]⎯

 FAIL  v3/__tests__/integration/plugin-integration.test.ts > Plugin Integration Tests > should support plugin priority ordering
AssertionError: expected [ 10, 100, 50 ] to deeply equal [ 100, 50, 10 ]

- Expected
+ Received

  Array [
+   10,
    100,
    50,
-   10,
  ]

 ❯ v3/__tests__/integration/plugin-integration.test.ts:323:28
    321| 
    322|     // Should execute in priority order (high to low)
    323|     expect(executionOrder).toEqual([100, 50, 10]);
       |                            ^
    324|   });
    325| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[48/422]⎯

 FAIL  v3/__tests__/integration/plugin-integration.test.ts > Plugin Integration Tests > should support plugin versioning and compatibility checks
AssertionError: promise resolved "undefined" instead of rejecting

- Expected: 
[Error: rejected promise]

+ Received: 
undefined

 ❯ v3/__tests__/integration/plugin-integration.test.ts:445:62
    443|     const incompatiblePlugin: Plugin = { ...plugin, id: 'incompatible-…
    444| 
    445|     await expect(pluginManager.loadPlugin(incompatiblePlugin)).rejects…
       |                                                              ^
    446|       /version/i
    447|     );

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[49/422]⎯

 FAIL  v3/__tests__/integration/swarm-integration.test.ts > Swarm Integration Tests > should handle agent failures gracefully
Error: Agent crashed
 ❯ v3/__tests__/integration/swarm-integration.test.ts:140:54
    138| 
    139|     // Mock agent failure
    140|     vi.spyOn(agent, 'executeTask').mockRejectedValue(new Error('Agent …
       |                                                      ^
    141| 
    142|     const result = await coordinator.executeTask('fragile-agent', task…

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[50/422]⎯

 FAIL  v3/__tests__/integration/swarm-integration.test.ts > Swarm Integration Tests > should handle dynamic agent scaling
AssertionError: expected 6 to be 2 // Object.is equality

- Expected
+ Received

- 2
+ 6

 ❯ v3/__tests__/integration/swarm-integration.test.ts:210:29
    208| 
    209|     const scaledDownCount = (await coordinator.listAgents()).length;
    210|     expect(scaledDownCount).toBe(2);
       |                             ^
    211|   });
    212| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[51/422]⎯

 FAIL  v3/__tests__/integration/workflow-integration.test.ts > Full Workflow Integration Tests > should support workflow resume after interruption
AssertionError: expected 'completed' to be 'paused' // Object.is equality

- Expected
+ Received

- paused
+ completed

 ❯ v3/__tests__/integration/workflow-integration.test.ts:407:36
    405| 
    406|     const checkpointState = await workflowEngine.getWorkflowState('res…
    407|     expect(checkpointState.status).toBe('paused');
       |                                    ^
    408| 
    409|     // Resume workflow

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[52/422]⎯

 FAIL  v3/__tests__/integration/workflow-integration.test.ts > Full Workflow Integration Tests > should support workflow composition and nesting
AssertionError: expected 3 to be greater than or equal to 4
 ❯ v3/__tests__/integration/workflow-integration.test.ts:647:35
    645| 
    646|     expect(result.status).toBe('completed');
    647|     expect(result.tasksCompleted).toBeGreaterThanOrEqual(4); // 2 main…
       |                                   ^
    648|   });
    649| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[53/422]⎯

 FAIL  v3/@claude-flow/aidefence/__tests__/threat-detection.test.ts > ThreatDetectionService > detect() > should detect API keys
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/aidefence/__tests__/threat-detection.test.ts:84:31
     82|       const result = service.detect('key: sk-ant-api03-fake1234567890a…
     83| 
     84|       expect(result.piiFound).toBe(true);
       |                               ^
     85|     });
     86|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[54/422]⎯

 FAIL  v3/@claude-flow/aidefence/__tests__/threat-detection.test.ts > ThreatDetectionService > AIDefence facade > should provide simple API
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/@claude-flow/aidefence/__tests__/threat-detection.test.ts:118:25
    116| 
    117|       const safe = aidefence.detect('Hello, help me code');
    118|       expect(safe.safe).toBe(true);
       |                         ^
    119| 
    120|       const threat = aidefence.detect('Ignore previous instructions');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[55/422]⎯

 FAIL  v3/@claude-flow/aidefence/__tests__/threat-detection.test.ts > ThreatDetectionService > AIDefence facade > should track statistics
AssertionError: expected undefined to be 3 // Object.is equality

- Expected: 
3

+ Received: 
undefined

 ❯ v3/@claude-flow/aidefence/__tests__/threat-detection.test.ts:132:36
    130| 
    131|       const stats = aidefence.getStats();
    132|       expect(stats.detectionCount).toBe(3);
       |                                    ^
    133|       expect(stats.avgDetectionTimeMs).toBeGreaterThan(0);
    134|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[56/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/commands.test.ts > Agent Commands > agent spawn > should spawn agent with type flag
AssertionError: expected {} to have property "agentId"
 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts:210:27
    208| 
    209|       expect(result.success).toBe(true);
    210|       expect(result.data).toHaveProperty('agentId');
       |                           ^
    211|       expect(result.data).toHaveProperty('agentType', 'coder');
    212|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[57/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/commands.test.ts > Agent Commands > agent spawn > should spawn agent with custom name
AssertionError: expected {} to have property "agentId" with value 'my-tester'

- Expected: 
"my-tester"

+ Received: 
undefined

 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts:221:27
    219| 
    220|       expect(result.success).toBe(true);
    221|       expect(result.data).toHaveProperty('agentId', 'my-tester');
       |                           ^
    222|     });
    223| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[58/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/commands.test.ts > Agent Commands > agent list > should list all agents
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts:269:30
    267|       const result = await listCmd!.action!(ctx);
    268| 
    269|       expect(result.success).toBe(true);
       |                              ^
    270|       expect(result.data).toHaveProperty('agents');
    271|       expect(result.data).toHaveProperty('total', 2);

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[59/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/commands.test.ts > Agent Commands > agent list > should filter by agent type
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts:280:30
    278|       const result = await listCmd!.action!(ctx);
    279| 
    280|       expect(result.success).toBe(true);
       |                              ^
    281|     });
    282| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[60/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/commands.test.ts > Agent Commands > agent list > should filter by status
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts:289:30
    287|       const result = await listCmd!.action!(ctx);
    288| 
    289|       expect(result.success).toBe(true);
       |                              ^
    290|     });
    291| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[61/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/commands.test.ts > Agent Commands > agent list > should include inactive agents with --all flag
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts:298:30
    296|       const result = await listCmd!.action!(ctx);
    297| 
    298|       expect(result.success).toBe(true);
       |                              ^
    299|     });
    300|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[62/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/commands.test.ts > Agent Commands > agent status > should show agent status
AssertionError: expected {} to have property "id"
 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts:311:27
    309| 
    310|       expect(result.success).toBe(true);
    311|       expect(result.data).toHaveProperty('id');
       |                           ^
    312|       expect(result.data).toHaveProperty('status');
    313|       expect(result.data).toHaveProperty('metrics');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[63/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/commands.test.ts > Agent Commands > agent stop > should stop agent
AssertionError: expected {} to have property "agentId" with value 'agent-123'

- Expected: 
"agent-123"

+ Received: 
undefined

 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts:338:27
    336| 
    337|       expect(result.success).toBe(true);
    338|       expect(result.data).toHaveProperty('agentId', 'agent-123');
       |                           ^
    339|       expect(result.data).toHaveProperty('terminated', true);
    340|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[64/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/commands.test.ts > Swarm Commands > swarm init > should initialize swarm with default topology
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts:394:30
    392|       const result = await initCmd!.action!(ctx);
    393| 
    394|       expect(result.success).toBe(true);
       |                              ^
    395|       expect(result.data).toHaveProperty('swarmId');
    396|       expect(result.data).toHaveProperty('topology');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[65/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/commands.test.ts > Swarm Commands > swarm init > should initialize swarm with custom topology
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts:405:30
    403|       const result = await initCmd!.action!(ctx);
    404| 
    405|       expect(result.success).toBe(true);
       |                              ^
    406|       expect(result.data).toHaveProperty('topology', 'mesh');
    407|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[66/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/commands.test.ts > Swarm Commands > swarm init > should enable V3 mode
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts:415:30
    413|       const result = await initCmd!.action!(ctx);
    414| 
    415|       expect(result.success).toBe(true);
       |                              ^
    416|     });
    417| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[67/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/commands.test.ts > Swarm Commands > swarm init > should set max agents
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts:424:30
    422|       const result = await initCmd!.action!(ctx);
    423| 
    424|       expect(result.success).toBe(true);
       |                              ^
    425|       expect(result.data?.config).toHaveProperty('maxAgents', 20);
    426|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[68/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/commands.test.ts > Memory Commands > memory retrieve > should retrieve data
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts:577:30
    575|       const result = await retrieveCmd!.action!(ctx);
    576| 
    577|       expect(result.success).toBe(true);
       |                              ^
    578|       expect(result.data).toHaveProperty('key', 'test-key');
    579|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[69/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/commands.test.ts > Memory Commands > memory search > should search memory
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts:590:30
    588|       const result = await searchCmd!.action!(ctx);
    589| 
    590|       expect(result.success).toBe(true);
       |                              ^
    591|       expect(Array.isArray(result.data)).toBe(true);
    592|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[70/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/commands.test.ts > Memory Commands > memory list > should list memory entries
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts:610:30
    608|       const result = await listCmd!.action!(ctx);
    609| 
    610|       expect(result.success).toBe(true);
       |                              ^
    611|       expect(Array.isArray(result.data)).toBe(true);
    612|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[71/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/commands.test.ts > Memory Commands > memory delete > should delete entry
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts:624:30
    622|       const result = await deleteCmd!.action!(ctx);
    623| 
    624|       expect(result.success).toBe(true);
       |                              ^
    625|       expect(result.data).toHaveProperty('deleted', true);
    626|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[72/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/commands.test.ts > Memory Commands > memory stats > should show memory statistics
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/commands.test.ts:636:30
    634|       const result = await statsCmd!.action!(ctx);
    635| 
    636|       expect(result.success).toBe(true);
       |                              ^
    637|       expect(result.data).toHaveProperty('entries');
    638|       expect(result.data).toHaveProperty('storage');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[73/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Status Command > status (default) > should perform health check
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:613:30
    611|       const result = await statusCommand.action!(ctx);
    612| 
    613|       expect(result.success).toBe(true);
       |                              ^
    614|       expect(result.data).toHaveProperty('checks');
    615|       expect(result.data).toHaveProperty('summary');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[74/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Status Command > status tasks > should show task status
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:643:30
    641|       const result = await tasksCmd!.action!(ctx);
    642| 
    643|       expect(result.success).toBe(true);
       |                              ^
    644|     });
    645|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[75/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Status Command > status memory > should show memory status
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:652:30
    650|       const result = await memoryCmd!.action!(ctx);
    651| 
    652|       expect(result.success).toBe(true);
       |                              ^
    653|     });
    654|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[76/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task create > should create task with type and description
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:681:30
    679|       const result = await createCmd!.action!(ctx);
    680| 
    681|       expect(result.success).toBe(true);
       |                              ^
    682|       expect(result.data).toHaveProperty('taskId');
    683|       expect(result.data).toHaveProperty('type', 'implementation');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[77/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task create > should create task with priority
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:698:30
    696|       const result = await createCmd!.action!(ctx);
    697| 
    698|       expect(result.success).toBe(true);
       |                              ^
    699|       expect(result.data).toHaveProperty('priority', 'high');
    700|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[78/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task list > should list tasks
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:727:30
    725|       const result = await listCmd!.action!(ctx);
    726| 
    727|       expect(result.success).toBe(true);
       |                              ^
    728|       expect(result.data).toHaveProperty('tasks');
    729|       expect(result.data).toHaveProperty('total');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[79/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task list > should filter by status
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:738:30
    736|       const result = await listCmd!.action!(ctx);
    737| 
    738|       expect(result.success).toBe(true);
       |                              ^
    739|     });
    740| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[80/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task list > should show all tasks
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:747:30
    745|       const result = await listCmd!.action!(ctx);
    746| 
    747|       expect(result.success).toBe(true);
       |                              ^
    748|     });
    749|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[81/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task status > should get task status
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:758:30
    756|       const result = await statusCmd!.action!(ctx);
    757| 
    758|       expect(result.success).toBe(true);
       |                              ^
    759|       expect(result.data).toHaveProperty('id');
    760|       expect(result.data).toHaveProperty('status');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[82/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task cancel > should cancel task
AssertionError: expected {} to have property "cancelled" with value true

- Expected: 
true

+ Received: 
undefined

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:782:27
    780| 
    781|       expect(result.success).toBe(true);
    782|       expect(result.data).toHaveProperty('cancelled', true);
       |                           ^
    783|     });
    784| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[83/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task assign > should assign task to agent
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:802:30
    800|       const result = await assignCmd!.action!(ctx);
    801| 
    802|       expect(result.success).toBe(true);
       |                              ^
    803|       expect(result.data).toHaveProperty('assignedTo');
    804|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[84/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Task Command > task retry > should retry failed task
AssertionError: expected {} to have property "newTaskId"
 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:834:27
    832| 
    833|       expect(result.success).toBe(true);
    834|       expect(result.data).toHaveProperty('newTaskId');
       |                           ^
    835|     });
    836| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[85/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session list > should list sessions
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:866:30
    864|       const result = await listCmd!.action!(ctx);
    865| 
    866|       expect(result.success).toBe(true);
       |                              ^
    867|       expect(result.data).toHaveProperty('sessions');
    868|       expect(result.data).toHaveProperty('total');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[86/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session list > should filter active sessions
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:877:30
    875|       const result = await listCmd!.action!(ctx);
    876| 
    877|       expect(result.success).toBe(true);
       |                              ^
    878|     });
    879| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[87/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session list > should include archived sessions
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:886:30
    884|       const result = await listCmd!.action!(ctx);
    885| 
    886|       expect(result.success).toBe(true);
       |                              ^
    887|     });
    888|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[88/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session save > should save session with name
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:897:30
    895|       const result = await saveCmd!.action!(ctx);
    896| 
    897|       expect(result.success).toBe(true);
       |                              ^
    898|       expect(result.data).toHaveProperty('sessionId');
    899|       expect(result.data).toHaveProperty('name', 'my-session');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[89/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session save > should save session with description
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:908:30
    906|       const result = await saveCmd!.action!(ctx);
    907| 
    908|       expect(result.success).toBe(true);
       |                              ^
    909|     });
    910| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[90/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session save > should exclude memory when requested
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:917:30
    915|       const result = await saveCmd!.action!(ctx);
    916| 
    917|       expect(result.success).toBe(true);
       |                              ^
    918|     });
    919|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[91/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session restore > should restore session
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:929:30
    927|       const result = await restoreCmd!.action!(ctx);
    928| 
    929|       expect(result.success).toBe(true);
       |                              ^
    930|       expect(result.data).toHaveProperty('restored');
    931|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[92/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session restore > should restore only memory
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:940:30
    938|       const result = await restoreCmd!.action!(ctx);
    939| 
    940|       expect(result.success).toBe(true);
       |                              ^
    941|     });
    942| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[93/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session delete > should delete session
AssertionError: expected {} to have property "deleted" with value true

- Expected: 
true

+ Received: 
undefined

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:961:27
    959| 
    960|       expect(result.success).toBe(true);
    961|       expect(result.data).toHaveProperty('deleted', true);
       |                           ^
    962|     });
    963| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[94/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session export > should export in YAML format
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:996:30
    994|       const result = await exportCmd!.action!(ctx);
    995| 
    996|       expect(result.success).toBe(true);
       |                              ^
    997|       expect(result.data).toHaveProperty('format', 'yaml');
    998|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[95/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session import > should import session from file
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:1011:30
    1009|       const result = await importCmd!.action!(ctx);
    1010| 
    1011|       expect(result.success).toBe(true);
       |                              ^
    1012|       expect(result.data).toHaveProperty('sessionId');
    1013|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[96/422]⎯

 FAIL  v3/@claude-flow/cli/__tests__/p1-commands.test.ts > Session Command > session current > should show current session
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/cli/__tests__/p1-commands.test.ts:1041:30
    1039|       const result = await currentCmd!.action!(ctx);
    1040| 
    1041|       expect(result.success).toBe(true);
       |                              ^
    1042|       expect(result.data).toHaveProperty('sessionId');
    1043|       expect(result.data).toHaveProperty('stats');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[97/422]⎯

 FAIL  v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Automatic Provider Selection > should create database with auto provider selection
Error: near "references": syntax error
 ❯ e.handleError v3/node_modules/sql.js/dist/sql-wasm.js:90:371
 ❯ e.run v3/node_modules/sql.js/dist/sql-wasm.js:87:404
 ❯ SqlJsBackend.createSchema v3/@claude-flow/memory/src/sqljs-backend.ts:177:13
    175| 
    176|     // Main entries table
    177|     this.db.run(`
       |             ^
    178|       CREATE TABLE IF NOT EXISTS memory_entries (
    179|         id TEXT PRIMARY KEY,
 ❯ SqlJsBackend.initialize v3/@claude-flow/memory/src/sqljs-backend.ts:132:10
 ❯ Module.createDatabase v3/@claude-flow/memory/src/database-provider.ts:261:3
 ❯ v3/@claude-flow/memory/src/database-provider.test.ts:60:18

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[98/422]⎯

 FAIL  v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Automatic Provider Selection > should create persistent database with auto provider
Error: near "references": syntax error
 ❯ e.handleError v3/node_modules/sql.js/dist/sql-wasm.js:90:371
 ❯ e.run v3/node_modules/sql.js/dist/sql-wasm.js:87:404
 ❯ SqlJsBackend.createSchema v3/@claude-flow/memory/src/sqljs-backend.ts:177:13
    175| 
    176|     // Main entries table
    177|     this.db.run(`
       |             ^
    178|       CREATE TABLE IF NOT EXISTS memory_entries (
    179|         id TEXT PRIMARY KEY,
 ❯ SqlJsBackend.initialize v3/@claude-flow/memory/src/sqljs-backend.ts:132:10
 ❯ Module.createDatabase v3/@claude-flow/memory/src/database-provider.ts:261:3
 ❯ v3/@claude-flow/memory/src/database-provider.test.ts:69:18

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[99/422]⎯

 FAIL  v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Explicit Provider Selection > should create database with sql.js provider
Error: near "references": syntax error
 ❯ e.handleError v3/node_modules/sql.js/dist/sql-wasm.js:90:371
 ❯ e.run v3/node_modules/sql.js/dist/sql-wasm.js:87:404
 ❯ SqlJsBackend.createSchema v3/@claude-flow/memory/src/sqljs-backend.ts:177:13
    175| 
    176|     // Main entries table
    177|     this.db.run(`
       |             ^
    178|       CREATE TABLE IF NOT EXISTS memory_entries (
    179|         id TEXT PRIMARY KEY,
 ❯ SqlJsBackend.initialize v3/@claude-flow/memory/src/sqljs-backend.ts:132:10
 ❯ Module.createDatabase v3/@claude-flow/memory/src/database-provider.ts:261:3
 ❯ v3/@claude-flow/memory/src/database-provider.test.ts:96:18

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[100/422]⎯

 FAIL  v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Cross-Platform Functionality > should handle CRUD operations consistently across providers
Error: near "references": syntax error
 ❯ e.handleError v3/node_modules/sql.js/dist/sql-wasm.js:90:371
 ❯ e.run v3/node_modules/sql.js/dist/sql-wasm.js:87:404
 ❯ SqlJsBackend.createSchema v3/@claude-flow/memory/src/sqljs-backend.ts:177:13
    175| 
    176|     // Main entries table
    177|     this.db.run(`
       |             ^
    178|       CREATE TABLE IF NOT EXISTS memory_entries (
    179|         id TEXT PRIMARY KEY,
 ❯ SqlJsBackend.initialize v3/@claude-flow/memory/src/sqljs-backend.ts:132:10
 ❯ Module.createDatabase v3/@claude-flow/memory/src/database-provider.ts:261:3
 ❯ v3/@claude-flow/memory/src/database-provider.test.ts:188:20

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[101/422]⎯

 FAIL  v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Cross-Platform Functionality > should handle namespace operations across providers
Error: near "references": syntax error
 ❯ e.handleError v3/node_modules/sql.js/dist/sql-wasm.js:90:371
 ❯ e.run v3/node_modules/sql.js/dist/sql-wasm.js:87:404
 ❯ SqlJsBackend.createSchema v3/@claude-flow/memory/src/sqljs-backend.ts:177:13
    175| 
    176|     // Main entries table
    177|     this.db.run(`
       |             ^
    178|       CREATE TABLE IF NOT EXISTS memory_entries (
    179|         id TEXT PRIMARY KEY,
 ❯ SqlJsBackend.initialize v3/@claude-flow/memory/src/sqljs-backend.ts:132:10
 ❯ Module.createDatabase v3/@claude-flow/memory/src/database-provider.ts:261:3
 ❯ v3/@claude-flow/memory/src/database-provider.test.ts:233:18

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[102/422]⎯

 FAIL  v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Cross-Platform Functionality > should handle bulk operations across providers
Error: near "references": syntax error
 ❯ e.handleError v3/node_modules/sql.js/dist/sql-wasm.js:90:371
 ❯ e.run v3/node_modules/sql.js/dist/sql-wasm.js:87:404
 ❯ SqlJsBackend.createSchema v3/@claude-flow/memory/src/sqljs-backend.ts:177:13
    175| 
    176|     // Main entries table
    177|     this.db.run(`
       |             ^
    178|       CREATE TABLE IF NOT EXISTS memory_entries (
    179|         id TEXT PRIMARY KEY,
 ❯ SqlJsBackend.initialize v3/@claude-flow/memory/src/sqljs-backend.ts:132:10
 ❯ Module.createDatabase v3/@claude-flow/memory/src/database-provider.ts:261:3
 ❯ v3/@claude-flow/memory/src/database-provider.test.ts:265:18

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[103/422]⎯

 FAIL  v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Health Check > should perform health check
Error: near "references": syntax error
 ❯ e.handleError v3/node_modules/sql.js/dist/sql-wasm.js:90:371
 ❯ e.run v3/node_modules/sql.js/dist/sql-wasm.js:87:404
 ❯ SqlJsBackend.createSchema v3/@claude-flow/memory/src/sqljs-backend.ts:177:13
    175| 
    176|     // Main entries table
    177|     this.db.run(`
       |             ^
    178|       CREATE TABLE IF NOT EXISTS memory_entries (
    179|         id TEXT PRIMARY KEY,
 ❯ SqlJsBackend.initialize v3/@claude-flow/memory/src/sqljs-backend.ts:132:10
 ❯ Module.createDatabase v3/@claude-flow/memory/src/database-provider.ts:261:3
 ❯ v3/@claude-flow/memory/src/database-provider.test.ts:291:18

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[104/422]⎯

 FAIL  v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Statistics > should provide backend statistics
Error: near "references": syntax error
 ❯ e.handleError v3/node_modules/sql.js/dist/sql-wasm.js:90:371
 ❯ e.run v3/node_modules/sql.js/dist/sql-wasm.js:87:404
 ❯ SqlJsBackend.createSchema v3/@claude-flow/memory/src/sqljs-backend.ts:177:13
    175| 
    176|     // Main entries table
    177|     this.db.run(`
       |             ^
    178|       CREATE TABLE IF NOT EXISTS memory_entries (
    179|         id TEXT PRIMARY KEY,
 ❯ SqlJsBackend.initialize v3/@claude-flow/memory/src/sqljs-backend.ts:132:10
 ❯ Module.createDatabase v3/@claude-flow/memory/src/database-provider.ts:261:3
 ❯ v3/@claude-flow/memory/src/database-provider.test.ts:311:18

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[105/422]⎯

 FAIL  v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Error Handling > should handle missing entries gracefully
Error: near "references": syntax error
 ❯ e.handleError v3/node_modules/sql.js/dist/sql-wasm.js:90:371
 ❯ e.run v3/node_modules/sql.js/dist/sql-wasm.js:87:404
 ❯ SqlJsBackend.createSchema v3/@claude-flow/memory/src/sqljs-backend.ts:177:13
    175| 
    176|     // Main entries table
    177|     this.db.run(`
       |             ^
    178|       CREATE TABLE IF NOT EXISTS memory_entries (
    179|         id TEXT PRIMARY KEY,
 ❯ SqlJsBackend.initialize v3/@claude-flow/memory/src/sqljs-backend.ts:132:10
 ❯ Module.createDatabase v3/@claude-flow/memory/src/database-provider.ts:261:3
 ❯ v3/@claude-flow/memory/src/database-provider.test.ts:340:18

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[106/422]⎯

 FAIL  v3/@claude-flow/memory/src/database-provider.test.ts > DatabaseProvider > Error Handling > should handle empty queries
Error: near "references": syntax error
 ❯ e.handleError v3/node_modules/sql.js/dist/sql-wasm.js:90:371
 ❯ e.run v3/node_modules/sql.js/dist/sql-wasm.js:87:404
 ❯ SqlJsBackend.createSchema v3/@claude-flow/memory/src/sqljs-backend.ts:177:13
    175| 
    176|     // Main entries table
    177|     this.db.run(`
       |             ^
    178|       CREATE TABLE IF NOT EXISTS memory_entries (
    179|         id TEXT PRIMARY KEY,
 ❯ SqlJsBackend.initialize v3/@claude-flow/memory/src/sqljs-backend.ts:132:10
 ❯ Module.createDatabase v3/@claude-flow/memory/src/database-provider.ts:261:3
 ❯ v3/@claude-flow/memory/src/database-provider.test.ts:352:18

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[107/422]⎯

 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Initialization > should initialize both backends
 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Store Operations > should store entries in both backends (dual-write)
 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Store Operations > should handle bulk inserts
 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Exact Match Queries (SQLite) > should route exact key queries to SQLite
 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Exact Match Queries (SQLite) > should handle prefix queries via SQLite
 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Semantic Search (AgentDB) > should perform semantic search via AgentDB
 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Semantic Search (AgentDB) > should support semantic search with filters
 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Hybrid Queries > should combine semantic and structured queries (union)
 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Hybrid Queries > should support semantic-first strategy
 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > CRUD Operations > should update entries in both backends
 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > CRUD Operations > should delete entries from both backends
 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Namespace Operations > should list all namespaces
 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Namespace Operations > should count entries per namespace
 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Namespace Operations > should clear namespace in both backends
 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Statistics > should provide combined statistics
 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Health Check > should report healthy status for both backends
 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Query Routing > should auto-route semantic queries to AgentDB
 FAIL  v3/@claude-flow/memory/src/hybrid-backend.test.ts > HybridBackend - ADR-009 > Query Routing > should auto-route exact queries to SQLite
Error: Could not locate the bindings file. Tried:
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node
 → /Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node
 ❯ bindings v3/node_modules/bindings/bindings.js:126:9
 ❯ new Database v3/node_modules/better-sqlite3/lib/database.js:48:64
 ❯ SQLiteBackend.initialize v3/@claude-flow/memory/src/sqlite-backend.ts:103:15
    101| 
    102|     // Open database connection
    103|     this.db = new Database(this.config.databasePath, {
       |               ^
    104|       verbose: this.config.verbose ? console.log : undefined,
    105|     });
 ❯ HybridBackend.initialize v3/@claude-flow/memory/src/hybrid-backend.ts:204:36
 ❯ v3/@claude-flow/memory/src/hybrid-backend.test.ts:38:19

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { tries: [ '/Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/better_sqlite3.node', '/Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Debug/better_sqlite3.node', '/Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/Release/better_sqlite3.node', '/Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Debug/better_sqlite3.node', '/Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Debug/better_sqlite3.node', '/Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/out/Release/better_sqlite3.node', '/Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/Release/better_sqlite3.node', '/Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/build/default/better_sqlite3.node', '/Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/compiled/25.5.0/darwin/arm64/better_sqlite3.node', '/Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/release/install-root/better_sqlite3.node', '/Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/debug/install-root/better_sqlite3.node', '/Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/addon-build/default/install-root/better_sqlite3.node', '/Users/alessiorocchi/Projects/claude-flow/v3/node_modules/better-sqlite3/lib/binding/node-v141-darwin-arm64/better_sqlite3.node' ] }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[108/422]⎯

 FAIL  v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > version constraints > should validate dependency versions during initialization
Error: Invalid plugin: does not implement IPlugin interface
 ❯ EnhancedPluginRegistry.register v3/@claude-flow/plugins/src/registry/enhanced-plugin-registry.ts:284:13
    282|     // Validate plugin
    283|     if (!validatePlugin(resolvedPlugin)) {
    284|       throw new Error('Invalid plugin: does not implement IPlugin inte…
       |             ^
    285|     }
    286| 
 ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts:137:22

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[109/422]⎯

 FAIL  v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > version constraints > should pass validation with compatible versions
Error: Invalid plugin: does not implement IPlugin interface
 ❯ EnhancedPluginRegistry.register v3/@claude-flow/plugins/src/registry/enhanced-plugin-registry.ts:284:13
    282|     // Validate plugin
    283|     if (!validatePlugin(resolvedPlugin)) {
    284|       throw new Error('Invalid plugin: does not implement IPlugin inte…
       |             ^
    285|     }
    286| 
 ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts:147:22

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[110/422]⎯

 FAIL  v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > safe unload > should prevent unload of plugins with dependents
Error: Invalid plugin: does not implement IPlugin interface
 ❯ EnhancedPluginRegistry.register v3/@claude-flow/plugins/src/registry/enhanced-plugin-registry.ts:284:13
    282|     // Validate plugin
    283|     if (!validatePlugin(resolvedPlugin)) {
    284|       throw new Error('Invalid plugin: does not implement IPlugin inte…
       |             ^
    285|     }
    286| 
 ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts:160:22

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[111/422]⎯

 FAIL  v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > safe unload > should allow cascade unload
Error: Invalid plugin: does not implement IPlugin interface
 ❯ EnhancedPluginRegistry.register v3/@claude-flow/plugins/src/registry/enhanced-plugin-registry.ts:284:13
    282|     // Validate plugin
    283|     if (!validatePlugin(resolvedPlugin)) {
    284|       throw new Error('Invalid plugin: does not implement IPlugin inte…
       |             ^
    285|     }
    286| 
 ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts:171:22

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[112/422]⎯

 FAIL  v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > safe unload > should allow force unload
Error: Invalid plugin: does not implement IPlugin interface
 ❯ EnhancedPluginRegistry.register v3/@claude-flow/plugins/src/registry/enhanced-plugin-registry.ts:284:13
    282|     // Validate plugin
    283|     if (!validatePlugin(resolvedPlugin)) {
    284|       throw new Error('Invalid plugin: does not implement IPlugin inte…
       |             ^
    285|     }
    286| 
 ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts:184:22

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[113/422]⎯

 FAIL  v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > initialization strategies > should support parallel-safe initialization
Error: Invalid plugin: does not implement IPlugin interface
 ❯ EnhancedPluginRegistry.register v3/@claude-flow/plugins/src/registry/enhanced-plugin-registry.ts:284:13
    282|     // Validate plugin
    283|     if (!validatePlugin(resolvedPlugin)) {
    284|       throw new Error('Invalid plugin: does not implement IPlugin inte…
       |             ^
    285|     }
    286| 
 ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts:239:26

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[114/422]⎯

 FAIL  v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > hot reload > should reload a plugin
Error: Invalid plugin: does not implement IPlugin interface
 ❯ EnhancedPluginRegistry.register v3/@claude-flow/plugins/src/registry/enhanced-plugin-registry.ts:284:13
    282|     // Validate plugin
    283|     if (!validatePlugin(resolvedPlugin)) {
    284|       throw new Error('Invalid plugin: does not implement IPlugin inte…
       |             ^
    285|     }
    286| 
 ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts:255:22

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[115/422]⎯

 FAIL  v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > hot reload > should preserve state during reload
Error: Invalid plugin: does not implement IPlugin interface
 ❯ EnhancedPluginRegistry.register v3/@claude-flow/plugins/src/registry/enhanced-plugin-registry.ts:284:13
    282|     // Validate plugin
    283|     if (!validatePlugin(resolvedPlugin)) {
    284|       throw new Error('Invalid plugin: does not implement IPlugin inte…
       |             ^
    285|     }
    286| 
 ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts:272:22

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[116/422]⎯

 FAIL  v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > conflict resolution > should error on conflict by default
AssertionError: promise resolved "undefined" instead of rejecting

- Expected: 
[Error: rejected promise]

+ Received: 
undefined

 ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts:317:41
    315|       await registry.register(plugin2);
    316| 
    317|       await expect(registry.initialize())
       |                                         ^
    318|         .rejects.toThrow('conflict');
    319|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[117/422]⎯

 FAIL  v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > conflict resolution > should support namespace strategy
AssertionError: expected [ 'tool', 'plugin-2:tool' ] to include 'plugin-1:tool'
 ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts:385:38
    383|       const tools = namespaceRegistry.getMCPTools();
    384|       expect(tools).toHaveLength(2);
    385|       expect(tools.map(t => t.name)).toContain('plugin-1:tool');
       |                                      ^
    386|       expect(tools.map(t => t.name)).toContain('plugin-2:tool');
    387|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[118/422]⎯

 FAIL  v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts > EnhancedPluginRegistry > shutdown > should shutdown all plugins
Error: Invalid plugin: does not implement IPlugin interface
 ❯ EnhancedPluginRegistry.register v3/@claude-flow/plugins/src/registry/enhanced-plugin-registry.ts:284:13
    282|     // Validate plugin
    283|     if (!validatePlugin(resolvedPlugin)) {
    284|       throw new Error('Invalid plugin: does not implement IPlugin inte…
       |             ^
    285|     }
    286| 
 ❯ v3/@claude-flow/plugins/__tests__/enhanced-plugin-registry.test.ts:479:22

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[119/422]⎯

 FAIL  v3/@claude-flow/plugins/__tests__/sdk.test.ts > HookBuilder > should build a hook with conditions
TypeError: (intermediate value).withName(...).withDescription(...).withPriority(...).when is not a function
 ❯ v3/@claude-flow/plugins/__tests__/sdk.test.ts:198:8
    196|       .withDescription('Conditional hook test')
    197|       .withPriority(HookPriority.High)
    198|       .when((ctx) => (ctx.data as any)?.shouldRun === true)
       |        ^
    199|       .handle(async () => {
    200|         executed = true;

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[120/422]⎯

 FAIL  v3/@claude-flow/plugins/__tests__/sdk.test.ts > HookBuilder > should apply transformers
TypeError: (intermediate value).withName(...).transform is not a function
 ❯ v3/@claude-flow/plugins/__tests__/sdk.test.ts:225:8
    223|     const hook = new HookBuilder(HookEvent.PreTaskExecute)
    224|       .withName('transform-hook')
    225|       .transform((data) => ({ ...(data as object), transformed: true }…
       |        ^
    226|       .handle(async (ctx) => ({
    227|         success: true,

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[121/422]⎯

 FAIL  v3/@claude-flow/plugins/__tests__/sdk.test.ts > HookBuilder > should support synchronous mode
TypeError: (intermediate value).synchronous(...).handle is not a function
 ❯ v3/@claude-flow/plugins/__tests__/sdk.test.ts:246:8
    244|     const hook = new HookBuilder(HookEvent.PostCommand)
    245|       .synchronous()
    246|       .handle(() => ({ success: true }))
       |        ^
    247|       .build();
    248| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[122/422]⎯

 FAIL  v3/@claude-flow/plugins/__tests__/security.test.ts > JSON Security > safeJsonParse > should strip dangerous keys
AssertionError: expected { …(12) } to be undefined
 ❯ v3/@claude-flow/plugins/__tests__/security.test.ts:169:32
    167|       const result = safeJsonParse<Record<string, unknown>>(malicious);
    168|       expect(result.normal).toBe(1);
    169|       expect(result.__proto__).toBeUndefined();
       |                                ^
    170|     });
    171| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[123/422]⎯

 FAIL  v3/@claude-flow/swarm/__tests__/consensus.test.ts > Byzantine Consensus > Fault Tolerance > should achieve consensus with 2f+1 votes
 FAIL  v3/@claude-flow/swarm/__tests__/topology.test.ts > TopologyManager > Event Emission > should emit topology.rebalanced event
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[124/422]⎯

 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > CognitiveBridge > retrieve > should retrieve stored item
AssertionError: expected 0.9 to be 0.8 // Object.is equality

- Expected
+ Received

- 0.8
+ 0.9

 ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts:104:35
    102|       expect(retrieved).not.toBeNull();
    103|       expect(retrieved?.id).toBe('item-1');
    104|       expect(retrieved?.salience).toBe(0.8);
       |                                   ^
    105|     });
    106| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[125/422]⎯

 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > CognitiveBridge > decay > should apply decay to stored items
TypeError: actual value must be number or bigint, received "undefined"
 ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts:183:35
    181| 
    182|       const retrieved = bridge.retrieve('item-1');
    183|       expect(retrieved?.salience).toBeLessThan(0.8);
       |                                   ^
    184|     });
    185| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[126/422]⎯

 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > CognitiveBridge > focus > should handle focus on non-existent items
AssertionError: expected [ 'non-existent' ] to not include 'non-existent'
 ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts:252:31
    250|     it('should handle focus on non-existent items', () => {
    251|       const state = bridge.focus(['non-existent']);
    252|       expect(state.focus).not.toContain('non-existent');
       |                               ^
    253|     });
    254|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[127/422]⎯

 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > initialization > should initialize successfully
TypeError: this._module.setMode is not a function
 ❯ SonaBridge.init v3/plugins/cognitive-kernel/src/bridges/sona-bridge.ts:157:20
    155|       }
    156| 
    157|       this._module.setMode(this.config.mode);
       |                    ^
    158|       this._status = 'ready';
    159|     } catch (error) {
 ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts:341:7

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[128/422]⎯

 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > initialization > should cleanup on destroy
TypeError: this._module.setMode is not a function
 ❯ SonaBridge.init v3/plugins/cognitive-kernel/src/bridges/sona-bridge.ts:157:20
    155|       }
    156| 
    157|       this._module.setMode(this.config.mode);
       |                    ^
    158|       this._status = 'ready';
    159|     } catch (error) {
 ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts:347:7

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[129/422]⎯

 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > learn > should learn from trajectories
 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > learn > should return 0 for empty trajectories
 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > learn > should throw when not initialized
TypeError: this._module.setMode is not a function
 ❯ SonaBridge.init v3/plugins/cognitive-kernel/src/bridges/sona-bridge.ts:157:20
    155|       }
    156| 
    157|       this._module.setMode(this.config.mode);
       |                    ^
    158|       this._status = 'ready';
    159|     } catch (error) {
 ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts:355:7

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[130/422]⎯

 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > predict > should predict action from state
 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > predict > should return explore action for unknown states
TypeError: this._module.setMode is not a function
 ❯ SonaBridge.init v3/plugins/cognitive-kernel/src/bridges/sona-bridge.ts:157:20
    155|       }
    156| 
    157|       this._module.setMode(this.config.mode);
       |                    ^
    158|       this._status = 'ready';
    159|     } catch (error) {
 ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts:394:7

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[131/422]⎯

 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > pattern management > should store pattern
 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > pattern management > should find similar patterns
 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > pattern management > should update pattern success rate
TypeError: this._module.setMode is not a function
 ❯ SonaBridge.init v3/plugins/cognitive-kernel/src/bridges/sona-bridge.ts:157:20
    155|       }
    156| 
    157|       this._module.setMode(this.config.mode);
       |                    ^
    158|       this._status = 'ready';
    159|     } catch (error) {
 ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts:417:7

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[132/422]⎯

 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > LoRA operations > should apply LoRA transformation
 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > LoRA operations > should update LoRA weights
TypeError: this._module.setMode is not a function
 ❯ SonaBridge.init v3/plugins/cognitive-kernel/src/bridges/sona-bridge.ts:157:20
    155|       }
    156| 
    157|       this._module.setMode(this.config.mode);
       |                    ^
    158|       this._status = 'ready';
    159|     } catch (error) {
 ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts:474:7

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[133/422]⎯

 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > EWC operations > should compute Fisher information
 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > EWC operations > should consolidate without throwing
TypeError: this._module.setMode is not a function
 ❯ SonaBridge.init v3/plugins/cognitive-kernel/src/bridges/sona-bridge.ts:157:20
    155|       }
    156| 
    157|       this._module.setMode(this.config.mode);
       |                    ^
    158|       this._status = 'ready';
    159|     } catch (error) {
 ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts:505:7

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[134/422]⎯

 FAIL  v3/plugins/cognitive-kernel/tests/bridges.test.ts > SonaBridge > mode management > should set and get mode
TypeError: this._module.setMode is not a function
 ❯ SonaBridge.init v3/plugins/cognitive-kernel/src/bridges/sona-bridge.ts:157:20
    155|       }
    156| 
    157|       this._module.setMode(this.config.mode);
       |                    ^
    158|       this._status = 'ready';
    159|     } catch (error) {
 ❯ v3/plugins/cognitive-kernel/tests/bridges.test.ts:544:7

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[135/422]⎯

 FAIL  v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/working-memory handler > should handle allocate action
AssertionError: expected true to be undefined
 ❯ v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts:77:28
     75|     const result = await tool.handler(input);
     76| 
     77|     expect(result.isError).toBeUndefined();
       |                            ^
     78|     const parsed = JSON.parse(result.content[0].text!);
     79|     expect(parsed.action).toBe('allocate');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[136/422]⎯

 FAIL  v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts > cognition/working-memory handler > should handle update action
AssertionError: expected true to be undefined
 ❯ v3/plugins/cognitive-kernel/tests/mcp-tools.test.ts:95:28
     93|     const result = await tool.handler(input);
     94| 
     95|     expect(result.isError).toBeUndefined();
       |                            ^
     96|     const parsed = JSON.parse(result.content[0].text!);
     97|     expect(parsed.action).toBe('update');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[137/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Tool Registry > should have version 0.1.0
AssertionError: expected '3.0.0-alpha.1' to be '0.1.0' // Object.is equality

- Expected
+ Received

- 0.1.0
+ 3.0.0-alpha.1

 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:133:30
    131|     it('should have version 0.1.0', () => {
    132|       for (const tool of codeIntelligenceTools) {
    133|         expect(tool.version).toBe('0.1.0');
       |                              ^
    134|       }
    135|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[138/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Tool Registry > should get tool by name
TypeError: getTool is not a function
 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:138:20
    136| 
    137|     it('should get tool by name', () => {
    138|       const tool = getTool('code/semantic-search');
       |                    ^
    139|       expect(tool).toBeDefined();
    140|       expect(tool?.name).toBe('code/semantic-search');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[139/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Tool Registry > should return undefined for unknown tool
TypeError: getTool is not a function
 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:144:20
    142| 
    143|     it('should return undefined for unknown tool', () => {
    144|       const tool = getTool('code/unknown');
       |                    ^
    145|       expect(tool).toBeUndefined();
    146|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[140/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Tool Registry > should get all tool names
TypeError: getToolNames is not a function
 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:149:21
    147| 
    148|     it('should get all tool names', () => {
    149|       const names = getToolNames();
       |                     ^
    150|       expect(names).toHaveLength(5);
    151|       expect(names).toContain('code/semantic-search');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[141/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/semantic-search > should have correct tool definition
AssertionError: expected [ undefined ] to include 'query'
 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:158:55
    156|     it('should have correct tool definition', () => {
    157|       expect(semanticSearchTool.name).toBe('code/semantic-search');
    158|       expect(semanticSearchTool.inputSchema.required).toContain('query…
       |                                                       ^
    159|       expect(semanticSearchTool.cacheable).toBe(true);
    160|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[142/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/semantic-search > should handle valid input
AssertionError: expected undefined not to be undefined
 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:172:28
    170|       expect(result.isError).toBeUndefined();
    171|       const data = JSON.parse(result.content[0].text!);
    172|       expect(data.results).toBeDefined();
       |                            ^
    173|       expect(Array.isArray(data.results)).toBe(true);
    174|       expect(data.searchTime).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[143/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/semantic-search > should reject missing query
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:220:30
    218|       const result = await semanticSearchTool.handler(input, createMoc…
    219| 
    220|       expect(result.isError).toBe(true);
       |                              ^
    221|     });
    222| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[144/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/semantic-search > should reject query exceeding max length
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:230:30
    228|       const result = await semanticSearchTool.handler(input, createMoc…
    229| 
    230|       expect(result.isError).toBe(true);
       |                              ^
    231|     });
    232| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[145/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/semantic-search > should reject topK outside valid range
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:241:30
    239|       const result = await semanticSearchTool.handler(input, createMoc…
    240| 
    241|       expect(result.isError).toBe(true);
       |                              ^
    242|     });
    243|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[146/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/architecture-analyze > should have correct tool definition
AssertionError: expected [ undefined ] to include 'targetPath'
 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:248:60
    246|     it('should have correct tool definition', () => {
    247|       expect(architectureAnalyzeTool.name).toBe('code/architecture-ana…
    248|       expect(architectureAnalyzeTool.inputSchema.required).toContain('…
       |                                                            ^
    249|       expect(architectureAnalyzeTool.cacheable).toBe(true);
    250|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[147/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/architecture-analyze > should handle valid input
AssertionError: expected undefined not to be undefined
 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:262:31
    260|       expect(result.isError).toBeUndefined();
    261|       const data = JSON.parse(result.content[0].text!);
    262|       expect(data.components).toBeDefined();
       |                               ^
    263|       expect(data.metrics).toBeDefined();
    264|       expect(data.analysisTime).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[148/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/architecture-analyze > should reject missing targetPath
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:308:30
    306|       const result = await architectureAnalyzeTool.handler(input, crea…
    307| 
    308|       expect(result.isError).toBe(true);
       |                              ^
    309|     });
    310| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[149/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/architecture-analyze > should reject targetPath exceeding max length
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:318:30
    316|       const result = await architectureAnalyzeTool.handler(input, crea…
    317| 
    318|       expect(result.isError).toBe(true);
       |                              ^
    319|     });
    320|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[150/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/refactor-impact > should have correct tool definition
AssertionError: expected [ undefined ] to include 'targetPath'
 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:325:55
    323|     it('should have correct tool definition', () => {
    324|       expect(refactorImpactTool.name).toBe('code/refactor-impact');
    325|       expect(refactorImpactTool.inputSchema.required).toContain('targe…
       |                                                       ^
    326|       expect(refactorImpactTool.inputSchema.required).toContain('chang…
    327|       expect(refactorImpactTool.cacheable).toBe(false);

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[151/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/refactor-impact > should handle valid input
AssertionError: expected undefined not to be undefined
 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:341:33
    339|       expect(result.isError).toBeUndefined();
    340|       const data = JSON.parse(result.content[0].text!);
    341|       expect(data.directImpact).toBeDefined();
       |                                 ^
    342|       expect(data.indirectImpact).toBeDefined();
    343|       expect(data.riskLevel).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[152/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/refactor-impact > should reject missing targetPath
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:391:30
    389|       const result = await refactorImpactTool.handler(input, createMoc…
    390| 
    391|       expect(result.isError).toBe(true);
       |                              ^
    392|     });
    393| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[153/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/refactor-impact > should reject missing changeType
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:401:30
    399|       const result = await refactorImpactTool.handler(input, createMoc…
    400| 
    401|       expect(result.isError).toBe(true);
       |                              ^
    402|     });
    403| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[154/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/refactor-impact > should reject invalid changeType
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:412:30
    410|       const result = await refactorImpactTool.handler(input, createMoc…
    411| 
    412|       expect(result.isError).toBe(true);
       |                              ^
    413|     });
    414|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[155/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/split-suggest > should have correct tool definition
AssertionError: expected [ undefined ] to include 'targetPath'
 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:419:53
    417|     it('should have correct tool definition', () => {
    418|       expect(splitSuggestTool.name).toBe('code/split-suggest');
    419|       expect(splitSuggestTool.inputSchema.required).toContain('targetP…
       |                                                     ^
    420|       expect(splitSuggestTool.cacheable).toBe(true);
    421|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[156/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/split-suggest > should handle valid input
AssertionError: expected undefined not to be undefined
 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:433:32
    431|       expect(result.isError).toBeUndefined();
    432|       const data = JSON.parse(result.content[0].text!);
    433|       expect(data.suggestions).toBeDefined();
       |                                ^
    434|       expect(data.analysisTime).toBeDefined();
    435|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[157/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/split-suggest > should use default threshold
AssertionError: expected undefined to be 500 // Object.is equality

- Expected: 
500

+ Received: 
undefined

 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:460:30
    458|       expect(result.isError).toBeUndefined();
    459|       const data = JSON.parse(result.content[0].text!);
    460|       expect(data.threshold).toBe(500); // default
       |                              ^
    461|     });
    462| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[158/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/split-suggest > should reject missing targetPath
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:481:30
    479|       const result = await splitSuggestTool.handler(input, createMockC…
    480| 
    481|       expect(result.isError).toBe(true);
       |                              ^
    482|     });
    483| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[159/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/split-suggest > should reject threshold outside valid range
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:491:30
    489| 
    490|       const result = await splitSuggestTool.handler(tooLow, createMock…
    491|       expect(result.isError).toBe(true);
       |                              ^
    492|     });
    493|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[160/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/learn-patterns > should have correct tool definition
AssertionError: expected [ undefined ] to include 'targetPath'
 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:498:54
    496|     it('should have correct tool definition', () => {
    497|       expect(learnPatternsTool.name).toBe('code/learn-patterns');
    498|       expect(learnPatternsTool.inputSchema.required).toContain('target…
       |                                                      ^
    499|       expect(learnPatternsTool.cacheable).toBe(true);
    500|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[161/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/learn-patterns > should handle valid input
AssertionError: expected undefined not to be undefined
 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:512:29
    510|       expect(result.isError).toBeUndefined();
    511|       const data = JSON.parse(result.content[0].text!);
    512|       expect(data.patterns).toBeDefined();
       |                             ^
    513|       expect(data.antiPatterns).toBeDefined();
    514|       expect(data.analysisTime).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[162/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/learn-patterns > should reject missing targetPath
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:558:30
    556|       const result = await learnPatternsTool.handler(input, createMock…
    557| 
    558|       expect(result.isError).toBe(true);
       |                              ^
    559|     });
    560| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[163/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > code/learn-patterns > should reject minConfidence outside valid range
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:569:30
    567|       const result = await learnPatternsTool.handler(input, createMock…
    568| 
    569|       expect(result.isError).toBe(true);
       |                              ^
    570|     });
    571|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[164/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Security - Secret Masking > should mask secrets in search results
TypeError: data.results is not iterable
 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:586:28
    584| 
    585|       // Results should not contain unmasked secrets
    586|       for (const r of data.results) {
       |                            ^
    587|         expect(r.content).not.toMatch(/sk-[a-zA-Z0-9]{48}/); // OpenAI…
    588|         expect(r.content).not.toMatch(/AKIA[0-9A-Z]{16}/); // AWS key …

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[165/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Error Handling > should handle validation errors gracefully
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:601:30
    599|       const result = await semanticSearchTool.handler(input, createMoc…
    600| 
    601|       expect(result.isError).toBe(true);
       |                              ^
    602|       const data = JSON.parse(result.content[0].text!);
    603|       expect(data.error).toBe(true);

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[166/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Error Handling > should include timestamp in error response
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:614:30
    612|       const result = await architectureAnalyzeTool.handler(input, crea…
    613| 
    614|       expect(result.isError).toBe(true);
       |                              ^
    615|       const data = JSON.parse(result.content[0].text!);
    616|       expect(data.timestamp).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[167/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Performance Logging > should log duration on success
AssertionError: expected "spy" to be called with arguments: [ StringContaining "completed", …(1) ]

Received: 



Number of calls: 0

 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:632:31
    630|       await semanticSearchTool.handler(input, { logger: mockLogger });
    631| 
    632|       expect(mockLogger.info).toHaveBeenCalledWith(
       |                               ^
    633|         expect.stringContaining('completed'),
    634|         expect.objectContaining({ durationMs: expect.any(String) })

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[168/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/mcp-tools.test.ts > Code Intelligence MCP Tools > Performance Logging > should include analysis time in results
AssertionError: expected undefined not to be undefined
 ❯ v3/plugins/code-intelligence/tests/mcp-tools.test.ts:647:33
    645|       expect(result.isError).toBeUndefined();
    646|       const data = JSON.parse(result.content[0].text!);
    647|       expect(data.analysisTime).toBeDefined();
       |                                 ^
    648|       expect(typeof data.analysisTime).toBe('number');
    649|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[169/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/types.test.ts > Code Intelligence Types > Secret Patterns > should detect API keys in quotes
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/plugins/code-intelligence/tests/types.test.ts:508:34
    506|       const code = 'const apiKey = "sk_live_abc123xyz"';
    507|       const pattern = SECRET_PATTERNS[0];
    508|       expect(pattern.test(code)).toBe(true);
       |                                  ^
    509|     });
    510|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[170/422]⎯

 FAIL  v3/plugins/code-intelligence/tests/types.test.ts > Code Intelligence Types > maskSecrets > should mask GitHub tokens
AssertionError: expected 'const token = "ghp_abcdefghijklmnopqr…' to contain '[REDACTED]'

- Expected
+ Received

- [REDACTED]
+ const token = "ghp_abcdefghijklmnopqrstuvwxyz123456"

 ❯ v3/plugins/code-intelligence/tests/types.test.ts:522:22
    520|       const code = 'const token = "ghp_abcdefghijklmnopqrstuvwxyz12345…
    521|       const masked = maskSecrets(code);
    522|       expect(masked).toContain('[REDACTED]');
       |                      ^
    523|     });
    524| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[171/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/portfolio-risk > should handle valid input
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:150:38
    148| 
    149|       expect(result.isError).toBeUndefined();
    150|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    151|       expect(data.metrics).toBeDefined();
    152|       expect(data.metrics.var).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[172/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/portfolio-risk > should calculate concentration risk
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:169:38
    167| 
    168|       expect(result.isError).toBeUndefined();
    169|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    170|       expect(data.concentrationRisk.topHoldings).toBeDefined();
    171|       expect(data.concentrationRisk.sectorExposure).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[173/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/portfolio-risk > should reject unauthorized access
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:185:30
    183|       const result = await portfolioRiskTool.handler(input, context);
    184| 
    185|       expect(result.isError).toBe(true);
       |                              ^
    186|       expect(result.content[0].text).toContain('UNAUTHORIZED');
    187|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[174/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/portfolio-risk > should reject empty holdings
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:210:30
    208|       const result = await portfolioRiskTool.handler(input, createMock…
    209| 
    210|       expect(result.isError).toBe(true);
       |                              ^
    211|     });
    212| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[175/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/portfolio-risk > should reject invalid symbol format
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:220:30
    218|       const result = await portfolioRiskTool.handler(input, createMock…
    219| 
    220|       expect(result.isError).toBe(true);
       |                              ^
    221|     });
    222| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[176/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/portfolio-risk > should log audit entries
AssertionError: expected "spy" to be called with arguments: [ ObjectContaining{…} ]

Received: 



Number of calls: 0

 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:233:31
    231|       await portfolioRiskTool.handler(input, context);
    232| 
    233|       expect(auditLogger.log).toHaveBeenCalledWith(
       |                               ^
    234|         expect.objectContaining({
    235|           toolName: 'portfolio-risk',

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[177/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/anomaly-detect > should handle valid input
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:265:38
    263| 
    264|       expect(result.isError).toBeUndefined();
    265|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    266|       expect(data.anomalies).toBeDefined();
    267|       expect(data.riskScore).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[178/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/anomaly-detect > should reject unauthorized access
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:304:30
    302|       const result = await anomalyDetectTool.handler(input, context);
    303| 
    304|       expect(result.isError).toBe(true);
       |                              ^
    305|     });
    306| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[179/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/anomaly-detect > should reject invalid transaction UUID
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:316:30
    314|       const result = await anomalyDetectTool.handler(input, createMock…
    315| 
    316|       expect(result.isError).toBe(true);
       |                              ^
    317|     });
    318| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[180/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/anomaly-detect > should reject invalid timestamp
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:328:30
    326|       const result = await anomalyDetectTool.handler(input, createMock…
    327| 
    328|       expect(result.isError).toBe(true);
       |                              ^
    329|     });
    330| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[181/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/anomaly-detect > should reject empty transactions
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:338:30
    336|       const result = await anomalyDetectTool.handler(input, createMock…
    337| 
    338|       expect(result.isError).toBe(true);
       |                              ^
    339|     });
    340|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[182/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/market-regime > should handle valid input
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:361:38
    359| 
    360|       expect(result.isError).toBeUndefined();
    361|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    362|       expect(data.currentRegime).toBeDefined();
    363|       expect(data.currentRegime.regime).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[183/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/market-regime > should include regime characteristics
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:379:38
    377|       const result = await marketRegimeTool.handler(input, createMockC…
    378| 
    379|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    380|       expect(data.currentRegime.characteristics).toBeDefined();
    381|       expect(Array.isArray(data.currentRegime.characteristics)).toBe(t…

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[184/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/market-regime > should reject missing market data
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:405:30
    403|       const result = await marketRegimeTool.handler(input, createMockC…
    404| 
    405|       expect(result.isError).toBe(true);
       |                              ^
    406|     });
    407| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[185/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/market-regime > should reject insufficient price data
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:418:30
    416|       const result = await marketRegimeTool.handler(input, createMockC…
    417| 
    418|       expect(result.isError).toBe(true);
       |                              ^
    419|     });
    420|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[186/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/compliance-check > should handle valid input
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:440:38
    438| 
    439|       expect(result.isError).toBeUndefined();
    440|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    441|       expect(data.entity).toBe('ACME Bank');
    442|       expect(data.compliant).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[187/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/compliance-check > should check Basel III compliance
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:457:38
    455| 
    456|       expect(result.isError).toBeUndefined();
    457|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    458|       expect(data.capitalAdequacy).toBeDefined();
    459|       expect(data.capitalAdequacy.cet1Ratio).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[188/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/compliance-check > should handle as-of date
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:487:38
    485| 
    486|       expect(result.isError).toBeUndefined();
    487|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    488|       expect(data.asOfDate).toBe('2024-01-15');
    489|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[189/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/compliance-check > should reject missing entity
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:498:30
    496|       const result = await complianceCheckTool.handler(input, createMo…
    497| 
    498|       expect(result.isError).toBe(true);
       |                              ^
    499|     });
    500| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[190/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/compliance-check > should reject empty regulations
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:509:30
    507|       const result = await complianceCheckTool.handler(input, createMo…
    508| 
    509|       expect(result.isError).toBe(true);
       |                              ^
    510|     });
    511|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[191/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/stress-test > should handle valid input
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:542:38
    540| 
    541|       expect(result.isError).toBeUndefined();
    542|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    543|       expect(data.scenarios).toBeDefined();
    544|       expect(data.aggregateImpact).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[192/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/stress-test > should handle multiple scenarios
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:564:38
    562| 
    563|       expect(result.isError).toBeUndefined();
    564|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    565|       expect(data.scenarios).toHaveLength(3);
    566|       expect(data.aggregateImpact.worstCase).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[193/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/stress-test > should identify VaR breaches
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:581:38
    579|       const result = await stressTestTool.handler(input, createMockCon…
    580| 
    581|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    582|       // VaR breach depends on shock magnitude
    583|       expect(data.scenarios[0].riskMetrics.varBreach).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[194/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/stress-test > should reject unauthorized access
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:598:30
    596|       const result = await stressTestTool.handler(input, context);
    597| 
    598|       expect(result.isError).toBe(true);
       |                              ^
    599|     });
    600| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[195/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/stress-test > should reject empty scenarios
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:609:30
    607|       const result = await stressTestTool.handler(input, createMockCon…
    608| 
    609|       expect(result.isError).toBe(true);
       |                              ^
    610|     });
    611| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[196/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > finance/stress-test > should reject empty portfolio holdings
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:620:30
    618|       const result = await stressTestTool.handler(input, createMockCon…
    619| 
    620|       expect(result.isError).toBe(true);
       |                              ^
    621|     });
    622|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[197/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > Audit Logging > should log audit entries with required fields
AssertionError: expected "spy" to be called with arguments: [ ObjectContaining{…} ]

Received: 



Number of calls: 0

 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:674:31
    672|       await portfolioRiskTool.handler(input, context);
    673| 
    674|       expect(auditLogger.log).toHaveBeenCalledWith(
       |                               ^
    675|         expect.objectContaining({
    676|           timestamp: expect.any(String),

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[198/422]⎯

 FAIL  v3/plugins/financial-risk/tests/mcp-tools.test.ts > Financial Risk MCP Tools > Error Handling > should include error details in response
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/financial-risk/tests/mcp-tools.test.ts:706:30
    704|       const result = await portfolioRiskTool.handler(input, createMock…
    705| 
    706|       expect(result.isError).toBe(true);
       |                              ^
    707|       const data = JSON.parse(result.content[0].text!);
    708|       expect(data.error).toBe(true);

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[199/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/patient-similarity > should handle valid input
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:146:38
    144| 
    145|       expect(result.isError).toBeUndefined();
    146|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    147|       expect(data.similarPatients).toBeDefined();
    148|       expect(data.searchTime).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[200/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/patient-similarity > should reject unauthorized access
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:176:30
    174|       const result = await patientSimilarityTool.handler(input, contex…
    175| 
    176|       expect(result.isError).toBe(true);
       |                              ^
    177|       expect(result.content[0].text).toContain('UNAUTHORIZED');
    178|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[201/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/patient-similarity > should reject invalid ICD-10 codes
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:189:30
    187|       const result = await patientSimilarityTool.handler(input, create…
    188| 
    189|       expect(result.isError).toBe(true);
       |                              ^
    190|     });
    191| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[202/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/patient-similarity > should log audit entries
AssertionError: expected "spy" to be called with arguments: [ ObjectContaining{…} ]

Received: 



Number of calls: 0

 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:202:31
    200|       await patientSimilarityTool.handler(input, context);
    201| 
    202|       expect(auditLogger.log).toHaveBeenCalledWith(
       |                               ^
    203|         expect.objectContaining({
    204|           toolName: 'patient-similarity',

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[203/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/drug-interactions > should handle valid input
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:229:38
    227| 
    228|       expect(result.isError).toBeUndefined();
    229|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    230|       expect(data.drugDrugInteractions).toBeDefined();
    231|       expect(data.riskScore).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[204/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/drug-interactions > should handle conditions
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:244:38
    242| 
    243|       expect(result.isError).toBeUndefined();
    244|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    245|       expect(data.drugConditionInteractions).toBeDefined();
    246|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[205/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/drug-interactions > should reject empty medications list
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:266:30
    264|       const result = await drugInteractionsTool.handler(input, createM…
    265| 
    266|       expect(result.isError).toBe(true);
       |                              ^
    267|     });
    268| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[206/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/drug-interactions > should reject unauthorized access
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:280:30
    278|       const result = await drugInteractionsTool.handler(input, context…
    279| 
    280|       expect(result.isError).toBe(true);
       |                              ^
    281|     });
    282|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[207/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/clinical-pathways > should handle valid input
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:300:38
    298| 
    299|       expect(result.isError).toBeUndefined();
    300|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    301|       expect(data.recommendedPathways).toBeDefined();
    302|       expect(data.confidence).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[208/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/clinical-pathways > should handle constraints
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:316:38
    314| 
    315|       expect(result.isError).toBeUndefined();
    316|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    317|       expect(data.contraindicated).toBeDefined();
    318|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[209/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/clinical-pathways > should reject missing diagnosis
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:341:30
    339|       const result = await clinicalPathwaysTool.handler(input, createM…
    340| 
    341|       expect(result.isError).toBe(true);
       |                              ^
    342|     });
    343|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[210/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/literature-search > should handle valid input
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:362:38
    360| 
    361|       expect(result.isError).toBeUndefined();
    362|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    363|       expect(data.articles).toBeDefined();
    364|       expect(data.totalResults).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[211/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/literature-search > should handle source filters
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:377:38
    375| 
    376|       expect(result.isError).toBeUndefined();
    377|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    378|       expect(data.sources).toEqual(['pubmed', 'cochrane']);
    379|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[212/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/literature-search > should handle evidence level filter
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:390:38
    388| 
    389|       expect(result.isError).toBeUndefined();
    390|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    391|       expect(data.filters.evidenceLevel).toBe('systematic-review');
    392|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[213/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/literature-search > should reject missing query
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:415:30
    413|       const result = await literatureSearchTool.handler(input, createM…
    414| 
    415|       expect(result.isError).toBe(true);
       |                              ^
    416|     });
    417| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[214/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/literature-search > should reject query exceeding max length
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:425:30
    423|       const result = await literatureSearchTool.handler(input, createM…
    424| 
    425|       expect(result.isError).toBe(true);
       |                              ^
    426|     });
    427|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[215/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/ontology-navigate > should handle valid input
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:449:38
    447| 
    448|       expect(result.isError).toBeUndefined();
    449|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    450|       expect(data.sourceCode).toBe('E11');
    451|       expect(data.sourceNode).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[216/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/ontology-navigate > should use default depth
TypeError: Cannot read properties of undefined (reading '0')
 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:494:38
    492| 
    493|       expect(result.isError).toBeUndefined();
    494|       const data = JSON.parse(result.content[0].text!);
       |                                      ^
    495|       expect(data.depth).toBe(2); // default
    496|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[217/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/ontology-navigate > should reject missing code
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:505:30
    503|       const result = await ontologyNavigateTool.handler(input, createM…
    504| 
    505|       expect(result.isError).toBe(true);
       |                              ^
    506|     });
    507| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[218/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/ontology-navigate > should reject missing ontology
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:515:30
    513|       const result = await ontologyNavigateTool.handler(input, createM…
    514| 
    515|       expect(result.isError).toBe(true);
       |                              ^
    516|     });
    517| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[219/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > healthcare/ontology-navigate > should reject invalid depth
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:527:30
    525|       const result = await ontologyNavigateTool.handler(input, createM…
    526| 
    527|       expect(result.isError).toBe(true);
       |                              ^
    528|     });
    529|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[220/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > Audit Logging > should log successful operations
AssertionError: expected "spy" to be called with arguments: [ ObjectContaining{…} ]

Received: 



Number of calls: 0

 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:593:31
    591|       );
    592| 
    593|       expect(auditLogger.log).toHaveBeenCalledWith(
       |                               ^
    594|         expect.objectContaining({
    595|           toolName: 'literature-search',

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[221/422]⎯

 FAIL  v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts > Healthcare Clinical MCP Tools > Error Handling > should include timestamp in error responses
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/healthcare-clinical/tests/mcp-tools.test.ts:638:30
    636|       const result = await drugInteractionsTool.handler(input, createM…
    637| 
    638|       expect(result.isError).toBe(true);
       |                              ^
    639|       const data = JSON.parse(result.content[0].text!);
    640|       expect(data.timestamp).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[222/422]⎯

 FAIL  v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts > hyperbolic_embed_hierarchy handler > should handle klein model
AssertionError: expected true to be undefined
 ❯ v3/plugins/hyperbolic-reasoning/tests/mcp-tools.test.ts:129:28
    127| 
    128|     const result = await tool.handler(input);
    129|     expect(result.isError).toBeUndefined();
       |                            ^
    130|   });
    131| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[223/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Tool Registry > should have version 1.0.0
AssertionError: expected '3.0.0-alpha.1' to be '1.0.0' // Object.is equality

- Expected
+ Received

- 1.0.0
+ 3.0.0-alpha.1

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:143:30
    141|     it('should have version 1.0.0', () => {
    142|       for (const tool of legalContractsTools) {
    143|         expect(tool.version).toBe('1.0.0');
       |                              ^
    144|       }
    145|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[224/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Tool Registry > should get tool by name
TypeError: getTool is not a function
 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:148:20
    146| 
    147|     it('should get tool by name', () => {
    148|       const tool = getTool('legal/clause-extract');
       |                    ^
    149|       expect(tool).toBeDefined();
    150|       expect(tool?.name).toBe('legal/clause-extract');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[225/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Tool Registry > should return undefined for unknown tool
TypeError: getTool is not a function
 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:154:20
    152| 
    153|     it('should return undefined for unknown tool', () => {
    154|       const tool = getTool('legal/unknown');
       |                    ^
    155|       expect(tool).toBeUndefined();
    156|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[226/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Tool Registry > should get all tool names
TypeError: getToolNames is not a function
 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:159:21
    157| 
    158|     it('should get all tool names', () => {
    159|       const names = getToolNames();
       |                     ^
    160|       expect(names).toHaveLength(5);
    161|       expect(names).toContain('legal/clause-extract');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[227/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/clause-extract > should have correct tool definition
AssertionError: expected [ undefined ] to include 'document'
 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:168:54
    166|     it('should have correct tool definition', () => {
    167|       expect(clauseExtractTool.name).toBe('legal/clause-extract');
    168|       expect(clauseExtractTool.inputSchema.required).toContain('docume…
       |                                                      ^
    169|       expect(clauseExtractTool.cacheable).toBe(true);
    170|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[228/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/clause-extract > should handle valid input
AssertionError: expected undefined not to be undefined
 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:184:35
    182|       const data = JSON.parse(result.content[0].text!);
    183|       expect(data.clauses).toBeDefined();
    184|       expect(data.extractionTime).toBeDefined();
       |                                   ^
    185|     });
    186| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[229/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/clause-extract > should use default options
AssertionError: expected undefined to be 'US' // Object.is equality

- Expected: 
"US"

+ Received: 
undefined

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:196:33
    194|       expect(result.isError).toBeUndefined();
    195|       const data = JSON.parse(result.content[0].text!);
    196|       expect(data.jurisdiction).toBe('US'); // default
       |                                 ^
    197|     });
    198| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[230/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/clause-extract > should reject unauthorized access
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:224:30
    222|       const result = await clauseExtractTool.handler(input, context);
    223| 
    224|       expect(result.isError).toBe(true);
       |                              ^
    225|     });
    226| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[231/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/clause-extract > should reject document exceeding size limit
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:234:30
    232|       const result = await clauseExtractTool.handler(input, createMock…
    233| 
    234|       expect(result.isError).toBe(true);
       |                              ^
    235|     });
    236|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[232/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/risk-assess > should have correct tool definition
AssertionError: expected [ undefined ] to include 'document'
 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:241:51
    239|     it('should have correct tool definition', () => {
    240|       expect(riskAssessTool.name).toBe('legal/risk-assess');
    241|       expect(riskAssessTool.inputSchema.required).toContain('document'…
       |                                                   ^
    242|       expect(riskAssessTool.inputSchema.required).toContain('partyRole…
    243|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[233/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/risk-assess > should handle valid input
AssertionError: expected undefined not to be undefined
 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:257:37
    255|       const data = JSON.parse(result.content[0].text!);
    256|       expect(data.risks).toBeDefined();
    257|       expect(data.overallRiskScore).toBeDefined();
       |                                     ^
    258|       expect(data.recommendations).toBeDefined();
    259|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[234/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/risk-assess > should reject missing partyRole
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:281:30
    279|       const result = await riskAssessTool.handler(input, createMockCon…
    280| 
    281|       expect(result.isError).toBe(true);
       |                              ^
    282|     });
    283| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[235/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/risk-assess > should reject invalid partyRole
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:292:30
    290|       const result = await riskAssessTool.handler(input, createMockCon…
    291| 
    292|       expect(result.isError).toBe(true);
       |                              ^
    293|     });
    294| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[236/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/contract-compare > should have correct tool definition
AssertionError: expected [ undefined ] to include 'baseDocument'
 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:313:56
    311|     it('should have correct tool definition', () => {
    312|       expect(contractCompareTool.name).toBe('legal/contract-compare');
    313|       expect(contractCompareTool.inputSchema.required).toContain('base…
       |                                                        ^
    314|       expect(contractCompareTool.inputSchema.required).toContain('comp…
    315|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[237/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/contract-compare > should handle valid input
AssertionError: expected undefined not to be undefined
 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:328:31
    326|       expect(result.isError).toBeUndefined();
    327|       const data = JSON.parse(result.content[0].text!);
    328|       expect(data.similarity).toBeDefined();
       |                               ^
    329|       expect(data.differences).toBeDefined();
    330|       expect(data.comparisonTime).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[238/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/contract-compare > should use default comparison mode
AssertionError: expected undefined to be 'full' // Object.is equality

- Expected: 
"full"

+ Received: 
undefined

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:343:25
    341|       expect(result.isError).toBeUndefined();
    342|       const data = JSON.parse(result.content[0].text!);
    343|       expect(data.mode).toBe('full'); // default
       |                         ^
    344|     });
    345| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[239/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/contract-compare > should reject missing base document
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:380:30
    378|       const result = await contractCompareTool.handler(input, createMo…
    379| 
    380|       expect(result.isError).toBe(true);
       |                              ^
    381|     });
    382| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[240/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/contract-compare > should reject documents exceeding size limit
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:391:30
    389|       const result = await contractCompareTool.handler(input, createMo…
    390| 
    391|       expect(result.isError).toBe(true);
       |                              ^
    392|     });
    393|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[241/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/obligation-track > should have correct tool definition
AssertionError: expected [ undefined ] to include 'document'
 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:398:56
    396|     it('should have correct tool definition', () => {
    397|       expect(obligationTrackTool.name).toBe('legal/obligation-track');
    398|       expect(obligationTrackTool.inputSchema.required).toContain('docu…
       |                                                        ^
    399|     });
    400| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[242/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/obligation-track > should handle valid input
AssertionError: expected undefined not to be undefined
 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:412:32
    410|       expect(result.isError).toBeUndefined();
    411|       const data = JSON.parse(result.content[0].text!);
    412|       expect(data.obligations).toBeDefined();
       |                                ^
    413|       expect(data.timeline).toBeDefined();
    414|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[243/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/obligation-track > should reject missing document
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:460:30
    458|       const result = await obligationTrackTool.handler(input, createMo…
    459| 
    460|       expect(result.isError).toBe(true);
       |                              ^
    461|     });
    462|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[244/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/playbook-match > should have correct tool definition
AssertionError: expected [ undefined ] to include 'document'
 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:467:54
    465|     it('should have correct tool definition', () => {
    466|       expect(playbookMatchTool.name).toBe('legal/playbook-match');
    467|       expect(playbookMatchTool.inputSchema.required).toContain('docume…
       |                                                      ^
    468|       expect(playbookMatchTool.inputSchema.required).toContain('playbo…
    469|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[245/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/playbook-match > should handle valid input
AssertionError: expected undefined not to be undefined
 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:482:31
    480|       expect(result.isError).toBeUndefined();
    481|       const data = JSON.parse(result.content[0].text!);
    482|       expect(data.matchScore).toBeDefined();
       |                               ^
    483|       expect(data.deviations).toBeDefined();
    484|       expect(data.recommendations).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[246/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/playbook-match > should use default strictness
AssertionError: expected undefined to be 'moderate' // Object.is equality

- Expected: 
"moderate"

+ Received: 
undefined

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:497:31
    495|       expect(result.isError).toBeUndefined();
    496|       const data = JSON.parse(result.content[0].text!);
    497|       expect(data.strictness).toBe('moderate'); // default
       |                               ^
    498|     });
    499| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[247/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/playbook-match > should reject unauthorized access (playbook-match is partner only)
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:539:30
    537|       const result = await playbookMatchTool.handler(input, context);
    538| 
    539|       expect(result.isError).toBe(true);
       |                              ^
    540|     });
    541| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[248/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > legal/playbook-match > should reject playbook exceeding size limit
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:550:30
    548|       const result = await playbookMatchTool.handler(input, createMock…
    549| 
    550|       expect(result.isError).toBe(true);
       |                              ^
    551|     });
    552|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[249/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Authorization & Role Permissions > should restrict paralegal access
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:589:26
    587|       // Paralegal cannot access risk-assess
    588|       const r3 = await riskAssessTool.handler({ document: 'Contract...…
    589|       expect(r3.isError).toBe(true);
       |                          ^
    590|     });
    591| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[250/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Authorization & Role Permissions > should deny client access to all tools
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:598:26
    596| 
    597|       const r1 = await clauseExtractTool.handler({ document: 'Contract…
    598|       expect(r1.isError).toBe(true);
       |                          ^
    599|     });
    600| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[251/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Matter Isolation > should include matter context in audit logs
AssertionError: expected "spy" to be called with arguments: [ ObjectContaining{…} ]

Received: 



Number of calls: 0

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:621:31
    619|       await clauseExtractTool.handler({ document: 'Contract...' }, con…
    620| 
    621|       expect(auditLogger.log).toHaveBeenCalledWith(
       |                               ^
    622|         expect.objectContaining({
    623|           matterId: 'matter-001',

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[252/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Audit Logging > should log successful operations
AssertionError: expected "spy" to be called with arguments: [ ObjectContaining{…} ]

Received: 



Number of calls: 0

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:636:31
    634|       await clauseExtractTool.handler({ document: 'Contract...' }, con…
    635| 
    636|       expect(auditLogger.log).toHaveBeenCalledWith(
       |                               ^
    637|         expect.objectContaining({
    638|           toolName: 'clause-extract',

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[253/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Audit Logging > should include document hash in audit
AssertionError: expected "spy" to be called with arguments: [ ObjectContaining{…} ]

Received: 



Number of calls: 0

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:651:31
    649|       await clauseExtractTool.handler({ document: 'Contract...' }, con…
    650| 
    651|       expect(auditLogger.log).toHaveBeenCalledWith(
       |                               ^
    652|         expect.objectContaining({
    653|           documentHash: expect.any(String),

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[254/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Error Handling > should handle validation errors gracefully
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:667:30
    665|       const result = await clauseExtractTool.handler(input, createMock…
    666| 
    667|       expect(result.isError).toBe(true);
       |                              ^
    668|       const data = JSON.parse(result.content[0].text!);
    669|       expect(data.error).toBe(true);

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[255/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Error Handling > should include error code in response
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:679:30
    677|       const result = await clauseExtractTool.handler({ document: 'Cont…
    678| 
    679|       expect(result.isError).toBe(true);
       |                              ^
    680|       const data = JSON.parse(result.content[0].text!);
    681|       expect(data.code).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[256/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/mcp-tools.test.ts > Legal Contracts MCP Tools > Performance > should include analysis time in results
AssertionError: expected undefined not to be undefined
 ❯ v3/plugins/legal-contracts/tests/mcp-tools.test.ts:695:35
    693|       expect(result.isError).toBeUndefined();
    694|       const data = JSON.parse(result.content[0].text!);
    695|       expect(data.extractionTime).toBeDefined();
       |                                   ^
    696|       expect(typeof data.extractionTime).toBe('number');
    697|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[257/422]⎯

 FAIL  v3/plugins/legal-contracts/tests/types.test.ts > Legal Contracts Types > PlaybookMatchInputSchema > should validate with priority clauses
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/plugins/legal-contracts/tests/types.test.ts:382:30
    380| 
    381|       const result = PlaybookMatchInputSchema.safeParse(input);
    382|       expect(result.success).toBe(true);
       |                              ^
    383|     });
    384| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[258/422]⎯

 FAIL  v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_annealing_solve handler > should handle valid QUBO input
AssertionError: expected { solution: { …(5) }, …(3) } to have property "details"
 ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts:83:20
     81|     const parsed = JSON.parse(result.content[0].text!);
     82|     expect(parsed).toHaveProperty('solution');
     83|     expect(parsed).toHaveProperty('details');
       |                    ^
     84|   });
     85| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[259/422]⎯

 FAIL  v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_qaoa_optimize handler > should handle valid QAOA input
AssertionError: expected { solution: { …(4) }, …(3) } to have property "details"
 ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts:159:20
    157|     const parsed = JSON.parse(result.content[0].text!);
    158|     expect(parsed).toHaveProperty('solution');
    159|     expect(parsed).toHaveProperty('details');
       |                    ^
    160|   });
    161| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[260/422]⎯

 FAIL  v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_qaoa_optimize handler > should return approximation ratio
TypeError: Cannot convert undefined or null to object
 ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts:213:28
    211|     const parsed = JSON.parse(result.content[0].text!);
    212| 
    213|     expect(parsed.details).toHaveProperty('approximationRatio');
       |                            ^
    214|     expect(parsed.details.approximationRatio).toBeGreaterThan(0);
    215|     expect(parsed.details.approximationRatio).toBeLessThanOrEqual(1);

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[261/422]⎯

 FAIL  v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_grover_search handler > should handle valid search input
AssertionError: expected { solutions: [ …(10) ], …(4) } to have property "details"
 ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts:238:20
    236|     const parsed = JSON.parse(result.content[0].text!);
    237|     expect(parsed).toHaveProperty('solutions');
    238|     expect(parsed).toHaveProperty('details');
       |                    ^
    239|   });
    240| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[262/422]⎯

 FAIL  v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_grover_search handler > should return query count
TypeError: Cannot convert undefined or null to object
 ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts:288:28
    286|     const parsed = JSON.parse(result.content[0].text!);
    287| 
    288|     expect(parsed.details).toHaveProperty('queries');
       |                            ^
    289|     expect(parsed.details.queries).toBeGreaterThan(0);
    290|     // Grover provides quadratic speedup

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[263/422]⎯

 FAIL  v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_dependency_resolve handler > should handle valid dependency input
AssertionError: expected { resolved: { …(3) }, …(4) } to have property "details"
 ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts:318:20
    316|     const parsed = JSON.parse(result.content[0].text!);
    317|     expect(parsed).toHaveProperty('resolved');
    318|     expect(parsed).toHaveProperty('details');
       |                    ^
    319|   });
    320| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[264/422]⎯

 FAIL  v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_dependency_resolve handler > should return resolution order
TypeError: Cannot convert undefined or null to object
 ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts:361:28
    359|     const parsed = JSON.parse(result.content[0].text!);
    360| 
    361|     expect(parsed.details).toHaveProperty('installationOrder');
       |                            ^
    362|     expect(Array.isArray(parsed.details.installationOrder)).toBe(true);
    363|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[265/422]⎯

 FAIL  v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_schedule_optimize handler > should handle valid schedule input
AssertionError: expected { schedule: [ { …(4) }, …(2) ], …(5) } to have property "details"
 ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts:398:20
    396|     const parsed = JSON.parse(result.content[0].text!);
    397|     expect(parsed).toHaveProperty('schedule');
    398|     expect(parsed).toHaveProperty('details');
       |                    ^
    399|   });
    400| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[266/422]⎯

 FAIL  v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_schedule_optimize handler > should compute schedule metrics
TypeError: Cannot convert undefined or null to object
 ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts:429:28
    427|     const parsed = JSON.parse(result.content[0].text!);
    428| 
    429|     expect(parsed.details).toHaveProperty('makespan');
       |                            ^
    430|     expect(parsed.details).toHaveProperty('cost');
    431|     expect(parsed.details).toHaveProperty('utilization');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[267/422]⎯

 FAIL  v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts > quantum_schedule_optimize handler > should identify critical path
TypeError: Cannot convert undefined or null to object
 ❯ v3/plugins/quantum-optimizer/tests/mcp-tools.test.ts:447:28
    445|     const parsed = JSON.parse(result.content[0].text!);
    446| 
    447|     expect(parsed.details).toHaveProperty('criticalPath');
       |                            ^
    448|     expect(Array.isArray(parsed.details.criticalPath)).toBe(true);
    449|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[268/422]⎯

 FAIL  v3/@claude-flow/embeddings/src/__tests__/embedding-service.test.ts > Similarity Functions > computeSimilarity > should support euclidean metric
AssertionError: expected 0.4142135623730951 to be close to 1.4142135623730951, received difference is 1, but expected 0.005
 ❯ v3/@claude-flow/embeddings/src/__tests__/embedding-service.test.ts:117:28
    115|       const result = computeSimilarity(vec1, vec3, 'euclidean');
    116|       expect(result.metric).toBe('euclidean');
    117|       expect(result.score).toBeCloseTo(Math.sqrt(2));
       |                            ^
    118|     });
    119| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[269/422]⎯

 FAIL  v3/@claude-flow/integration/src/__tests__/token-optimizer.test.ts > TokenOptimizer > initialization > should detect agentic-flow availability
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ v3/@claude-flow/integration/src/__tests__/token-optimizer.test.ts:29:42
     27|       const stats = optimizer.getStats();
     28|       // agentic-flow is installed in v3/node_modules
     29|       expect(stats.agenticFlowAvailable).toBe(true);
       |                                          ^
     30|     });
     31|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[270/422]⎯

 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Plugin Integration Types > should export all plugin types
 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Plugin Integration Types > should export all class instances
 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Plugin Metadata > reasoningBankPlugin should have correct metadata
 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Plugin Metadata > semanticCodeSearchPlugin should have correct metadata
 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Plugin Metadata > sonaLearningPlugin should have correct metadata
 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Plugin Metadata > intentRouterPlugin should have correct metadata
 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Plugin Metadata > mcpToolOptimizerPlugin should have correct metadata
 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Plugin Metadata > hookPatternLibraryPlugin should have correct metadata
 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > MCP Tool Definitions > reasoningBankPlugin should define expected tools
 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > MCP Tool Definitions > semanticCodeSearchPlugin should define expected tools
 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > MCP Tool Definitions > sonaLearningPlugin should define expected tools
 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > MCP Tool Definitions > intentRouterPlugin should define expected tools
 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > MCP Tool Definitions > mcpToolOptimizerPlugin should define expected tools
 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > MCP Tool Definitions > hookPatternLibraryPlugin should define expected tools
 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Hook Definitions > reasoningBankPlugin should define learning hooks
 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Hook Definitions > intentRouterPlugin should define routing hooks
 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Hook Definitions > mcpToolOptimizerPlugin should define optimization hooks
 FAIL  v3/@claude-flow/plugins/examples/ruvector-plugins/ruvector-plugins.test.ts > Hook Definitions > hookPatternLibraryPlugin should define file operation hooks
Error: Transform failed with 6 errors:
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:57:9: ERROR: Multiple exports with the same name "ReasoningBank"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:58:9: ERROR: Multiple exports with the same name "SemanticCodeSearch"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:59:9: ERROR: Multiple exports with the same name "SONALearning"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:60:9: ERROR: Multiple exports with the same name "IntentRouter"
/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/plugins/examples/ruvector-plugins/index.ts:61:9: ERROR: Multiple exports with the same name "MCPToolOptimizer"
...
 ❯ failureErrorWithLog node_modules/vite/node_modules/esbuild/lib/main.js:1472:15
 ❯ node_modules/vite/node_modules/esbuild/lib/main.js:755:50
 ❯ responseCallbacks.<computed> node_modules/vite/node_modules/esbuild/lib/main.js:622:9
 ❯ handleIncomingPacket node_modules/vite/node_modules/esbuild/lib/main.js:677:12
 ❯ Socket.readFromStdout node_modules/vite/node_modules/esbuild/lib/main.js:600:7
 ❯ Socket.emit node:events:508:20

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[271/422]⎯

 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Appending > should append events to the store
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Appending > should increment version for each event
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Appending > should maintain version per aggregate
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Retrieval > should retrieve events by aggregate ID
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Retrieval > should retrieve events from specific version
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Retrieval > should retrieve events by type
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Filtering > should filter by aggregate types
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Filtering > should filter by event types
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Filtering > should filter by aggregate IDs
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Filtering > should support pagination
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Replay > should replay all events
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Event Replay > should replay from specific version
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Snapshots > should save snapshots
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Snapshots > should return latest snapshot
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > EventStore > Statistics > should provide event store statistics
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > AgentStateProjection > should build agent state from events
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > AgentStateProjection > should track task assignments
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > AgentStateProjection > should track completed tasks
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > AgentStateProjection > should filter agents by status
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > TaskHistoryProjection > should build task history from events
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > TaskHistoryProjection > should calculate average task duration
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > MemoryIndexProjection > should build memory index from events
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > MemoryIndexProjection > should track memory deletions
 FAIL  v3/@claude-flow/shared/src/events/event-store.test.ts > MemoryIndexProjection > should calculate total size by namespace
Error: Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'
 ❯ Object.Module.onAbort v3/node_modules/sql.js/dist/sql-wasm.js:40:20
 ❯ Ta v3/node_modules/sql.js/dist/sql-wasm.js:97:378
 ❯ Wa v3/node_modules/sql.js/dist/sql-wasm.js:98:351
 ❯ v3/node_modules/sql.js/dist/sql-wasm.js:157:356

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[272/422]⎯

 FAIL  v3/@claude-flow/shared/src/hooks/hooks.test.ts > HookExecutor > should execute hooks sequentially with context chaining
AssertionError: expected +0 to be 2 // Object.is equality

- Expected
+ Received

- 2
+ 0

 ❯ v3/@claude-flow/shared/src/hooks/hooks.test.ts:365:34
    363| 
    364|     expect(result.success).toBe(true);
    365|     expect(result.hooksExecuted).toBe(2);
       |                                  ^
    366|   });
    367| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[273/422]⎯

 FAIL  v3/@claude-flow/shared/src/hooks/verify-exports.test.ts > Hooks Module Exports > should create instances from exported factories
Error: Cannot find module './index.js'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/shared/src/hooks/verify-exports.test.ts
 ❯ TracingChannel.traceSync node:diagnostics_channel:328:14
 ❯ v3/@claude-flow/shared/src/hooks/verify-exports.test.ts:50:56
     48| 
     49|   it('should create instances from exported factories', () => {
     50|     const { createHookRegistry, createHookExecutor } = require('./inde…
       |                                                        ^
     51| 
     52|     const registry = createHookRegistry();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'MODULE_NOT_FOUND', requireStack: [ '/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/shared/src/hooks/verify-exports.test.ts' ] }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[274/422]⎯

 FAIL  v3/@claude-flow/shared/src/hooks/verify-exports.test.ts > Hooks Module Exports > should have all 26 hook events defined
Error: Cannot find module './index.js'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/shared/src/hooks/verify-exports.test.ts
 ❯ TracingChannel.traceSync node:diagnostics_channel:328:14
 ❯ v3/@claude-flow/shared/src/hooks/verify-exports.test.ts:63:27
     61| 
     62|   it('should have all 26 hook events defined', () => {
     63|     const { HookEvent } = require('./index.js');
       |                           ^
     64| 
     65|     const expectedEvents = [

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'MODULE_NOT_FOUND', requireStack: [ '/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/shared/src/hooks/verify-exports.test.ts' ] }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[275/422]⎯

 FAIL  v3/@claude-flow/shared/src/hooks/verify-exports.test.ts > Hooks Module Exports > should have all 5 priority levels defined
Error: Cannot find module './index.js'
Require stack:
- /Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/shared/src/hooks/verify-exports.test.ts
 ❯ TracingChannel.traceSync node:diagnostics_channel:328:14
 ❯ v3/@claude-flow/shared/src/hooks/verify-exports.test.ts:102:30
    100| 
    101|   it('should have all 5 priority levels defined', () => {
    102|     const { HookPriority } = require('./index.js');
       |                              ^
    103| 
    104|     expect(HookPriority.Critical).toBe(1000);

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'MODULE_NOT_FOUND', requireStack: [ '/Users/alessiorocchi/Projects/claude-flow/v3/@claude-flow/shared/src/hooks/verify-exports.test.ts' ] }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[276/422]⎯

⎯⎯⎯⎯⎯⎯ Unhandled Errors ⎯⎯⎯⎯⎯⎯

Vitest caught 6 unhandled errors during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

⎯⎯⎯⎯ Unhandled Rejection ⎯⎯⎯⎯⎯
RuntimeError: Aborted(Error: ENOENT: no such file or directory, open 'https://sql.js.org/dist/sql-wasm.wasm'). Build with -sASSERTIONS for more info.
 ❯ Ta v3/node_modules/sql.js/dist/sql-wasm.js:97:419
 ❯ Wa v3/node_modules/sql.js/dist/sql-wasm.js:98:351
 ❯ v3/node_modules/sql.js/dist/sql-wasm.js:157:356

This error originated in "v3/@claude-flow/shared/src/events/event-store.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

⎯⎯⎯⎯⎯⎯ Unhandled Error ⎯⎯⎯⎯⎯⎯⎯
Error: Worker terminated due to reaching memory limit: JS heap out of memory
 ❯ [kOnExit] node:internal/worker:379:26
 ❯ Worker.<computed>.onexit node:internal/worker:295:20

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'ERR_WORKER_OUT_OF_MEMORY' }

⎯⎯⎯⎯⎯⎯ Unhandled Error ⎯⎯⎯⎯⎯⎯⎯
Error: Worker terminated due to reaching memory limit: JS heap out of memory
 ❯ [kOnExit] node:internal/worker:379:26
 ❯ Worker.<computed>.onexit node:internal/worker:295:20

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'ERR_WORKER_OUT_OF_MEMORY' }

⎯⎯⎯⎯⎯⎯ Unhandled Error ⎯⎯⎯⎯⎯⎯⎯
Error: Worker terminated due to reaching memory limit: JS heap out of memory
 ❯ [kOnExit] node:internal/worker:379:26
 ❯ Worker.<computed>.onexit node:internal/worker:295:20

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'ERR_WORKER_OUT_OF_MEMORY' }

⎯⎯⎯⎯⎯⎯ Unhandled Error ⎯⎯⎯⎯⎯⎯⎯
Error: Worker terminated due to reaching memory limit: JS heap out of memory
 ❯ [kOnExit] node:internal/worker:379:26
 ❯ Worker.<computed>.onexit node:internal/worker:295:20

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'ERR_WORKER_OUT_OF_MEMORY' }

⎯⎯⎯⎯⎯⎯ Unhandled Error ⎯⎯⎯⎯⎯⎯⎯
Error: Worker terminated due to reaching memory limit: JS heap out of memory
 ❯ [kOnExit] node:internal/worker:379:26
 ❯ Worker.<computed>.onexit node:internal/worker:295:20

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'ERR_WORKER_OUT_OF_MEMORY' }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 Test Files  157 failed | 131 passed | 1 skipped (294)
      Tests  295 failed | 5540 passed | 32 skipped (5928)
     Errors  6 errors
   Start at  23:45:38
   Duration  124.57s (transform 6.89s, setup 18ms, collect 8.53s, tests 240.90s, environment 25ms, prepare 14.43s)


 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
